function R3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function WR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var GR={exports:{}},dg={},HR={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh=Symbol.for("react.element"),N3=Symbol.for("react.portal"),k3=Symbol.for("react.fragment"),D3=Symbol.for("react.strict_mode"),j3=Symbol.for("react.profiler"),O3=Symbol.for("react.provider"),M3=Symbol.for("react.context"),V3=Symbol.for("react.forward_ref"),L3=Symbol.for("react.suspense"),$3=Symbol.for("react.memo"),F3=Symbol.for("react.lazy"),aS=Symbol.iterator;function U3(t){return t===null||typeof t!="object"?null:(t=aS&&t[aS]||t["@@iterator"],typeof t=="function"?t:null)}var KR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QR=Object.assign,YR={};function Ec(t,e,n){this.props=t,this.context=e,this.refs=YR,this.updater=n||KR}Ec.prototype.isReactComponent={};Ec.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ec.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function XR(){}XR.prototype=Ec.prototype;function u_(t,e,n){this.props=t,this.context=e,this.refs=YR,this.updater=n||KR}var d_=u_.prototype=new XR;d_.constructor=u_;QR(d_,Ec.prototype);d_.isPureReactComponent=!0;var lS=Array.isArray,JR=Object.prototype.hasOwnProperty,h_={current:null},ZR={key:!0,ref:!0,__self:!0,__source:!0};function eN(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)JR.call(e,r)&&!ZR.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:nh,type:t,key:i,ref:o,props:s,_owner:h_.current}}function B3(t,e){return{$$typeof:nh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function f_(t){return typeof t=="object"&&t!==null&&t.$$typeof===nh}function z3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cS=/\/+/g;function pv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?z3(""+t.key):e.toString(36)}function hp(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nh:case N3:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+pv(o,0):r,lS(s)?(n="",t!=null&&(n=t.replace(cS,"$&/")+"/"),hp(s,e,n,"",function(c){return c})):s!=null&&(f_(s)&&(s=B3(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(cS,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",lS(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+pv(i,a);o+=hp(i,e,n,l,s)}else if(l=U3(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+pv(i,a++),o+=hp(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function vf(t,e,n){if(t==null)return t;var r=[],s=0;return hp(t,r,"","",function(i){return e.call(n,i,s++)}),r}function q3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tn={current:null},fp={transition:null},W3={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:fp,ReactCurrentOwner:h_};function tN(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:vf,forEach:function(t,e,n){vf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vf(t,function(){e++}),e},toArray:function(t){return vf(t,function(e){return e})||[]},only:function(t){if(!f_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=Ec;Re.Fragment=k3;Re.Profiler=j3;Re.PureComponent=u_;Re.StrictMode=D3;Re.Suspense=L3;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W3;Re.act=tN;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=QR({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=h_.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)JR.call(e,l)&&!ZR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:nh,type:t.type,key:s,ref:i,props:r,_owner:o}};Re.createContext=function(t){return t={$$typeof:M3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:O3,_context:t},t.Consumer=t};Re.createElement=eN;Re.createFactory=function(t){var e=eN.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:V3,render:t}};Re.isValidElement=f_;Re.lazy=function(t){return{$$typeof:F3,_payload:{_status:-1,_result:t},_init:q3}};Re.memo=function(t,e){return{$$typeof:$3,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=fp.transition;fp.transition={};try{t()}finally{fp.transition=e}};Re.unstable_act=tN;Re.useCallback=function(t,e){return Tn.current.useCallback(t,e)};Re.useContext=function(t){return Tn.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return Tn.current.useDeferredValue(t)};Re.useEffect=function(t,e){return Tn.current.useEffect(t,e)};Re.useId=function(){return Tn.current.useId()};Re.useImperativeHandle=function(t,e,n){return Tn.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return Tn.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return Tn.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return Tn.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return Tn.current.useReducer(t,e,n)};Re.useRef=function(t){return Tn.current.useRef(t)};Re.useState=function(t){return Tn.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return Tn.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return Tn.current.useTransition()};Re.version="18.3.1";HR.exports=Re;var p=HR.exports;const re=WR(p),rh=R3({__proto__:null,default:re},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G3=p,H3=Symbol.for("react.element"),K3=Symbol.for("react.fragment"),Q3=Object.prototype.hasOwnProperty,Y3=G3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X3={key:!0,ref:!0,__self:!0,__source:!0};function nN(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Q3.call(e,r)&&!X3.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:H3,type:t,key:i,ref:o,props:s,_owner:Y3.current}}dg.Fragment=K3;dg.jsx=nN;dg.jsxs=nN;GR.exports=dg;var u=GR.exports,G0={},rN={exports:{}},er={},sN={exports:{}},iN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,F){var V=M.length;M.push(F);e:for(;0<V;){var q=V-1>>>1,X=M[q];if(0<s(X,F))M[q]=F,M[V]=X,V=q;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var F=M[0],V=M.pop();if(V!==F){M[0]=V;e:for(var q=0,X=M.length,K=X>>>1;q<K;){var fe=2*(q+1)-1,we=M[fe],ge=fe+1,ne=M[ge];if(0>s(we,V))ge<X&&0>s(ne,we)?(M[q]=ne,M[ge]=V,q=ge):(M[q]=we,M[fe]=V,q=fe);else if(ge<X&&0>s(ne,V))M[q]=ne,M[ge]=V,q=ge;else break e}}return F}function s(M,F){var V=M.sortIndex-F.sortIndex;return V!==0?V:M.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,m=3,g=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(M){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=M)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function S(M){if(y=!1,b(M),!v)if(n(l)!==null)v=!0,G(A);else{var F=n(c);F!==null&&H(S,F.startTime-M)}}function A(M,F){v=!1,y&&(y=!1,_(I),I=-1),g=!0;var V=m;try{for(b(F),h=n(l);h!==null&&(!(h.expirationTime>F)||M&&!j());){var q=h.callback;if(typeof q=="function"){h.callback=null,m=h.priorityLevel;var X=q(h.expirationTime<=F);F=t.unstable_now(),typeof X=="function"?h.callback=X:h===n(l)&&r(l),b(F)}else r(l);h=n(l)}if(h!==null)var K=!0;else{var fe=n(c);fe!==null&&H(S,fe.startTime-F),K=!1}return K}finally{h=null,m=V,g=!1}}var D=!1,C=null,I=-1,P=5,R=-1;function j(){return!(t.unstable_now()-R<P)}function O(){if(C!==null){var M=t.unstable_now();R=M;var F=!0;try{F=C(!0,M)}finally{F?k():(D=!1,C=null)}}else D=!1}var k;if(typeof x=="function")k=function(){x(O)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,z=W.port2;W.port1.onmessage=O,k=function(){z.postMessage(null)}}else k=function(){w(O,0)};function G(M){C=M,D||(D=!0,k())}function H(M,F){I=w(function(){M(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,G(A))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var V=m;m=F;try{return M()}finally{m=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,F){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var V=m;m=M;try{return F()}finally{m=V}},t.unstable_scheduleCallback=function(M,F,V){var q=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?q+V:q):V=q,M){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=V+X,M={id:d++,callback:F,priorityLevel:M,startTime:V,expirationTime:X,sortIndex:-1},V>q?(M.sortIndex=V,e(c,M),n(l)===null&&M===n(c)&&(y?(_(I),I=-1):y=!0,H(S,V-q))):(M.sortIndex=X,e(l,M),v||g||(v=!0,G(A))),M},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(M){var F=m;return function(){var V=m;m=F;try{return M.apply(this,arguments)}finally{m=V}}}})(iN);sN.exports=iN;var J3=sN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z3=p,Xn=J3;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oN=new Set,od={};function xa(t,e){ql(t,e),ql(t+"Capture",e)}function ql(t,e){for(od[t]=e,t=0;t<e.length;t++)oN.add(e[t])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),H0=Object.prototype.hasOwnProperty,eU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uS={},dS={};function tU(t){return H0.call(dS,t)?!0:H0.call(uS,t)?!1:eU.test(t)?dS[t]=!0:(uS[t]=!0,!1)}function nU(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rU(t,e,n,r){if(e===null||typeof e>"u"||nU(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Sn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jt[t]=new Sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jt[e]=new Sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jt[t]=new Sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jt[t]=new Sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jt[t]=new Sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jt[t]=new Sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jt[t]=new Sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jt[t]=new Sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jt[t]=new Sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var p_=/[\-:]([a-z])/g;function m_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(p_,m_);Jt[e]=new Sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(p_,m_);Jt[e]=new Sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(p_,m_);Jt[e]=new Sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jt[t]=new Sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Jt.xlinkHref=new Sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jt[t]=new Sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function g_(t,e,n,r){var s=Jt.hasOwnProperty(e)?Jt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rU(e,n,s,r)&&(n=null),r||s===null?tU(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fs=Z3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xf=Symbol.for("react.element"),ll=Symbol.for("react.portal"),cl=Symbol.for("react.fragment"),y_=Symbol.for("react.strict_mode"),K0=Symbol.for("react.profiler"),aN=Symbol.for("react.provider"),lN=Symbol.for("react.context"),v_=Symbol.for("react.forward_ref"),Q0=Symbol.for("react.suspense"),Y0=Symbol.for("react.suspense_list"),x_=Symbol.for("react.memo"),di=Symbol.for("react.lazy"),cN=Symbol.for("react.offscreen"),hS=Symbol.iterator;function ou(t){return t===null||typeof t!="object"?null:(t=hS&&t[hS]||t["@@iterator"],typeof t=="function"?t:null)}var gt=Object.assign,mv;function Su(t){if(mv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mv=e&&e[1]||""}return`
`+mv+t}var gv=!1;function yv(t,e){if(!t||gv)return"";gv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{gv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Su(t):""}function sU(t){switch(t.tag){case 5:return Su(t.type);case 16:return Su("Lazy");case 13:return Su("Suspense");case 19:return Su("SuspenseList");case 0:case 2:case 15:return t=yv(t.type,!1),t;case 11:return t=yv(t.type.render,!1),t;case 1:return t=yv(t.type,!0),t;default:return""}}function X0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cl:return"Fragment";case ll:return"Portal";case K0:return"Profiler";case y_:return"StrictMode";case Q0:return"Suspense";case Y0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lN:return(t.displayName||"Context")+".Consumer";case aN:return(t._context.displayName||"Context")+".Provider";case v_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x_:return e=t.displayName||null,e!==null?e:X0(t.type)||"Memo";case di:e=t._payload,t=t._init;try{return X0(t(e))}catch{}}return null}function iU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X0(e);case 8:return e===y_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ui(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oU(t){var e=uN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wf(t){t._valueTracker||(t._valueTracker=oU(t))}function dN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=uN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function J0(t,e){var n=e.checked;return gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function fS(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ui(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hN(t,e){e=e.checked,e!=null&&g_(t,"checked",e,!1)}function Z0(t,e){hN(t,e);var n=Ui(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ex(t,e.type,n):e.hasOwnProperty("defaultValue")&&ex(t,e.type,Ui(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ex(t,e,n){(e!=="number"||qp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Iu=Array.isArray;function Tl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ui(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Iu(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ui(n)}}function fN(t,e){var n=Ui(e.value),r=Ui(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _f,mN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_f=_f||document.createElement("div"),_f.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_f.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ad(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aU=["Webkit","ms","Moz","O"];Object.keys(Vu).forEach(function(t){aU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vu[e]=Vu[t]})});function gN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vu.hasOwnProperty(t)&&Vu[t]?(""+e).trim():e+"px"}function yN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=gN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var lU=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rx(t,e){if(e){if(lU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function sx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ix=null;function w_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ox=null,Sl=null,Il=null;function yS(t){if(t=oh(t)){if(typeof ox!="function")throw Error(J(280));var e=t.stateNode;e&&(e=gg(e),ox(t.stateNode,t.type,e))}}function vN(t){Sl?Il?Il.push(t):Il=[t]:Sl=t}function xN(){if(Sl){var t=Sl,e=Il;if(Il=Sl=null,yS(t),e)for(t=0;t<e.length;t++)yS(e[t])}}function wN(t,e){return t(e)}function _N(){}var vv=!1;function bN(t,e,n){if(vv)return t(e,n);vv=!0;try{return wN(t,e,n)}finally{vv=!1,(Sl!==null||Il!==null)&&(_N(),xN())}}function ld(t,e){var n=t.stateNode;if(n===null)return null;var r=gg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var ax=!1;if(Ts)try{var au={};Object.defineProperty(au,"passive",{get:function(){ax=!0}}),window.addEventListener("test",au,au),window.removeEventListener("test",au,au)}catch{ax=!1}function cU(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Lu=!1,Wp=null,Gp=!1,lx=null,uU={onError:function(t){Lu=!0,Wp=t}};function dU(t,e,n,r,s,i,o,a,l){Lu=!1,Wp=null,cU.apply(uU,arguments)}function hU(t,e,n,r,s,i,o,a,l){if(dU.apply(this,arguments),Lu){if(Lu){var c=Wp;Lu=!1,Wp=null}else throw Error(J(198));Gp||(Gp=!0,lx=c)}}function wa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function EN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vS(t){if(wa(t)!==t)throw Error(J(188))}function fU(t){var e=t.alternate;if(!e){if(e=wa(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return vS(s),t;if(i===r)return vS(s),e;i=i.sibling}throw Error(J(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function TN(t){return t=fU(t),t!==null?SN(t):null}function SN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=SN(t);if(e!==null)return e;t=t.sibling}return null}var IN=Xn.unstable_scheduleCallback,xS=Xn.unstable_cancelCallback,pU=Xn.unstable_shouldYield,mU=Xn.unstable_requestPaint,St=Xn.unstable_now,gU=Xn.unstable_getCurrentPriorityLevel,__=Xn.unstable_ImmediatePriority,CN=Xn.unstable_UserBlockingPriority,Hp=Xn.unstable_NormalPriority,yU=Xn.unstable_LowPriority,PN=Xn.unstable_IdlePriority,hg=null,Fr=null;function vU(t){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(hg,t,void 0,(t.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:_U,xU=Math.log,wU=Math.LN2;function _U(t){return t>>>=0,t===0?32:31-(xU(t)/wU|0)|0}var bf=64,Ef=4194304;function Cu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Cu(a):(i&=o,i!==0&&(r=Cu(i)))}else o=n&~s,o!==0?r=Cu(o):i!==0&&(r=Cu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sr(e),s=1<<n,r|=t[n],e&=~s;return r}function bU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EU(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Sr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=bU(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function cx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function AN(){var t=bf;return bf<<=1,!(bf&4194240)&&(bf=64),t}function xv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function sh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sr(e),t[e]=n}function TU(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Sr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function b_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var qe=0;function RN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var NN,E_,kN,DN,jN,ux=!1,Tf=[],Ci=null,Pi=null,Ai=null,cd=new Map,ud=new Map,pi=[],SU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wS(t,e){switch(t){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":Pi=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":cd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ud.delete(e.pointerId)}}function lu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=oh(e),e!==null&&E_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function IU(t,e,n,r,s){switch(e){case"focusin":return Ci=lu(Ci,t,e,n,r,s),!0;case"dragenter":return Pi=lu(Pi,t,e,n,r,s),!0;case"mouseover":return Ai=lu(Ai,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return cd.set(i,lu(cd.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ud.set(i,lu(ud.get(i)||null,t,e,n,r,s)),!0}return!1}function ON(t){var e=Oo(t.target);if(e!==null){var n=wa(e);if(n!==null){if(e=n.tag,e===13){if(e=EN(n),e!==null){t.blockedOn=e,jN(t.priority,function(){kN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ix=r,n.target.dispatchEvent(r),ix=null}else return e=oh(n),e!==null&&E_(e),t.blockedOn=n,!1;e.shift()}return!0}function _S(t,e,n){pp(t)&&n.delete(e)}function CU(){ux=!1,Ci!==null&&pp(Ci)&&(Ci=null),Pi!==null&&pp(Pi)&&(Pi=null),Ai!==null&&pp(Ai)&&(Ai=null),cd.forEach(_S),ud.forEach(_S)}function cu(t,e){t.blockedOn===e&&(t.blockedOn=null,ux||(ux=!0,Xn.unstable_scheduleCallback(Xn.unstable_NormalPriority,CU)))}function dd(t){function e(s){return cu(s,t)}if(0<Tf.length){cu(Tf[0],t);for(var n=1;n<Tf.length;n++){var r=Tf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ci!==null&&cu(Ci,t),Pi!==null&&cu(Pi,t),Ai!==null&&cu(Ai,t),cd.forEach(e),ud.forEach(e),n=0;n<pi.length;n++)r=pi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pi.length&&(n=pi[0],n.blockedOn===null);)ON(n),n.blockedOn===null&&pi.shift()}var Cl=Fs.ReactCurrentBatchConfig,Qp=!0;function PU(t,e,n,r){var s=qe,i=Cl.transition;Cl.transition=null;try{qe=1,T_(t,e,n,r)}finally{qe=s,Cl.transition=i}}function AU(t,e,n,r){var s=qe,i=Cl.transition;Cl.transition=null;try{qe=4,T_(t,e,n,r)}finally{qe=s,Cl.transition=i}}function T_(t,e,n,r){if(Qp){var s=dx(t,e,n,r);if(s===null)Av(t,e,r,Yp,n),wS(t,r);else if(IU(s,t,e,n,r))r.stopPropagation();else if(wS(t,r),e&4&&-1<SU.indexOf(t)){for(;s!==null;){var i=oh(s);if(i!==null&&NN(i),i=dx(t,e,n,r),i===null&&Av(t,e,r,Yp,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Av(t,e,r,null,n)}}var Yp=null;function dx(t,e,n,r){if(Yp=null,t=w_(r),t=Oo(t),t!==null)if(e=wa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=EN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yp=t,null}function MN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gU()){case __:return 1;case CN:return 4;case Hp:case yU:return 16;case PN:return 536870912;default:return 16}default:return 16}}var Ei=null,S_=null,mp=null;function VN(){if(mp)return mp;var t,e=S_,n=e.length,r,s="value"in Ei?Ei.value:Ei.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return mp=s.slice(t,1<r?1-r:void 0)}function gp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sf(){return!0}function bS(){return!1}function tr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sf:bS,this.isPropagationStopped=bS,this}return gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sf)},persist:function(){},isPersistent:Sf}),e}var Tc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},I_=tr(Tc),ih=gt({},Tc,{view:0,detail:0}),RU=tr(ih),wv,_v,uu,fg=gt({},ih,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:C_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uu&&(uu&&t.type==="mousemove"?(wv=t.screenX-uu.screenX,_v=t.screenY-uu.screenY):_v=wv=0,uu=t),wv)},movementY:function(t){return"movementY"in t?t.movementY:_v}}),ES=tr(fg),NU=gt({},fg,{dataTransfer:0}),kU=tr(NU),DU=gt({},ih,{relatedTarget:0}),bv=tr(DU),jU=gt({},Tc,{animationName:0,elapsedTime:0,pseudoElement:0}),OU=tr(jU),MU=gt({},Tc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VU=tr(MU),LU=gt({},Tc,{data:0}),TS=tr(LU),$U={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UU[t])?!!e[t]:!1}function C_(){return BU}var zU=gt({},ih,{key:function(t){if(t.key){var e=$U[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:C_,charCode:function(t){return t.type==="keypress"?gp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qU=tr(zU),WU=gt({},fg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SS=tr(WU),GU=gt({},ih,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:C_}),HU=tr(GU),KU=gt({},Tc,{propertyName:0,elapsedTime:0,pseudoElement:0}),QU=tr(KU),YU=gt({},fg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),XU=tr(YU),JU=[9,13,27,32],P_=Ts&&"CompositionEvent"in window,$u=null;Ts&&"documentMode"in document&&($u=document.documentMode);var ZU=Ts&&"TextEvent"in window&&!$u,LN=Ts&&(!P_||$u&&8<$u&&11>=$u),IS=String.fromCharCode(32),CS=!1;function $N(t,e){switch(t){case"keyup":return JU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ul=!1;function e6(t,e){switch(t){case"compositionend":return FN(e);case"keypress":return e.which!==32?null:(CS=!0,IS);case"textInput":return t=e.data,t===IS&&CS?null:t;default:return null}}function t6(t,e){if(ul)return t==="compositionend"||!P_&&$N(t,e)?(t=VN(),mp=S_=Ei=null,ul=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LN&&e.locale!=="ko"?null:e.data;default:return null}}var n6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!n6[t.type]:e==="textarea"}function UN(t,e,n,r){vN(r),e=Xp(e,"onChange"),0<e.length&&(n=new I_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fu=null,hd=null;function r6(t){JN(t,0)}function pg(t){var e=fl(t);if(dN(e))return t}function s6(t,e){if(t==="change")return e}var BN=!1;if(Ts){var Ev;if(Ts){var Tv="oninput"in document;if(!Tv){var AS=document.createElement("div");AS.setAttribute("oninput","return;"),Tv=typeof AS.oninput=="function"}Ev=Tv}else Ev=!1;BN=Ev&&(!document.documentMode||9<document.documentMode)}function RS(){Fu&&(Fu.detachEvent("onpropertychange",zN),hd=Fu=null)}function zN(t){if(t.propertyName==="value"&&pg(hd)){var e=[];UN(e,hd,t,w_(t)),bN(r6,e)}}function i6(t,e,n){t==="focusin"?(RS(),Fu=e,hd=n,Fu.attachEvent("onpropertychange",zN)):t==="focusout"&&RS()}function o6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pg(hd)}function a6(t,e){if(t==="click")return pg(e)}function l6(t,e){if(t==="input"||t==="change")return pg(e)}function c6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pr=typeof Object.is=="function"?Object.is:c6;function fd(t,e){if(Pr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!H0.call(e,s)||!Pr(t[s],e[s]))return!1}return!0}function NS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kS(t,e){var n=NS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=NS(n)}}function qN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function WN(){for(var t=window,e=qp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qp(t.document)}return e}function A_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function u6(t){var e=WN(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qN(n.ownerDocument.documentElement,n)){if(r!==null&&A_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=kS(n,i);var o=kS(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var d6=Ts&&"documentMode"in document&&11>=document.documentMode,dl=null,hx=null,Uu=null,fx=!1;function DS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fx||dl==null||dl!==qp(r)||(r=dl,"selectionStart"in r&&A_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Uu&&fd(Uu,r)||(Uu=r,r=Xp(hx,"onSelect"),0<r.length&&(e=new I_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=dl)))}function If(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hl={animationend:If("Animation","AnimationEnd"),animationiteration:If("Animation","AnimationIteration"),animationstart:If("Animation","AnimationStart"),transitionend:If("Transition","TransitionEnd")},Sv={},GN={};Ts&&(GN=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function mg(t){if(Sv[t])return Sv[t];if(!hl[t])return t;var e=hl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in GN)return Sv[t]=e[n];return t}var HN=mg("animationend"),KN=mg("animationiteration"),QN=mg("animationstart"),YN=mg("transitionend"),XN=new Map,jS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function no(t,e){XN.set(t,e),xa(e,[t])}for(var Iv=0;Iv<jS.length;Iv++){var Cv=jS[Iv],h6=Cv.toLowerCase(),f6=Cv[0].toUpperCase()+Cv.slice(1);no(h6,"on"+f6)}no(HN,"onAnimationEnd");no(KN,"onAnimationIteration");no(QN,"onAnimationStart");no("dblclick","onDoubleClick");no("focusin","onFocus");no("focusout","onBlur");no(YN,"onTransitionEnd");ql("onMouseEnter",["mouseout","mouseover"]);ql("onMouseLeave",["mouseout","mouseover"]);ql("onPointerEnter",["pointerout","pointerover"]);ql("onPointerLeave",["pointerout","pointerover"]);xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xa("onBeforeInput",["compositionend","keypress","textInput","paste"]);xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pu));function OS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hU(r,e,void 0,t),t.currentTarget=null}function JN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;OS(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;OS(s,a,c),i=l}}}if(Gp)throw t=lx,Gp=!1,lx=null,t}function tt(t,e){var n=e[vx];n===void 0&&(n=e[vx]=new Set);var r=t+"__bubble";n.has(r)||(ZN(e,t,2,!1),n.add(r))}function Pv(t,e,n){var r=0;e&&(r|=4),ZN(n,t,r,e)}var Cf="_reactListening"+Math.random().toString(36).slice(2);function pd(t){if(!t[Cf]){t[Cf]=!0,oN.forEach(function(n){n!=="selectionchange"&&(p6.has(n)||Pv(n,!1,t),Pv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cf]||(e[Cf]=!0,Pv("selectionchange",!1,e))}}function ZN(t,e,n,r){switch(MN(e)){case 1:var s=PU;break;case 4:s=AU;break;default:s=T_}n=s.bind(null,e,n,t),s=void 0,!ax||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Av(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Oo(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}bN(function(){var c=i,d=w_(n),h=[];e:{var m=XN.get(t);if(m!==void 0){var g=I_,v=t;switch(t){case"keypress":if(gp(n)===0)break e;case"keydown":case"keyup":g=qU;break;case"focusin":v="focus",g=bv;break;case"focusout":v="blur",g=bv;break;case"beforeblur":case"afterblur":g=bv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ES;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=kU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=HU;break;case HN:case KN:case QN:g=OU;break;case YN:g=QU;break;case"scroll":g=RU;break;case"wheel":g=XU;break;case"copy":case"cut":case"paste":g=VU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=SS}var y=(e&4)!==0,w=!y&&t==="scroll",_=y?m!==null?m+"Capture":null:m;y=[];for(var x=c,b;x!==null;){b=x;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,_!==null&&(S=ld(x,_),S!=null&&y.push(md(x,S,b)))),w)break;x=x.return}0<y.length&&(m=new g(m,v,null,n,d),h.push({event:m,listeners:y}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==ix&&(v=n.relatedTarget||n.fromElement)&&(Oo(v)||v[Ss]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=c,v=v?Oo(v):null,v!==null&&(w=wa(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(y=ES,S="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=SS,S="onPointerLeave",_="onPointerEnter",x="pointer"),w=g==null?m:fl(g),b=v==null?m:fl(v),m=new y(S,x+"leave",g,n,d),m.target=w,m.relatedTarget=b,S=null,Oo(d)===c&&(y=new y(_,x+"enter",v,n,d),y.target=b,y.relatedTarget=w,S=y),w=S,g&&v)t:{for(y=g,_=v,x=0,b=y;b;b=za(b))x++;for(b=0,S=_;S;S=za(S))b++;for(;0<x-b;)y=za(y),x--;for(;0<b-x;)_=za(_),b--;for(;x--;){if(y===_||_!==null&&y===_.alternate)break t;y=za(y),_=za(_)}y=null}else y=null;g!==null&&MS(h,m,g,y,!1),v!==null&&w!==null&&MS(h,w,v,y,!0)}}e:{if(m=c?fl(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var A=s6;else if(PS(m))if(BN)A=l6;else{A=o6;var D=i6}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(A=a6);if(A&&(A=A(t,c))){UN(h,A,n,d);break e}D&&D(t,m,c),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&ex(m,"number",m.value)}switch(D=c?fl(c):window,t){case"focusin":(PS(D)||D.contentEditable==="true")&&(dl=D,hx=c,Uu=null);break;case"focusout":Uu=hx=dl=null;break;case"mousedown":fx=!0;break;case"contextmenu":case"mouseup":case"dragend":fx=!1,DS(h,n,d);break;case"selectionchange":if(d6)break;case"keydown":case"keyup":DS(h,n,d)}var C;if(P_)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ul?$N(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(LN&&n.locale!=="ko"&&(ul||I!=="onCompositionStart"?I==="onCompositionEnd"&&ul&&(C=VN()):(Ei=d,S_="value"in Ei?Ei.value:Ei.textContent,ul=!0)),D=Xp(c,I),0<D.length&&(I=new TS(I,t,null,n,d),h.push({event:I,listeners:D}),C?I.data=C:(C=FN(n),C!==null&&(I.data=C)))),(C=ZU?e6(t,n):t6(t,n))&&(c=Xp(c,"onBeforeInput"),0<c.length&&(d=new TS("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=C))}JN(h,e)})}function md(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xp(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ld(t,n),i!=null&&r.unshift(md(t,i,s)),i=ld(t,e),i!=null&&r.push(md(t,i,s))),t=t.return}return r}function za(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function MS(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=ld(n,i),l!=null&&o.unshift(md(n,l,a))):s||(l=ld(n,i),l!=null&&o.push(md(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var m6=/\r\n?/g,g6=/\u0000|\uFFFD/g;function VS(t){return(typeof t=="string"?t:""+t).replace(m6,`
`).replace(g6,"")}function Pf(t,e,n){if(e=VS(e),VS(t)!==e&&n)throw Error(J(425))}function Jp(){}var px=null,mx=null;function gx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yx=typeof setTimeout=="function"?setTimeout:void 0,y6=typeof clearTimeout=="function"?clearTimeout:void 0,LS=typeof Promise=="function"?Promise:void 0,v6=typeof queueMicrotask=="function"?queueMicrotask:typeof LS<"u"?function(t){return LS.resolve(null).then(t).catch(x6)}:yx;function x6(t){setTimeout(function(){throw t})}function Rv(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),dd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);dd(e)}function Ri(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $S(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sc=Math.random().toString(36).slice(2),Mr="__reactFiber$"+Sc,gd="__reactProps$"+Sc,Ss="__reactContainer$"+Sc,vx="__reactEvents$"+Sc,w6="__reactListeners$"+Sc,_6="__reactHandles$"+Sc;function Oo(t){var e=t[Mr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ss]||n[Mr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$S(t);t!==null;){if(n=t[Mr])return n;t=$S(t)}return e}t=n,n=t.parentNode}return null}function oh(t){return t=t[Mr]||t[Ss],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function gg(t){return t[gd]||null}var xx=[],pl=-1;function ro(t){return{current:t}}function rt(t){0>pl||(t.current=xx[pl],xx[pl]=null,pl--)}function Qe(t,e){pl++,xx[pl]=t.current,t.current=e}var Bi={},gn=ro(Bi),On=ro(!1),Qo=Bi;function Wl(t,e){var n=t.type.contextTypes;if(!n)return Bi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mn(t){return t=t.childContextTypes,t!=null}function Zp(){rt(On),rt(gn)}function FS(t,e,n){if(gn.current!==Bi)throw Error(J(168));Qe(gn,e),Qe(On,n)}function ek(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(J(108,iU(t)||"Unknown",s));return gt({},n,r)}function em(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Bi,Qo=gn.current,Qe(gn,t),Qe(On,On.current),!0}function US(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=ek(t,e,Qo),r.__reactInternalMemoizedMergedChildContext=t,rt(On),rt(gn),Qe(gn,t)):rt(On),Qe(On,n)}var os=null,yg=!1,Nv=!1;function tk(t){os===null?os=[t]:os.push(t)}function b6(t){yg=!0,tk(t)}function so(){if(!Nv&&os!==null){Nv=!0;var t=0,e=qe;try{var n=os;for(qe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}os=null,yg=!1}catch(s){throw os!==null&&(os=os.slice(t+1)),IN(__,so),s}finally{qe=e,Nv=!1}}return null}var ml=[],gl=0,tm=null,nm=0,ir=[],or=0,Yo=null,ds=1,hs="";function bo(t,e){ml[gl++]=nm,ml[gl++]=tm,tm=t,nm=e}function nk(t,e,n){ir[or++]=ds,ir[or++]=hs,ir[or++]=Yo,Yo=t;var r=ds;t=hs;var s=32-Sr(r)-1;r&=~(1<<s),n+=1;var i=32-Sr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ds=1<<32-Sr(e)+s|n<<s|r,hs=i+t}else ds=1<<i|n<<s|r,hs=t}function R_(t){t.return!==null&&(bo(t,1),nk(t,1,0))}function N_(t){for(;t===tm;)tm=ml[--gl],ml[gl]=null,nm=ml[--gl],ml[gl]=null;for(;t===Yo;)Yo=ir[--or],ir[or]=null,hs=ir[--or],ir[or]=null,ds=ir[--or],ir[or]=null}var Kn=null,Gn=null,ot=!1,Er=null;function rk(t,e){var n=ar(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function BS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Kn=t,Gn=Ri(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Kn=t,Gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yo!==null?{id:ds,overflow:hs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ar(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Kn=t,Gn=null,!0):!1;default:return!1}}function wx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _x(t){if(ot){var e=Gn;if(e){var n=e;if(!BS(t,e)){if(wx(t))throw Error(J(418));e=Ri(n.nextSibling);var r=Kn;e&&BS(t,e)?rk(r,n):(t.flags=t.flags&-4097|2,ot=!1,Kn=t)}}else{if(wx(t))throw Error(J(418));t.flags=t.flags&-4097|2,ot=!1,Kn=t}}}function zS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kn=t}function Af(t){if(t!==Kn)return!1;if(!ot)return zS(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gx(t.type,t.memoizedProps)),e&&(e=Gn)){if(wx(t))throw sk(),Error(J(418));for(;e;)rk(t,e),e=Ri(e.nextSibling)}if(zS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gn=Ri(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gn=null}}else Gn=Kn?Ri(t.stateNode.nextSibling):null;return!0}function sk(){for(var t=Gn;t;)t=Ri(t.nextSibling)}function Gl(){Gn=Kn=null,ot=!1}function k_(t){Er===null?Er=[t]:Er.push(t)}var E6=Fs.ReactCurrentBatchConfig;function du(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Rf(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qS(t){var e=t._init;return e(t._payload)}function ik(t){function e(_,x){if(t){var b=_.deletions;b===null?(_.deletions=[x],_.flags|=16):b.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function s(_,x){return _=ji(_,x),_.index=0,_.sibling=null,_}function i(_,x,b){return _.index=b,t?(b=_.alternate,b!==null?(b=b.index,b<x?(_.flags|=2,x):b):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,x,b,S){return x===null||x.tag!==6?(x=Lv(b,_.mode,S),x.return=_,x):(x=s(x,b),x.return=_,x)}function l(_,x,b,S){var A=b.type;return A===cl?d(_,x,b.props.children,S,b.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===di&&qS(A)===x.type)?(S=s(x,b.props),S.ref=du(_,x,b),S.return=_,S):(S=Ep(b.type,b.key,b.props,null,_.mode,S),S.ref=du(_,x,b),S.return=_,S)}function c(_,x,b,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=$v(b,_.mode,S),x.return=_,x):(x=s(x,b.children||[]),x.return=_,x)}function d(_,x,b,S,A){return x===null||x.tag!==7?(x=qo(b,_.mode,S,A),x.return=_,x):(x=s(x,b),x.return=_,x)}function h(_,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Lv(""+x,_.mode,b),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case xf:return b=Ep(x.type,x.key,x.props,null,_.mode,b),b.ref=du(_,null,x),b.return=_,b;case ll:return x=$v(x,_.mode,b),x.return=_,x;case di:var S=x._init;return h(_,S(x._payload),b)}if(Iu(x)||ou(x))return x=qo(x,_.mode,b,null),x.return=_,x;Rf(_,x)}return null}function m(_,x,b,S){var A=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return A!==null?null:a(_,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case xf:return b.key===A?l(_,x,b,S):null;case ll:return b.key===A?c(_,x,b,S):null;case di:return A=b._init,m(_,x,A(b._payload),S)}if(Iu(b)||ou(b))return A!==null?null:d(_,x,b,S,null);Rf(_,b)}return null}function g(_,x,b,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return _=_.get(b)||null,a(x,_,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case xf:return _=_.get(S.key===null?b:S.key)||null,l(x,_,S,A);case ll:return _=_.get(S.key===null?b:S.key)||null,c(x,_,S,A);case di:var D=S._init;return g(_,x,b,D(S._payload),A)}if(Iu(S)||ou(S))return _=_.get(b)||null,d(x,_,S,A,null);Rf(x,S)}return null}function v(_,x,b,S){for(var A=null,D=null,C=x,I=x=0,P=null;C!==null&&I<b.length;I++){C.index>I?(P=C,C=null):P=C.sibling;var R=m(_,C,b[I],S);if(R===null){C===null&&(C=P);break}t&&C&&R.alternate===null&&e(_,C),x=i(R,x,I),D===null?A=R:D.sibling=R,D=R,C=P}if(I===b.length)return n(_,C),ot&&bo(_,I),A;if(C===null){for(;I<b.length;I++)C=h(_,b[I],S),C!==null&&(x=i(C,x,I),D===null?A=C:D.sibling=C,D=C);return ot&&bo(_,I),A}for(C=r(_,C);I<b.length;I++)P=g(C,_,I,b[I],S),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?I:P.key),x=i(P,x,I),D===null?A=P:D.sibling=P,D=P);return t&&C.forEach(function(j){return e(_,j)}),ot&&bo(_,I),A}function y(_,x,b,S){var A=ou(b);if(typeof A!="function")throw Error(J(150));if(b=A.call(b),b==null)throw Error(J(151));for(var D=A=null,C=x,I=x=0,P=null,R=b.next();C!==null&&!R.done;I++,R=b.next()){C.index>I?(P=C,C=null):P=C.sibling;var j=m(_,C,R.value,S);if(j===null){C===null&&(C=P);break}t&&C&&j.alternate===null&&e(_,C),x=i(j,x,I),D===null?A=j:D.sibling=j,D=j,C=P}if(R.done)return n(_,C),ot&&bo(_,I),A;if(C===null){for(;!R.done;I++,R=b.next())R=h(_,R.value,S),R!==null&&(x=i(R,x,I),D===null?A=R:D.sibling=R,D=R);return ot&&bo(_,I),A}for(C=r(_,C);!R.done;I++,R=b.next())R=g(C,_,I,R.value,S),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?I:R.key),x=i(R,x,I),D===null?A=R:D.sibling=R,D=R);return t&&C.forEach(function(O){return e(_,O)}),ot&&bo(_,I),A}function w(_,x,b,S){if(typeof b=="object"&&b!==null&&b.type===cl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case xf:e:{for(var A=b.key,D=x;D!==null;){if(D.key===A){if(A=b.type,A===cl){if(D.tag===7){n(_,D.sibling),x=s(D,b.props.children),x.return=_,_=x;break e}}else if(D.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===di&&qS(A)===D.type){n(_,D.sibling),x=s(D,b.props),x.ref=du(_,D,b),x.return=_,_=x;break e}n(_,D);break}else e(_,D);D=D.sibling}b.type===cl?(x=qo(b.props.children,_.mode,S,b.key),x.return=_,_=x):(S=Ep(b.type,b.key,b.props,null,_.mode,S),S.ref=du(_,x,b),S.return=_,_=S)}return o(_);case ll:e:{for(D=b.key;x!==null;){if(x.key===D)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(_,x.sibling),x=s(x,b.children||[]),x.return=_,_=x;break e}else{n(_,x);break}else e(_,x);x=x.sibling}x=$v(b,_.mode,S),x.return=_,_=x}return o(_);case di:return D=b._init,w(_,x,D(b._payload),S)}if(Iu(b))return v(_,x,b,S);if(ou(b))return y(_,x,b,S);Rf(_,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(_,x.sibling),x=s(x,b),x.return=_,_=x):(n(_,x),x=Lv(b,_.mode,S),x.return=_,_=x),o(_)):n(_,x)}return w}var Hl=ik(!0),ok=ik(!1),rm=ro(null),sm=null,yl=null,D_=null;function j_(){D_=yl=sm=null}function O_(t){var e=rm.current;rt(rm),t._currentValue=e}function bx(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Pl(t,e){sm=t,D_=yl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nn=!0),t.firstContext=null)}function ur(t){var e=t._currentValue;if(D_!==t)if(t={context:t,memoizedValue:e,next:null},yl===null){if(sm===null)throw Error(J(308));yl=t,sm.dependencies={lanes:0,firstContext:t}}else yl=yl.next=t;return e}var Mo=null;function M_(t){Mo===null?Mo=[t]:Mo.push(t)}function ak(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,M_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Is(t,r)}function Is(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hi=!1;function V_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ni(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Is(t,n)}return s=r.interleaved,s===null?(e.next=e,M_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Is(t,n)}function yp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,b_(t,n)}}function WS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function im(t,e,n,r){var s=t.updateQueue;hi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var m=a.lane,g=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,y=a;switch(m=e,g=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(g,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,m=typeof v=="function"?v.call(g,h,m):v,m==null)break e;h=gt({},h,m);break e;case 2:hi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=h):d=d.next=g,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Jo|=o,t.lanes=o,t.memoizedState=h}}function GS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var ah={},Ur=ro(ah),yd=ro(ah),vd=ro(ah);function Vo(t){if(t===ah)throw Error(J(174));return t}function L_(t,e){switch(Qe(vd,e),Qe(yd,t),Qe(Ur,ah),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nx(e,t)}rt(Ur),Qe(Ur,e)}function Kl(){rt(Ur),rt(yd),rt(vd)}function ck(t){Vo(vd.current);var e=Vo(Ur.current),n=nx(e,t.type);e!==n&&(Qe(yd,t),Qe(Ur,n))}function $_(t){yd.current===t&&(rt(Ur),rt(yd))}var ut=ro(0);function om(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kv=[];function F_(){for(var t=0;t<kv.length;t++)kv[t]._workInProgressVersionPrimary=null;kv.length=0}var vp=Fs.ReactCurrentDispatcher,Dv=Fs.ReactCurrentBatchConfig,Xo=0,pt=null,jt=null,$t=null,am=!1,Bu=!1,xd=0,T6=0;function an(){throw Error(J(321))}function U_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pr(t[n],e[n]))return!1;return!0}function B_(t,e,n,r,s,i){if(Xo=i,pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vp.current=t===null||t.memoizedState===null?P6:A6,t=n(r,s),Bu){i=0;do{if(Bu=!1,xd=0,25<=i)throw Error(J(301));i+=1,$t=jt=null,e.updateQueue=null,vp.current=R6,t=n(r,s)}while(Bu)}if(vp.current=lm,e=jt!==null&&jt.next!==null,Xo=0,$t=jt=pt=null,am=!1,e)throw Error(J(300));return t}function z_(){var t=xd!==0;return xd=0,t}function Or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?pt.memoizedState=$t=t:$t=$t.next=t,$t}function dr(){if(jt===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=jt.next;var e=$t===null?pt.memoizedState:$t.next;if(e!==null)$t=e,jt=t;else{if(t===null)throw Error(J(310));jt=t,t={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},$t===null?pt.memoizedState=$t=t:$t=$t.next=t}return $t}function wd(t,e){return typeof e=="function"?e(t):e}function jv(t){var e=dr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=jt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Xo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,pt.lanes|=d,Jo|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Pr(r,e.memoizedState)||(Nn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,pt.lanes|=i,Jo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ov(t){var e=dr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Pr(i,e.memoizedState)||(Nn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function uk(){}function dk(t,e){var n=pt,r=dr(),s=e(),i=!Pr(r.memoizedState,s);if(i&&(r.memoizedState=s,Nn=!0),r=r.queue,q_(pk.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$t!==null&&$t.memoizedState.tag&1){if(n.flags|=2048,_d(9,fk.bind(null,n,r,s,e),void 0,null),Bt===null)throw Error(J(349));Xo&30||hk(n,e,s)}return s}function hk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fk(t,e,n,r){e.value=n,e.getSnapshot=r,mk(e)&&gk(t)}function pk(t,e,n){return n(function(){mk(e)&&gk(t)})}function mk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pr(t,n)}catch{return!0}}function gk(t){var e=Is(t,1);e!==null&&Ir(e,t,1,-1)}function HS(t){var e=Or();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wd,lastRenderedState:t},e.queue=t,t=t.dispatch=C6.bind(null,pt,t),[e.memoizedState,t]}function _d(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yk(){return dr().memoizedState}function xp(t,e,n,r){var s=Or();pt.flags|=t,s.memoizedState=_d(1|e,n,void 0,r===void 0?null:r)}function vg(t,e,n,r){var s=dr();r=r===void 0?null:r;var i=void 0;if(jt!==null){var o=jt.memoizedState;if(i=o.destroy,r!==null&&U_(r,o.deps)){s.memoizedState=_d(e,n,i,r);return}}pt.flags|=t,s.memoizedState=_d(1|e,n,i,r)}function KS(t,e){return xp(8390656,8,t,e)}function q_(t,e){return vg(2048,8,t,e)}function vk(t,e){return vg(4,2,t,e)}function xk(t,e){return vg(4,4,t,e)}function wk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _k(t,e,n){return n=n!=null?n.concat([t]):null,vg(4,4,wk.bind(null,e,t),n)}function W_(){}function bk(t,e){var n=dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&U_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ek(t,e){var n=dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&U_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Tk(t,e,n){return Xo&21?(Pr(n,e)||(n=AN(),pt.lanes|=n,Jo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nn=!0),t.memoizedState=n)}function S6(t,e){var n=qe;qe=n!==0&&4>n?n:4,t(!0);var r=Dv.transition;Dv.transition={};try{t(!1),e()}finally{qe=n,Dv.transition=r}}function Sk(){return dr().memoizedState}function I6(t,e,n){var r=Di(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ik(t))Ck(e,n);else if(n=ak(t,e,n,r),n!==null){var s=En();Ir(n,t,r,s),Pk(n,e,r)}}function C6(t,e,n){var r=Di(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ik(t))Ck(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Pr(a,o)){var l=e.interleaved;l===null?(s.next=s,M_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=ak(t,e,s,r),n!==null&&(s=En(),Ir(n,t,r,s),Pk(n,e,r))}}function Ik(t){var e=t.alternate;return t===pt||e!==null&&e===pt}function Ck(t,e){Bu=am=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Pk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,b_(t,n)}}var lm={readContext:ur,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},P6={readContext:ur,useCallback:function(t,e){return Or().memoizedState=[t,e===void 0?null:e],t},useContext:ur,useEffect:KS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xp(4194308,4,wk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xp(4194308,4,t,e)},useInsertionEffect:function(t,e){return xp(4,2,t,e)},useMemo:function(t,e){var n=Or();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Or();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=I6.bind(null,pt,t),[r.memoizedState,t]},useRef:function(t){var e=Or();return t={current:t},e.memoizedState=t},useState:HS,useDebugValue:W_,useDeferredValue:function(t){return Or().memoizedState=t},useTransition:function(){var t=HS(!1),e=t[0];return t=S6.bind(null,t[1]),Or().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=pt,s=Or();if(ot){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),Bt===null)throw Error(J(349));Xo&30||hk(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,KS(pk.bind(null,r,i,t),[t]),r.flags|=2048,_d(9,fk.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Or(),e=Bt.identifierPrefix;if(ot){var n=hs,r=ds;n=(r&~(1<<32-Sr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=T6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},A6={readContext:ur,useCallback:bk,useContext:ur,useEffect:q_,useImperativeHandle:_k,useInsertionEffect:vk,useLayoutEffect:xk,useMemo:Ek,useReducer:jv,useRef:yk,useState:function(){return jv(wd)},useDebugValue:W_,useDeferredValue:function(t){var e=dr();return Tk(e,jt.memoizedState,t)},useTransition:function(){var t=jv(wd)[0],e=dr().memoizedState;return[t,e]},useMutableSource:uk,useSyncExternalStore:dk,useId:Sk,unstable_isNewReconciler:!1},R6={readContext:ur,useCallback:bk,useContext:ur,useEffect:q_,useImperativeHandle:_k,useInsertionEffect:vk,useLayoutEffect:xk,useMemo:Ek,useReducer:Ov,useRef:yk,useState:function(){return Ov(wd)},useDebugValue:W_,useDeferredValue:function(t){var e=dr();return jt===null?e.memoizedState=t:Tk(e,jt.memoizedState,t)},useTransition:function(){var t=Ov(wd)[0],e=dr().memoizedState;return[t,e]},useMutableSource:uk,useSyncExternalStore:dk,useId:Sk,unstable_isNewReconciler:!1};function _r(t,e){if(t&&t.defaultProps){e=gt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ex(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:gt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xg={isMounted:function(t){return(t=t._reactInternals)?wa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=En(),s=Di(t),i=vs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ni(t,i,s),e!==null&&(Ir(e,t,s,r),yp(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=En(),s=Di(t),i=vs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ni(t,i,s),e!==null&&(Ir(e,t,s,r),yp(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=En(),r=Di(t),s=vs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ni(t,s,r),e!==null&&(Ir(e,t,r,n),yp(e,t,r))}};function QS(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!fd(n,r)||!fd(s,i):!0}function Ak(t,e,n){var r=!1,s=Bi,i=e.contextType;return typeof i=="object"&&i!==null?i=ur(i):(s=Mn(e)?Qo:gn.current,r=e.contextTypes,i=(r=r!=null)?Wl(t,s):Bi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function YS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xg.enqueueReplaceState(e,e.state,null)}function Tx(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},V_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ur(i):(i=Mn(e)?Qo:gn.current,s.context=Wl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ex(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&xg.enqueueReplaceState(s,s.state,null),im(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ql(t,e){try{var n="",r=e;do n+=sU(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Mv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var N6=typeof WeakMap=="function"?WeakMap:Map;function Rk(t,e,n){n=vs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){um||(um=!0,Ox=r),Sx(t,e)},n}function Nk(t,e,n){n=vs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Sx(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Sx(t,e),typeof r!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function XS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new N6;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=W6.bind(null,t,e,n),e.then(t,t))}function JS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ZS(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vs(-1,1),e.tag=2,Ni(n,e,1))),n.lanes|=1),t)}var k6=Fs.ReactCurrentOwner,Nn=!1;function bn(t,e,n,r){e.child=t===null?ok(e,null,n,r):Hl(e,t.child,n,r)}function eI(t,e,n,r,s){n=n.render;var i=e.ref;return Pl(e,s),r=B_(t,e,n,r,i,s),n=z_(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cs(t,e,s)):(ot&&n&&R_(e),e.flags|=1,bn(t,e,r,s),e.child)}function tI(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Z_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,kk(t,e,i,r,s)):(t=Ep(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:fd,n(o,r)&&t.ref===e.ref)return Cs(t,e,s)}return e.flags|=1,t=ji(i,r),t.ref=e.ref,t.return=e,e.child=t}function kk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(fd(i,r)&&t.ref===e.ref)if(Nn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Nn=!0);else return e.lanes=t.lanes,Cs(t,e,s)}return Ix(t,e,n,r,s)}function Dk(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(xl,qn),qn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qe(xl,qn),qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Qe(xl,qn),qn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Qe(xl,qn),qn|=r;return bn(t,e,s,n),e.child}function jk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ix(t,e,n,r,s){var i=Mn(n)?Qo:gn.current;return i=Wl(e,i),Pl(e,s),n=B_(t,e,n,r,i,s),r=z_(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cs(t,e,s)):(ot&&r&&R_(e),e.flags|=1,bn(t,e,n,s),e.child)}function nI(t,e,n,r,s){if(Mn(n)){var i=!0;em(e)}else i=!1;if(Pl(e,s),e.stateNode===null)wp(t,e),Ak(e,n,r),Tx(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ur(c):(c=Mn(n)?Qo:gn.current,c=Wl(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&YS(e,o,r,c),hi=!1;var m=e.memoizedState;o.state=m,im(e,r,o,s),l=e.memoizedState,a!==r||m!==l||On.current||hi?(typeof d=="function"&&(Ex(e,n,d,r),l=e.memoizedState),(a=hi||QS(e,n,a,r,m,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,lk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:_r(e.type,a),o.props=c,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ur(l):(l=Mn(n)?Qo:gn.current,l=Wl(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&YS(e,o,r,l),hi=!1,m=e.memoizedState,o.state=m,im(e,r,o,s);var v=e.memoizedState;a!==h||m!==v||On.current||hi?(typeof g=="function"&&(Ex(e,n,g,r),v=e.memoizedState),(c=hi||QS(e,n,c,r,m,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Cx(t,e,n,r,i,s)}function Cx(t,e,n,r,s,i){jk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&US(e,n,!1),Cs(t,e,i);r=e.stateNode,k6.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Hl(e,t.child,null,i),e.child=Hl(e,null,a,i)):bn(t,e,a,i),e.memoizedState=r.state,s&&US(e,n,!0),e.child}function Ok(t){var e=t.stateNode;e.pendingContext?FS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&FS(t,e.context,!1),L_(t,e.containerInfo)}function rI(t,e,n,r,s){return Gl(),k_(s),e.flags|=256,bn(t,e,n,r),e.child}var Px={dehydrated:null,treeContext:null,retryLane:0};function Ax(t){return{baseLanes:t,cachePool:null,transitions:null}}function Mk(t,e,n){var r=e.pendingProps,s=ut.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Qe(ut,s&1),t===null)return _x(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bg(o,r,0,null),t=qo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ax(n),e.memoizedState=Px,t):G_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return D6(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ji(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ji(a,i):(i=qo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ax(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Px,r}return i=t.child,t=i.sibling,r=ji(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function G_(t,e){return e=bg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nf(t,e,n,r){return r!==null&&k_(r),Hl(e,t.child,null,n),t=G_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function D6(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Mv(Error(J(422))),Nf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=bg({mode:"visible",children:r.children},s,0,null),i=qo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Hl(e,t.child,null,o),e.child.memoizedState=Ax(o),e.memoizedState=Px,i);if(!(e.mode&1))return Nf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(J(419)),r=Mv(i,r,void 0),Nf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Nn||a){if(r=Bt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Is(t,s),Ir(r,t,s,-1))}return J_(),r=Mv(Error(J(421))),Nf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=G6.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Gn=Ri(s.nextSibling),Kn=e,ot=!0,Er=null,t!==null&&(ir[or++]=ds,ir[or++]=hs,ir[or++]=Yo,ds=t.id,hs=t.overflow,Yo=e),e=G_(e,r.children),e.flags|=4096,e)}function sI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bx(t.return,e,n)}function Vv(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Vk(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(bn(t,e,r.children,n),r=ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sI(t,n,e);else if(t.tag===19)sI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qe(ut,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&om(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Vv(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&om(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Vv(e,!0,n,null,i);break;case"together":Vv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=ji(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ji(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function j6(t,e,n){switch(e.tag){case 3:Ok(e),Gl();break;case 5:ck(e);break;case 1:Mn(e.type)&&em(e);break;case 4:L_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Qe(rm,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qe(ut,ut.current&1),e.flags|=128,null):n&e.child.childLanes?Mk(t,e,n):(Qe(ut,ut.current&1),t=Cs(t,e,n),t!==null?t.sibling:null);Qe(ut,ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Vk(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qe(ut,ut.current),r)break;return null;case 22:case 23:return e.lanes=0,Dk(t,e,n)}return Cs(t,e,n)}var Lk,Rx,$k,Fk;Lk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rx=function(){};$k=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Vo(Ur.current);var i=null;switch(n){case"input":s=J0(t,s),r=J0(t,r),i=[];break;case"select":s=gt({},s,{value:void 0}),r=gt({},r,{value:void 0}),i=[];break;case"textarea":s=tx(t,s),r=tx(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Jp)}rx(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(od.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(od.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&tt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Fk=function(t,e,n,r){n!==r&&(e.flags|=4)};function hu(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function O6(t,e,n){var r=e.pendingProps;switch(N_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Mn(e.type)&&Zp(),ln(e),null;case 3:return r=e.stateNode,Kl(),rt(On),rt(gn),F_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Af(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Er!==null&&(Lx(Er),Er=null))),Rx(t,e),ln(e),null;case 5:$_(e);var s=Vo(vd.current);if(n=e.type,t!==null&&e.stateNode!=null)$k(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return ln(e),null}if(t=Vo(Ur.current),Af(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Mr]=e,r[gd]=i,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(s=0;s<Pu.length;s++)tt(Pu[s],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":fS(r,i),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},tt("invalid",r);break;case"textarea":mS(r,i),tt("invalid",r)}rx(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Pf(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Pf(r.textContent,a,t),s=["children",""+a]):od.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tt("scroll",r)}switch(n){case"input":wf(r),pS(r,i,!0);break;case"textarea":wf(r),gS(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Jp)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mr]=e,t[gd]=r,Lk(t,e,!1,!1),e.stateNode=t;e:{switch(o=sx(n,r),n){case"dialog":tt("cancel",t),tt("close",t),s=r;break;case"iframe":case"object":case"embed":tt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Pu.length;s++)tt(Pu[s],t);s=r;break;case"source":tt("error",t),s=r;break;case"img":case"image":case"link":tt("error",t),tt("load",t),s=r;break;case"details":tt("toggle",t),s=r;break;case"input":fS(t,r),s=J0(t,r),tt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=gt({},r,{value:void 0}),tt("invalid",t);break;case"textarea":mS(t,r),s=tx(t,r),tt("invalid",t);break;default:s=r}rx(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?yN(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&mN(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ad(t,l):typeof l=="number"&&ad(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(od.hasOwnProperty(i)?l!=null&&i==="onScroll"&&tt("scroll",t):l!=null&&g_(t,i,l,o))}switch(n){case"input":wf(t),pS(t,r,!1);break;case"textarea":wf(t),gS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ui(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Tl(t,!!r.multiple,i,!1):r.defaultValue!=null&&Tl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Jp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)Fk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=Vo(vd.current),Vo(Ur.current),Af(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mr]=e,(i=r.nodeValue!==n)&&(t=Kn,t!==null))switch(t.tag){case 3:Pf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pf(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mr]=e,e.stateNode=r}return ln(e),null;case 13:if(rt(ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&Gn!==null&&e.mode&1&&!(e.flags&128))sk(),Gl(),e.flags|=98560,i=!1;else if(i=Af(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(J(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[Mr]=e}else Gl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),i=!1}else Er!==null&&(Lx(Er),Er=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ut.current&1?Ot===0&&(Ot=3):J_())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return Kl(),Rx(t,e),t===null&&pd(e.stateNode.containerInfo),ln(e),null;case 10:return O_(e.type._context),ln(e),null;case 17:return Mn(e.type)&&Zp(),ln(e),null;case 19:if(rt(ut),i=e.memoizedState,i===null)return ln(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)hu(i,!1);else{if(Ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=om(t),o!==null){for(e.flags|=128,hu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qe(ut,ut.current&1|2),e.child}t=t.sibling}i.tail!==null&&St()>Yl&&(e.flags|=128,r=!0,hu(i,!1),e.lanes=4194304)}else{if(!r)if(t=om(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ot)return ln(e),null}else 2*St()-i.renderingStartTime>Yl&&n!==1073741824&&(e.flags|=128,r=!0,hu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=St(),e.sibling=null,n=ut.current,Qe(ut,r?n&1|2:n&1),e):(ln(e),null);case 22:case 23:return X_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qn&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function M6(t,e){switch(N_(e),e.tag){case 1:return Mn(e.type)&&Zp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Kl(),rt(On),rt(gn),F_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $_(e),null;case 13:if(rt(ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Gl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return rt(ut),null;case 4:return Kl(),null;case 10:return O_(e.type._context),null;case 22:case 23:return X_(),null;case 24:return null;default:return null}}var kf=!1,hn=!1,V6=typeof WeakSet=="function"?WeakSet:Set,le=null;function vl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wt(t,e,r)}else n.current=null}function Nx(t,e,n){try{n()}catch(r){wt(t,e,r)}}var iI=!1;function L6(t,e){if(px=Qp,t=WN(),A_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,m=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mx={focusedElem:t,selectionRange:n},Qp=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,_=e.stateNode,x=_.getSnapshotBeforeUpdate(e.elementType===e.type?y:_r(e.type,y),w);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(S){wt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return v=iI,iI=!1,v}function zu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Nx(e,n,i)}s=s.next}while(s!==r)}}function wg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Uk(t){var e=t.alternate;e!==null&&(t.alternate=null,Uk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mr],delete e[gd],delete e[vx],delete e[w6],delete e[_6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bk(t){return t.tag===5||t.tag===3||t.tag===4}function oI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jp));else if(r!==4&&(t=t.child,t!==null))for(Dx(t,e,n),t=t.sibling;t!==null;)Dx(t,e,n),t=t.sibling}function jx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jx(t,e,n),t=t.sibling;t!==null;)jx(t,e,n),t=t.sibling}var Kt=null,br=!1;function ni(t,e,n){for(n=n.child;n!==null;)zk(t,e,n),n=n.sibling}function zk(t,e,n){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(hg,n)}catch{}switch(n.tag){case 5:hn||vl(n,e);case 6:var r=Kt,s=br;Kt=null,ni(t,e,n),Kt=r,br=s,Kt!==null&&(br?(t=Kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(br?(t=Kt,n=n.stateNode,t.nodeType===8?Rv(t.parentNode,n):t.nodeType===1&&Rv(t,n),dd(t)):Rv(Kt,n.stateNode));break;case 4:r=Kt,s=br,Kt=n.stateNode.containerInfo,br=!0,ni(t,e,n),Kt=r,br=s;break;case 0:case 11:case 14:case 15:if(!hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Nx(n,e,o),s=s.next}while(s!==r)}ni(t,e,n);break;case 1:if(!hn&&(vl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){wt(n,e,a)}ni(t,e,n);break;case 21:ni(t,e,n);break;case 22:n.mode&1?(hn=(r=hn)||n.memoizedState!==null,ni(t,e,n),hn=r):ni(t,e,n);break;default:ni(t,e,n)}}function aI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new V6),e.forEach(function(r){var s=H6.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function xr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kt=a.stateNode,br=!1;break e;case 3:Kt=a.stateNode.containerInfo,br=!0;break e;case 4:Kt=a.stateNode.containerInfo,br=!0;break e}a=a.return}if(Kt===null)throw Error(J(160));zk(i,o,s),Kt=null,br=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){wt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qk(e,t),e=e.sibling}function qk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xr(e,t),jr(t),r&4){try{zu(3,t,t.return),wg(3,t)}catch(y){wt(t,t.return,y)}try{zu(5,t,t.return)}catch(y){wt(t,t.return,y)}}break;case 1:xr(e,t),jr(t),r&512&&n!==null&&vl(n,n.return);break;case 5:if(xr(e,t),jr(t),r&512&&n!==null&&vl(n,n.return),t.flags&32){var s=t.stateNode;try{ad(s,"")}catch(y){wt(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&hN(s,i),sx(a,o);var c=sx(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?yN(s,h):d==="dangerouslySetInnerHTML"?mN(s,h):d==="children"?ad(s,h):g_(s,d,h,c)}switch(a){case"input":Z0(s,i);break;case"textarea":fN(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Tl(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Tl(s,!!i.multiple,i.defaultValue,!0):Tl(s,!!i.multiple,i.multiple?[]:"",!1))}s[gd]=i}catch(y){wt(t,t.return,y)}}break;case 6:if(xr(e,t),jr(t),r&4){if(t.stateNode===null)throw Error(J(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){wt(t,t.return,y)}}break;case 3:if(xr(e,t),jr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{dd(e.containerInfo)}catch(y){wt(t,t.return,y)}break;case 4:xr(e,t),jr(t);break;case 13:xr(e,t),jr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Q_=St())),r&4&&aI(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(hn=(c=hn)||d,xr(e,t),hn=c):xr(e,t),jr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(le=t,d=t.child;d!==null;){for(h=le=d;le!==null;){switch(m=le,g=m.child,m.tag){case 0:case 11:case 14:case 15:zu(4,m,m.return);break;case 1:vl(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){wt(r,n,y)}}break;case 5:vl(m,m.return);break;case 22:if(m.memoizedState!==null){cI(h);continue}}g!==null?(g.return=m,le=g):cI(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=gN("display",o))}catch(y){wt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){wt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:xr(e,t),jr(t),r&4&&aI(t);break;case 21:break;default:xr(e,t),jr(t)}}function jr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Bk(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ad(s,""),r.flags&=-33);var i=oI(t);jx(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=oI(t);Dx(t,a,o);break;default:throw Error(J(161))}}catch(l){wt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $6(t,e,n){le=t,Wk(t)}function Wk(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var s=le,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||kf;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||hn;a=kf;var c=hn;if(kf=o,(hn=l)&&!c)for(le=s;le!==null;)o=le,l=o.child,o.tag===22&&o.memoizedState!==null?uI(s):l!==null?(l.return=o,le=l):uI(s);for(;i!==null;)le=i,Wk(i),i=i.sibling;le=s,kf=a,hn=c}lI(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,le=i):lI(t)}}function lI(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||wg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!hn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:_r(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&GS(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}GS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&dd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}hn||e.flags&512&&kx(e)}catch(m){wt(e,e.return,m)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function cI(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function uI(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wg(4,e)}catch(l){wt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){wt(e,s,l)}}var i=e.return;try{kx(e)}catch(l){wt(e,i,l)}break;case 5:var o=e.return;try{kx(e)}catch(l){wt(e,o,l)}}}catch(l){wt(e,e.return,l)}if(e===t){le=null;break}var a=e.sibling;if(a!==null){a.return=e.return,le=a;break}le=e.return}}var F6=Math.ceil,cm=Fs.ReactCurrentDispatcher,H_=Fs.ReactCurrentOwner,lr=Fs.ReactCurrentBatchConfig,$e=0,Bt=null,Nt=null,Xt=0,qn=0,xl=ro(0),Ot=0,bd=null,Jo=0,_g=0,K_=0,qu=null,An=null,Q_=0,Yl=1/0,rs=null,um=!1,Ox=null,ki=null,Df=!1,Ti=null,dm=0,Wu=0,Mx=null,_p=-1,bp=0;function En(){return $e&6?St():_p!==-1?_p:_p=St()}function Di(t){return t.mode&1?$e&2&&Xt!==0?Xt&-Xt:E6.transition!==null?(bp===0&&(bp=AN()),bp):(t=qe,t!==0||(t=window.event,t=t===void 0?16:MN(t.type)),t):1}function Ir(t,e,n,r){if(50<Wu)throw Wu=0,Mx=null,Error(J(185));sh(t,n,r),(!($e&2)||t!==Bt)&&(t===Bt&&(!($e&2)&&(_g|=n),Ot===4&&mi(t,Xt)),Vn(t,r),n===1&&$e===0&&!(e.mode&1)&&(Yl=St()+500,yg&&so()))}function Vn(t,e){var n=t.callbackNode;EU(t,e);var r=Kp(t,t===Bt?Xt:0);if(r===0)n!==null&&xS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xS(n),e===1)t.tag===0?b6(dI.bind(null,t)):tk(dI.bind(null,t)),v6(function(){!($e&6)&&so()}),n=null;else{switch(RN(r)){case 1:n=__;break;case 4:n=CN;break;case 16:n=Hp;break;case 536870912:n=PN;break;default:n=Hp}n=Zk(n,Gk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Gk(t,e){if(_p=-1,bp=0,$e&6)throw Error(J(327));var n=t.callbackNode;if(Al()&&t.callbackNode!==n)return null;var r=Kp(t,t===Bt?Xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hm(t,r);else{e=r;var s=$e;$e|=2;var i=Kk();(Bt!==t||Xt!==e)&&(rs=null,Yl=St()+500,zo(t,e));do try{z6();break}catch(a){Hk(t,a)}while(1);j_(),cm.current=i,$e=s,Nt!==null?e=0:(Bt=null,Xt=0,e=Ot)}if(e!==0){if(e===2&&(s=cx(t),s!==0&&(r=s,e=Vx(t,s))),e===1)throw n=bd,zo(t,0),mi(t,r),Vn(t,St()),n;if(e===6)mi(t,r);else{if(s=t.current.alternate,!(r&30)&&!U6(s)&&(e=hm(t,r),e===2&&(i=cx(t),i!==0&&(r=i,e=Vx(t,i))),e===1))throw n=bd,zo(t,0),mi(t,r),Vn(t,St()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:Eo(t,An,rs);break;case 3:if(mi(t,r),(r&130023424)===r&&(e=Q_+500-St(),10<e)){if(Kp(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){En(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yx(Eo.bind(null,t,An,rs),e);break}Eo(t,An,rs);break;case 4:if(mi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Sr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=St()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*F6(r/1960))-r,10<r){t.timeoutHandle=yx(Eo.bind(null,t,An,rs),r);break}Eo(t,An,rs);break;case 5:Eo(t,An,rs);break;default:throw Error(J(329))}}}return Vn(t,St()),t.callbackNode===n?Gk.bind(null,t):null}function Vx(t,e){var n=qu;return t.current.memoizedState.isDehydrated&&(zo(t,e).flags|=256),t=hm(t,e),t!==2&&(e=An,An=n,e!==null&&Lx(e)),t}function Lx(t){An===null?An=t:An.push.apply(An,t)}function U6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Pr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mi(t,e){for(e&=~K_,e&=~_g,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sr(e),r=1<<n;t[n]=-1,e&=~r}}function dI(t){if($e&6)throw Error(J(327));Al();var e=Kp(t,0);if(!(e&1))return Vn(t,St()),null;var n=hm(t,e);if(t.tag!==0&&n===2){var r=cx(t);r!==0&&(e=r,n=Vx(t,r))}if(n===1)throw n=bd,zo(t,0),mi(t,e),Vn(t,St()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Eo(t,An,rs),Vn(t,St()),null}function Y_(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(Yl=St()+500,yg&&so())}}function Zo(t){Ti!==null&&Ti.tag===0&&!($e&6)&&Al();var e=$e;$e|=1;var n=lr.transition,r=qe;try{if(lr.transition=null,qe=1,t)return t()}finally{qe=r,lr.transition=n,$e=e,!($e&6)&&so()}}function X_(){qn=xl.current,rt(xl)}function zo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,y6(n)),Nt!==null)for(n=Nt.return;n!==null;){var r=n;switch(N_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zp();break;case 3:Kl(),rt(On),rt(gn),F_();break;case 5:$_(r);break;case 4:Kl();break;case 13:rt(ut);break;case 19:rt(ut);break;case 10:O_(r.type._context);break;case 22:case 23:X_()}n=n.return}if(Bt=t,Nt=t=ji(t.current,null),Xt=qn=e,Ot=0,bd=null,K_=_g=Jo=0,An=qu=null,Mo!==null){for(e=0;e<Mo.length;e++)if(n=Mo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Mo=null}return t}function Hk(t,e){do{var n=Nt;try{if(j_(),vp.current=lm,am){for(var r=pt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}am=!1}if(Xo=0,$t=jt=pt=null,Bu=!1,xd=0,H_.current=null,n===null||n.return===null){Ot=1,bd=e,Nt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Xt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=JS(o);if(g!==null){g.flags&=-257,ZS(g,o,a,i,e),g.mode&1&&XS(i,c,e),e=g,l=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){XS(i,c,e),J_();break e}l=Error(J(426))}}else if(ot&&a.mode&1){var w=JS(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),ZS(w,o,a,i,e),k_(Ql(l,a));break e}}i=l=Ql(l,a),Ot!==4&&(Ot=2),qu===null?qu=[i]:qu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=Rk(i,l,e);WS(i,_);break e;case 1:a=l;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ki===null||!ki.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=Nk(i,a,e);WS(i,S);break e}}i=i.return}while(i!==null)}Yk(n)}catch(A){e=A,Nt===n&&n!==null&&(Nt=n=n.return);continue}break}while(1)}function Kk(){var t=cm.current;return cm.current=lm,t===null?lm:t}function J_(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Bt===null||!(Jo&268435455)&&!(_g&268435455)||mi(Bt,Xt)}function hm(t,e){var n=$e;$e|=2;var r=Kk();(Bt!==t||Xt!==e)&&(rs=null,zo(t,e));do try{B6();break}catch(s){Hk(t,s)}while(1);if(j_(),$e=n,cm.current=r,Nt!==null)throw Error(J(261));return Bt=null,Xt=0,Ot}function B6(){for(;Nt!==null;)Qk(Nt)}function z6(){for(;Nt!==null&&!pU();)Qk(Nt)}function Qk(t){var e=Jk(t.alternate,t,qn);t.memoizedProps=t.pendingProps,e===null?Yk(t):Nt=e,H_.current=null}function Yk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=M6(n,e),n!==null){n.flags&=32767,Nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ot=6,Nt=null;return}}else if(n=O6(n,e,qn),n!==null){Nt=n;return}if(e=e.sibling,e!==null){Nt=e;return}Nt=e=t}while(e!==null);Ot===0&&(Ot=5)}function Eo(t,e,n){var r=qe,s=lr.transition;try{lr.transition=null,qe=1,q6(t,e,n,r)}finally{lr.transition=s,qe=r}return null}function q6(t,e,n,r){do Al();while(Ti!==null);if($e&6)throw Error(J(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(TU(t,i),t===Bt&&(Nt=Bt=null,Xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Df||(Df=!0,Zk(Hp,function(){return Al(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=lr.transition,lr.transition=null;var o=qe;qe=1;var a=$e;$e|=4,H_.current=null,L6(t,n),qk(n,t),u6(mx),Qp=!!px,mx=px=null,t.current=n,$6(n),mU(),$e=a,qe=o,lr.transition=i}else t.current=n;if(Df&&(Df=!1,Ti=t,dm=s),i=t.pendingLanes,i===0&&(ki=null),vU(n.stateNode),Vn(t,St()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(um)throw um=!1,t=Ox,Ox=null,t;return dm&1&&t.tag!==0&&Al(),i=t.pendingLanes,i&1?t===Mx?Wu++:(Wu=0,Mx=t):Wu=0,so(),null}function Al(){if(Ti!==null){var t=RN(dm),e=lr.transition,n=qe;try{if(lr.transition=null,qe=16>t?16:t,Ti===null)var r=!1;else{if(t=Ti,Ti=null,dm=0,$e&6)throw Error(J(331));var s=$e;for($e|=4,le=t.current;le!==null;){var i=le,o=i.child;if(le.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(le=c;le!==null;){var d=le;switch(d.tag){case 0:case 11:case 15:zu(8,d,i)}var h=d.child;if(h!==null)h.return=d,le=h;else for(;le!==null;){d=le;var m=d.sibling,g=d.return;if(Uk(d),d===c){le=null;break}if(m!==null){m.return=g,le=m;break}le=g}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,le=o;else e:for(;le!==null;){if(i=le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:zu(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,le=_;break e}le=i.return}}var x=t.current;for(le=x;le!==null;){o=le;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,le=b;else e:for(o=x;le!==null;){if(a=le,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wg(9,a)}}catch(A){wt(a,a.return,A)}if(a===o){le=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,le=S;break e}le=a.return}}if($e=s,so(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(hg,t)}catch{}r=!0}return r}finally{qe=n,lr.transition=e}}return!1}function hI(t,e,n){e=Ql(n,e),e=Rk(t,e,1),t=Ni(t,e,1),e=En(),t!==null&&(sh(t,1,e),Vn(t,e))}function wt(t,e,n){if(t.tag===3)hI(t,t,n);else for(;e!==null;){if(e.tag===3){hI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ki===null||!ki.has(r))){t=Ql(n,t),t=Nk(e,t,1),e=Ni(e,t,1),t=En(),e!==null&&(sh(e,1,t),Vn(e,t));break}}e=e.return}}function W6(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=En(),t.pingedLanes|=t.suspendedLanes&n,Bt===t&&(Xt&n)===n&&(Ot===4||Ot===3&&(Xt&130023424)===Xt&&500>St()-Q_?zo(t,0):K_|=n),Vn(t,e)}function Xk(t,e){e===0&&(t.mode&1?(e=Ef,Ef<<=1,!(Ef&130023424)&&(Ef=4194304)):e=1);var n=En();t=Is(t,e),t!==null&&(sh(t,e,n),Vn(t,n))}function G6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Xk(t,n)}function H6(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),Xk(t,n)}var Jk;Jk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||On.current)Nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nn=!1,j6(t,e,n);Nn=!!(t.flags&131072)}else Nn=!1,ot&&e.flags&1048576&&nk(e,nm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;wp(t,e),t=e.pendingProps;var s=Wl(e,gn.current);Pl(e,n),s=B_(null,e,r,t,s,n);var i=z_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mn(r)?(i=!0,em(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,V_(e),s.updater=xg,e.stateNode=s,s._reactInternals=e,Tx(e,r,t,n),e=Cx(null,e,r,!0,i,n)):(e.tag=0,ot&&i&&R_(e),bn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(wp(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Q6(r),t=_r(r,t),s){case 0:e=Ix(null,e,r,t,n);break e;case 1:e=nI(null,e,r,t,n);break e;case 11:e=eI(null,e,r,t,n);break e;case 14:e=tI(null,e,r,_r(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_r(r,s),Ix(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_r(r,s),nI(t,e,r,s,n);case 3:e:{if(Ok(e),t===null)throw Error(J(387));r=e.pendingProps,i=e.memoizedState,s=i.element,lk(t,e),im(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ql(Error(J(423)),e),e=rI(t,e,r,n,s);break e}else if(r!==s){s=Ql(Error(J(424)),e),e=rI(t,e,r,n,s);break e}else for(Gn=Ri(e.stateNode.containerInfo.firstChild),Kn=e,ot=!0,Er=null,n=ok(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gl(),r===s){e=Cs(t,e,n);break e}bn(t,e,r,n)}e=e.child}return e;case 5:return ck(e),t===null&&_x(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gx(r,s)?o=null:i!==null&&gx(r,i)&&(e.flags|=32),jk(t,e),bn(t,e,o,n),e.child;case 6:return t===null&&_x(e),null;case 13:return Mk(t,e,n);case 4:return L_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hl(e,null,r,n):bn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_r(r,s),eI(t,e,r,s,n);case 7:return bn(t,e,e.pendingProps,n),e.child;case 8:return bn(t,e,e.pendingProps.children,n),e.child;case 12:return bn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Qe(rm,r._currentValue),r._currentValue=o,i!==null)if(Pr(i.value,o)){if(i.children===s.children&&!On.current){e=Cs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=vs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),bx(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(J(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),bx(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Pl(e,n),s=ur(s),r=r(s),e.flags|=1,bn(t,e,r,n),e.child;case 14:return r=e.type,s=_r(r,e.pendingProps),s=_r(r.type,s),tI(t,e,r,s,n);case 15:return kk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_r(r,s),wp(t,e),e.tag=1,Mn(r)?(t=!0,em(e)):t=!1,Pl(e,n),Ak(e,r,s),Tx(e,r,s,n),Cx(null,e,r,!0,t,n);case 19:return Vk(t,e,n);case 22:return Dk(t,e,n)}throw Error(J(156,e.tag))};function Zk(t,e){return IN(t,e)}function K6(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(t,e,n,r){return new K6(t,e,n,r)}function Z_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Q6(t){if(typeof t=="function")return Z_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===v_)return 11;if(t===x_)return 14}return 2}function ji(t,e){var n=t.alternate;return n===null?(n=ar(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ep(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Z_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case cl:return qo(n.children,s,i,e);case y_:o=8,s|=8;break;case K0:return t=ar(12,n,e,s|2),t.elementType=K0,t.lanes=i,t;case Q0:return t=ar(13,n,e,s),t.elementType=Q0,t.lanes=i,t;case Y0:return t=ar(19,n,e,s),t.elementType=Y0,t.lanes=i,t;case cN:return bg(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case aN:o=10;break e;case lN:o=9;break e;case v_:o=11;break e;case x_:o=14;break e;case di:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=ar(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function qo(t,e,n,r){return t=ar(7,t,r,e),t.lanes=n,t}function bg(t,e,n,r){return t=ar(22,t,r,e),t.elementType=cN,t.lanes=n,t.stateNode={isHidden:!1},t}function Lv(t,e,n){return t=ar(6,t,null,e),t.lanes=n,t}function $v(t,e,n){return e=ar(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Y6(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xv(0),this.expirationTimes=xv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xv(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function eb(t,e,n,r,s,i,o,a,l){return t=new Y6(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ar(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},V_(i),t}function X6(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ll,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function e2(t){if(!t)return Bi;t=t._reactInternals;e:{if(wa(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(Mn(n))return ek(t,n,e)}return e}function t2(t,e,n,r,s,i,o,a,l){return t=eb(n,r,!0,t,s,i,o,a,l),t.context=e2(null),n=t.current,r=En(),s=Di(n),i=vs(r,s),i.callback=e??null,Ni(n,i,s),t.current.lanes=s,sh(t,s,r),Vn(t,r),t}function Eg(t,e,n,r){var s=e.current,i=En(),o=Di(s);return n=e2(n),e.context===null?e.context=n:e.pendingContext=n,e=vs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ni(s,e,o),t!==null&&(Ir(t,s,o,i),yp(t,s,o)),o}function fm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tb(t,e){fI(t,e),(t=t.alternate)&&fI(t,e)}function J6(){return null}var n2=typeof reportError=="function"?reportError:function(t){console.error(t)};function nb(t){this._internalRoot=t}Tg.prototype.render=nb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Eg(t,e,null,null)};Tg.prototype.unmount=nb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zo(function(){Eg(null,t,null,null)}),e[Ss]=null}};function Tg(t){this._internalRoot=t}Tg.prototype.unstable_scheduleHydration=function(t){if(t){var e=DN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pi.length&&e!==0&&e<pi[n].priority;n++);pi.splice(n,0,t),n===0&&ON(t)}};function rb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pI(){}function Z6(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=fm(o);i.call(c)}}var o=t2(e,r,t,0,null,!1,!1,"",pI);return t._reactRootContainer=o,t[Ss]=o.current,pd(t.nodeType===8?t.parentNode:t),Zo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=fm(l);a.call(c)}}var l=eb(t,0,!1,null,null,!1,!1,"",pI);return t._reactRootContainer=l,t[Ss]=l.current,pd(t.nodeType===8?t.parentNode:t),Zo(function(){Eg(e,l,n,r)}),l}function Ig(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=fm(o);a.call(l)}}Eg(e,o,t,s)}else o=Z6(n,e,t,s,r);return fm(o)}NN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Cu(e.pendingLanes);n!==0&&(b_(e,n|1),Vn(e,St()),!($e&6)&&(Yl=St()+500,so()))}break;case 13:Zo(function(){var r=Is(t,1);if(r!==null){var s=En();Ir(r,t,1,s)}}),tb(t,1)}};E_=function(t){if(t.tag===13){var e=Is(t,134217728);if(e!==null){var n=En();Ir(e,t,134217728,n)}tb(t,134217728)}};kN=function(t){if(t.tag===13){var e=Di(t),n=Is(t,e);if(n!==null){var r=En();Ir(n,t,e,r)}tb(t,e)}};DN=function(){return qe};jN=function(t,e){var n=qe;try{return qe=t,e()}finally{qe=n}};ox=function(t,e,n){switch(e){case"input":if(Z0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=gg(r);if(!s)throw Error(J(90));dN(r),Z0(r,s)}}}break;case"textarea":fN(t,n);break;case"select":e=n.value,e!=null&&Tl(t,!!n.multiple,e,!1)}};wN=Y_;_N=Zo;var eB={usingClientEntryPoint:!1,Events:[oh,fl,gg,vN,xN,Y_]},fu={findFiberByHostInstance:Oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tB={bundleType:fu.bundleType,version:fu.version,rendererPackageName:fu.rendererPackageName,rendererConfig:fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=TN(t),t===null?null:t.stateNode},findFiberByHostInstance:fu.findFiberByHostInstance||J6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jf.isDisabled&&jf.supportsFiber)try{hg=jf.inject(tB),Fr=jf}catch{}}er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eB;er.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rb(e))throw Error(J(200));return X6(t,e,null,n)};er.createRoot=function(t,e){if(!rb(t))throw Error(J(299));var n=!1,r="",s=n2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=eb(t,1,!1,null,null,n,!1,r,s),t[Ss]=e.current,pd(t.nodeType===8?t.parentNode:t),new nb(e)};er.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=TN(e),t=t===null?null:t.stateNode,t};er.flushSync=function(t){return Zo(t)};er.hydrate=function(t,e,n){if(!Sg(e))throw Error(J(200));return Ig(null,t,e,!0,n)};er.hydrateRoot=function(t,e,n){if(!rb(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=n2;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=t2(e,null,t,1,n??null,s,!1,i,o),t[Ss]=e.current,pd(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Tg(e)};er.render=function(t,e,n){if(!Sg(e))throw Error(J(200));return Ig(null,t,e,!1,n)};er.unmountComponentAtNode=function(t){if(!Sg(t))throw Error(J(40));return t._reactRootContainer?(Zo(function(){Ig(null,null,t,!1,function(){t._reactRootContainer=null,t[Ss]=null})}),!0):!1};er.unstable_batchedUpdates=Y_;er.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sg(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Ig(t,e,n,!1,r)};er.version="18.3.1-next-f1338f8080-20240426";function r2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r2)}catch(t){console.error(t)}}r2(),rN.exports=er;var Nr=rN.exports;const Cg=WR(Nr);var mI=Nr;G0.createRoot=mI.createRoot,G0.hydrateRoot=mI.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ed.apply(this,arguments)}var Si;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Si||(Si={}));const gI="popstate";function nB(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return $x("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:pm(s)}return sB(e,n,null,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function s2(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rB(){return Math.random().toString(36).substr(2,8)}function yI(t,e){return{usr:t.state,key:t.key,idx:e}}function $x(t,e,n,r){return n===void 0&&(n=null),Ed({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ic(e):e,{state:n,key:e&&e.key||r||rB()})}function pm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ic(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function sB(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Si.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Ed({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Si.Pop;let w=d(),_=w==null?null:w-c;c=w,l&&l({action:a,location:y.location,delta:_})}function m(w,_){a=Si.Push;let x=$x(y.location,w,_);n&&n(x,w),c=d()+1;let b=yI(x,c),S=y.createHref(x);try{o.pushState(b,"",S)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(S)}i&&l&&l({action:a,location:y.location,delta:1})}function g(w,_){a=Si.Replace;let x=$x(y.location,w,_);n&&n(x,w),c=d();let b=yI(x,c),S=y.createHref(x);o.replaceState(b,"",S),i&&l&&l({action:a,location:y.location,delta:0})}function v(w){let _=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof w=="string"?w:pm(w);return x=x.replace(/ $/,"%20"),mt(_,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,_)}let y={get action(){return a},get location(){return t(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(gI,h),l=w,()=>{s.removeEventListener(gI,h),l=null}},createHref(w){return e(s,w)},createURL:v,encodeLocation(w){let _=v(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:g,go(w){return o.go(w)}};return y}var vI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(vI||(vI={}));function iB(t,e,n){return n===void 0&&(n="/"),oB(t,e,n,!1)}function oB(t,e,n,r){let s=typeof e=="string"?Ic(e):e,i=Xl(s.pathname||"/",n);if(i==null)return null;let o=i2(t);aB(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=vB(i);a=gB(o[l],c,r)}return a}function i2(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(mt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Oi([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(mt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),i2(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:pB(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of o2(i.path))s(i,o,l)}),e}function o2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=o2(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function aB(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mB(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lB=/^:[\w-]+$/,cB=3,uB=2,dB=1,hB=10,fB=-2,xI=t=>t==="*";function pB(t,e){let n=t.split("/"),r=n.length;return n.some(xI)&&(r+=fB),e&&(r+=uB),n.filter(s=>!xI(s)).reduce((s,i)=>s+(lB.test(i)?cB:i===""?dB:hB),r)}function mB(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function gB(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=mm({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=mm({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Oi([i,h.pathname]),pathnameBase:bB(Oi([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Oi([i,h.pathnameBase]))}return o}function mm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=yB(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:m,isOptional:g}=d;if(m==="*"){let y=a[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const v=a[h];return g&&!v?c[m]=void 0:c[m]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function yB(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),s2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function vB(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return s2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function xB(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ic(t):t;return{pathname:n?n.startsWith("/")?n:wB(n,e):e,search:EB(r),hash:TB(s)}}function wB(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Fv(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _B(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sb(t,e){let n=_B(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ib(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ic(t):(s=Ed({},t),mt(!s.pathname||!s.pathname.includes("?"),Fv("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),Fv("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),Fv("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=xB(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Oi=t=>t.join("/").replace(/\/\/+/g,"/"),bB=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),EB=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TB=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SB(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const a2=["post","put","patch","delete"];new Set(a2);const IB=["get",...a2];new Set(IB);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Td(){return Td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Td.apply(this,arguments)}const Pg=p.createContext(null),l2=p.createContext(null),Us=p.createContext(null),Ag=p.createContext(null),Xr=p.createContext({outlet:null,matches:[],isDataRoute:!1}),c2=p.createContext(null);function CB(t,e){let{relative:n}=e===void 0?{}:e;Cc()||mt(!1);let{basename:r,navigator:s}=p.useContext(Us),{hash:i,pathname:o,search:a}=Rg(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Oi([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Cc(){return p.useContext(Ag)!=null}function io(){return Cc()||mt(!1),p.useContext(Ag).location}function u2(t){p.useContext(Us).static||p.useLayoutEffect(t)}function $n(){let{isDataRoute:t}=p.useContext(Xr);return t?BB():PB()}function PB(){Cc()||mt(!1);let t=p.useContext(Pg),{basename:e,future:n,navigator:r}=p.useContext(Us),{matches:s}=p.useContext(Xr),{pathname:i}=io(),o=JSON.stringify(sb(s,n.v7_relativeSplatPath)),a=p.useRef(!1);return u2(()=>{a.current=!0}),p.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=ib(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Oi([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}const AB=p.createContext(null);function RB(t){let e=p.useContext(Xr).outlet;return e&&p.createElement(AB.Provider,{value:t},e)}function ob(){let{matches:t}=p.useContext(Xr),e=t[t.length-1];return e?e.params:{}}function Rg(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=p.useContext(Us),{matches:s}=p.useContext(Xr),{pathname:i}=io(),o=JSON.stringify(sb(s,r.v7_relativeSplatPath));return p.useMemo(()=>ib(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function NB(t,e){return kB(t,e)}function kB(t,e,n,r){Cc()||mt(!1);let{navigator:s}=p.useContext(Us),{matches:i}=p.useContext(Xr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=io(),d;if(e){var h;let w=typeof e=="string"?Ic(e):e;l==="/"||(h=w.pathname)!=null&&h.startsWith(l)||mt(!1),d=w}else d=c;let m=d.pathname||"/",g=m;if(l!=="/"){let w=l.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=iB(t,{pathname:g}),y=VB(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Oi([l,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Oi([l,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&y?p.createElement(Ag.Provider,{value:{location:Td({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Si.Pop}},y):y}function DB(){let t=UB(),e=SB(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),n?p.createElement("pre",{style:s},n):null,i)}const jB=p.createElement(DB,null);class OB extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?p.createElement(Xr.Provider,{value:this.props.routeContext},p.createElement(c2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MB(t){let{routeContext:e,match:n,children:r}=t,s=p.useContext(Pg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(Xr.Provider,{value:e},r)}function VB(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||mt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:m,errors:g}=n,v=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let g,v=!1,y=null,w=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||jB,l&&(c<0&&m===0?(zB("route-fallback",!1),v=!0,w=null):c===m&&(v=!0,w=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),x=()=>{let b;return g?b=y:v?b=w:h.route.Component?b=p.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,p.createElement(MB,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?p.createElement(OB,{location:n.location,revalidation:n.revalidation,component:y,error:g,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}var d2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(d2||{}),gm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gm||{});function LB(t){let e=p.useContext(Pg);return e||mt(!1),e}function $B(t){let e=p.useContext(l2);return e||mt(!1),e}function FB(t){let e=p.useContext(Xr);return e||mt(!1),e}function h2(t){let e=FB(),n=e.matches[e.matches.length-1];return n.route.id||mt(!1),n.route.id}function UB(){var t;let e=p.useContext(c2),n=$B(gm.UseRouteError),r=h2(gm.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function BB(){let{router:t}=LB(d2.UseNavigateStable),e=h2(gm.UseNavigateStable),n=p.useRef(!1);return u2(()=>{n.current=!0}),p.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Td({fromRouteId:e},i)))},[t,e])}const wI={};function zB(t,e,n){!e&&!wI[t]&&(wI[t]=!0)}function qB(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function _I(t){let{to:e,replace:n,state:r,relative:s}=t;Cc()||mt(!1);let{future:i,static:o}=p.useContext(Us),{matches:a}=p.useContext(Xr),{pathname:l}=io(),c=$n(),d=ib(e,sb(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return p.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function Ng(t){return RB(t.context)}function We(t){mt(!1)}function WB(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Si.Pop,navigator:i,static:o=!1,future:a}=t;Cc()&&mt(!1);let l=e.replace(/^\/*/,"/"),c=p.useMemo(()=>({basename:l,navigator:i,static:o,future:Td({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Ic(r));let{pathname:d="/",search:h="",hash:m="",state:g=null,key:v="default"}=r,y=p.useMemo(()=>{let w=Xl(d,l);return w==null?null:{location:{pathname:w,search:h,hash:m,state:g,key:v},navigationType:s}},[l,d,h,m,g,v,s]);return y==null?null:p.createElement(Us.Provider,{value:c},p.createElement(Ag.Provider,{children:n,value:y}))}function GB(t){let{children:e,location:n}=t;return NB(Fx(e),n)}new Promise(()=>{});function Fx(t,e){e===void 0&&(e=[]);let n=[];return p.Children.forEach(t,(r,s)=>{if(!p.isValidElement(r))return;let i=[...e,s];if(r.type===p.Fragment){n.push.apply(n,Fx(r.props.children,i));return}r.type!==We&&mt(!1),!r.props.index||!r.props.children||mt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fx(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ym(){return ym=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ym.apply(this,arguments)}function f2(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function HB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function KB(t,e){return t.button===0&&(!e||e==="_self")&&!HB(t)}const QB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],YB=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],XB="6";try{window.__reactRouterVersion=XB}catch{}const JB=p.createContext({isTransitioning:!1}),ZB="startTransition",bI=rh[ZB];function e9(t){let{basename:e,children:n,future:r,window:s}=t,i=p.useRef();i.current==null&&(i.current=nB({window:s,v5Compat:!0}));let o=i.current,[a,l]=p.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=p.useCallback(h=>{c&&bI?bI(()=>l(h)):l(h)},[l,c]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>qB(r),[r]),p.createElement(WB,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const t9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",n9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Me=p.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,m=f2(e,QB),{basename:g}=p.useContext(Us),v,y=!1;if(typeof c=="string"&&n9.test(c)&&(v=c,t9))try{let b=new URL(window.location.href),S=c.startsWith("//")?new URL(b.protocol+c):new URL(c),A=Xl(S.pathname,g);S.origin===b.origin&&A!=null?c=A+S.search+S.hash:y=!0}catch{}let w=CB(c,{relative:s}),_=s9(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function x(b){r&&r(b),b.defaultPrevented||_(b)}return p.createElement("a",ym({},m,{href:v||w,onClick:y||i?r:x,ref:n,target:l}))}),gi=p.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,h=f2(e,YB),m=Rg(l,{relative:h.relative}),g=io(),v=p.useContext(l2),{navigator:y,basename:w}=p.useContext(Us),_=v!=null&&i9(m)&&c===!0,x=y.encodeLocation?y.encodeLocation(m).pathname:m.pathname,b=g.pathname,S=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(b=b.toLowerCase(),S=S?S.toLowerCase():null,x=x.toLowerCase()),S&&w&&(S=Xl(S,w)||S);const A=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let D=b===x||!o&&b.startsWith(x)&&b.charAt(A)==="/",C=S!=null&&(S===x||!o&&S.startsWith(x)&&S.charAt(x.length)==="/"),I={isActive:D,isPending:C,isTransitioning:_},P=D?r:void 0,R;typeof i=="function"?R=i(I):R=[i,D?"active":null,C?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(I):a;return p.createElement(Me,ym({},h,{"aria-current":P,className:R,ref:n,style:j,to:l,viewTransition:c}),typeof d=="function"?d(I):d)});var Ux;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ux||(Ux={}));var EI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(EI||(EI={}));function r9(t){let e=p.useContext(Pg);return e||mt(!1),e}function s9(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=$n(),c=io(),d=Rg(t,{relative:o});return p.useCallback(h=>{if(KB(h,n)){h.preventDefault();let m=r!==void 0?r:pm(c)===pm(d);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function i9(t,e){e===void 0&&(e={});let n=p.useContext(JB);n==null&&mt(!1);let{basename:r}=r9(Ux.useViewTransitionState),s=Rg(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Xl(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Xl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return mm(s.pathname,o)!=null||mm(s.pathname,i)!=null}const p2=p.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),kg=p.createContext({}),Dg=p.createContext(null),jg=typeof document<"u",ab=jg?p.useLayoutEffect:p.useEffect,m2=p.createContext({strict:!1}),lb=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o9="framerAppearId",g2="data-"+lb(o9);function a9(t,e,n,r){const{visualElement:s}=p.useContext(kg),i=p.useContext(m2),o=p.useContext(Dg),a=p.useContext(p2).reducedMotion,l=p.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;p.useInsertionEffect(()=>{c&&c.update(n,o)});const d=p.useRef(!!(n[g2]&&!window.HandoffComplete));return ab(()=>{c&&(c.render(),d.current&&c.animationState&&c.animationState.animateChanges())}),p.useEffect(()=>{c&&(c.updateFeatures(),!d.current&&c.animationState&&c.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),c}function wl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function l9(t,e,n){return p.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):wl(n)&&(n.current=r))},[e])}function Sd(t){return typeof t=="string"||Array.isArray(t)}function Og(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const cb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ub=["initial",...cb];function Mg(t){return Og(t.animate)||ub.some(e=>Sd(t[e]))}function y2(t){return!!(Mg(t)||t.variants)}function c9(t,e){if(Mg(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Sd(n)?n:void 0,animate:Sd(r)?r:void 0}}return t.inherit!==!1?e:{}}function u9(t){const{initial:e,animate:n}=c9(t,p.useContext(kg));return p.useMemo(()=>({initial:e,animate:n}),[TI(e),TI(n)])}function TI(t){return Array.isArray(t)?t.join(" "):t}const SI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Id={};for(const t in SI)Id[t]={isEnabled:e=>SI[t].some(n=>!!e[n])};function d9(t){for(const e in t)Id[e]={...Id[e],...t[e]}}const db=p.createContext({}),v2=p.createContext({}),h9=Symbol.for("motionComponentSymbol");function f9({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&d9(t);function i(a,l){let c;const d={...p.useContext(p2),...a,layoutId:p9(a)},{isStatic:h}=d,m=u9(a),g=r(a,h);if(!h&&jg){m.visualElement=a9(s,g,d,e);const v=p.useContext(v2),y=p.useContext(m2).strict;m.visualElement&&(c=m.visualElement.loadFeatures(d,y,t,v))}return p.createElement(kg.Provider,{value:m},c&&m.visualElement?p.createElement(c,{visualElement:m.visualElement,...d}):null,n(s,a,l9(g,m.visualElement,l),g,h,m.visualElement))}const o=p.forwardRef(i);return o[h9]=s,o}function p9({layoutId:t}){const e=p.useContext(db).id;return e&&t!==void 0?e+"-"+t:t}function m9(t){function e(r,s={}){return f9(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const g9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hb(t){return typeof t!="string"||t.includes("-")?!1:!!(g9.indexOf(t)>-1||/[A-Z]/.test(t))}const vm={};function y9(t){Object.assign(vm,t)}const lh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_a=new Set(lh);function x2(t,{layout:e,layoutId:n}){return _a.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!vm[t]||t==="opacity")}const Ln=t=>!!(t&&t.getVelocity),v9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},x9=lh.length;function w9(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<x9;o++){const a=lh[o];if(t[a]!==void 0){const l=v9[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const w2=t=>e=>typeof e=="string"&&e.startsWith(t),_2=w2("--"),Bx=w2("var(--"),_9=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,b9=(t,e)=>e&&typeof t=="number"?e.transform(t):t,zi=(t,e,n)=>Math.min(Math.max(n,t),e),ba={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Gu={...ba,transform:t=>zi(0,1,t)},Of={...ba,default:1},Hu=t=>Math.round(t*1e5)/1e5,Vg=/(-)?([\d]*\.?[\d])+/g,b2=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,E9=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ch(t){return typeof t=="string"}const uh=t=>({test:e=>ch(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ai=uh("deg"),Br=uh("%"),me=uh("px"),T9=uh("vh"),S9=uh("vw"),II={...Br,parse:t=>Br.parse(t)/100,transform:t=>Br.transform(t*100)},CI={...ba,transform:Math.round},E2={borderWidth:me,borderTopWidth:me,borderRightWidth:me,borderBottomWidth:me,borderLeftWidth:me,borderRadius:me,radius:me,borderTopLeftRadius:me,borderTopRightRadius:me,borderBottomRightRadius:me,borderBottomLeftRadius:me,width:me,maxWidth:me,height:me,maxHeight:me,size:me,top:me,right:me,bottom:me,left:me,padding:me,paddingTop:me,paddingRight:me,paddingBottom:me,paddingLeft:me,margin:me,marginTop:me,marginRight:me,marginBottom:me,marginLeft:me,rotate:ai,rotateX:ai,rotateY:ai,rotateZ:ai,scale:Of,scaleX:Of,scaleY:Of,scaleZ:Of,skew:ai,skewX:ai,skewY:ai,distance:me,translateX:me,translateY:me,translateZ:me,x:me,y:me,z:me,perspective:me,transformPerspective:me,opacity:Gu,originX:II,originY:II,originZ:me,zIndex:CI,fillOpacity:Gu,strokeOpacity:Gu,numOctaves:CI};function fb(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,c=!1,d=!0;for(const h in e){const m=e[h];if(_2(h)){i[h]=m;continue}const g=E2[h],v=b9(m,g);if(_a.has(h)){if(l=!0,o[h]=v,!d)continue;m!==(g.default||0)&&(d=!1)}else h.startsWith("origin")?(c=!0,a[h]=v):s[h]=v}if(e.transform||(l||r?s.transform=w9(t.transform,n,d,r):s.transform&&(s.transform="none")),c){const{originX:h="50%",originY:m="50%",originZ:g=0}=a;s.transformOrigin=`${h} ${m} ${g}`}}const pb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function T2(t,e,n){for(const r in e)!Ln(e[r])&&!x2(r,n)&&(t[r]=e[r])}function I9({transformTemplate:t},e,n){return p.useMemo(()=>{const r=pb();return fb(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function C9(t,e,n){const r=t.style||{},s={};return T2(s,r,t),Object.assign(s,I9(t,e,n)),t.transformValues?t.transformValues(s):s}function P9(t,e,n){const r={},s=C9(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const A9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||A9.has(t)}let S2=t=>!xm(t);function R9(t){t&&(S2=e=>e.startsWith("on")?!xm(e):t(e))}try{R9(require("@emotion/is-prop-valid").default)}catch{}function N9(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(S2(s)||n===!0&&xm(s)||!e&&!xm(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function PI(t,e,n){return typeof t=="string"?t:me.transform(e+n*t)}function k9(t,e,n){const r=PI(e,t.x,t.width),s=PI(n,t.y,t.height);return`${r} ${s}`}const D9={offset:"stroke-dashoffset",array:"stroke-dasharray"},j9={offset:"strokeDashoffset",array:"strokeDasharray"};function O9(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?D9:j9;t[i.offset]=me.transform(-r);const o=me.transform(e),a=me.transform(n);t[i.array]=`${o} ${a}`}function mb(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,h,m){if(fb(t,c,d,m),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:v,dimensions:y}=t;g.transform&&(y&&(v.transform=g.transform),delete g.transform),y&&(s!==void 0||i!==void 0||v.transform)&&(v.transformOrigin=k9(y,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&O9(g,o,a,l,!1)}const I2=()=>({...pb(),attrs:{}}),gb=t=>typeof t=="string"&&t.toLowerCase()==="svg";function M9(t,e,n,r){const s=p.useMemo(()=>{const i=I2();return mb(i,e,{enableHardwareAcceleration:!1},gb(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};T2(i,t.style,t),s.style={...i,...s.style}}return s}function V9(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(hb(n)?M9:P9)(r,i,o,n),d={...N9(r,typeof n=="string",t),...l,ref:s},{children:h}=r,m=p.useMemo(()=>Ln(h)?h.get():h,[h]);return p.createElement(n,{...d,children:m})}}function C2(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const P2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function A2(t,e,n,r){C2(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(P2.has(s)?s:lb(s),e.attrs[s])}function yb(t,e){const{style:n}=t,r={};for(const s in n)(Ln(n[s])||e.style&&Ln(e.style[s])||x2(s,t))&&(r[s]=n[s]);return r}function R2(t,e){const n=yb(t,e);for(const r in t)if(Ln(t[r])||Ln(e[r])){const s=lh.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function vb(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function N2(t){const e=p.useRef(null);return e.current===null&&(e.current=t()),e.current}const wm=t=>Array.isArray(t),L9=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),$9=t=>wm(t)?t[t.length-1]||0:t;function Tp(t){const e=Ln(t)?t.get():t;return L9(e)?e.toValue():e}function F9({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:U9(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const k2=t=>(e,n)=>{const r=p.useContext(kg),s=p.useContext(Dg),i=()=>F9(t,e,r,s);return n?i():N2(i)};function U9(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=Tp(i[m]);let{initial:o,animate:a}=t;const l=Mg(t),c=y2(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;return h&&typeof h!="boolean"&&!Og(h)&&(Array.isArray(h)?h:[h]).forEach(g=>{const v=vb(t,g);if(!v)return;const{transitionEnd:y,transition:w,..._}=v;for(const x in _){let b=_[x];if(Array.isArray(b)){const S=d?b.length-1:0;b=b[S]}b!==null&&(s[x]=b)}for(const x in y)s[x]=y[x]}),s}const _t=t=>t;class AI{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function B9(t){let e=new AI,n=new AI,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,c=!1,d=!1)=>{const h=d&&s,m=h?e:n;return c&&o.add(l),m.add(l)&&h&&s&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const d=e.order[c];d(l),o.has(d)&&(a.schedule(d),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const Mf=["prepare","read","update","preRender","render","postRender"],z9=40;function q9(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Mf.reduce((h,m)=>(h[m]=B9(()=>n=!0),h),{}),o=h=>i[h].process(s),a=()=>{const h=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(h-s.timestamp,z9),1),s.timestamp=h,s.isProcessing=!0,Mf.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:Mf.reduce((h,m)=>{const g=i[m];return h[m]=(v,y=!1,w=!1)=>(n||l(),g.schedule(v,y,w)),h},{}),cancel:h=>Mf.forEach(m=>i[m].cancel(h)),state:s,steps:i}}const{schedule:Ye,cancel:Ps,state:un,steps:Uv}=q9(typeof requestAnimationFrame<"u"?requestAnimationFrame:_t,!0),W9={useVisualState:k2({scrapeMotionValuesFromProps:R2,createRenderState:I2,onMount:(t,e,{renderState:n,latestValues:r})=>{Ye.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ye.render(()=>{mb(n,r,{enableHardwareAcceleration:!1},gb(e.tagName),t.transformTemplate),A2(e,n)})}})},G9={useVisualState:k2({scrapeMotionValuesFromProps:yb,createRenderState:pb})};function H9(t,{forwardMotionProps:e=!1},n,r){return{...hb(t)?W9:G9,preloadedFeatures:n,useRender:V9(e),createVisualElement:r,Component:t}}function fs(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const D2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Lg(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const K9=t=>e=>D2(e)&&t(e,Lg(e));function xs(t,e,n,r){return fs(t,e,K9(n),r)}const Q9=(t,e)=>n=>e(t(n)),Mi=(...t)=>t.reduce(Q9);function j2(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const RI=j2("dragHorizontal"),NI=j2("dragVertical");function O2(t){let e=!1;if(t==="y")e=NI();else if(t==="x")e=RI();else{const n=RI(),r=NI();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function M2(){const t=O2(!0);return t?(t(),!1):!0}class oo{constructor(e){this.isMounted=!1,this.node=e}update(){}}function kI(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||M2())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Ye.update(()=>a[r](i,o))};return xs(t.current,n,s,{passive:!t.getProps()[r]})}class Y9 extends oo{mount(){this.unmount=Mi(kI(this.node,!0),kI(this.node,!1))}unmount(){}}class X9 extends oo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mi(fs(this.node.current,"focus",()=>this.onFocus()),fs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const V2=(t,e)=>e?t===e?!0:V2(t,e.parentElement):!1;function Bv(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Lg(n))}class J9 extends oo{constructor(){super(...arguments),this.removeStartListeners=_t,this.removeEndListeners=_t,this.removeAccessibleListeners=_t,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=xs(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:h}=this.node.getProps();Ye.update(()=>{!h&&!V2(this.node.current,a.target)?d&&d(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=xs(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Mi(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Bv("up",(l,c)=>{const{onTap:d}=this.node.getProps();d&&Ye.update(()=>d(l,c))})};this.removeEndListeners(),this.removeEndListeners=fs(this.node.current,"keyup",o),Bv("down",(a,l)=>{this.startPress(a,l)})},n=fs(this.node.current,"keydown",e),r=()=>{this.isPressing&&Bv("cancel",(i,o)=>this.cancelPress(i,o))},s=fs(this.node.current,"blur",r);this.removeAccessibleListeners=Mi(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ye.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!M2()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ye.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=xs(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=fs(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Mi(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const zx=new WeakMap,zv=new WeakMap,Z9=t=>{const e=zx.get(t.target);e&&e(t)},e8=t=>{t.forEach(Z9)};function t8({root:t,...e}){const n=t||document;zv.has(n)||zv.set(n,{});const r=zv.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(e8,{root:t,...e})),r[s]}function n8(t,e,n){const r=t8(e);return zx.set(t,n),r.observe(t),()=>{zx.delete(t),r.unobserve(t)}}const r8={some:0,all:1};class s8 extends oo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:r8[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=c?d:h;m&&m(l)};return n8(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(i8(e,n))&&this.startObserver()}unmount(){}}function i8({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const o8={inView:{Feature:s8},tap:{Feature:J9},focus:{Feature:X9},hover:{Feature:Y9}};function L2(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function a8(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function l8(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function $g(t,e,n){const r=t.getProps();return vb(r,e,n!==void 0?n:r.custom,a8(t),l8(t))}let c8=_t,xb=_t;const Vi=t=>t*1e3,ws=t=>t/1e3,u8={current:!1},$2=t=>Array.isArray(t)&&typeof t[0]=="number";function F2(t){return!!(!t||typeof t=="string"&&U2[t]||$2(t)||Array.isArray(t)&&t.every(F2))}const Au=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,U2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Au([0,.65,.55,1]),circOut:Au([.55,0,1,.45]),backIn:Au([.31,.01,.66,-.59]),backOut:Au([.33,1.53,.69,.99])};function B2(t){if(t)return $2(t)?Au(t):Array.isArray(t)?t.map(B2):U2[t]}function d8(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const d=B2(a);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function h8(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const z2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,f8=1e-7,p8=12;function m8(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=z2(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>f8&&++a<p8);return o}function dh(t,e,n,r){if(t===e&&n===r)return _t;const s=i=>m8(i,0,1,t,n);return i=>i===0||i===1?i:z2(s(i),e,r)}const g8=dh(.42,0,1,1),y8=dh(0,0,.58,1),q2=dh(.42,0,.58,1),v8=t=>Array.isArray(t)&&typeof t[0]!="number",W2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,G2=t=>e=>1-t(1-e),wb=t=>1-Math.sin(Math.acos(t)),H2=G2(wb),x8=W2(wb),K2=dh(.33,1.53,.69,.99),_b=G2(K2),w8=W2(_b),_8=t=>(t*=2)<1?.5*_b(t):.5*(2-Math.pow(2,-10*(t-1))),b8={linear:_t,easeIn:g8,easeInOut:q2,easeOut:y8,circIn:wb,circInOut:x8,circOut:H2,backIn:_b,backInOut:w8,backOut:K2,anticipate:_8},DI=t=>{if(Array.isArray(t)){xb(t.length===4);const[e,n,r,s]=t;return dh(e,n,r,s)}else if(typeof t=="string")return b8[t];return t},bb=(t,e)=>n=>!!(ch(n)&&E9.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Q2=(t,e,n)=>r=>{if(!ch(r))return r;const[s,i,o,a]=r.match(Vg);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},E8=t=>zi(0,255,t),qv={...ba,transform:t=>Math.round(E8(t))},Lo={test:bb("rgb","red"),parse:Q2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+qv.transform(t)+", "+qv.transform(e)+", "+qv.transform(n)+", "+Hu(Gu.transform(r))+")"};function T8(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const qx={test:bb("#"),parse:T8,transform:Lo.transform},_l={test:bb("hsl","hue"),parse:Q2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Br.transform(Hu(e))+", "+Br.transform(Hu(n))+", "+Hu(Gu.transform(r))+")"},_n={test:t=>Lo.test(t)||qx.test(t)||_l.test(t),parse:t=>Lo.test(t)?Lo.parse(t):_l.test(t)?_l.parse(t):qx.parse(t),transform:t=>ch(t)?t:t.hasOwnProperty("red")?Lo.transform(t):_l.transform(t)},ft=(t,e,n)=>-n*t+n*e+t;function Wv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function S8({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=Wv(l,a,t+1/3),i=Wv(l,a,t),o=Wv(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Gv=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},I8=[qx,Lo,_l],C8=t=>I8.find(e=>e.test(t));function jI(t){const e=C8(t);let n=e.parse(t);return e===_l&&(n=S8(n)),n}const Y2=(t,e)=>{const n=jI(t),r=jI(e),s={...n};return i=>(s.red=Gv(n.red,r.red,i),s.green=Gv(n.green,r.green,i),s.blue=Gv(n.blue,r.blue,i),s.alpha=ft(n.alpha,r.alpha,i),Lo.transform(s))};function P8(t){var e,n;return isNaN(t)&&ch(t)&&(((e=t.match(Vg))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(b2))===null||n===void 0?void 0:n.length)||0)>0}const X2={regex:_9,countKey:"Vars",token:"${v}",parse:_t},J2={regex:b2,countKey:"Colors",token:"${c}",parse:_n.parse},Z2={regex:Vg,countKey:"Numbers",token:"${n}",parse:ba.parse};function Hv(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function _m(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Hv(n,X2),Hv(n,J2),Hv(n,Z2),n}function eD(t){return _m(t).values}function tD(t){const{values:e,numColors:n,numVars:r,tokenised:s}=_m(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(X2.token,o[l]):l<r+n?a=a.replace(J2.token,_n.transform(o[l])):a=a.replace(Z2.token,Hu(o[l]));return a}}const A8=t=>typeof t=="number"?0:t;function R8(t){const e=eD(t);return tD(t)(e.map(A8))}const qi={test:P8,parse:eD,createTransformer:tD,getAnimatableNone:R8},nD=(t,e)=>n=>`${n>0?e:t}`;function rD(t,e){return typeof t=="number"?n=>ft(t,e,n):_n.test(t)?Y2(t,e):t.startsWith("var(")?nD(t,e):iD(t,e)}const sD=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>rD(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},N8=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=rD(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},iD=(t,e)=>{const n=qi.createTransformer(e),r=_m(t),s=_m(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Mi(sD(r.values,s.values),n):nD(t,e)},Cd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},OI=(t,e)=>n=>ft(t,e,n);function k8(t){return typeof t=="number"?OI:typeof t=="string"?_n.test(t)?Y2:iD:Array.isArray(t)?sD:typeof t=="object"?N8:OI}function D8(t,e,n){const r=[],s=n||k8(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||_t:e;a=Mi(l,a)}r.push(a)}return r}function oD(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(xb(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=D8(e,r,s),a=o.length,l=c=>{let d=0;if(a>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const h=Cd(t[d],t[d+1],c);return o[d](h)};return n?c=>l(zi(t[0],t[i-1],c)):l}function j8(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Cd(0,e,r);t.push(ft(n,1,s))}}function O8(t){const e=[0];return j8(e,t.length-1),e}function M8(t,e){return t.map(n=>n*e)}function V8(t,e){return t.map(()=>e||q2).splice(0,t.length-1)}function bm({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=v8(r)?r.map(DI):DI(r),i={done:!1,value:e[0]},o=M8(n&&n.length===e.length?n:O8(e),t),a=oD(o,e,{ease:Array.isArray(s)?s:V8(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function aD(t,e){return e?t*(1e3/e):0}const L8=5;function lD(t,e,n){const r=Math.max(e-L8,0);return aD(n-t(r),e-r)}const Kv=.001,$8=.01,MI=10,F8=.05,U8=1;function B8({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i;c8(t<=Vi(MI));let o=1-e;o=zi(F8,U8,o),t=zi($8,MI,ws(t)),o<1?(s=c=>{const d=c*o,h=d*t,m=d-n,g=Wx(c,o),v=Math.exp(-h);return Kv-m/g*v},i=c=>{const h=c*o*t,m=h*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-h),y=Wx(Math.pow(c,2),o);return(-s(c)+Kv>0?-1:1)*((m-g)*v)/y}):(s=c=>{const d=Math.exp(-c*t),h=(c-n)*t+1;return-Kv+d*h},i=c=>{const d=Math.exp(-c*t),h=(n-c)*(t*t);return d*h});const a=5/t,l=q8(s,i,a);if(t=Vi(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const z8=12;function q8(t,e,n){let r=n;for(let s=1;s<z8;s++)r=r-t(r)/e(r);return r}function Wx(t,e){return t*Math.sqrt(1-e*e)}const W8=["duration","bounce"],G8=["stiffness","damping","mass"];function VI(t,e){return e.some(n=>t[n]!==void 0)}function H8(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!VI(t,G8)&&VI(t,W8)){const n=B8(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function cD({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:d,velocity:h,isResolvedFromDuration:m}=H8({...r,velocity:-ws(r.velocity||0)}),g=h||0,v=l/(2*Math.sqrt(a*c)),y=i-s,w=ws(Math.sqrt(a/c)),_=Math.abs(y)<5;n||(n=_?.01:2),e||(e=_?.005:.5);let x;if(v<1){const b=Wx(w,v);x=S=>{const A=Math.exp(-v*w*S);return i-A*((g+v*w*y)/b*Math.sin(b*S)+y*Math.cos(b*S))}}else if(v===1)x=b=>i-Math.exp(-w*b)*(y+(g+w*y)*b);else{const b=w*Math.sqrt(v*v-1);x=S=>{const A=Math.exp(-v*w*S),D=Math.min(b*S,300);return i-A*((g+v*w*y)*Math.sinh(D)+b*y*Math.cosh(D))/b}}return{calculatedDuration:m&&d||null,next:b=>{const S=x(b);if(m)o.done=b>=d;else{let A=g;b!==0&&(v<1?A=lD(x,b,S):A=0);const D=Math.abs(A)<=n,C=Math.abs(i-S)<=e;o.done=D&&C}return o.value=o.done?i:S,o}}}function LI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const h=t[0],m={done:!1,value:h},g=I=>a!==void 0&&I<a||l!==void 0&&I>l,v=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let y=n*e;const w=h+y,_=o===void 0?w:o(w);_!==w&&(y=_-h);const x=I=>-y*Math.exp(-I/r),b=I=>_+x(I),S=I=>{const P=x(I),R=b(I);m.done=Math.abs(P)<=c,m.value=m.done?_:R};let A,D;const C=I=>{g(m.value)&&(A=I,D=cD({keyframes:[m.value,v(m.value)],velocity:lD(b,I,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return C(0),{calculatedDuration:null,next:I=>{let P=!1;return!D&&A===void 0&&(P=!0,S(I),C(I)),A!==void 0&&I>A?D.next(I-A):(!P&&S(I),m)}}}const K8=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ye.update(e,!0),stop:()=>Ps(e),now:()=>un.isProcessing?un.timestamp:performance.now()}},$I=2e4;function FI(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<$I;)e+=n,r=t.next(e);return e>=$I?1/0:e}const Q8={decay:LI,inertia:LI,tween:bm,keyframes:bm,spring:cD};function Em({autoplay:t=!0,delay:e=0,driver:n=K8,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:d,onUpdate:h,...m}){let g=1,v=!1,y,w;const _=()=>{w=new Promise(q=>{y=q})};_();let x;const b=Q8[s]||bm;let S;b!==bm&&typeof r[0]!="number"&&(S=oD([0,100],r,{clamp:!1}),r=[0,100]);const A=b({...m,keyframes:r});let D;a==="mirror"&&(D=b({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let C="idle",I=null,P=null,R=null;A.calculatedDuration===null&&i&&(A.calculatedDuration=FI(A));const{calculatedDuration:j}=A;let O=1/0,k=1/0;j!==null&&(O=j+o,k=O*(i+1)-o);let W=0;const z=q=>{if(P===null)return;g>0&&(P=Math.min(P,q)),g<0&&(P=Math.min(q-k/g,P)),I!==null?W=I:W=Math.round(q-P)*g;const X=W-e*(g>=0?1:-1),K=g>=0?X<0:X>k;W=Math.max(X,0),C==="finished"&&I===null&&(W=k);let fe=W,we=A;if(i){const Ie=Math.min(W,k)/O;let xe=Math.floor(Ie),ye=Ie%1;!ye&&Ie>=1&&(ye=1),ye===1&&xe--,xe=Math.min(xe,i+1),!!(xe%2)&&(a==="reverse"?(ye=1-ye,o&&(ye-=o/O)):a==="mirror"&&(we=D)),fe=zi(0,1,ye)*O}const ge=K?{done:!1,value:r[0]}:we.next(fe);S&&(ge.value=S(ge.value));let{done:ne}=ge;!K&&j!==null&&(ne=g>=0?W>=k:W<=0);const Se=I===null&&(C==="finished"||C==="running"&&ne);return h&&h(ge.value),Se&&M(),ge},G=()=>{x&&x.stop(),x=void 0},H=()=>{C="idle",G(),y(),_(),P=R=null},M=()=>{C="finished",d&&d(),G(),y()},F=()=>{if(v)return;x||(x=n(z));const q=x.now();l&&l(),I!==null?P=q-I:(!P||C==="finished")&&(P=q),C==="finished"&&_(),R=P,I=null,C="running",x.start()};t&&F();const V={then(q,X){return w.then(q,X)},get time(){return ws(W)},set time(q){q=Vi(q),W=q,I!==null||!x||g===0?I=q:P=x.now()-q/g},get duration(){const q=A.calculatedDuration===null?FI(A):A.calculatedDuration;return ws(q)},get speed(){return g},set speed(q){q===g||!x||(g=q,V.time=ws(W))},get state(){return C},play:F,pause:()=>{C="paused",I=W},stop:()=>{v=!0,C!=="idle"&&(C="idle",c&&c(),H())},cancel:()=>{R!==null&&z(R),H()},complete:()=>{C="finished"},sample:q=>(P=0,z(q))};return V}function Y8(t){let e;return()=>(e===void 0&&(e=t()),e)}const X8=Y8(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),J8=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Vf=10,Z8=2e4,e7=(t,e)=>e.type==="spring"||t==="backgroundColor"||!F2(e.ease);function t7(t,e,{onUpdate:n,onComplete:r,...s}){if(!(X8()&&J8.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const d=()=>{l=new Promise(b=>{a=b})};d();let{keyframes:h,duration:m=300,ease:g,times:v}=s;if(e7(e,s)){const b=Em({...s,repeat:0,delay:0});let S={done:!1,value:h[0]};const A=[];let D=0;for(;!S.done&&D<Z8;)S=b.sample(D),A.push(S.value),D+=Vf;v=void 0,h=A,m=D-Vf,g="linear"}const y=d8(t.owner.current,e,h,{...s,duration:m,ease:g,times:v}),w=()=>{c=!1,y.cancel()},_=()=>{c=!0,Ye.update(w),a(),d()};return y.onfinish=()=>{c||(t.set(h8(h,s)),r&&r(),_())},{then(b,S){return l.then(b,S)},attachTimeline(b){return y.timeline=b,y.onfinish=null,_t},get time(){return ws(y.currentTime||0)},set time(b){y.currentTime=Vi(b)},get speed(){return y.playbackRate},set speed(b){y.playbackRate=b},get duration(){return ws(m)},play:()=>{o||(y.play(),Ps(w))},pause:()=>y.pause(),stop:()=>{if(o=!0,y.playState==="idle")return;const{currentTime:b}=y;if(b){const S=Em({...s,autoplay:!1});t.setWithVelocity(S.sample(b-Vf).value,S.sample(b).value,Vf)}_()},complete:()=>{c||y.finish()},cancel:_}}function n7({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:_t,pause:_t,stop:_t,then:i=>(i(),Promise.resolve()),cancel:_t,complete:_t});return e?Em({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const r7={type:"spring",stiffness:500,damping:25,restSpeed:10},s7=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),i7={type:"keyframes",duration:.8},o7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},a7=(t,{keyframes:e})=>e.length>2?i7:_a.has(t)?t.startsWith("scale")?s7(e[1]):r7:o7,Gx=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(qi.test(e)||e==="0")&&!e.startsWith("url(")),l7=new Set(["brightness","contrast","saturate","opacity"]);function c7(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Vg)||[];if(!r)return t;const s=n.replace(r,"");let i=l7.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const u7=/([a-z-]*)\(.*?\)/g,Hx={...qi,getAnimatableNone:t=>{const e=t.match(u7);return e?e.map(c7).join(" "):t}},d7={...E2,color:_n,backgroundColor:_n,outlineColor:_n,fill:_n,stroke:_n,borderColor:_n,borderTopColor:_n,borderRightColor:_n,borderBottomColor:_n,borderLeftColor:_n,filter:Hx,WebkitFilter:Hx},Eb=t=>d7[t];function uD(t,e){let n=Eb(t);return n!==Hx&&(n=qi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const dD=t=>/^0[^.\s]+$/.test(t);function h7(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||dD(t)}function f7(t,e,n,r){const s=Gx(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),h7(i[c])&&l.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&l.length&&a)for(let c=0;c<l.length;c++){const d=l[c];i[d]=uD(e,a)}return i}function p7({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function Tb(t,e){return t[e]||t.default||t}const m7={skipAnimations:!1},Sb=(t,e,n,r={})=>s=>{const i=Tb(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Vi(o);const l=f7(e,t,n,i),c=l[0],d=l[l.length-1],h=Gx(t,c),m=Gx(t,d);let g={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:v=>{e.set(v),i.onUpdate&&i.onUpdate(v)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(p7(i)||(g={...g,...a7(t,g)}),g.duration&&(g.duration=Vi(g.duration)),g.repeatDelay&&(g.repeatDelay=Vi(g.repeatDelay)),!h||!m||u8.current||i.type===!1||m7.skipAnimations)return n7(g);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const v=t7(e,t,g);if(v)return v}return Em(g)};function Tm(t){return!!(Ln(t)&&t.add)}const hD=t=>/^\-?\d*\.?\d+$/.test(t);function Ib(t,e){t.indexOf(e)===-1&&t.push(e)}function Cb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Pb{constructor(){this.subscriptions=[]}add(e){return Ib(this.subscriptions,e),()=>Cb(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const g7=t=>!isNaN(parseFloat(t));class y7{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=un;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Ye.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ye.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=g7(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Pb);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ye.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?aD(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jl(t,e){return new y7(t,e)}const fD=t=>e=>e.test(t),v7={test:t=>t==="auto",parse:t=>t},pD=[ba,me,Br,ai,S9,T9,v7],pu=t=>pD.find(fD(t)),x7=[...pD,_n,qi],w7=t=>x7.find(fD(t));function _7(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Jl(n))}function b7(t,e){const n=$g(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=$9(i[o]);_7(t,o,a)}}function E7(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],c=e[l];let d=null;Array.isArray(c)&&(d=c[0]),d===null&&(d=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),d!=null&&(typeof d=="string"&&(hD(d)||dD(d))?d=parseFloat(d):!w7(d)&&qi.test(c)&&(d=uD(l,c)),t.addValue(l,Jl(d,{owner:t})),n[l]===void 0&&(n[l]=d),d!==null&&t.setBaseTarget(l,d))}}function T7(t,e){return e?(e[t]||e.default||e).from:void 0}function S7(t,e,n){const r={};for(const s in t){const i=T7(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function I7({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function C7(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function mD(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const c=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const h in a){const m=t.getValue(h),g=a[h];if(!m||g===void 0||d&&I7(d,h))continue;const v={delay:n,elapsed:0,...Tb(i||{},h)};if(window.HandoffAppearAnimations){const _=t.getProps()[g2];if(_){const x=window.HandoffAppearAnimations(_,h,m,Ye);x!==null&&(v.elapsed=x,v.isHandoff=!0)}}let y=!v.isHandoff&&!C7(m,g);if(v.type==="spring"&&(m.getVelocity()||v.velocity)&&(y=!1),m.animation&&(y=!1),y)continue;m.start(Sb(h,m,g,t.shouldReduceMotion&&_a.has(h)?{type:!1}:v));const w=m.animation;Tm(l)&&(l.add(h),w.then(()=>l.remove(h))),c.push(w)}return o&&Promise.all(c).then(()=>{o&&b7(t,o)}),c}function Kx(t,e,n={}){const r=$g(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(mD(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=s;return P7(t,e,c+l,d,h,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,c]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function P7(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(A7).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(Kx(c,e,{...i,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function A7(t,e){return t.sortNodePosition(e)}function R7(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Kx(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Kx(t,e,n);else{const s=typeof e=="function"?$g(t,e,n.custom):e;r=Promise.all(mD(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const N7=[...cb].reverse(),k7=cb.length;function D7(t){return e=>Promise.all(e.map(({animation:n,options:r})=>R7(t,n,r)))}function j7(t){let e=D7(t);const n=M7();let r=!0;const s=(l,c)=>{const d=$g(t,c);if(d){const{transition:h,transitionEnd:m,...g}=d;l={...l,...g,...m}}return l};function i(l){e=l(t)}function o(l,c){const d=t.getProps(),h=t.getVariantContext(!0)||{},m=[],g=new Set;let v={},y=1/0;for(let _=0;_<k7;_++){const x=N7[_],b=n[x],S=d[x]!==void 0?d[x]:h[x],A=Sd(S),D=x===c?b.isActive:null;D===!1&&(y=_);let C=S===h[x]&&S!==d[x]&&A;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),b.protectedKeys={...v},!b.isActive&&D===null||!S&&!b.prevProp||Og(S)||typeof S=="boolean")continue;let P=O7(b.prevProp,S)||x===c&&b.isActive&&!C&&A||_>y&&A,R=!1;const j=Array.isArray(S)?S:[S];let O=j.reduce(s,{});D===!1&&(O={});const{prevResolvedValues:k={}}=b,W={...k,...O},z=G=>{P=!0,g.has(G)&&(R=!0,g.delete(G)),b.needsAnimating[G]=!0};for(const G in W){const H=O[G],M=k[G];if(v.hasOwnProperty(G))continue;let F=!1;wm(H)&&wm(M)?F=!L2(H,M):F=H!==M,F?H!==void 0?z(G):g.add(G):H!==void 0&&g.has(G)?z(G):b.protectedKeys[G]=!0}b.prevProp=S,b.prevResolvedValues=O,b.isActive&&(v={...v,...O}),r&&t.blockInitialAnimation&&(P=!1),P&&(!C||R)&&m.push(...j.map(G=>({animation:G,options:{type:x,...l}})))}if(g.size){const _={};g.forEach(x=>{const b=t.getBaseTarget(x);b!==void 0&&(_[x]=b)}),m.push({animation:_})}let w=!!m.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(m):Promise.resolve()}function a(l,c,d){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(g=>{var v;return(v=g.animationState)===null||v===void 0?void 0:v.setActive(l,c)}),n[l].isActive=c;const m=o(d,l);for(const g in n)n[g].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function O7(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!L2(e,t):!1}function wo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function M7(){return{animate:wo(!0),whileInView:wo(),whileHover:wo(),whileTap:wo(),whileDrag:wo(),whileFocus:wo(),exit:wo()}}class V7 extends oo{constructor(e){super(e),e.animationState||(e.animationState=j7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Og(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let L7=0;class $7 extends oo{constructor(){super(...arguments),this.id=L7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const F7={animation:{Feature:V7},exit:{Feature:$7}},UI=(t,e)=>Math.abs(t-e);function U7(t,e){const n=UI(t.x,e.x),r=UI(t.y,e.y);return Math.sqrt(n**2+r**2)}class gD{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Yv(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=U7(h.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:v}=h,{timestamp:y}=un;this.history.push({...v,timestamp:y});const{onStart:w,onMove:_}=this.handlers;m||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Qv(m,this.transformPagePoint),Ye.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Yv(h.type==="pointercancel"?this.lastMoveEventInfo:Qv(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,w),v&&v(h,w)},!D2(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Lg(e),a=Qv(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=un;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,Yv(a,this.history)),this.removeListeners=Mi(xs(this.contextWindow,"pointermove",this.handlePointerMove),xs(this.contextWindow,"pointerup",this.handlePointerUp),xs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ps(this.updatePoint)}}function Qv(t,e){return e?{point:e(t.point)}:t}function BI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Yv({point:t},e){return{point:t,delta:BI(t,yD(e)),offset:BI(t,B7(e)),velocity:z7(e,.1)}}function B7(t){return t[0]}function yD(t){return t[t.length-1]}function z7(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=yD(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Vi(e)));)n--;if(!r)return{x:0,y:0};const i=ws(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Jn(t){return t.max-t.min}function Qx(t,e=0,n=.01){return Math.abs(t-e)<=n}function zI(t,e,n,r=.5){t.origin=r,t.originPoint=ft(e.min,e.max,t.origin),t.scale=Jn(n)/Jn(e),(Qx(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ft(n.min,n.max,t.origin)-t.originPoint,(Qx(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Ku(t,e,n,r){zI(t.x,e.x,n.x,r?r.originX:void 0),zI(t.y,e.y,n.y,r?r.originY:void 0)}function qI(t,e,n){t.min=n.min+e.min,t.max=t.min+Jn(e)}function q7(t,e,n){qI(t.x,e.x,n.x),qI(t.y,e.y,n.y)}function WI(t,e,n){t.min=e.min-n.min,t.max=t.min+Jn(e)}function Qu(t,e,n){WI(t.x,e.x,n.x),WI(t.y,e.y,n.y)}function W7(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ft(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ft(n,t,r.max):Math.min(t,n)),t}function GI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function G7(t,{top:e,left:n,bottom:r,right:s}){return{x:GI(t.x,n,s),y:GI(t.y,e,r)}}function HI(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function H7(t,e){return{x:HI(t.x,e.x),y:HI(t.y,e.y)}}function K7(t,e){let n=.5;const r=Jn(t),s=Jn(e);return s>r?n=Cd(e.min,e.max-r,t.min):r>s&&(n=Cd(t.min,t.max-s,e.min)),zi(0,1,n)}function Q7(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Yx=.35;function Y7(t=Yx){return t===!1?t=0:t===!0&&(t=Yx),{x:KI(t,"left","right"),y:KI(t,"top","bottom")}}function KI(t,e,n){return{min:QI(t,e),max:QI(t,n)}}function QI(t,e){return typeof t=="number"?t:t[e]||0}const YI=()=>({translate:0,scale:1,origin:0,originPoint:0}),bl=()=>({x:YI(),y:YI()}),XI=()=>({min:0,max:0}),Rt=()=>({x:XI(),y:XI()});function sr(t){return[t("x"),t("y")]}function vD({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function X7({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function J7(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Xv(t){return t===void 0||t===1}function Xx({scale:t,scaleX:e,scaleY:n}){return!Xv(t)||!Xv(e)||!Xv(n)}function To(t){return Xx(t)||xD(t)||t.z||t.rotate||t.rotateX||t.rotateY}function xD(t){return JI(t.x)||JI(t.y)}function JI(t){return t&&t!=="0%"}function Sm(t,e,n){const r=t-n,s=e*r;return n+s}function ZI(t,e,n,r,s){return s!==void 0&&(t=Sm(t,s,r)),Sm(t,n,r)+e}function Jx(t,e=0,n=1,r,s){t.min=ZI(t.min,e,n,r,s),t.max=ZI(t.max,e,n,r,s)}function wD(t,{x:e,y:n}){Jx(t.x,e.translate,e.scale,e.originPoint),Jx(t.y,n.translate,n.scale,n.originPoint)}function Z7(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&El(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,wD(t,o)),r&&To(i.latestValues)&&El(t,i.latestValues))}e.x=eC(e.x),e.y=eC(e.y)}function eC(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function fi(t,e){t.min=t.min+e,t.max=t.max+e}function tC(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=ft(t.min,t.max,i);Jx(t,e[n],e[r],o,e.scale)}const ez=["x","scaleX","originX"],tz=["y","scaleY","originY"];function El(t,e){tC(t.x,e,ez),tC(t.y,e,tz)}function _D(t,e){return vD(J7(t.getBoundingClientRect(),e))}function nz(t,e,n){const r=_D(t,n),{scroll:s}=e;return s&&(fi(r.x,s.offset.x),fi(r.y,s.offset.y)),r}const bD=({current:t})=>t?t.ownerDocument.defaultView:null,rz=new WeakMap;class sz{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Lg(d,"page").point)},i=(d,h)=>{const{drag:m,dragPropagation:g,onDragStart:v}=this.getProps();if(m&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=O2(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sr(w=>{let _=this.getAxisMotionValue(w).get()||0;if(Br.test(_)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[w];b&&(_=Jn(b)*(parseFloat(_)/100))}}this.originPoint[w]=_}),v&&Ye.update(()=>v(d,h),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:v,onDrag:y}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:w}=h;if(g&&this.currentDirection===null){this.currentDirection=iz(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),y&&y(d,h)},a=(d,h)=>this.stop(d,h),l=()=>sr(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new gD(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:bD(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Ye.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Lf(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=W7(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&wl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=G7(s.layoutBox,n):this.constraints=!1,this.elastic=Y7(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&sr(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Q7(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!wl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=nz(r,s.root,this.visualElement.getTransformPagePoint());let o=H7(s.layout.layoutBox,i);if(n){const a=n(X7(o));this.hasMutatedConstraints=!!a,a&&(o=vD(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=sr(d=>{if(!Lf(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const m=s?200:1e6,g=s?40:1e7,v={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Sb(e,r,0,n))}stopAnimation(){sr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){sr(n=>{const{drag:r}=this.getProps();if(!Lf(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-ft(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!wl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};sr(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=K7({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sr(o=>{if(!Lf(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ft(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;rz.set(this.visualElement,this);const e=this.visualElement.current,n=xs(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();wl(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=fs(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(sr(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Yx,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Lf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function iz(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class oz extends oo{constructor(e){super(e),this.removeGroupControls=_t,this.removeListeners=_t,this.controls=new sz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_t}unmount(){this.removeGroupControls(),this.removeListeners()}}const nC=t=>(e,n)=>{t&&Ye.update(()=>t(e,n))};class az extends oo{constructor(){super(...arguments),this.removePointerDownListener=_t}onPointerDown(e){this.session=new gD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:nC(e),onStart:nC(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Ye.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=xs(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function lz(){const t=p.useContext(Dg);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=p.useId();return p.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const Sp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const mu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(me.test(t))t=parseFloat(t);else return t;const n=rC(t,e.target.x),r=rC(t,e.target.y);return`${n}% ${r}%`}},cz={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=qi.parse(t);if(s.length>5)return r;const i=qi.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=ft(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class uz extends re.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;y9(dz),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Sp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Ye.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ED(t){const[e,n]=lz(),r=p.useContext(db);return re.createElement(uz,{...t,layoutGroup:r,switchLayoutGroup:p.useContext(v2),isPresent:e,safeToRemove:n})}const dz={borderRadius:{...mu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:mu,borderTopRightRadius:mu,borderBottomLeftRadius:mu,borderBottomRightRadius:mu,boxShadow:cz},TD=["TopLeft","TopRight","BottomLeft","BottomRight"],hz=TD.length,sC=t=>typeof t=="string"?parseFloat(t):t,iC=t=>typeof t=="number"||me.test(t);function fz(t,e,n,r,s,i){s?(t.opacity=ft(0,n.opacity!==void 0?n.opacity:1,pz(r)),t.opacityExit=ft(e.opacity!==void 0?e.opacity:1,0,mz(r))):i&&(t.opacity=ft(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<hz;o++){const a=`border${TD[o]}Radius`;let l=oC(e,a),c=oC(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||iC(l)===iC(c)?(t[a]=Math.max(ft(sC(l),sC(c),r),0),(Br.test(c)||Br.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=ft(e.rotate||0,n.rotate||0,r))}function oC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const pz=SD(0,.5,H2),mz=SD(.5,.95,_t);function SD(t,e,n){return r=>r<t?0:r>e?1:n(Cd(t,e,r))}function aC(t,e){t.min=e.min,t.max=e.max}function rr(t,e){aC(t.x,e.x),aC(t.y,e.y)}function lC(t,e,n,r,s){return t-=e,t=Sm(t,1/n,r),s!==void 0&&(t=Sm(t,1/s,r)),t}function gz(t,e=0,n=1,r=.5,s,i=t,o=t){if(Br.test(e)&&(e=parseFloat(e),e=ft(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ft(i.min,i.max,r);t===i&&(a-=e),t.min=lC(t.min,e,n,a,s),t.max=lC(t.max,e,n,a,s)}function cC(t,e,[n,r,s],i,o){gz(t,e[n],e[r],e[s],e.scale,i,o)}const yz=["x","scaleX","originX"],vz=["y","scaleY","originY"];function uC(t,e,n,r){cC(t.x,e,yz,n?n.x:void 0,r?r.x:void 0),cC(t.y,e,vz,n?n.y:void 0,r?r.y:void 0)}function dC(t){return t.translate===0&&t.scale===1}function ID(t){return dC(t.x)&&dC(t.y)}function xz(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function CD(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function hC(t){return Jn(t.x)/Jn(t.y)}class wz{constructor(){this.members=[]}add(e){Ib(this.members,e),e.scheduleRender()}remove(e){if(Cb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fC(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:d}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const _z=(t,e)=>t.depth-e.depth;class bz{constructor(){this.children=[],this.isDirty=!1}add(e){Ib(this.children,e),this.isDirty=!0}remove(e){Cb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_z),this.isDirty=!1,this.children.forEach(e)}}function Ez(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Ps(r),t(i-e))};return Ye.read(r,!0),()=>Ps(r)}function Tz(t){window.MotionDebug&&window.MotionDebug.record(t)}function Sz(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Iz(t,e,n){const r=Ln(t)?t:Jl(t);return r.start(Sb("",r,e,n)),r.animation}const pC=["","X","Y","Z"],Cz={visibility:"hidden"},mC=1e3;let Pz=0;const So={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function PD({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Pz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,So.totalNodes=So.resolvedTargetDeltas=So.recalculatedProjection=0,this.nodes.forEach(Nz),this.nodes.forEach(Mz),this.nodes.forEach(Vz),this.nodes.forEach(kz),Tz(So)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new bz)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Pb),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Sz(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Ez(m,250),Sp.hasAnimatedSinceResize&&(Sp.hasAnimatedSinceResize=!1,this.nodes.forEach(yC))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||Bz,{onLayoutAnimationStart:w,onLayoutAnimationComplete:_}=d.getProps(),x=!this.targetLayout||!CD(this.targetLayout,v)||g,b=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||m&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const S={...Tb(y,"layout"),onPlay:w,onComplete:_};(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else m||yC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ps(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Lz),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gC);return}this.isUpdating||this.nodes.forEach(jz),this.isUpdating=!1,this.nodes.forEach(Oz),this.nodes.forEach(Az),this.nodes.forEach(Rz),this.clearAllSnapshots();const a=performance.now();un.delta=zi(0,1e3/60,a-un.timestamp),un.timestamp=a,un.isProcessing=!0,Uv.update.process(un),Uv.preRender.process(un),Uv.render.process(un),un.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Dz),this.sharedNodes.forEach($z)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Rt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!ID(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||To(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),zz(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Rt();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(fi(a.x,l.offset.x),fi(a.y,l.offset.y)),a}removeElementScroll(o){const a=Rt();rr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:h}=c;if(c!==this.root&&d&&h.layoutScroll){if(d.isRoot){rr(a,o);const{scroll:m}=this.root;m&&(fi(a.x,-m.offset.x),fi(a.y,-m.offset.y))}fi(a.x,d.offset.x),fi(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=Rt();rr(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&El(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),To(d.latestValues)&&El(l,d.latestValues)}return To(this.latestValues)&&El(l,this.latestValues),l}removeTransform(o){const a=Rt();rr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!To(c.latestValues))continue;Xx(c.latestValues)&&c.updateSnapshot();const d=Rt(),h=c.measurePageBox();rr(d,h),uC(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return To(this.latestValues)&&uC(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==un.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=un.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rt(),this.relativeTargetOrigin=Rt(),Qu(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Rt(),this.targetWithTransforms=Rt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),q7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rr(this.target,this.layout.layoutBox),wD(this.target,this.targetDelta)):rr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rt(),this.relativeTargetOrigin=Rt(),Qu(this.relativeTargetOrigin,this.target,g.target),rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}So.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Xx(this.parent.latestValues)||xD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===un.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;rr(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;Z7(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:v}=a;if(!v){this.projectionTransform&&(this.projectionDelta=bl(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=bl(),this.projectionDeltaWithTransform=bl());const y=this.projectionTransform;Ku(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=fC(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==m||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),So.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=bl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Rt(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,y=g!==v,w=this.getStack(),_=!w||w.members.length<=1,x=!!(y&&!_&&this.options.crossfade===!0&&!this.path.some(Uz));this.animationProgress=0;let b;this.mixTargetDelta=S=>{const A=S/1e3;vC(h.x,o.x,A),vC(h.y,o.y,A),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qu(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Fz(this.relativeTarget,this.relativeTargetOrigin,m,A),b&&xz(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Rt()),rr(b,this.relativeTarget)),y&&(this.animationValues=d,fz(d,c,this.latestValues,A,x,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ps(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ye.update(()=>{Sp.hasAnimatedSinceResize=!0,this.currentAnimation=Iz(0,mC,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&AD(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Rt();const h=Jn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=Jn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}rr(a,l),El(a,d),Ku(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new wz),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let d=0;d<pC.length;d++){const h="rotate"+pC[d];l[h]&&(c[h]=l[h],o.setStaticValue(h,0))}o.render();for(const d in c)o.setStaticValue(d,c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Cz;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Tp(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Tp(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!To(this.latestValues)&&(y.transform=d?d({},""):"none",this.hasProjected=!1),y}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=fC(this.projectionDeltaWithTransform,this.treeScale,m),d&&(c.transform=d(m,c.transform));const{x:g,y:v}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const y in vm){if(m[y]===void 0)continue;const{correct:w,applyTo:_}=vm[y],x=c.transform==="none"?m[y]:w(m[y],h);if(_){const b=_.length;for(let S=0;S<b;S++)c[_[S]]=x}else c[y]=x}return this.options.layoutId&&(c.pointerEvents=h===this?Tp(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(gC),this.root.sharedNodes.clear()}}}function Az(t){t.updateLayout()}function Rz(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?sr(h=>{const m=o?n.measuredBox[h]:n.layoutBox[h],g=Jn(m);m.min=r[h].min,m.max=m.min+g}):AD(i,n.layoutBox,r)&&sr(h=>{const m=o?n.measuredBox[h]:n.layoutBox[h],g=Jn(r[h]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const a=bl();Ku(a,r,n.layoutBox);const l=bl();o?Ku(l,t.applyTransform(s,!0),n.measuredBox):Ku(l,r,n.layoutBox);const c=!ID(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const v=Rt();Qu(v,n.layoutBox,m.layoutBox);const y=Rt();Qu(y,r,g.layoutBox),CD(v,y)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Nz(t){So.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function kz(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Dz(t){t.clearSnapshot()}function gC(t){t.clearMeasurements()}function jz(t){t.isLayoutDirty=!1}function Oz(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function yC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Mz(t){t.resolveTargetDelta()}function Vz(t){t.calcProjection()}function Lz(t){t.resetRotation()}function $z(t){t.removeLeadSnapshot()}function vC(t,e,n){t.translate=ft(e.translate,0,n),t.scale=ft(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function xC(t,e,n,r){t.min=ft(e.min,n.min,r),t.max=ft(e.max,n.max,r)}function Fz(t,e,n,r){xC(t.x,e.x,n.x,r),xC(t.y,e.y,n.y,r)}function Uz(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Bz={duration:.45,ease:[.4,0,.1,1]},wC=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),_C=wC("applewebkit/")&&!wC("chrome/")?Math.round:_t;function bC(t){t.min=_C(t.min),t.max=_C(t.max)}function zz(t){bC(t.x),bC(t.y)}function AD(t,e,n){return t==="position"||t==="preserve-aspect"&&!Qx(hC(e),hC(n),.2)}const qz=PD({attachResizeListener:(t,e)=>fs(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jv={current:void 0},RD=PD({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Jv.current){const t=new qz({});t.mount(window),t.setOptions({layoutScroll:!0}),Jv.current=t}return Jv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Wz={pan:{Feature:az},drag:{Feature:oz,ProjectionNode:RD,MeasureLayout:ED}},Gz=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Hz(t){const e=Gz.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Zx(t,e,n=1){const[r,s]=Hz(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return hD(o)?parseFloat(o):o}else return Bx(s)?Zx(s,e,n+1):s}function Kz(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!Bx(i))return;const o=Zx(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!Bx(i))continue;const o=Zx(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const Qz=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),ND=t=>Qz.has(t),Yz=t=>Object.keys(t).some(ND),EC=t=>t===ba||t===me,TC=(t,e)=>parseFloat(t.split(", ")[e]),SC=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return TC(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?TC(i[1],t):0}},Xz=new Set(["x","y","z"]),Jz=lh.filter(t=>!Xz.has(t));function Zz(t){const e=[];return Jz.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Zl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:SC(4,13),y:SC(5,14)};Zl.translateX=Zl.x;Zl.translateY=Zl.y;const eq=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Zl[c](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const d=e.getValue(c);d&&d.jump(a[c]),t[c]=Zl[c](l,i)}),t},tq=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(ND);let i=[],o=!1;const a=[];if(s.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let d=n[l],h=pu(d);const m=e[l];let g;if(wm(m)){const v=m.length,y=m[0]===null?1:0;d=m[y],h=pu(d);for(let w=y;w<v&&m[w]!==null;w++)g?xb(pu(m[w])===g):g=pu(m[w])}else g=pu(m);if(h!==g)if(EC(h)&&EC(g)){const v=c.get();typeof v=="string"&&c.set(parseFloat(v)),typeof m=="string"?e[l]=parseFloat(m):Array.isArray(m)&&g===me&&(e[l]=m.map(parseFloat))}else h!=null&&h.transform&&(g!=null&&g.transform)&&(d===0||m===0)?d===0?c.set(g.transform(d)):e[l]=h.transform(m):(o||(i=Zz(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(m))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=eq(e,t,a);return i.length&&i.forEach(([d,h])=>{t.getValue(d).set(h)}),t.render(),jg&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function nq(t,e,n,r){return Yz(e)?tq(t,e,n,r):{target:e,transitionEnd:r}}const rq=(t,e,n,r)=>{const s=Kz(t,e,r);return e=s.target,r=s.transitionEnd,nq(t,e,n,r)},ew={current:null},kD={current:!1};function sq(){if(kD.current=!0,!!jg)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ew.current=t.matches;t.addListener(e),e()}else ew.current=!1}function iq(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(Ln(i))t.addValue(s,i),Tm(r)&&r.add(s);else if(Ln(o))t.addValue(s,Jl(i,{owner:t})),Tm(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Jl(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const IC=new WeakMap,DD=Object.keys(Id),oq=DD.length,CC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],aq=ub.length;class lq{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ye.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Mg(n),this.isVariantNode=y2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const m=d[h];a[h]!==void 0&&Ln(m)&&(m.set(a[h],!1),Tm(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,IC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),kD.current||sq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ew.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){IC.delete(this.current),this.projection&&this.projection.unmount(),Ps(this.notifyUpdate),Ps(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=_a.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ye.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<oq;l++){const c=DD[l],{isEnabled:d,Feature:h,ProjectionNode:m,MeasureLayout:g}=Id[c];m&&(o=m),d(n)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:d,dragConstraints:h,layoutScroll:m,layoutRoot:g}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!d||h&&wl(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<CC.length;r++){const s=CC[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=iq(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<aq;r++){const s=ub[r],i=this.props[s];(Sd(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Jl(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=vb(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ln(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Pb),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class jD extends lq{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=S7(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){E7(this,r,o);const a=rq(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function cq(t){return window.getComputedStyle(t)}class uq extends jD{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(_a.has(n)){const r=Eb(n);return r&&r.default||0}else{const r=cq(e),s=(_2(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return _D(e,n)}build(e,n,r,s){fb(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return yb(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ln(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){C2(e,n,r,s)}}class dq extends jD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(_a.has(n)){const r=Eb(n);return r&&r.default||0}return n=P2.has(n)?n:lb(n),e.getAttribute(n)}measureInstanceViewportBox(){return Rt()}scrapeMotionValuesFromProps(e,n){return R2(e,n)}build(e,n,r,s){mb(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){A2(e,n,r,s)}mount(e){this.isSVGTag=gb(e.tagName),super.mount(e)}}const hq=(t,e)=>hb(t)?new dq(e,{enableHardwareAcceleration:!1}):new uq(e,{enableHardwareAcceleration:!0}),fq={layout:{ProjectionNode:RD,MeasureLayout:ED}},pq={...F7,...o8,...Wz,...fq},oe=m9((t,e)=>H9(t,e,pq,hq));function OD(){const t=p.useRef(!1);return ab(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function mq(){const t=OD(),[e,n]=p.useState(0),r=p.useCallback(()=>{t.current&&n(e+1)},[e]);return[p.useCallback(()=>Ye.postRender(r),[r]),e]}class gq extends p.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function yq({children:t,isPresent:e}){const n=p.useId(),r=p.useRef(null),s=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),p.createElement(gq,{isPresent:e,childRef:r,sizeRef:s},p.cloneElement(t,{ref:r}))}const Zv=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=N2(vq),l=p.useId(),c=p.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:d=>{a.set(d,!0);for(const h of a.values())if(!h)return;r&&r()},register:d=>(a.set(d,!1),()=>a.delete(d))}),i?void 0:[n]);return p.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[n]),p.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=p.createElement(yq,{isPresent:n},t)),p.createElement(Dg.Provider,{value:c},t)};function vq(){return new Map}function xq(t){return p.useEffect(()=>()=>t(),[])}const Io=t=>t.key||"";function wq(t,e){t.forEach(n=>{const r=Io(n);e.set(r,n)})}function _q(t){const e=[];return p.Children.forEach(t,n=>{p.isValidElement(n)&&e.push(n)}),e}const Ab=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=p.useContext(db).forceRender||mq()[0],l=OD(),c=_q(t);let d=c;const h=p.useRef(new Map).current,m=p.useRef(d),g=p.useRef(new Map).current,v=p.useRef(!0);if(ab(()=>{v.current=!1,wq(c,g),m.current=d}),xq(()=>{v.current=!0,g.clear(),h.clear()}),v.current)return p.createElement(p.Fragment,null,d.map(x=>p.createElement(Zv,{key:Io(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},x)));d=[...d];const y=m.current.map(Io),w=c.map(Io),_=y.length;for(let x=0;x<_;x++){const b=y[x];w.indexOf(b)===-1&&!h.has(b)&&h.set(b,void 0)}return o==="wait"&&h.size&&(d=[]),h.forEach((x,b)=>{if(w.indexOf(b)!==-1)return;const S=g.get(b);if(!S)return;const A=y.indexOf(b);let D=x;if(!D){const C=()=>{h.delete(b);const I=Array.from(g.keys()).filter(P=>!w.includes(P));if(I.forEach(P=>g.delete(P)),m.current=c.filter(P=>{const R=Io(P);return R===b||I.includes(R)}),!h.size){if(l.current===!1)return;a(),r&&r()}};D=p.createElement(Zv,{key:Io(S),isPresent:!1,onExitComplete:C,custom:e,presenceAffectsLayout:i,mode:o},S),h.set(b,D)}d.splice(A,0,D)}),d=d.map(x=>{const b=x.key;return h.has(b)?x:p.createElement(Zv,{key:Io(x),isPresent:!0,presenceAffectsLayout:i,mode:o},x)}),p.createElement(p.Fragment,null,h.size?d:d.map(x=>p.cloneElement(x)))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},bq=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},VD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(m=64)),r.push(n[d],n[h],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new Eq;const m=i<<2|a>>4;if(r.push(m),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const v=c<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Eq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tq=function(t){const e=MD(t);return VD.encodeByteArray(e,!0)},Im=function(t){return Tq(t).replace(/\./g,"")},LD=function(t){try{return VD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iq=()=>Sq().__FIREBASE_DEFAULTS__,Cq=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Pq=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LD(t[1]);return e&&JSON.parse(e)},Fg=()=>{try{return Iq()||Cq()||Pq()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$D=t=>{var e,n;return(n=(e=Fg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},FD=t=>{const e=$D(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},UD=()=>{var t;return(t=Fg())===null||t===void 0?void 0:t.config},BD=t=>{var e;return(e=Fg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Im(JSON.stringify(n)),Im(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rq(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function Nq(){var t;const e=(t=Fg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kq(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Dq(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jq(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Oq(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qD(){return!Nq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WD(){try{return typeof indexedDB=="object"}catch{return!1}}function Mq(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq="FirebaseError";class Jr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Vq,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hh.prototype.create)}}class hh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Lq(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Jr(s,a,r)}}function Lq(t,e){return t.replace($q,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const $q=/\{\$([^}]+)}/g;function Fq(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(PC(i)&&PC(o)){if(!Wi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function PC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ru(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Nu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Uq(t,e){const n=new Bq(t,e);return n.subscribe.bind(n)}class Bq{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zq(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=e0),s.error===void 0&&(s.error=e0),s.complete===void 0&&(s.complete=e0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zq(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function e0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t){return t&&t._delegate?t._delegate:t}class Gi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qq=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Aq;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gq(e))try{this.getOrInitializeService({instanceIdentifier:Co})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Co){return this.instances.has(e)}getOptions(e=Co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Wq(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Co){return this.component?this.component.multipleInstances?e:Co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Wq(t){return t===Co?void 0:t}function Gq(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hq{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qq(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const Kq={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Qq=ke.INFO,Yq={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Xq=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Yq[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rb{constructor(e){this.name=e,this._logLevel=Qq,this._logHandler=Xq,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const Jq=(t,e)=>e.some(n=>t instanceof n);let AC,RC;function Zq(){return AC||(AC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eW(){return RC||(RC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GD=new WeakMap,tw=new WeakMap,HD=new WeakMap,t0=new WeakMap,Nb=new WeakMap;function tW(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Li(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&GD.set(n,t)}).catch(()=>{}),Nb.set(e,t),e}function nW(t){if(tw.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});tw.set(t,e)}let nw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rW(t){nw=t(nw)}function sW(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(n0(this),e,...n);return HD.set(r,e.sort?e.sort():[e]),Li(r)}:eW().includes(t)?function(...e){return t.apply(n0(this),e),Li(GD.get(this))}:function(...e){return Li(t.apply(n0(this),e))}}function iW(t){return typeof t=="function"?sW(t):(t instanceof IDBTransaction&&nW(t),Jq(t,Zq())?new Proxy(t,nw):t)}function Li(t){if(t instanceof IDBRequest)return tW(t);if(t0.has(t))return t0.get(t);const e=iW(t);return e!==t&&(t0.set(t,e),Nb.set(e,t)),e}const n0=t=>Nb.get(t);function oW(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Li(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Li(o.result),l.oldVersion,l.newVersion,Li(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const aW=["get","getKey","getAll","getAllKeys","count"],lW=["put","add","delete","clear"],r0=new Map;function NC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(r0.get(e))return r0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=lW.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||aW.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return r0.set(e,i),i}rW(t=>({...t,get:(e,n,r)=>NC(e,n)||t.get(e,n,r),has:(e,n)=>!!NC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uW(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uW(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rw="@firebase/app",kC="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Rb("@firebase/app"),dW="@firebase/app-compat",hW="@firebase/analytics-compat",fW="@firebase/analytics",pW="@firebase/app-check-compat",mW="@firebase/app-check",gW="@firebase/auth",yW="@firebase/auth-compat",vW="@firebase/database",xW="@firebase/data-connect",wW="@firebase/database-compat",_W="@firebase/functions",bW="@firebase/functions-compat",EW="@firebase/installations",TW="@firebase/installations-compat",SW="@firebase/messaging",IW="@firebase/messaging-compat",CW="@firebase/performance",PW="@firebase/performance-compat",AW="@firebase/remote-config",RW="@firebase/remote-config-compat",NW="@firebase/storage",kW="@firebase/storage-compat",DW="@firebase/firestore",jW="@firebase/vertexai-preview",OW="@firebase/firestore-compat",MW="firebase",VW="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="[DEFAULT]",LW={[rw]:"fire-core",[dW]:"fire-core-compat",[fW]:"fire-analytics",[hW]:"fire-analytics-compat",[mW]:"fire-app-check",[pW]:"fire-app-check-compat",[gW]:"fire-auth",[yW]:"fire-auth-compat",[vW]:"fire-rtdb",[xW]:"fire-data-connect",[wW]:"fire-rtdb-compat",[_W]:"fire-fn",[bW]:"fire-fn-compat",[EW]:"fire-iid",[TW]:"fire-iid-compat",[SW]:"fire-fcm",[IW]:"fire-fcm-compat",[CW]:"fire-perf",[PW]:"fire-perf-compat",[AW]:"fire-rc",[RW]:"fire-rc-compat",[NW]:"fire-gcs",[kW]:"fire-gcs-compat",[DW]:"fire-fst",[OW]:"fire-fst-compat",[jW]:"fire-vertex","fire-js":"fire-js",[MW]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=new Map,$W=new Map,sw=new Map;function DC(t,e){try{t.container.addComponent(e)}catch(n){As.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ea(t){const e=t.name;if(sw.has(e))return As.debug(`There were multiple attempts to register component ${e}.`),!1;sw.set(e,t);for(const n of Pm.values())DC(n,t);for(const n of $W.values())DC(n,t);return!0}function Pc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function FW(t,e,n=Cm){Pc(t,e).clearInstance(n)}function Tr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new hh("app","Firebase",UW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=VW;function KD(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw $i.create("bad-app-name",{appName:String(s)});if(n||(n=UD()),!n)throw $i.create("no-options");const i=Pm.get(s);if(i){if(Wi(n,i.options)&&Wi(r,i.config))return i;throw $i.create("duplicate-app",{appName:s})}const o=new Hq(s);for(const l of sw.values())o.addComponent(l);const a=new BW(n,r,o);return Pm.set(s,a),a}function kb(t=Cm){const e=Pm.get(t);if(!e&&t===Cm&&UD())return KD();if(!e)throw $i.create("no-app",{appName:t});return e}function zr(t,e,n){var r;let s=(r=LW[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),As.warn(a.join(" "));return}ea(new Gi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zW="firebase-heartbeat-database",qW=1,Pd="firebase-heartbeat-store";let s0=null;function QD(){return s0||(s0=oW(zW,qW,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pd)}catch(n){console.warn(n)}}}}).catch(t=>{throw $i.create("idb-open",{originalErrorMessage:t.message})})),s0}async function WW(t){try{const n=(await QD()).transaction(Pd),r=await n.objectStore(Pd).get(YD(t));return await n.done,r}catch(e){if(e instanceof Jr)As.warn(e.message);else{const n=$i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});As.warn(n.message)}}}async function jC(t,e){try{const r=(await QD()).transaction(Pd,"readwrite");await r.objectStore(Pd).put(e,YD(t)),await r.done}catch(n){if(n instanceof Jr)As.warn(n.message);else{const r=$i.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});As.warn(r.message)}}}function YD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW=1024,HW=30*24*60*60*1e3;class KW{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YW(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=OC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=HW}),this._storage.overwrite(this._heartbeatsCache))}catch(r){As.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=OC(),{heartbeatsToSend:r,unsentEntries:s}=QW(this._heartbeatsCache.heartbeats),i=Im(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return As.warn(n),""}}}function OC(){return new Date().toISOString().substring(0,10)}function QW(t,e=GW){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),MC(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),MC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class YW{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WD()?Mq().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WW(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return jC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return jC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function MC(t){return Im(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XW(t){ea(new Gi("platform-logger",e=>new cW(e),"PRIVATE")),ea(new Gi("heartbeat",e=>new KW(e),"PRIVATE")),zr(rw,kC,t),zr(rw,kC,"esm2017"),zr("fire-js","")}XW("");var bt=function(){return bt=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bt.apply(this,arguments)};function Ta(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Db(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function XD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JW=XD,JD=new hh("auth","Firebase",XD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=new Rb("@firebase/auth");function ZW(t,...e){Am.logLevel<=ke.WARN&&Am.warn(`Auth (${Ea}): ${t}`,...e)}function Ip(t,...e){Am.logLevel<=ke.ERROR&&Am.error(`Auth (${Ea}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,...e){throw Ob(t,...e)}function Cr(t,...e){return Ob(t,...e)}function jb(t,e,n){const r=Object.assign(Object.assign({},JW()),{[e]:n});return new hh("auth","Firebase",r).create(e,{appName:t.name})}function _s(t){return jb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eG(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&hr(t,"argument-error"),jb(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ob(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JD.create(t,...e)}function pe(t,e,...n){if(!t)throw Ob(e,...n)}function ps(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ip(e),new Error(e)}function Rs(t,e){t||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tG(){return VC()==="http:"||VC()==="https:"}function VC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tG()||Dq()||"connection"in navigator)?navigator.onLine:!0}function rG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rs(n>e,"Short delay should be less than long delay!"),this.isMobile=Rq()||jq()}get(){return nG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(t,e){Rs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG=new ph(3e4,6e4);function Bs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function kr(t,e,n,r,s={}){return ej(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=fh(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return kq()||(c.referrerPolicy="no-referrer"),ZD.fetch()(tj(t,t.config.apiHost,n,a),c)})}async function ej(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},sG),e);try{const s=new aG(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw $f(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $f(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw $f(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw $f(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw jb(t,d,c);hr(t,d)}}catch(s){if(s instanceof Jr)throw s;hr(t,"network-request-failed",{message:String(s)})}}async function mh(t,e,n,r,s={}){const i=await kr(t,e,n,r,s);return"mfaPendingCredential"in i&&hr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function tj(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Mb(t.config,s):`${t.config.apiScheme}://${s}`}function oG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aG{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cr(this.auth,"network-request-failed")),iG.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $f(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Cr(t,e,r);return s.customData._tokenResponse=n,s}function LC(t){return t!==void 0&&t.enterprise!==void 0}class lG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return oG(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function cG(t,e){return kr(t,"GET","/v2/recaptchaConfig",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uG(t,e){return kr(t,"POST","/v1/accounts:delete",e)}async function nj(t,e){return kr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dG(t,e=!1){const n=Le(t),r=await n.getIdToken(e),s=Vb(r);pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Yu(i0(s.auth_time)),issuedAtTime:Yu(i0(s.iat)),expirationTime:Yu(i0(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function i0(t){return Number(t)*1e3}function Vb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ip("JWT malformed, contained fewer than 3 sections"),null;try{const s=LD(n);return s?JSON.parse(s):(Ip("Failed to decode base64 JWT payload"),null)}catch(s){return Ip("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $C(t){const e=Vb(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Jr&&hG(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yu(this.lastLoginAt),this.creationTime=Yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ta(t,nj(n,{idToken:r}));pe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?rj(i.providerUserInfo):[],a=mG(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ow(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function pG(t){const e=Le(t);await Rm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mG(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function rj(t){return t.map(e=>{var{providerId:n}=e,r=Ta(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gG(t,e){const n=await ej(t,{},async()=>{const r=fh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=tj(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ZD.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yG(t,e){return kr(t,"POST","/v2/accounts:revokeToken",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$C(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const n=$C(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await gG(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Rl;return r&&(pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(pe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ms{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ta(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ow(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ta(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dG(this,e)}reload(){return pG(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ms(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tr(this.auth.app))return Promise.reject(_s(this.auth));const e=await this.getIdToken();return await ta(this,uG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:S,isAnonymous:A,providerData:D,stsTokenManager:C}=n;pe(b&&C,e,"internal-error");const I=Rl.fromJSON(this.name,C);pe(typeof b=="string",e,"internal-error"),ri(h,e.name),ri(m,e.name),pe(typeof S=="boolean",e,"internal-error"),pe(typeof A=="boolean",e,"internal-error"),ri(g,e.name),ri(v,e.name),ri(y,e.name),ri(w,e.name),ri(_,e.name),ri(x,e.name);const P=new ms({uid:b,auth:e,email:m,emailVerified:S,displayName:h,isAnonymous:A,photoURL:v,phoneNumber:g,tenantId:y,stsTokenManager:I,createdAt:_,lastLoginAt:x});return D&&Array.isArray(D)&&(P.providerData=D.map(R=>Object.assign({},R))),w&&(P._redirectEventId=w),P}static async _fromIdTokenResponse(e,n,r=!1){const s=new Rl;s.updateFromServerResponse(n);const i=new ms({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Rm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?rj(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Rl;a.updateFromIdToken(r);const l=new ms({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ow(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new Map;function gs(t){Rs(t instanceof Function,"Expected a class definition");let e=FC.get(t);return e?(Rs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,FC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sj.type="NONE";const UC=sj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t,e,n){return`firebase:${t}:${e}:${n}`}class Nl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Cp(this.userKey,s.apiKey,i),this.fullPersistenceKey=Cp("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ms._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Nl(gs(UC),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||gs(UC);const o=Cp(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=ms._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Nl(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Nl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ij(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uj(e))return"Blackberry";if(dj(e))return"Webos";if(oj(e))return"Safari";if((e.includes("chrome/")||aj(e))&&!e.includes("edge/"))return"Chrome";if(cj(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ij(t=Mt()){return/firefox\//i.test(t)}function oj(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aj(t=Mt()){return/crios\//i.test(t)}function lj(t=Mt()){return/iemobile/i.test(t)}function cj(t=Mt()){return/android/i.test(t)}function uj(t=Mt()){return/blackberry/i.test(t)}function dj(t=Mt()){return/webos/i.test(t)}function Lb(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vG(t=Mt()){var e;return Lb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xG(){return Oq()&&document.documentMode===10}function hj(t=Mt()){return Lb(t)||cj(t)||dj(t)||uj(t)||/windows phone/i.test(t)||lj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t,e=[]){let n;switch(t){case"Browser":n=BC(Mt());break;case"Worker":n=`${BC(Mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ea}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wG{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _G(t,e={}){return kr(t,"GET","/v2/passwordPolicy",Bs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bG=6;class EG{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:bG,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TG{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zC(this),this.idTokenSubscription=new zC(this),this.beforeStateQueue=new wG(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gs(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Nl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nj(this,{idToken:e}),r=await ms._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Tr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tr(this.app))return Promise.reject(_s(this));const n=e?Le(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tr(this.app)?Promise.reject(_s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tr(this.app)?Promise.reject(_s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _G(this),n=new EG(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yG(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gs(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await Nl.create(this,[gs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ZW(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function zs(t){return Le(t)}class zC{constructor(e){this.auth=e,this.observer=null,this.addObserver=Uq(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ug={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SG(t){Ug=t}function pj(t){return Ug.loadJS(t)}function IG(){return Ug.recaptchaEnterpriseScript}function CG(){return Ug.gapiScript}function PG(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const AG="recaptcha-enterprise",RG="NO_RECAPTCHA";class NG{constructor(e){this.type=AG,this.auth=zs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{cG(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new lG(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;LC(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(RG)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&LC(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=IG();l.length!==0&&(l+=a),pj(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function qC(t,e,n,r=!1){const s=new NG(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Nm(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await qC(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await qC(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kG(t,e){const n=Pc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Wi(i,e??{}))return s;hr(s,"already-initialized")}return n.initialize({options:e})}function DG(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jG(t,e,n){const r=zs(t);pe(r._canInitEmulator,r,"emulator-config-failed"),pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=mj(e),{host:o,port:a}=OG(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||MG()}function mj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OG(t){const e=mj(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:WC(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:WC(o)}}}function WC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function MG(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,n){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function VG(t,e){return kr(t,"POST","/v1/accounts:update",e)}async function LG(t,e){return kr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $G(t,e){return mh(t,"POST","/v1/accounts:signInWithPassword",Bs(t,e))}async function FG(t,e){return kr(t,"POST","/v1/accounts:sendOobCode",Bs(t,e))}async function UG(t,e){return FG(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BG(t,e){return mh(t,"POST","/v1/accounts:signInWithEmailLink",Bs(t,e))}async function zG(t,e){return mh(t,"POST","/v1/accounts:signInWithEmailLink",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends $b{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ad(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ad(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nm(e,n,"signInWithPassword",$G);case"emailLink":return BG(e,{email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nm(e,r,"signUpPassword",LG);case"emailLink":return zG(e,{idToken:n,email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(t,e){return mh(t,"POST","/v1/accounts:signInWithIdp",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qG="http://localhost";class na extends $b{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ta(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new na(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return kl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,kl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,kl(e,n)}buildRequest(){const e={requestUri:qG,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WG(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GG(t){const e=Ru(Nu(t)).link,n=e?Ru(Nu(e)).deep_link_id:null,r=Ru(Nu(t)).deep_link_id;return(r?Ru(Nu(r)).link:null)||r||n||e||t}class Fb{constructor(e){var n,r,s,i,o,a;const l=Ru(Nu(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=WG((s=l.mode)!==null&&s!==void 0?s:null);pe(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=GG(e);try{return new Fb(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){this.providerId=Sa.PROVIDER_ID}static credential(e,n){return Ad._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Fb.parseLink(n);return pe(r,"argument-error"),Ad._fromEmailAndCode(e,r.code,r.tenantId)}}Sa.PROVIDER_ID="password";Sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends Ub{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends gh{constructor(){super("facebook.com")}static credential(e){return na._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends gh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return na._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ls.credential(n,r)}catch{return null}}}ls.GOOGLE_SIGN_IN_METHOD="google.com";ls.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends gh{constructor(){super("github.com")}static credential(e){return na._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.GITHUB_SIGN_IN_METHOD="github.com";yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends gh{constructor(){super("twitter.com")}static credential(e,n){return na._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return cs.credential(n,r)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HG(t,e){return mh(t,"POST","/v1/accounts:signUp",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ms._fromIdTokenResponse(e,r,s),o=GC(r);return new ra({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=GC(r);return new ra({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function GC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends Jr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,km.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new km(e,n,r,s)}}function gj(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?km._fromErrorAndOperation(t,i,e,r):i})}async function KG(t,e,n=!1){const r=await ta(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ra._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(t,e,n=!1){const{auth:r}=t;if(Tr(r.app))return Promise.reject(_s(r));const s="reauthenticate";try{const i=await ta(t,gj(r,s,e,t),n);pe(i.idToken,r,"internal-error");const o=Vb(i.idToken);pe(o,r,"internal-error");const{sub:a}=o;return pe(t.uid===a,r,"user-mismatch"),ra._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&hr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(t,e,n=!1){if(Tr(t.app))return Promise.reject(_s(t));const r="signIn",s=await gj(t,r,e),i=await ra._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function QG(t,e){return vj(zs(t),e)}async function YG(t,e){return yj(Le(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XG(t,e,n){var r;pe(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),pe(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(pe(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(pe(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t){const e=zs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Bb(t,e,n){const r=zs(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&XG(r,s,n),await Nm(r,s,"getOobCode",UG)}async function zb(t,e,n){if(Tr(t.app))return Promise.reject(_s(t));const r=zs(t),o=await Nm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HG).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&xj(t),l}),a=await ra._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function qb(t,e,n){return Tr(t.app)?Promise.reject(_s(t)):QG(Le(t),Sa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xj(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JG(t,e){return kr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dm(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Le(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ta(r,JG(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function ZG(t,e){return eH(Le(t),null,e)}async function eH(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await ta(t,VG(r,i));await t._updateTokensIfNecessary(o,!0)}function tH(t,e,n,r){return Le(t).onIdTokenChanged(e,n,r)}function nH(t,e,n){return Le(t).beforeAuthStateChanged(e,n)}function wj(t,e,n,r){return Le(t).onAuthStateChanged(e,n,r)}function _j(t){return Le(t).signOut()}const jm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jm,"1"),this.storage.removeItem(jm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH=1e3,sH=10;class Ej extends bj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);xG()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,sH):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},rH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ej.type="LOCAL";const iH=Ej;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj extends bj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Tj.type="SESSION";const Sj=Tj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oH(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Bg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await oH(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Wb("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(){return window}function lH(t){qr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(){return typeof qr().WorkerGlobalScope<"u"&&typeof qr().importScripts=="function"}async function cH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uH(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dH(){return Ij()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="firebaseLocalStorageDb",hH=1,Om="firebaseLocalStorage",Pj="fbase_key";class yh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zg(t,e){return t.transaction([Om],e?"readwrite":"readonly").objectStore(Om)}function fH(){const t=indexedDB.deleteDatabase(Cj);return new yh(t).toPromise()}function aw(){const t=indexedDB.open(Cj,hH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Om,{keyPath:Pj})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Om)?e(r):(r.close(),await fH(),e(await aw()))})})}async function HC(t,e,n){const r=zg(t,!0).put({[Pj]:e,value:n});return new yh(r).toPromise()}async function pH(t,e){const n=zg(t,!1).get(e),r=await new yh(n).toPromise();return r===void 0?null:r.value}function KC(t,e){const n=zg(t,!0).delete(e);return new yh(n).toPromise()}const mH=800,gH=3;class Aj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await aw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>gH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ij()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bg._getInstance(dH()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await cH(),!this.activeServiceWorker)return;this.sender=new aH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await aw();return await HC(e,jm,"1"),await KC(e,jm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>HC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pH(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>KC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=zg(s,!1).getAll();return new yh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Aj.type="LOCAL";const yH=Aj;new ph(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t,e){return e?gs(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb extends $b{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return kl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return kl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vH(t){return vj(t.auth,new Gb(t),t.bypassAuthState)}function xH(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),yj(n,new Gb(t),t.bypassAuthState)}async function wH(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),KG(n,new Gb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vH;case"linkViaPopup":case"linkViaRedirect":return wH;case"reauthViaPopup":case"reauthViaRedirect":return xH;default:hr(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _H=new ph(2e3,1e4);async function kj(t,e,n){if(Tr(t.app))return Promise.reject(Cr(t,"operation-not-supported-in-this-environment"));const r=zs(t);eG(t,e,Ub);const s=Rj(r,n);return new $o(r,"signInViaPopup",e,s).executeNotNull()}class $o extends Nj{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,$o.currentPopupAction&&$o.currentPopupAction.cancel(),$o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=Wb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_H.get())};e()}}$o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH="pendingRedirect",Pp=new Map;class EH extends Nj{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pp.get(this.auth._key());if(!e){try{const r=await TH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pp.set(this.auth._key(),e)}return this.bypassAuthState||Pp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TH(t,e){const n=CH(e),r=IH(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function SH(t,e){Pp.set(t._key(),e)}function IH(t){return gs(t._redirectPersistence)}function CH(t){return Cp(bH,t.config.apiKey,t.name)}async function PH(t,e,n=!1){if(Tr(t.app))return Promise.reject(_s(t));const r=zs(t),s=Rj(r,e),o=await new EH(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH=10*60*1e3;class RH{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Dj(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AH&&this.cachedEventUids.clear(),this.cachedEventUids.has(QC(e))}saveEventToCache(e){this.cachedEventUids.add(QC(e)),this.lastProcessedEventTime=Date.now()}}function QC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Dj({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dj(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kH(t,e={}){return kr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jH=/^https?/;async function OH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kH(t);for(const n of e)try{if(MH(n))return}catch{}hr(t,"unauthorized-domain")}function MH(t){const e=iw(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!jH.test(n))return!1;if(DH.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VH=new ph(3e4,6e4);function YC(){const t=qr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LH(t){return new Promise((e,n)=>{var r,s,i;function o(){YC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{YC(),n(Cr(t,"network-request-failed"))},timeout:VH.get()})}if(!((s=(r=qr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=qr().gapi)===null||i===void 0)&&i.load)o();else{const a=PG("iframefcb");return qr()[a]=()=>{gapi.load?o():n(Cr(t,"network-request-failed"))},pj(`${CG()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ap=null,e})}let Ap=null;function $H(t){return Ap=Ap||LH(t),Ap}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH=new ph(5e3,15e3),UH="__/auth/iframe",BH="emulator/auth/iframe",zH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WH(t){const e=t.config;pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mb(e,BH):`https://${t.config.authDomain}/${UH}`,r={apiKey:e.apiKey,appName:t.name,v:Ea},s=qH.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${fh(r).slice(1)}`}async function GH(t){const e=await $H(t),n=qr().gapi;return pe(n,t,"internal-error"),e.open({where:document.body,url:WH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zH,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Cr(t,"network-request-failed"),a=qr().setTimeout(()=>{i(o)},FH.get());function l(){qr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KH=500,QH=600,YH="_blank",XH="http://localhost";class XC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JH(t,e,n,r=KH,s=QH){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},HH),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Mt().toLowerCase();n&&(a=aj(c)?YH:n),ij(c)&&(e=e||XH,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[g,v])=>`${m}${g}=${v},`,"");if(vG(c)&&a!=="_self")return ZH(e||"",a),new XC(null);const h=window.open(e||"",a,d);pe(h,t,"popup-blocked");try{h.focus()}catch{}return new XC(h)}function ZH(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eK="__/auth/handler",tK="emulator/auth/handler",nK=encodeURIComponent("fac");async function JC(t,e,n,r,s,i){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ea,eventId:s};if(e instanceof Ub){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Fq(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(i||{}))o[d]=h}if(e instanceof gh){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${nK}=${encodeURIComponent(l)}`:"";return`${rK(t)}?${fh(a).slice(1)}${c}`}function rK({config:t}){return t.emulator?Mb(t,tK):`https://${t.authDomain}/${eK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="webStorageSupport";class sK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sj,this._completeRedirectFn=PH,this._overrideRedirectResult=SH}async _openPopup(e,n,r,s){var i;Rs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await JC(e,n,r,iw(),s);return JH(e,o,Wb())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await JC(e,n,r,iw(),s);return lH(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Rs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await GH(e),r=new RH(e);return n.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(o0,{type:o0},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[o0];o!==void 0&&n(!!o),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hj()||oj()||Lb()}}const iK=sK;var ZC="@firebase/auth",eP="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lK(t){ea(new Gi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fj(t)},c=new TG(r,s,i,l);return DG(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ea(new Gi("auth-internal",e=>{const n=zs(e.getProvider("auth").getImmediate());return(r=>new oK(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zr(ZC,eP,aK(t)),zr(ZC,eP,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cK=5*60,uK=BD("authIdTokenMaxAge")||cK;let tP=null;const dK=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uK)return;const s=n==null?void 0:n.token;tP!==s&&(tP=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function jj(t=kb()){const e=Pc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kG(t,{popupRedirectResolver:iK,persistence:[yH,iH,Sj]}),r=BD("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=dK(i.toString());nH(n,o,()=>o(n.currentUser)),tH(n,a=>o(a))}}const s=$D("auth");return s&&jG(n,`http://${s}`),n}function hK(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}SG({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Cr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",hK().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lK("Browser");var nP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wo,Oj;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function P(){}P.prototype=I.prototype,C.D=I.prototype,C.prototype=new P,C.prototype.constructor=C,C.C=function(R,j,O){for(var k=Array(arguments.length-2),W=2;W<arguments.length;W++)k[W-2]=arguments[W];return I.prototype[j].apply(R,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,I,P){P||(P=0);var R=Array(16);if(typeof I=="string")for(var j=0;16>j;++j)R[j]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(j=0;16>j;++j)R[j]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=C.g[0],P=C.g[1],j=C.g[2];var O=C.g[3],k=I+(O^P&(j^O))+R[0]+3614090360&4294967295;I=P+(k<<7&4294967295|k>>>25),k=O+(j^I&(P^j))+R[1]+3905402710&4294967295,O=I+(k<<12&4294967295|k>>>20),k=j+(P^O&(I^P))+R[2]+606105819&4294967295,j=O+(k<<17&4294967295|k>>>15),k=P+(I^j&(O^I))+R[3]+3250441966&4294967295,P=j+(k<<22&4294967295|k>>>10),k=I+(O^P&(j^O))+R[4]+4118548399&4294967295,I=P+(k<<7&4294967295|k>>>25),k=O+(j^I&(P^j))+R[5]+1200080426&4294967295,O=I+(k<<12&4294967295|k>>>20),k=j+(P^O&(I^P))+R[6]+2821735955&4294967295,j=O+(k<<17&4294967295|k>>>15),k=P+(I^j&(O^I))+R[7]+4249261313&4294967295,P=j+(k<<22&4294967295|k>>>10),k=I+(O^P&(j^O))+R[8]+1770035416&4294967295,I=P+(k<<7&4294967295|k>>>25),k=O+(j^I&(P^j))+R[9]+2336552879&4294967295,O=I+(k<<12&4294967295|k>>>20),k=j+(P^O&(I^P))+R[10]+4294925233&4294967295,j=O+(k<<17&4294967295|k>>>15),k=P+(I^j&(O^I))+R[11]+2304563134&4294967295,P=j+(k<<22&4294967295|k>>>10),k=I+(O^P&(j^O))+R[12]+1804603682&4294967295,I=P+(k<<7&4294967295|k>>>25),k=O+(j^I&(P^j))+R[13]+4254626195&4294967295,O=I+(k<<12&4294967295|k>>>20),k=j+(P^O&(I^P))+R[14]+2792965006&4294967295,j=O+(k<<17&4294967295|k>>>15),k=P+(I^j&(O^I))+R[15]+1236535329&4294967295,P=j+(k<<22&4294967295|k>>>10),k=I+(j^O&(P^j))+R[1]+4129170786&4294967295,I=P+(k<<5&4294967295|k>>>27),k=O+(P^j&(I^P))+R[6]+3225465664&4294967295,O=I+(k<<9&4294967295|k>>>23),k=j+(I^P&(O^I))+R[11]+643717713&4294967295,j=O+(k<<14&4294967295|k>>>18),k=P+(O^I&(j^O))+R[0]+3921069994&4294967295,P=j+(k<<20&4294967295|k>>>12),k=I+(j^O&(P^j))+R[5]+3593408605&4294967295,I=P+(k<<5&4294967295|k>>>27),k=O+(P^j&(I^P))+R[10]+38016083&4294967295,O=I+(k<<9&4294967295|k>>>23),k=j+(I^P&(O^I))+R[15]+3634488961&4294967295,j=O+(k<<14&4294967295|k>>>18),k=P+(O^I&(j^O))+R[4]+3889429448&4294967295,P=j+(k<<20&4294967295|k>>>12),k=I+(j^O&(P^j))+R[9]+568446438&4294967295,I=P+(k<<5&4294967295|k>>>27),k=O+(P^j&(I^P))+R[14]+3275163606&4294967295,O=I+(k<<9&4294967295|k>>>23),k=j+(I^P&(O^I))+R[3]+4107603335&4294967295,j=O+(k<<14&4294967295|k>>>18),k=P+(O^I&(j^O))+R[8]+1163531501&4294967295,P=j+(k<<20&4294967295|k>>>12),k=I+(j^O&(P^j))+R[13]+2850285829&4294967295,I=P+(k<<5&4294967295|k>>>27),k=O+(P^j&(I^P))+R[2]+4243563512&4294967295,O=I+(k<<9&4294967295|k>>>23),k=j+(I^P&(O^I))+R[7]+1735328473&4294967295,j=O+(k<<14&4294967295|k>>>18),k=P+(O^I&(j^O))+R[12]+2368359562&4294967295,P=j+(k<<20&4294967295|k>>>12),k=I+(P^j^O)+R[5]+4294588738&4294967295,I=P+(k<<4&4294967295|k>>>28),k=O+(I^P^j)+R[8]+2272392833&4294967295,O=I+(k<<11&4294967295|k>>>21),k=j+(O^I^P)+R[11]+1839030562&4294967295,j=O+(k<<16&4294967295|k>>>16),k=P+(j^O^I)+R[14]+4259657740&4294967295,P=j+(k<<23&4294967295|k>>>9),k=I+(P^j^O)+R[1]+2763975236&4294967295,I=P+(k<<4&4294967295|k>>>28),k=O+(I^P^j)+R[4]+1272893353&4294967295,O=I+(k<<11&4294967295|k>>>21),k=j+(O^I^P)+R[7]+4139469664&4294967295,j=O+(k<<16&4294967295|k>>>16),k=P+(j^O^I)+R[10]+3200236656&4294967295,P=j+(k<<23&4294967295|k>>>9),k=I+(P^j^O)+R[13]+681279174&4294967295,I=P+(k<<4&4294967295|k>>>28),k=O+(I^P^j)+R[0]+3936430074&4294967295,O=I+(k<<11&4294967295|k>>>21),k=j+(O^I^P)+R[3]+3572445317&4294967295,j=O+(k<<16&4294967295|k>>>16),k=P+(j^O^I)+R[6]+76029189&4294967295,P=j+(k<<23&4294967295|k>>>9),k=I+(P^j^O)+R[9]+3654602809&4294967295,I=P+(k<<4&4294967295|k>>>28),k=O+(I^P^j)+R[12]+3873151461&4294967295,O=I+(k<<11&4294967295|k>>>21),k=j+(O^I^P)+R[15]+530742520&4294967295,j=O+(k<<16&4294967295|k>>>16),k=P+(j^O^I)+R[2]+3299628645&4294967295,P=j+(k<<23&4294967295|k>>>9),k=I+(j^(P|~O))+R[0]+4096336452&4294967295,I=P+(k<<6&4294967295|k>>>26),k=O+(P^(I|~j))+R[7]+1126891415&4294967295,O=I+(k<<10&4294967295|k>>>22),k=j+(I^(O|~P))+R[14]+2878612391&4294967295,j=O+(k<<15&4294967295|k>>>17),k=P+(O^(j|~I))+R[5]+4237533241&4294967295,P=j+(k<<21&4294967295|k>>>11),k=I+(j^(P|~O))+R[12]+1700485571&4294967295,I=P+(k<<6&4294967295|k>>>26),k=O+(P^(I|~j))+R[3]+2399980690&4294967295,O=I+(k<<10&4294967295|k>>>22),k=j+(I^(O|~P))+R[10]+4293915773&4294967295,j=O+(k<<15&4294967295|k>>>17),k=P+(O^(j|~I))+R[1]+2240044497&4294967295,P=j+(k<<21&4294967295|k>>>11),k=I+(j^(P|~O))+R[8]+1873313359&4294967295,I=P+(k<<6&4294967295|k>>>26),k=O+(P^(I|~j))+R[15]+4264355552&4294967295,O=I+(k<<10&4294967295|k>>>22),k=j+(I^(O|~P))+R[6]+2734768916&4294967295,j=O+(k<<15&4294967295|k>>>17),k=P+(O^(j|~I))+R[13]+1309151649&4294967295,P=j+(k<<21&4294967295|k>>>11),k=I+(j^(P|~O))+R[4]+4149444226&4294967295,I=P+(k<<6&4294967295|k>>>26),k=O+(P^(I|~j))+R[11]+3174756917&4294967295,O=I+(k<<10&4294967295|k>>>22),k=j+(I^(O|~P))+R[2]+718787259&4294967295,j=O+(k<<15&4294967295|k>>>17),k=P+(O^(j|~I))+R[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(j+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+j&4294967295,C.g[3]=C.g[3]+O&4294967295}r.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var P=I-this.blockSize,R=this.B,j=this.h,O=0;O<I;){if(j==0)for(;O<=P;)s(this,C,O),O+=this.blockSize;if(typeof C=="string"){for(;O<I;)if(R[j++]=C.charCodeAt(O++),j==this.blockSize){s(this,R),j=0;break}}else for(;O<I;)if(R[j++]=C[O++],j==this.blockSize){s(this,R),j=0;break}}this.h=j,this.o+=I},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var P=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=P&255,P/=256;for(this.u(C),C=Array(16),I=P=0;4>I;++I)for(var R=0;32>R;R+=8)C[P++]=this.g[I]>>>R&255;return C};function i(C,I){var P=a;return Object.prototype.hasOwnProperty.call(P,C)?P[C]:P[C]=I(C)}function o(C,I){this.h=I;for(var P=[],R=!0,j=C.length-1;0<=j;j--){var O=C[j]|0;R&&O==I||(P[j]=O,R=!1)}this.g=P}var a={};function l(C){return-128<=C&&128>C?i(C,function(I){return new o([I|0],0>I?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return w(c(-C));for(var I=[],P=1,R=0;C>=P;R++)I[R]=C/P|0,P*=4294967296;return new o(I,0)}function d(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return w(d(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(I,8)),R=h,j=0;j<C.length;j+=8){var O=Math.min(8,C.length-j),k=parseInt(C.substring(j,j+O),I);8>O?(O=c(Math.pow(I,O)),R=R.j(O).add(c(k))):(R=R.j(P),R=R.add(c(k)))}return R}var h=l(0),m=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-w(this).m();for(var C=0,I=1,P=0;P<this.g.length;P++){var R=this.i(P);C+=(0<=R?R:4294967296+R)*I,I*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(v(this))return"0";if(y(this))return"-"+w(this).toString(C);for(var I=c(Math.pow(C,6)),P=this,R="";;){var j=S(P,I).g;P=_(P,j.j(I));var O=((0<P.g.length?P.g[0]:P.h)>>>0).toString(C);if(P=j,v(P))return O+R;for(;6>O.length;)O="0"+O;R=O+R}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function v(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function y(C){return C.h==-1}t.l=function(C){return C=_(this,C),y(C)?-1:v(C)?0:1};function w(C){for(var I=C.g.length,P=[],R=0;R<I;R++)P[R]=~C.g[R];return new o(P,~C.h).add(m)}t.abs=function(){return y(this)?w(this):this},t.add=function(C){for(var I=Math.max(this.g.length,C.g.length),P=[],R=0,j=0;j<=I;j++){var O=R+(this.i(j)&65535)+(C.i(j)&65535),k=(O>>>16)+(this.i(j)>>>16)+(C.i(j)>>>16);R=k>>>16,O&=65535,k&=65535,P[j]=k<<16|O}return new o(P,P[P.length-1]&-2147483648?-1:0)};function _(C,I){return C.add(w(I))}t.j=function(C){if(v(this)||v(C))return h;if(y(this))return y(C)?w(this).j(w(C)):w(w(this).j(C));if(y(C))return w(this.j(w(C)));if(0>this.l(g)&&0>C.l(g))return c(this.m()*C.m());for(var I=this.g.length+C.g.length,P=[],R=0;R<2*I;R++)P[R]=0;for(R=0;R<this.g.length;R++)for(var j=0;j<C.g.length;j++){var O=this.i(R)>>>16,k=this.i(R)&65535,W=C.i(j)>>>16,z=C.i(j)&65535;P[2*R+2*j]+=k*z,x(P,2*R+2*j),P[2*R+2*j+1]+=O*z,x(P,2*R+2*j+1),P[2*R+2*j+1]+=k*W,x(P,2*R+2*j+1),P[2*R+2*j+2]+=O*W,x(P,2*R+2*j+2)}for(R=0;R<I;R++)P[R]=P[2*R+1]<<16|P[2*R];for(R=I;R<2*I;R++)P[R]=0;return new o(P,0)};function x(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function b(C,I){this.g=C,this.h=I}function S(C,I){if(v(I))throw Error("division by zero");if(v(C))return new b(h,h);if(y(C))return I=S(w(C),I),new b(w(I.g),w(I.h));if(y(I))return I=S(C,w(I)),new b(w(I.g),I.h);if(30<C.g.length){if(y(C)||y(I))throw Error("slowDivide_ only works with positive integers.");for(var P=m,R=I;0>=R.l(C);)P=A(P),R=A(R);var j=D(P,1),O=D(R,1);for(R=D(R,2),P=D(P,2);!v(R);){var k=O.add(R);0>=k.l(C)&&(j=j.add(P),O=k),R=D(R,1),P=D(P,1)}return I=_(C,j.j(I)),new b(j,I)}for(j=h;0<=C.l(I);){for(P=Math.max(1,Math.floor(C.m()/I.m())),R=Math.ceil(Math.log(P)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),O=c(P),k=O.j(I);y(k)||0<k.l(C);)P-=R,O=c(P),k=O.j(I);v(O)&&(O=m),j=j.add(O),C=_(C,k)}return new b(j,C)}t.A=function(C){return S(this,C).h},t.and=function(C){for(var I=Math.max(this.g.length,C.g.length),P=[],R=0;R<I;R++)P[R]=this.i(R)&C.i(R);return new o(P,this.h&C.h)},t.or=function(C){for(var I=Math.max(this.g.length,C.g.length),P=[],R=0;R<I;R++)P[R]=this.i(R)|C.i(R);return new o(P,this.h|C.h)},t.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),P=[],R=0;R<I;R++)P[R]=this.i(R)^C.i(R);return new o(P,this.h^C.h)};function A(C){for(var I=C.g.length+1,P=[],R=0;R<I;R++)P[R]=C.i(R)<<1|C.i(R-1)>>>31;return new o(P,C.h)}function D(C,I){var P=I>>5;I%=32;for(var R=C.g.length-P,j=[],O=0;O<R;O++)j[O]=0<I?C.i(O+P)>>>I|C.i(O+P+1)<<32-I:C.i(O+P);return new o(j,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Oj=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Wo=o}).apply(typeof nP<"u"?nP:typeof self<"u"?self:typeof window<"u"?window:{});var Ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mj,ku,Vj,Rp,lw,Lj,$j,Fj;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,E,T){return f==Array.prototype||f==Object.prototype||(f[E]=T.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ff=="object"&&Ff];for(var E=0;E<f.length;++E){var T=f[E];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(f,E){if(E)e:{var T=r;f=f.split(".");for(var N=0;N<f.length-1;N++){var L=f[N];if(!(L in T))break e;T=T[L]}f=f[f.length-1],N=T[f],E=E(N),E!=N&&E!=null&&e(T,f,{configurable:!0,writable:!0,value:E})}}function i(f,E){f instanceof String&&(f+="");var T=0,N=!1,L={next:function(){if(!N&&T<f.length){var B=T++;return{value:E(B,f[B]),done:!1}}return N=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(f){return f||function(){return i(this,function(E,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var E=typeof f;return E=E!="object"?E:f?Array.isArray(f)?"array":E:"null",E=="array"||E=="object"&&typeof f.length=="number"}function c(f){var E=typeof f;return E=="object"&&f!=null||E=="function"}function d(f,E,T){return f.call.apply(f.bind,arguments)}function h(f,E,T){if(!f)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,N),f.apply(E,L)}}return function(){return f.apply(E,arguments)}}function m(f,E,T){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(f,E){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),f.apply(this,N)}}function v(f,E){function T(){}T.prototype=E.prototype,f.aa=E.prototype,f.prototype=new T,f.prototype.constructor=f,f.Qb=function(N,L,B){for(var ee=Array(arguments.length-2),He=2;He<arguments.length;He++)ee[He-2]=arguments[He];return E.prototype[L].apply(N,ee)}}function y(f){const E=f.length;if(0<E){const T=Array(E);for(let N=0;N<E;N++)T[N]=f[N];return T}return[]}function w(f,E){for(let T=1;T<arguments.length;T++){const N=arguments[T];if(l(N)){const L=f.length||0,B=N.length||0;f.length=L+B;for(let ee=0;ee<B;ee++)f[L+ee]=N[ee]}else f.push(N)}}class _{constructor(E,T){this.i=E,this.j=T,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function x(f){return/^[\s\xa0]*$/.test(f)}function b(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function S(f){return S[" "](f),f}S[" "]=function(){};var A=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function D(f,E,T){for(const N in f)E.call(T,f[N],N,f)}function C(f,E){for(const T in f)E.call(void 0,f[T],T,f)}function I(f){const E={};for(const T in f)E[T]=f[T];return E}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(f,E){let T,N;for(let L=1;L<arguments.length;L++){N=arguments[L];for(T in N)f[T]=N[T];for(let B=0;B<P.length;B++)T=P[B],Object.prototype.hasOwnProperty.call(N,T)&&(f[T]=N[T])}}function j(f){var E=1;f=f.split(":");const T=[];for(;0<E&&f.length;)T.push(f.shift()),E--;return f.length&&T.push(f.join(":")),T}function O(f){a.setTimeout(()=>{throw f},0)}function k(){var f=F;let E=null;return f.g&&(E=f.g,f.g=f.g.next,f.g||(f.h=null),E.next=null),E}class W{constructor(){this.h=this.g=null}add(E,T){const N=z.get();N.set(E,T),this.h?this.h.next=N:this.g=N,this.h=N}}var z=new _(()=>new G,f=>f.reset());class G{constructor(){this.next=this.g=this.h=null}set(E,T){this.h=E,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let H,M=!1,F=new W,V=()=>{const f=a.Promise.resolve(void 0);H=()=>{f.then(q)}};var q=()=>{for(var f;f=k();){try{f.h.call(f.g)}catch(T){O(T)}var E=z;E.j(f),100>E.h&&(E.h++,f.next=E.g,E.g=f)}M=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(f,E){this.type=f,this.g=this.target=E,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,E=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};a.addEventListener("test",T,E),a.removeEventListener("test",T,E)}catch{}return f}();function we(f,E){if(K.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var T=this.type=f.type,N=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=E,E=f.relatedTarget){if(A){e:{try{S(E.nodeName);var L=!0;break e}catch{}L=!1}L||(E=null)}}else T=="mouseover"?E=f.fromElement:T=="mouseout"&&(E=f.toElement);this.relatedTarget=E,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ge[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&we.aa.h.call(this)}}v(we,K);var ge={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),Se=0;function Ie(f,E,T,N,L){this.listener=f,this.proxy=null,this.src=E,this.type=T,this.capture=!!N,this.ha=L,this.key=++Se,this.da=this.fa=!1}function xe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ye(f){this.src=f,this.g={},this.h=0}ye.prototype.add=function(f,E,T,N,L){var B=f.toString();f=this.g[B],f||(f=this.g[B]=[],this.h++);var ee=Be(f,E,N,L);return-1<ee?(E=f[ee],T||(E.fa=!1)):(E=new Ie(E,this.src,B,!!N,L),E.fa=T,f.push(E)),E};function Ce(f,E){var T=E.type;if(T in f.g){var N=f.g[T],L=Array.prototype.indexOf.call(N,E,void 0),B;(B=0<=L)&&Array.prototype.splice.call(N,L,1),B&&(xe(E),f.g[T].length==0&&(delete f.g[T],f.h--))}}function Be(f,E,T,N){for(var L=0;L<f.length;++L){var B=f[L];if(!B.da&&B.listener==E&&B.capture==!!T&&B.ha==N)return L}return-1}var ct="closure_lm_"+(1e6*Math.random()|0),Gt={};function Un(f,E,T,N,L){if(N&&N.once)return Cn(f,E,T,N,L);if(Array.isArray(E)){for(var B=0;B<E.length;B++)Un(f,E[B],T,N,L);return null}return T=Xy(T),f&&f[ne]?f.K(E,T,c(N)?!!N.capture:!!N,L):nr(f,E,T,!1,N,L)}function nr(f,E,T,N,L,B){if(!E)throw Error("Invalid event type");var ee=c(L)?!!L.capture:!!L,He=Qy(f);if(He||(f[ct]=He=new ye(f)),T=He.add(E,T,N,ee,B),T.proxy)return T;if(N=mo(),T.proxy=N,N.src=f,N.listener=T,f.addEventListener)fe||(L=ee),L===void 0&&(L=!1),f.addEventListener(E.toString(),N,L);else if(f.attachEvent)f.attachEvent(dT(E.toString()),N);else if(f.addListener&&f.removeListener)f.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function mo(){function f(T){return E.call(f.src,f.listener,T)}const E=r3;return f}function Cn(f,E,T,N,L){if(Array.isArray(E)){for(var B=0;B<E.length;B++)Cn(f,E[B],T,N,L);return null}return T=Xy(T),f&&f[ne]?f.L(E,T,c(N)?!!N.capture:!!N,L):nr(f,E,T,!0,N,L)}function ef(f,E,T,N,L){if(Array.isArray(E))for(var B=0;B<E.length;B++)ef(f,E[B],T,N,L);else N=c(N)?!!N.capture:!!N,T=Xy(T),f&&f[ne]?(f=f.i,E=String(E).toString(),E in f.g&&(B=f.g[E],T=Be(B,T,N,L),-1<T&&(xe(B[T]),Array.prototype.splice.call(B,T,1),B.length==0&&(delete f.g[E],f.h--)))):f&&(f=Qy(f))&&(E=f.g[E.toString()],f=-1,E&&(f=Be(E,T,N,L)),(T=-1<f?E[f]:null)&&Js(T))}function Js(f){if(typeof f!="number"&&f&&!f.da){var E=f.src;if(E&&E[ne])Ce(E.i,f);else{var T=f.type,N=f.proxy;E.removeEventListener?E.removeEventListener(T,N,f.capture):E.detachEvent?E.detachEvent(dT(T),N):E.addListener&&E.removeListener&&E.removeListener(N),(T=Qy(E))?(Ce(T,f),T.h==0&&(T.src=null,E[ct]=null)):xe(f)}}}function dT(f){return f in Gt?Gt[f]:Gt[f]="on"+f}function r3(f,E){if(f.da)f=!0;else{E=new we(E,this);var T=f.listener,N=f.ha||f.src;f.fa&&Js(f),f=T.call(N,E)}return f}function Qy(f){return f=f[ct],f instanceof ye?f:null}var Yy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xy(f){return typeof f=="function"?f:(f[Yy]||(f[Yy]=function(E){return f.handleEvent(E)}),f[Yy])}function rn(){X.call(this),this.i=new ye(this),this.M=this,this.F=null}v(rn,X),rn.prototype[ne]=!0,rn.prototype.removeEventListener=function(f,E,T,N){ef(this,f,E,T,N)};function vn(f,E){var T,N=f.F;if(N)for(T=[];N;N=N.F)T.push(N);if(f=f.M,N=E.type||E,typeof E=="string")E=new K(E,f);else if(E instanceof K)E.target=E.target||f;else{var L=E;E=new K(N,f),R(E,L)}if(L=!0,T)for(var B=T.length-1;0<=B;B--){var ee=E.g=T[B];L=tf(ee,N,!0,E)&&L}if(ee=E.g=f,L=tf(ee,N,!0,E)&&L,L=tf(ee,N,!1,E)&&L,T)for(B=0;B<T.length;B++)ee=E.g=T[B],L=tf(ee,N,!1,E)&&L}rn.prototype.N=function(){if(rn.aa.N.call(this),this.i){var f=this.i,E;for(E in f.g){for(var T=f.g[E],N=0;N<T.length;N++)xe(T[N]);delete f.g[E],f.h--}}this.F=null},rn.prototype.K=function(f,E,T,N){return this.i.add(String(f),E,!1,T,N)},rn.prototype.L=function(f,E,T,N){return this.i.add(String(f),E,!0,T,N)};function tf(f,E,T,N){if(E=f.i.g[String(E)],!E)return!0;E=E.concat();for(var L=!0,B=0;B<E.length;++B){var ee=E[B];if(ee&&!ee.da&&ee.capture==T){var He=ee.listener,Ht=ee.ha||ee.src;ee.fa&&Ce(f.i,ee),L=He.call(Ht,N)!==!1&&L}}return L&&!N.defaultPrevented}function hT(f,E,T){if(typeof f=="function")T&&(f=m(f,T));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:a.setTimeout(f,E||0)}function fT(f){f.g=hT(()=>{f.g=null,f.i&&(f.i=!1,fT(f))},f.l);const E=f.h;f.h=null,f.m.apply(null,E)}class s3 extends X{constructor(E,T){super(),this.m=E,this.l=T,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:fT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hc(f){X.call(this),this.h=f,this.g={}}v(Hc,X);var pT=[];function mT(f){D(f.g,function(E,T){this.g.hasOwnProperty(T)&&Js(E)},f),f.g={}}Hc.prototype.N=function(){Hc.aa.N.call(this),mT(this)},Hc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jy=a.JSON.stringify,i3=a.JSON.parse,o3=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Zy(){}Zy.prototype.h=null;function gT(f){return f.h||(f.h=f.i())}function yT(){}var Kc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ev(){K.call(this,"d")}v(ev,K);function tv(){K.call(this,"c")}v(tv,K);var go={},vT=null;function nf(){return vT=vT||new rn}go.La="serverreachability";function xT(f){K.call(this,go.La,f)}v(xT,K);function Qc(f){const E=nf();vn(E,new xT(E))}go.STAT_EVENT="statevent";function wT(f,E){K.call(this,go.STAT_EVENT,f),this.stat=E}v(wT,K);function xn(f){const E=nf();vn(E,new wT(E,f))}go.Ma="timingevent";function _T(f,E){K.call(this,go.Ma,f),this.size=E}v(_T,K);function Yc(f,E){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},E)}function Xc(){this.g=!0}Xc.prototype.xa=function(){this.g=!1};function a3(f,E,T,N,L,B){f.info(function(){if(f.g)if(B)for(var ee="",He=B.split("&"),Ht=0;Ht<He.length;Ht++){var Fe=He[Ht].split("=");if(1<Fe.length){var sn=Fe[0];Fe=Fe[1];var on=sn.split("_");ee=2<=on.length&&on[1]=="type"?ee+(sn+"="+Fe+"&"):ee+(sn+"=redacted&")}}else ee=null;else ee=B;return"XMLHTTP REQ ("+N+") [attempt "+L+"]: "+E+`
`+T+`
`+ee})}function l3(f,E,T,N,L,B,ee){f.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+L+"]: "+E+`
`+T+`
`+B+" "+ee})}function $a(f,E,T,N){f.info(function(){return"XMLHTTP TEXT ("+E+"): "+u3(f,T)+(N?" "+N:"")})}function c3(f,E){f.info(function(){return"TIMEOUT: "+E})}Xc.prototype.info=function(){};function u3(f,E){if(!f.g)return E;if(!E)return null;try{var T=JSON.parse(E);if(T){for(f=0;f<T.length;f++)if(Array.isArray(T[f])){var N=T[f];if(!(2>N.length)){var L=N[1];if(Array.isArray(L)&&!(1>L.length)){var B=L[0];if(B!="noop"&&B!="stop"&&B!="close")for(var ee=1;ee<L.length;ee++)L[ee]=""}}}}return Jy(T)}catch{return E}}var rf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nv;function sf(){}v(sf,Zy),sf.prototype.g=function(){return new XMLHttpRequest},sf.prototype.i=function(){return{}},nv=new sf;function Zs(f,E,T,N){this.j=f,this.i=E,this.l=T,this.R=N||1,this.U=new Hc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ET}function ET(){this.i=null,this.g="",this.h=!1}var TT={},rv={};function sv(f,E,T){f.L=1,f.v=cf(es(E)),f.m=T,f.P=!0,ST(f,null)}function ST(f,E){f.F=Date.now(),of(f),f.A=es(f.v);var T=f.A,N=f.R;Array.isArray(N)||(N=[String(N)]),$T(T.i,"t",N),f.C=0,T=f.j.J,f.h=new ET,f.g=rS(f.j,T?E:null,!f.m),0<f.O&&(f.M=new s3(m(f.Y,f,f.g),f.O)),E=f.U,T=f.g,N=f.ca;var L="readystatechange";Array.isArray(L)||(L&&(pT[0]=L.toString()),L=pT);for(var B=0;B<L.length;B++){var ee=Un(T,L[B],N||E.handleEvent,!1,E.h||E);if(!ee)break;E.g[ee.key]=ee}E=f.H?I(f.H):{},f.m?(f.u||(f.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,E)):(f.u="GET",f.g.ea(f.A,f.u,null,E)),Qc(),a3(f.i,f.u,f.A,f.l,f.R,f.m)}Zs.prototype.ca=function(f){f=f.target;const E=this.M;E&&ts(f)==3?E.j():this.Y(f)},Zs.prototype.Y=function(f){try{if(f==this.g)e:{const on=ts(this.g);var E=this.g.Ba();const Ba=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||GT(this.g)))){this.J||on!=4||E==7||(E==8||0>=Ba?Qc(3):Qc(2)),iv(this);var T=this.g.Z();this.X=T;t:if(IT(this)){var N=GT(this.g);f="";var L=N.length,B=ts(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yo(this),Jc(this);var ee="";break t}this.h.i=new a.TextDecoder}for(E=0;E<L;E++)this.h.h=!0,f+=this.h.i.decode(N[E],{stream:!(B&&E==L-1)});N.length=0,this.h.g+=f,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=T==200,l3(this.i,this.u,this.A,this.l,this.R,on,T),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Ht=this.g;if((He=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(He)){var Fe=He;break t}}Fe=null}if(T=Fe)$a(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ov(this,T);else{this.o=!1,this.s=3,xn(12),yo(this),Jc(this);break e}}if(this.P){T=!0;let vr;for(;!this.J&&this.C<ee.length;)if(vr=d3(this,ee),vr==rv){on==4&&(this.s=4,xn(14),T=!1),$a(this.i,this.l,null,"[Incomplete Response]");break}else if(vr==TT){this.s=4,xn(15),$a(this.i,this.l,ee,"[Invalid Chunk]"),T=!1;break}else $a(this.i,this.l,vr,null),ov(this,vr);if(IT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||ee.length!=0||this.h.h||(this.s=1,xn(16),T=!1),this.o=this.o&&T,!T)$a(this.i,this.l,ee,"[Invalid Chunked Response]"),yo(this),Jc(this);else if(0<ee.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),hv(sn),sn.M=!0,xn(11))}}else $a(this.i,this.l,ee,null),ov(this,ee);on==4&&yo(this),this.o&&!this.J&&(on==4?ZT(this.j,this):(this.o=!1,of(this)))}else P3(this.g),T==400&&0<ee.indexOf("Unknown SID")?(this.s=3,xn(12)):(this.s=0,xn(13)),yo(this),Jc(this)}}}catch{}finally{}};function IT(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function d3(f,E){var T=f.C,N=E.indexOf(`
`,T);return N==-1?rv:(T=Number(E.substring(T,N)),isNaN(T)?TT:(N+=1,N+T>E.length?rv:(E=E.slice(N,N+T),f.C=N+T,E)))}Zs.prototype.cancel=function(){this.J=!0,yo(this)};function of(f){f.S=Date.now()+f.I,CT(f,f.I)}function CT(f,E){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Yc(m(f.ba,f),E)}function iv(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Zs.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(c3(this.i,this.A),this.L!=2&&(Qc(),xn(17)),yo(this),this.s=2,Jc(this)):CT(this,this.S-f)};function Jc(f){f.j.G==0||f.J||ZT(f.j,f)}function yo(f){iv(f);var E=f.M;E&&typeof E.ma=="function"&&E.ma(),f.M=null,mT(f.U),f.g&&(E=f.g,f.g=null,E.abort(),E.ma())}function ov(f,E){try{var T=f.j;if(T.G!=0&&(T.g==f||av(T.h,f))){if(!f.K&&av(T.h,f)&&T.G==3){try{var N=T.Da.g.parse(E)}catch{N=null}if(Array.isArray(N)&&N.length==3){var L=N;if(L[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<f.F)mf(T),ff(T);else break e;dv(T),xn(18)}}else T.za=L[1],0<T.za-T.T&&37500>L[2]&&T.F&&T.v==0&&!T.C&&(T.C=Yc(m(T.Za,T),6e3));if(1>=RT(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else xo(T,11)}else if((f.K||T.g==f)&&mf(T),!x(E))for(L=T.Da.g.parse(E),E=0;E<L.length;E++){let Fe=L[E];if(T.T=Fe[0],Fe=Fe[1],T.G==2)if(Fe[0]=="c"){T.K=Fe[1],T.ia=Fe[2];const sn=Fe[3];sn!=null&&(T.la=sn,T.j.info("VER="+T.la));const on=Fe[4];on!=null&&(T.Aa=on,T.j.info("SVER="+T.Aa));const Ba=Fe[5];Ba!=null&&typeof Ba=="number"&&0<Ba&&(N=1.5*Ba,T.L=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const vr=f.g;if(vr){const yf=vr.g?vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yf){var B=N.h;B.g||yf.indexOf("spdy")==-1&&yf.indexOf("quic")==-1&&yf.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(lv(B,B.h),B.h=null))}if(N.D){const fv=vr.g?vr.g.getResponseHeader("X-HTTP-Session-Id"):null;fv&&(N.ya=fv,Ze(N.I,N.D,fv))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-f.F,T.j.info("Handshake RTT: "+T.R+"ms")),N=T;var ee=f;if(N.qa=nS(N,N.J?N.ia:null,N.W),ee.K){NT(N.h,ee);var He=ee,Ht=N.L;Ht&&(He.I=Ht),He.B&&(iv(He),of(He)),N.g=ee}else XT(N);0<T.i.length&&pf(T)}else Fe[0]!="stop"&&Fe[0]!="close"||xo(T,7);else T.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?xo(T,7):uv(T):Fe[0]!="noop"&&T.l&&T.l.ta(Fe),T.v=0)}}Qc(4)}catch{}}var h3=class{constructor(f,E){this.g=f,this.map=E}};function PT(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function AT(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function RT(f){return f.h?1:f.g?f.g.size:0}function av(f,E){return f.h?f.h==E:f.g?f.g.has(E):!1}function lv(f,E){f.g?f.g.add(E):f.h=E}function NT(f,E){f.h&&f.h==E?f.h=null:f.g&&f.g.has(E)&&f.g.delete(E)}PT.prototype.cancel=function(){if(this.i=kT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function kT(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let E=f.i;for(const T of f.g.values())E=E.concat(T.D);return E}return y(f.i)}function f3(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var E=[],T=f.length,N=0;N<T;N++)E.push(f[N]);return E}E=[],T=0;for(N in f)E[T++]=f[N];return E}function p3(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var E=[];f=f.length;for(var T=0;T<f;T++)E.push(T);return E}E=[],T=0;for(const N in f)E[T++]=N;return E}}}function DT(f,E){if(f.forEach&&typeof f.forEach=="function")f.forEach(E,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,E,void 0);else for(var T=p3(f),N=f3(f),L=N.length,B=0;B<L;B++)E.call(void 0,N[B],T&&T[B],f)}var jT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function m3(f,E){if(f){f=f.split("&");for(var T=0;T<f.length;T++){var N=f[T].indexOf("="),L=null;if(0<=N){var B=f[T].substring(0,N);L=f[T].substring(N+1)}else B=f[T];E(B,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function vo(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof vo){this.h=f.h,af(this,f.j),this.o=f.o,this.g=f.g,lf(this,f.s),this.l=f.l;var E=f.i,T=new tu;T.i=E.i,E.g&&(T.g=new Map(E.g),T.h=E.h),OT(this,T),this.m=f.m}else f&&(E=String(f).match(jT))?(this.h=!1,af(this,E[1]||"",!0),this.o=Zc(E[2]||""),this.g=Zc(E[3]||"",!0),lf(this,E[4]),this.l=Zc(E[5]||"",!0),OT(this,E[6]||"",!0),this.m=Zc(E[7]||"")):(this.h=!1,this.i=new tu(null,this.h))}vo.prototype.toString=function(){var f=[],E=this.j;E&&f.push(eu(E,MT,!0),":");var T=this.g;return(T||E=="file")&&(f.push("//"),(E=this.o)&&f.push(eu(E,MT,!0),"@"),f.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&f.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(eu(T,T.charAt(0)=="/"?v3:y3,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",eu(T,w3)),f.join("")};function es(f){return new vo(f)}function af(f,E,T){f.j=T?Zc(E,!0):E,f.j&&(f.j=f.j.replace(/:$/,""))}function lf(f,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);f.s=E}else f.s=null}function OT(f,E,T){E instanceof tu?(f.i=E,_3(f.i,f.h)):(T||(E=eu(E,x3)),f.i=new tu(E,f.h))}function Ze(f,E,T){f.i.set(E,T)}function cf(f){return Ze(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Zc(f,E){return f?E?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function eu(f,E,T){return typeof f=="string"?(f=encodeURI(f).replace(E,g3),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function g3(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var MT=/[#\/\?@]/g,y3=/[#\?:]/g,v3=/[#\?]/g,x3=/[#\?@]/g,w3=/#/g;function tu(f,E){this.h=this.g=null,this.i=f||null,this.j=!!E}function ei(f){f.g||(f.g=new Map,f.h=0,f.i&&m3(f.i,function(E,T){f.add(decodeURIComponent(E.replace(/\+/g," ")),T)}))}t=tu.prototype,t.add=function(f,E){ei(this),this.i=null,f=Fa(this,f);var T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(E),this.h+=1,this};function VT(f,E){ei(f),E=Fa(f,E),f.g.has(E)&&(f.i=null,f.h-=f.g.get(E).length,f.g.delete(E))}function LT(f,E){return ei(f),E=Fa(f,E),f.g.has(E)}t.forEach=function(f,E){ei(this),this.g.forEach(function(T,N){T.forEach(function(L){f.call(E,L,N,this)},this)},this)},t.na=function(){ei(this);const f=Array.from(this.g.values()),E=Array.from(this.g.keys()),T=[];for(let N=0;N<E.length;N++){const L=f[N];for(let B=0;B<L.length;B++)T.push(E[N])}return T},t.V=function(f){ei(this);let E=[];if(typeof f=="string")LT(this,f)&&(E=E.concat(this.g.get(Fa(this,f))));else{f=Array.from(this.g.values());for(let T=0;T<f.length;T++)E=E.concat(f[T])}return E},t.set=function(f,E){return ei(this),this.i=null,f=Fa(this,f),LT(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[E]),this.h+=1,this},t.get=function(f,E){return f?(f=this.V(f),0<f.length?String(f[0]):E):E};function $T(f,E,T){VT(f,E),0<T.length&&(f.i=null,f.g.set(Fa(f,E),y(T)),f.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],E=Array.from(this.g.keys());for(var T=0;T<E.length;T++){var N=E[T];const B=encodeURIComponent(String(N)),ee=this.V(N);for(N=0;N<ee.length;N++){var L=B;ee[N]!==""&&(L+="="+encodeURIComponent(String(ee[N]))),f.push(L)}}return this.i=f.join("&")};function Fa(f,E){return E=String(E),f.j&&(E=E.toLowerCase()),E}function _3(f,E){E&&!f.j&&(ei(f),f.i=null,f.g.forEach(function(T,N){var L=N.toLowerCase();N!=L&&(VT(this,N),$T(this,L,T))},f)),f.j=E}function b3(f,E){const T=new Xc;if(a.Image){const N=new Image;N.onload=g(ti,T,"TestLoadImage: loaded",!0,E,N),N.onerror=g(ti,T,"TestLoadImage: error",!1,E,N),N.onabort=g(ti,T,"TestLoadImage: abort",!1,E,N),N.ontimeout=g(ti,T,"TestLoadImage: timeout",!1,E,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=f}else E(!1)}function E3(f,E){const T=new Xc,N=new AbortController,L=setTimeout(()=>{N.abort(),ti(T,"TestPingServer: timeout",!1,E)},1e4);fetch(f,{signal:N.signal}).then(B=>{clearTimeout(L),B.ok?ti(T,"TestPingServer: ok",!0,E):ti(T,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(L),ti(T,"TestPingServer: error",!1,E)})}function ti(f,E,T,N,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),N(T)}catch{}}function T3(){this.g=new o3}function S3(f,E,T){const N=T||"";try{DT(f,function(L,B){let ee=L;c(L)&&(ee=Jy(L)),E.push(N+B+"="+encodeURIComponent(ee))})}catch(L){throw E.push(N+"type="+encodeURIComponent("_badmap")),L}}function uf(f){this.l=f.Ub||null,this.j=f.eb||!1}v(uf,Zy),uf.prototype.g=function(){return new df(this.l,this.j)},uf.prototype.i=function(f){return function(){return f}}({});function df(f,E){rn.call(this),this.D=f,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(df,rn),t=df.prototype,t.open=function(f,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=E,this.readyState=1,ru(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(E.body=f),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nu(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ru(this)),this.g&&(this.readyState=3,ru(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;FT(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function FT(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var E=f.value?f.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!f.done}))&&(this.response=this.responseText+=E)}f.done?nu(this):ru(this),this.readyState==3&&FT(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,nu(this))},t.Qa=function(f){this.g&&(this.response=f,nu(this))},t.ga=function(){this.g&&nu(this)};function nu(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ru(f)}t.setRequestHeader=function(f,E){this.u.append(f,E)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],E=this.h.entries();for(var T=E.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=E.next();return f.join(`\r
`)};function ru(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(df.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function UT(f){let E="";return D(f,function(T,N){E+=N,E+=":",E+=T,E+=`\r
`}),E}function cv(f,E,T){e:{for(N in T){var N=!1;break e}N=!0}N||(T=UT(T),typeof f=="string"?T!=null&&encodeURIComponent(String(T)):Ze(f,E,T))}function xt(f){rn.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(xt,rn);var I3=/^https?$/i,C3=["POST","PUT"];t=xt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,E,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);E=E?E.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nv.g(),this.v=this.o?gT(this.o):gT(nv),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(E,String(f),!0),this.B=!1}catch(B){BT(this,B);return}if(f=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var L in N)T.set(L,N[L]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const B of N.keys())T.set(B,N.get(B));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(B=>B.toLowerCase()=="content-type"),L=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(C3,E,void 0))||N||L||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ee]of T)this.g.setRequestHeader(B,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{WT(this),this.u=!0,this.g.send(f),this.u=!1}catch(B){BT(this,B)}};function BT(f,E){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=E,f.m=5,zT(f),hf(f)}function zT(f){f.A||(f.A=!0,vn(f,"complete"),vn(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,vn(this,"complete"),vn(this,"abort"),hf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hf(this,!0)),xt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qT(this):this.bb())},t.bb=function(){qT(this)};function qT(f){if(f.h&&typeof o<"u"&&(!f.v[1]||ts(f)!=4||f.Z()!=2)){if(f.u&&ts(f)==4)hT(f.Ea,0,f);else if(vn(f,"readystatechange"),ts(f)==4){f.h=!1;try{const ee=f.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var T;if(!(T=E)){var N;if(N=ee===0){var L=String(f.D).match(jT)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),N=!I3.test(L?L.toLowerCase():"")}T=N}if(T)vn(f,"complete"),vn(f,"success");else{f.m=6;try{var B=2<ts(f)?f.g.statusText:""}catch{B=""}f.l=B+" ["+f.Z()+"]",zT(f)}}finally{hf(f)}}}}function hf(f,E){if(f.g){WT(f);const T=f.g,N=f.v[0]?()=>{}:null;f.g=null,f.v=null,E||vn(f,"ready");try{T.onreadystatechange=N}catch{}}}function WT(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function ts(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<ts(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var E=this.g.responseText;return f&&E.indexOf(f)==0&&(E=E.substring(f.length)),i3(E)}};function GT(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function P3(f){const E={};f=(f.g&&2<=ts(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<f.length;N++){if(x(f[N]))continue;var T=j(f[N]);const L=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const B=E[L]||[];E[L]=B,B.push(T)}C(E,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function su(f,E,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||E}function HT(f){this.Aa=0,this.i=[],this.j=new Xc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=su("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=su("baseRetryDelayMs",5e3,f),this.cb=su("retryDelaySeedMs",1e4,f),this.Wa=su("forwardChannelMaxRetries",2,f),this.wa=su("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new PT(f&&f.concurrentRequestLimit),this.Da=new T3,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=HT.prototype,t.la=8,t.G=1,t.connect=function(f,E,T,N){xn(0),this.W=f,this.H=E||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.I=nS(this,null,this.W),pf(this)};function uv(f){if(KT(f),f.G==3){var E=f.U++,T=es(f.I);if(Ze(T,"SID",f.K),Ze(T,"RID",E),Ze(T,"TYPE","terminate"),iu(f,T),E=new Zs(f,f.j,E),E.L=2,E.v=cf(es(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!T&&a.Image&&(new Image().src=E.v,T=!0),T||(E.g=rS(E.j,null),E.g.ea(E.v)),E.F=Date.now(),of(E)}tS(f)}function ff(f){f.g&&(hv(f),f.g.cancel(),f.g=null)}function KT(f){ff(f),f.u&&(a.clearTimeout(f.u),f.u=null),mf(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function pf(f){if(!AT(f.h)&&!f.s){f.s=!0;var E=f.Ga;H||V(),M||(H(),M=!0),F.add(E,f),f.B=0}}function A3(f,E){return RT(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=E.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Yc(m(f.Ga,f,E),eS(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const L=new Zs(this,this.j,f);let B=this.o;if(this.S&&(B?(B=I(B),R(B,this.S)):B=this.S),this.m!==null||this.O||(L.H=B,B=null),this.P)e:{for(var E=0,T=0;T<this.i.length;T++){t:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(E+=N,4096<E){E=T;break e}if(E===4096||T===this.i.length-1){E=T+1;break e}}E=1e3}else E=1e3;E=YT(this,L,E),T=es(this.I),Ze(T,"RID",f),Ze(T,"CVER",22),this.D&&Ze(T,"X-HTTP-Session-Id",this.D),iu(this,T),B&&(this.O?E="headers="+encodeURIComponent(String(UT(B)))+"&"+E:this.m&&cv(T,this.m,B)),lv(this.h,L),this.Ua&&Ze(T,"TYPE","init"),this.P?(Ze(T,"$req",E),Ze(T,"SID","null"),L.T=!0,sv(L,T,null)):sv(L,T,E),this.G=2}}else this.G==3&&(f?QT(this,f):this.i.length==0||AT(this.h)||QT(this))};function QT(f,E){var T;E?T=E.l:T=f.U++;const N=es(f.I);Ze(N,"SID",f.K),Ze(N,"RID",T),Ze(N,"AID",f.T),iu(f,N),f.m&&f.o&&cv(N,f.m,f.o),T=new Zs(f,f.j,T,f.B+1),f.m===null&&(T.H=f.o),E&&(f.i=E.D.concat(f.i)),E=YT(f,T,1e3),T.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),lv(f.h,T),sv(T,N,E)}function iu(f,E){f.H&&D(f.H,function(T,N){Ze(E,N,T)}),f.l&&DT({},function(T,N){Ze(E,N,T)})}function YT(f,E,T){T=Math.min(f.i.length,T);var N=f.l?m(f.l.Na,f.l,f):null;e:{var L=f.i;let B=-1;for(;;){const ee=["count="+T];B==-1?0<T?(B=L[0].g,ee.push("ofs="+B)):B=0:ee.push("ofs="+B);let He=!0;for(let Ht=0;Ht<T;Ht++){let Fe=L[Ht].g;const sn=L[Ht].map;if(Fe-=B,0>Fe)B=Math.max(0,L[Ht].g-100),He=!1;else try{S3(sn,ee,"req"+Fe+"_")}catch{N&&N(sn)}}if(He){N=ee.join("&");break e}}}return f=f.i.splice(0,T),E.D=f,N}function XT(f){if(!f.g&&!f.u){f.Y=1;var E=f.Fa;H||V(),M||(H(),M=!0),F.add(E,f),f.v=0}}function dv(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Yc(m(f.Fa,f),eS(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,JT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Yc(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xn(10),ff(this),JT(this))};function hv(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function JT(f){f.g=new Zs(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var E=es(f.qa);Ze(E,"RID","rpc"),Ze(E,"SID",f.K),Ze(E,"AID",f.T),Ze(E,"CI",f.F?"0":"1"),!f.F&&f.ja&&Ze(E,"TO",f.ja),Ze(E,"TYPE","xmlhttp"),iu(f,E),f.m&&f.o&&cv(E,f.m,f.o),f.L&&(f.g.I=f.L);var T=f.g;f=f.ia,T.L=1,T.v=cf(es(E)),T.m=null,T.P=!0,ST(T,f)}t.Za=function(){this.C!=null&&(this.C=null,ff(this),dv(this),xn(19))};function mf(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function ZT(f,E){var T=null;if(f.g==E){mf(f),hv(f),f.g=null;var N=2}else if(av(f.h,E))T=E.D,NT(f.h,E),N=1;else return;if(f.G!=0){if(E.o)if(N==1){T=E.m?E.m.length:0,E=Date.now()-E.F;var L=f.B;N=nf(),vn(N,new _T(N,T)),pf(f)}else XT(f);else if(L=E.s,L==3||L==0&&0<E.X||!(N==1&&A3(f,E)||N==2&&dv(f)))switch(T&&0<T.length&&(E=f.h,E.i=E.i.concat(T)),L){case 1:xo(f,5);break;case 4:xo(f,10);break;case 3:xo(f,6);break;default:xo(f,2)}}}function eS(f,E){let T=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(T*=2),T*E}function xo(f,E){if(f.j.info("Error code "+E),E==2){var T=m(f.fb,f),N=f.Xa;const L=!N;N=new vo(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||af(N,"https"),cf(N),L?b3(N.toString(),T):E3(N.toString(),T)}else xn(2);f.G=0,f.l&&f.l.sa(E),tS(f),KT(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),xn(2)):(this.j.info("Failed to ping google.com"),xn(1))};function tS(f){if(f.G=0,f.ka=[],f.l){const E=kT(f.h);(E.length!=0||f.i.length!=0)&&(w(f.ka,E),w(f.ka,f.i),f.h.i.length=0,y(f.i),f.i.length=0),f.l.ra()}}function nS(f,E,T){var N=T instanceof vo?es(T):new vo(T);if(N.g!="")E&&(N.g=E+"."+N.g),lf(N,N.s);else{var L=a.location;N=L.protocol,E=E?E+"."+L.hostname:L.hostname,L=+L.port;var B=new vo(null);N&&af(B,N),E&&(B.g=E),L&&lf(B,L),T&&(B.l=T),N=B}return T=f.D,E=f.ya,T&&E&&Ze(N,T,E),Ze(N,"VER",f.la),iu(f,N),N}function rS(f,E,T){if(E&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=f.Ca&&!f.pa?new xt(new uf({eb:T})):new xt(f.pa),E.Ha(f.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sS(){}t=sS.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function gf(){}gf.prototype.g=function(f,E){return new Bn(f,E)};function Bn(f,E){rn.call(this),this.g=new HT(E),this.l=f,this.h=E&&E.messageUrlParams||null,f=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(f?f["X-WebChannel-Content-Type"]=E.messageContentType:f={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(f?f["X-WebChannel-Client-Profile"]=E.va:f={"X-WebChannel-Client-Profile":E.va}),this.g.S=f,(f=E&&E.Sb)&&!x(f)&&(this.g.m=f),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!x(E)&&(this.g.D=E,f=this.h,f!==null&&E in f&&(f=this.h,E in f&&delete f[E])),this.j=new Ua(this)}v(Bn,rn),Bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){uv(this.g)},Bn.prototype.o=function(f){var E=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.u&&(T={},T.__data__=Jy(f),f=T);E.i.push(new h3(E.Ya++,f)),E.G==3&&pf(E)},Bn.prototype.N=function(){this.g.l=null,delete this.j,uv(this.g),delete this.g,Bn.aa.N.call(this)};function iS(f){ev.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var E=f.__sm__;if(E){e:{for(const T in E){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,E=E!==null&&f in E?E[f]:void 0),this.data=E}else this.data=f}v(iS,ev);function oS(){tv.call(this),this.status=1}v(oS,tv);function Ua(f){this.g=f}v(Ua,sS),Ua.prototype.ua=function(){vn(this.g,"a")},Ua.prototype.ta=function(f){vn(this.g,new iS(f))},Ua.prototype.sa=function(f){vn(this.g,new oS)},Ua.prototype.ra=function(){vn(this.g,"b")},gf.prototype.createWebChannel=gf.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,Fj=function(){return new gf},$j=function(){return nf()},Lj=go,lw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rf.NO_ERROR=0,rf.TIMEOUT=8,rf.HTTP_ERROR=6,Rp=rf,bT.COMPLETE="complete",Vj=bT,yT.EventType=Kc,Kc.OPEN="a",Kc.CLOSE="b",Kc.ERROR="c",Kc.MESSAGE="d",rn.prototype.listen=rn.prototype.K,ku=yT,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,Mj=xt}).apply(typeof Ff<"u"?Ff:typeof self<"u"?self:typeof window<"u"?window:{});const rP="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new Rb("@firebase/firestore");function nl(){return Hi.logLevel}function Lde(t){Hi.setLogLevel(t)}function Q(t,...e){if(Hi.logLevel<=ke.DEBUG){const n=e.map(Hb);Hi.debug(`Firestore (${Ac}): ${t}`,...n)}}function It(t,...e){if(Hi.logLevel<=ke.ERROR){const n=e.map(Hb);Hi.error(`Firestore (${Ac}): ${t}`,...n)}}function fr(t,...e){if(Hi.logLevel<=ke.WARN){const n=e.map(Hb);Hi.warn(`Firestore (${Ac}): ${t}`,...n)}}function Hb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${Ac}) INTERNAL ASSERTION FAILED: `+t;throw It(e),new Error(e)}function ue(t,e){t||ie()}function $de(t,e){t||ie()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Jr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class pK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mK{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ue(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new zt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zt,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string"),new Uj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string"),new Ft(e)}}class gK{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yK{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new gK(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vK{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ue(this.o===void 0);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ue(typeof n.token=="string"),this.R=n.token,new Bj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class Fde{getToken(){return Promise.resolve(new Bj(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=xK(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function ec(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function qj(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.timestamp=e}static fromTimestamp(e){return new he(e)}static min(){return new he(new Xe(0,0))}static max(){return new he(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Rd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Rd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class De extends Rd{construct(e,n,r){return new De(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new De(n)}static emptyPath(){return new De([])}}const wK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends Rd{construct(e,n,r){return new at(e,n,r)}static isValidIdentifier(e){return wK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new at(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Y(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Y(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(De.fromString(e))}static fromName(e){return new te(De.fromString(e).popFirst(5))}static empty(){return new te(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return De.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new De(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function cw(t){return t.fields.find(e=>e.kind===2)}function Po(t){return t.fields.filter(e=>e.kind!==2)}function _K(t,e){let n=ve(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=bK(t.fields[r],e.fields[r]),n!==0)return n;return ve(t.fields.length,e.fields.length)}tc.UNKNOWN_ID=-1;class Go{constructor(e,n){this.fieldPath=e,this.kind=n}}function bK(t,e){const n=at.comparator(t.fieldPath,e.fieldPath);return n!==0?n:ve(t.kind,e.kind)}class nc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new nc(0,Zn.min())}}function Wj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=he.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Zn(s,te.empty(),e)}function Gj(t){return new Zn(t.readTime,t.key,-1)}class Zn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zn(he.min(),te.empty(),-1)}static max(){return new Zn(he.max(),te.empty(),-1)}}function Kb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==Hj)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new zt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Xu(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Qb(r.target.error);this.V.reject(new Xu(e,s))}}static open(e,n,r,s){try{return new qg(n,e.transaction(s,r))}catch(i){throw new Xu(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Q("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new TK(n)}}class Wr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Wr.S(Mt())===12.2&&It("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Q("SimpleDb","Removing database:",e),Ro(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!WD())return!1;if(Wr.v())return!0;const e=Mt(),n=Wr.S(e),r=0<n&&n<10,s=Qj(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(Q("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Xu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new Y(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Y(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Xu(e,o))},s.onupgradeneeded=i=>{Q("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{Q("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=qg.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),$.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(Q("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Qj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class EK{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ro(this.B.delete())}}class Xu extends Y{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function lo(t){return t.name==="IndexedDbTransactionError"}class TK{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Q("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Q("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ro(r)}add(e){return Q("SimpleDb","ADD",this.store.name,e,e),Ro(this.store.add(e))}get(e){return Ro(this.store.get(e)).next(n=>(n===void 0&&(n=null),Q("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Q("SimpleDb","DELETE",this.store.name,e),Ro(this.store.delete(e))}count(){return Q("SimpleDb","COUNT",this.store.name),Ro(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new $((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new $((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){Q("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new $((r,s)=>{n.onerror=i=>{const o=Qb(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new $((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new EK(a),c=n(a.primaryKey,a.value,l);if(c instanceof $){const d=c.catch(h=>(l.done(),$.reject(h)));r.push(d)}l.isDone?s():l.K===null?a.continue():a.continue(l.K)}}).next(()=>$.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ro(t){return new $((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Qb(r.target.error);n(s)}})}let sP=!1;function Qb(t){const e=Wr.S(Mt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sP||(sP=!0,setTimeout(()=>{throw r},0)),r}}return t}class SK{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Q("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Q("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){lo(n)?Q("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ao(n)}await this.X(6e4)})}}class IK{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return $.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Q("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(a=>(Q("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=Gj(i);Kb(o,r)>0&&(r=o)}),new Zn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}kn.oe=-1;function vh(t){return t==null}function Nd(t){return t===0&&1/t==-1/0}function Yj(t){return typeof t=="number"&&Number.isInteger(t)&&!Nd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=iP(e)),e=CK(t.get(n),e);return iP(e)}function CK(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function iP(t){return t+""}function Vr(t){const e=t.length;if(ue(e>=2),e===2)return ue(t.charAt(0)===""&&t.charAt(1)===""),De.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&ie(),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ie()}i=o+2}return new De(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t,e){return[t,fn(e)]}function Xj(t,e,n){return[t,fn(e),n]}const PK={},AK=["prefixPath","collectionGroup","readTime","documentId"],RK=["prefixPath","collectionGroup","documentId"],NK=["collectionGroup","readTime","prefixPath","documentId"],kK=["canonicalId","targetId"],DK=["targetId","path"],jK=["path","targetId"],OK=["collectionId","parent"],MK=["indexId","uid"],VK=["uid","sequenceNumber"],LK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$K=["indexId","uid","orderedDocumentKey"],FK=["userId","collectionPath","documentId"],UK=["userId","collectionPath","largestBatchId"],BK=["userId","collectionGroup","largestBatchId"],Jj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zK=[...Jj,"documentOverlays"],Zj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eO=Zj,Yb=[...eO,"indexConfiguration","indexState","indexEntries"],qK=Yb,WK=[...Yb,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw extends Kj{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Vt(t,e){const n=Z(t);return Wr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tO(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function nO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||Qt.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uf(this.root,e,this.comparator,!0)}}class Uf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Qt.RED,this.left=s??Qt.EMPTY,this.right=i??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Qt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lP(this.data.getIterator())}getIteratorFrom(e){return new lP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class lP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qa(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new Ge(at.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ec(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bde(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new rO("Invalid base64 string: "+i):i}}(e);return new Et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const GK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(t){if(ue(!!t),typeof t=="string"){let e=0;const n=GK.exec(t);if(ue(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ks(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gg(t){const e=t.mapValue.fields.__previous_value__;return Wg(e)?Gg(e):e}function kd(t){const e=Ns(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class sa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kp={nullValue:"NULL_VALUE"};function Ki(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wg(t)?4:sO(t)?9007199254740991:Hg(t)?10:11:ie()}function Qr(t,e){if(t===e)return!0;const n=Ki(t);if(n!==Ki(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kd(t).isEqual(kd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ns(s.timestampValue),a=Ns(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ks(s.bytesValue).isEqual(ks(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return it(s.geoPointValue.latitude)===it(i.geoPointValue.latitude)&&it(s.geoPointValue.longitude)===it(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return it(s.integerValue)===it(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=it(s.doubleValue),a=it(i.doubleValue);return o===a?Nd(o)===Nd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ec(t.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(aP(o)!==aP(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Qr(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function Dd(t,e){return(t.values||[]).find(n=>Qr(n,e))!==void 0}function Qi(t,e){if(t===e)return 0;const n=Ki(t),r=Ki(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=it(i.integerValue||i.doubleValue),l=it(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return cP(t.timestampValue,e.timestampValue);case 4:return cP(kd(t),kd(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ks(i),l=ks(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ve(a[c],l[c]);if(d!==0)return d}return ve(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ve(it(i.latitude),it(o.latitude));return a!==0?a:ve(it(i.longitude),it(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return uP(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const h=i.fields||{},m=o.fields||{},g=(a=h.value)===null||a===void 0?void 0:a.arrayValue,v=(l=m.value)===null||l===void 0?void 0:l.arrayValue,y=ve(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:uP(g,v)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ii.mapValue&&o===Ii.mapValue)return 0;if(i===Ii.mapValue)return 1;if(o===Ii.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=ve(l[h],d[h]);if(m!==0)return m;const g=Qi(a[l[h]],c[d[h]]);if(g!==0)return g}return ve(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ie()}}function cP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=Ns(t),r=Ns(e),s=ve(n.seconds,r.seconds);return s!==0?s:ve(n.nanos,r.nanos)}function uP(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Qi(n[s],r[s]);if(i)return i}return ve(n.length,r.length)}function rc(t){return dw(t)}function dw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ns(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ks(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=dw(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${dw(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function Dp(t){switch(Ki(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gg(t);return e?16+Dp(e):16;case 5:return 2*t.stringValue.length;case 6:return ks(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Dp(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return co(r.fields,(i,o)=>{s+=i.length+Dp(o)}),s}(t.mapValue);default:throw ie()}}function ia(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hw(t){return!!t&&"integerValue"in t}function jd(t){return!!t&&"arrayValue"in t}function dP(t){return!!t&&"nullValue"in t}function hP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jp(t){return!!t&&"mapValue"in t}function Hg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ju(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return co(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ju(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ju(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const iO={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function KK(t){return"nullValue"in t?kp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ia(sa.empty(),te.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Hg(t)?iO:{mapValue:{}}:ie()}function QK(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ia(sa.empty(),te.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?iO:"mapValue"in t?Hg(t)?{mapValue:{}}:Ii:ie()}function fP(t,e){const n=Qi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function pP(t,e){const n=Qi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ju(n)}setAll(e){let n=at.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ju(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());jp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];jp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){co(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Yt(Ju(this.value))}}function oO(t){const e=[];return co(t.fields,(n,r)=>{const s=new at([n]);if(jp(r)){const i=oO(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new nt(e,0,he.min(),he.min(),he.min(),Yt.empty(),0)}static newFoundDocument(e,n,r,s){return new nt(e,1,n,he.min(),r,s,0)}static newNoDocument(e,n){return new nt(e,2,n,he.min(),he.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new nt(e,3,n,he.min(),he.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n){this.position=e,this.inclusive=n}}function mP(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Qi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function gP(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n="asc"){this.field=e,this.dir=n}}function YK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aO=class{};class je extends aO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new XK(e,n,r):n==="array-contains"?new eQ(e,r):n==="in"?new fO(e,r):n==="not-in"?new tQ(e,r):n==="array-contains-any"?new nQ(e,r):new je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new JK(e,r):new ZK(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qi(n,this.value)):n!==null&&Ki(this.value)===Ki(n)&&this.matchesComparison(Qi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ze extends aO{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ze(e,n)}matches(e){return sc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function sc(t){return t.op==="and"}function fw(t){return t.op==="or"}function Xb(t){return lO(t)&&sc(t)}function lO(t){for(const e of t.filters)if(e instanceof ze)return!1;return!0}function pw(t){if(t instanceof je)return t.field.canonicalString()+t.op.toString()+rc(t.value);if(Xb(t))return t.filters.map(e=>pw(e)).join(",");{const e=t.filters.map(n=>pw(n)).join(",");return`${t.op}(${e})`}}function cO(t,e){return t instanceof je?function(r,s){return s instanceof je&&r.op===s.op&&r.field.isEqual(s.field)&&Qr(r.value,s.value)}(t,e):t instanceof ze?function(r,s){return s instanceof ze&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&cO(o,s.filters[a]),!0):!1}(t,e):void ie()}function uO(t,e){const n=t.filters.concat(e);return ze.create(n,t.op)}function dO(t){return t instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${rc(n.value)}`}(t):t instanceof ze?function(n){return n.op.toString()+" {"+n.getFilters().map(dO).join(" ,")+"}"}(t):"Filter"}class XK extends je{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class JK extends je{constructor(e,n){super(e,"in",n),this.keys=hO("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ZK extends je{constructor(e,n){super(e,"not-in",n),this.keys=hO("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hO(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class eQ extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jd(n)&&Dd(n.arrayValue,this.value)}}class fO extends je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dd(this.value.arrayValue,n)}}class tQ extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Dd(this.value.arrayValue,n)}}class nQ extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Dd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rQ{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function mw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new rQ(t,e,n,r,s,i,o)}function oa(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>rc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>rc(r)).join(",")),e.ue=n}return e.ue}function xh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gP(t.startAt,e.startAt)&&gP(t.endAt,e.endAt)}function Mm(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Vm(t,e){return t.filters.filter(n=>n instanceof je&&n.field.isEqual(e))}function yP(t,e,n){let r=kp,s=!0;for(const i of Vm(t,e)){let o=kp,a=!0;switch(i.op){case"<":case"<=":o=KK(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=kp}fP({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];fP({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function vP(t,e,n){let r=Ii,s=!0;for(const i of Vm(t,e)){let o=Ii,a=!0;switch(i.op){case">=":case">":o=QK(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Ii}pP({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];pP({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function pO(t,e,n,r,s,i,o,a){return new qs(t,e,n,r,s,i,o,a)}function Rc(t){return new qs(t)}function xP(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Jb(t){return t.collectionGroup!==null}function Dl(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ge(at.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Od(i,r))}),n.has(at.keyField().canonicalString())||e.ce.push(new Od(at.keyField(),r))}return e.ce}function pn(t){const e=Z(t);return e.le||(e.le=gO(e,Dl(t))),e.le}function mO(t){const e=Z(t);return e.he||(e.he=gO(e,t.explicitOrderBy)),e.he}function gO(t,e){if(t.limitType==="F")return mw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Od(s.field,i)});const n=t.endAt?new Yi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yi(t.startAt.position,t.startAt.inclusive):null;return mw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gw(t,e){const n=t.filters.concat([e]);return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lm(t,e,n){return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wh(t,e){return xh(pn(t),pn(e))&&t.limitType===e.limitType}function yO(t){return`${oa(pn(t))}|lt:${t.limitType}`}function rl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>dO(s)).join(", ")}]`),vh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>rc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>rc(s)).join(",")),`Target(${r})`}(pn(t))}; limitType=${t.limitType})`}function _h(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Dl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=mP(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Dl(r),s)||r.endAt&&!function(o,a,l){const c=mP(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Dl(r),s))}(t,e)}function vO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xO(t){return(e,n)=>{let r=!1;for(const s of Dl(t)){const i=sQ(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function sQ(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Qi(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return nO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iQ=new Je(te.comparator);function jn(){return iQ}const wO=new Je(te.comparator);function Du(...t){let e=wO;for(const n of t)e=e.insert(n.key,n);return e}function _O(t){let e=wO;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Lr(){return Zu()}function bO(){return Zu()}function Zu(){return new Ws(t=>t.toString(),(t,e)=>t.isEqual(e))}const oQ=new Je(te.comparator),aQ=new Ge(te.comparator);function Te(...t){let e=aQ;for(const n of t)e=e.add(n);return e}const lQ=new Ge(ve);function Zb(){return lQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nd(e)?"-0":e}}function EO(t){return{integerValue:""+t}}function TO(t,e){return Yj(e)?EO(e):eE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(){this._=void 0}}function cQ(t,e,n){return t instanceof ic?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Wg(i)&&(i=Gg(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof aa?IO(t,e):t instanceof la?CO(t,e):function(s,i){const o=SO(s,i),a=wP(o)+wP(s.Pe);return hw(o)&&hw(s.Pe)?EO(a):eE(s.serializer,a)}(t,e)}function uQ(t,e,n){return t instanceof aa?IO(t,e):t instanceof la?CO(t,e):n}function SO(t,e){return t instanceof oc?function(r){return hw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ic extends Kg{}class aa extends Kg{constructor(e){super(),this.elements=e}}function IO(t,e){const n=PO(e);for(const r of t.elements)n.some(s=>Qr(s,r))||n.push(r);return{arrayValue:{values:n}}}class la extends Kg{constructor(e){super(),this.elements=e}}function CO(t,e){let n=PO(e);for(const r of t.elements)n=n.filter(s=>!Qr(s,r));return{arrayValue:{values:n}}}class oc extends Kg{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function wP(t){return it(t.integerValue||t.doubleValue)}function PO(t){return jd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n){this.field=e,this.transform=n}}function dQ(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof aa&&s instanceof aa||r instanceof la&&s instanceof la?ec(r.elements,s.elements,Qr):r instanceof oc&&s instanceof oc?Qr(r.Pe,s.Pe):r instanceof ic&&s instanceof ic}(t.transform,e.transform)}class hQ{constructor(e,n){this.version=e,this.transformResults=n}}class lt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lt}static exists(e){return new lt(void 0,e)}static updateTime(e){return new lt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Op(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qg{}function AO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kc(t.key,lt.none()):new Nc(t.key,t.data,lt.none());{const n=t.data,r=Yt.empty();let s=new Ge(at.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Gs(t.key,r,new Dn(s.toArray()),lt.none())}}function fQ(t,e,n){t instanceof Nc?function(s,i,o){const a=s.value.clone(),l=bP(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Gs?function(s,i,o){if(!Op(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=bP(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(RO(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ed(t,e,n,r){return t instanceof Nc?function(i,o,a,l){if(!Op(i.precondition,o))return a;const c=i.value.clone(),d=EP(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gs?function(i,o,a,l){if(!Op(i.precondition,o))return a;const c=EP(i.fieldTransforms,l,o),d=o.data;return d.setAll(RO(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Op(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function pQ(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=SO(r.transform,s||null);i!=null&&(n===null&&(n=Yt.empty()),n.set(r.field,i))}return n||null}function _P(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ec(r,s,(i,o)=>dQ(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nc extends Qg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gs extends Qg{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function RO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function bP(t,e,n){const r=new Map;ue(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,uQ(o,a,n[s]))}return r}function EP(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,cQ(i,o,e))}return r}class kc extends Qg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tE extends Qg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&fQ(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ed(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ed(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bO();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=AO(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,(n,r)=>_P(n,r))&&ec(this.baseMutations,e.baseMutations,(n,r)=>_P(n,r))}}class rE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ue(e.mutations.length===r.length);let s=function(){return oQ}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new rE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,Ve;function kO(t){switch(t){default:return ie();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function DO(t){if(t===void 0)return It("GRPC error has no .code"),U.UNKNOWN;switch(t){case At.OK:return U.OK;case At.CANCELLED:return U.CANCELLED;case At.UNKNOWN:return U.UNKNOWN;case At.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case At.INTERNAL:return U.INTERNAL;case At.UNAVAILABLE:return U.UNAVAILABLE;case At.UNAUTHENTICATED:return U.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case At.NOT_FOUND:return U.NOT_FOUND;case At.ALREADY_EXISTS:return U.ALREADY_EXISTS;case At.PERMISSION_DENIED:return U.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case At.ABORTED:return U.ABORTED;case At.OUT_OF_RANGE:return U.OUT_OF_RANGE;case At.UNIMPLEMENTED:return U.UNIMPLEMENTED;case At.DATA_LOSS:return U.DATA_LOSS;default:return ie()}}(Ve=At||(At={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $m=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gQ=new Wo([4294967295,4294967295],0);function TP(t){const e=jO().encode(t),n=new Oj;return n.update(e),new Uint8Array(n.digest())}function SP(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Wo([n,r],0),new Wo([s,i],0)]}class iE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ju(`Invalid padding: ${n}`);if(r<0)throw new ju(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ju(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ju(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Wo.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Wo.fromNumber(r)));return s.compare(gQ)===1&&(s=new Wo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=TP(e),[r,s]=SP(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new iE(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=TP(e),[r,s]=SP(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Th.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Eh(he.min(),s,new Je(ve),jn(),Te())}}class Th{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Th(r,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class OO{constructor(e,n){this.targetId=e,this.me=n}}class MO{constructor(e,n,r=Et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class IP{constructor(){this.fe=0,this.ge=PP(),this.pe=Et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Te(),n=Te(),r=Te();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new Th(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=PP()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yQ{constructor(e){this.Le=e,this.Be=new Map,this.ke=jn(),this.qe=CP(),this.Qe=new Je(ve)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Mm(i))if(r===0){const o=new te(i.path);this.Ue(n,o,nt.newNoDocument(o,he.min()))}else ue(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}$m==null||$m.et(function(d,h,m,g,v){var y,w,_,x,b,S;const A={localCacheCount:d,existenceFilterCount:h.count,databaseId:m.database,projectId:m.projectId},D=h.unchangedNames;return D&&(A.bloomFilter={applied:v===0,hashCount:(y=D==null?void 0:D.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(x=(_=(w=D==null?void 0:D.bits)===null||w===void 0?void 0:w.bitmap)===null||_===void 0?void 0:_.length)!==null&&x!==void 0?x:0,padding:(S=(b=D==null?void 0:D.bits)===null||b===void 0?void 0:b.padding)!==null&&S!==void 0?S:0,mightContain:C=>{var I;return(I=g==null?void 0:g.mightContain(C))!==null&&I!==void 0&&I}}),A}(o,e.me,this.Le.tt(),a,l))}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ks(r).toUint8Array()}catch(l){if(l instanceof rO)return fr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new iE(o,s,i)}catch(l){return fr(l instanceof ju?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Mm(a.target)){const l=new te(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,nt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Te();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Eh(e,n,this.Qe,this.ke,r);return this.ke=jn(),this.qe=CP(),this.Qe=new Je(ve),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new IP,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ge(ve),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new IP),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function CP(){return new Je(te.comparator)}function PP(){return new Je(te.comparator)}const vQ=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),xQ=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),wQ=(()=>({and:"AND",or:"OR"}))();class _Q{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yw(t,e){return t.useProto3Json||vh(e)?e:{value:e}}function ac(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bQ(t,e){return ac(t,e.toTimestamp())}function Ct(t){return ue(!!t),he.fromTimestamp(function(n){const r=Ns(n);return new Xe(r.seconds,r.nanos)}(t))}function oE(t,e){return vw(t,e).canonicalString()}function vw(t,e){const n=function(s){return new De(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function LO(t){const e=De.fromString(t);return ue(KO(e)),e}function Md(t,e){return oE(t.databaseId,e.path)}function Gr(t,e){const n=LO(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(UO(n))}function $O(t,e){return oE(t.databaseId,e)}function FO(t){const e=LO(t);return e.length===4?De.emptyPath():UO(e)}function xw(t){return new De(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UO(t){return ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function AP(t,e,n){return{name:Md(t,e),fields:n.value.mapValue.fields}}function BO(t,e,n){const r=Gr(t,e.name),s=Ct(e.updateTime),i=e.createTime?Ct(e.createTime):he.min(),o=new Yt({mapValue:{fields:e.fields}}),a=nt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function EQ(t,e){return"found"in e?function(r,s){ue(!!s.found),s.found.name,s.found.updateTime;const i=Gr(r,s.found.name),o=Ct(s.found.updateTime),a=s.found.createTime?Ct(s.found.createTime):he.min(),l=new Yt({mapValue:{fields:s.found.fields}});return nt.newFoundDocument(i,o,a,l)}(t,e):"missing"in e?function(r,s){ue(!!s.missing),ue(!!s.readTime);const i=Gr(r,s.missing),o=Ct(s.readTime);return nt.newNoDocument(i,o)}(t,e):ie()}function TQ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(ue(d===void 0||typeof d=="string"),Et.fromBase64String(d||"")):(ue(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Et.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?U.UNKNOWN:DO(c.code);return new Y(d,c.message||"")}(o);n=new MO(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Gr(t,r.document.name),i=Ct(r.document.updateTime),o=r.document.createTime?Ct(r.document.createTime):he.min(),a=new Yt({mapValue:{fields:r.document.fields}}),l=nt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Mp(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Gr(t,r.document),i=r.readTime?Ct(r.readTime):he.min(),o=nt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Mp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Gr(t,r.document),i=r.removedTargetIds||[];n=new Mp([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new mQ(s,i),a=r.targetId;n=new OO(a,o)}}return n}function Vd(t,e){let n;if(e instanceof Nc)n={update:AP(t,e.key,e.value)};else if(e instanceof kc)n={delete:Md(t,e.key)};else if(e instanceof Gs)n={update:AP(t,e.key,e.data),updateMask:RQ(e.fieldMask)};else{if(!(e instanceof tE))return ie();n={verify:Md(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ic)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof aa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof la)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof oc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:bQ(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function ww(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?lt.updateTime(Ct(i.updateTime)):i.exists!==void 0?lt.exists(i.exists):lt.none()}(e.currentDocument):lt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)ue(a.setToServerValue==="REQUEST_TIME"),l=new ic;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new aa(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new la(d)}else"increment"in a?l=new oc(o,a.increment):ie();const c=at.fromServerFormat(a.fieldPath);return new bh(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Gr(t,e.update.name),i=new Yt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Dn(c.map(d=>at.fromServerFormat(d)))}(e.updateMask);return new Gs(s,i,o,n,r)}return new Nc(s,i,n,r)}if(e.delete){const s=Gr(t,e.delete);return new kc(s,n)}if(e.verify){const s=Gr(t,e.verify);return new tE(s,n)}return ie()}function SQ(t,e){return t&&t.length>0?(ue(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Ct(s.updateTime):Ct(i);return o.isEqual(he.min())&&(o=Ct(i)),new hQ(o,s.transformResults||[])}(n,e))):[]}function zO(t,e){return{documents:[$O(t,e.path)]}}function Yg(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$O(t,s);const i=function(c){if(c.length!==0)return HO(ze.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:vi(m.field),direction:CQ(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=yw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function qO(t,e,n,r){const{_t:s,parent:i}=Yg(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d=r?c.alias:"aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:vi(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:vi(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function WO(t){let e=FO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ue(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const m=GO(h);return m instanceof ze&&Xb(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(v){return new Od(sl(v.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,vh(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,g=h.values||[];return new Yi(g,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,g=h.values||[];return new Yi(g,m)}(n.endAt)),pO(e,s,o,i,a,"F",l,c)}function IQ(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function GO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=sl(n.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=sl(n.unaryFilter.field);return je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=sl(n.unaryFilter.field);return je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=sl(n.unaryFilter.field);return je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return je.create(sl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ze.create(n.compositeFilter.filters.map(r=>GO(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function CQ(t){return vQ[t]}function PQ(t){return xQ[t]}function AQ(t){return wQ[t]}function vi(t){return{fieldPath:t.canonicalString()}}function sl(t){return at.fromServerFormat(t.fieldPath)}function HO(t){return t instanceof je?function(n){if(n.op==="=="){if(hP(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NAN"}};if(dP(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hP(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NOT_NAN"}};if(dP(n.value))return{unaryFilter:{field:vi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vi(n.field),op:PQ(n.op),value:n.value}}}(t):t instanceof ze?function(n){const r=n.getFilters().map(s=>HO(s));return r.length===1?r[0]:{compositeFilter:{op:AQ(n.op),filters:r}}}(t):ie()}function RQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function KO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n,r,s,i=he.min(),o=he.min(),a=Et.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.ct=e}}function NQ(t,e){let n;if(e.document)n=BO(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=te.fromSegments(e.noDocument.path),s=ua(e.noDocument.readTime);n=nt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie();{const r=te.fromSegments(e.unknownDocument.path),s=ua(e.unknownDocument.version);n=nt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new Xe(s[0],s[1]);return he.fromTimestamp(i)}(e.readTime)),n}function RP(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Fm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Md(i,o.key),fields:o.data.value.mapValue.fields,updateTime:ac(i,o.version.toTimestamp()),createTime:ac(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ca(e.version)};else{if(!e.isUnknownDocument())return ie();r.unknownDocument={path:n.path.toArray(),version:ca(e.version)}}return r}function Fm(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ca(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ua(t){const e=new Xe(t.seconds,t.nanoseconds);return he.fromTimestamp(e)}function No(t,e){const n=(e.baseMutations||[]).map(i=>ww(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>ww(t.ct,i)),s=Xe.fromMillis(e.localWriteTimeMs);return new nE(e.batchId,s,n,r)}function Ou(t){const e=ua(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ua(t.lastLimboFreeSnapshotVersion):he.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return ue(i.documents.length===1),pn(Rc(FO(i.documents[0])))}(t.query):function(i){return pn(WO(i))}(t.query),new ys(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Et.fromBase64String(t.resumeToken))}function YO(t,e){const n=ca(e.snapshotVersion),r=ca(e.lastLimboFreeSnapshotVersion);let s;s=Mm(e.target)?zO(t.ct,e.target):Yg(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:oa(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function aE(t){const e=WO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lm(e,e.limit,"L"):e}function a0(t,e){return new sE(e.largestBatchId,ww(t.ct,e.overlayMutation))}function NP(t,e){const n=e.path.lastSegment();return[t,fn(e.path.popLast()),n]}function kP(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ca(r.readTime),documentKey:fn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kQ{getBundleMetadata(e,n){return DP(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:ua(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return DP(e).put(function(s){return{bundleId:s.id,createTime:ca(Ct(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return jP(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:aE(i.bundledQuery),readTime:ua(i.readTime)}}(r)})}saveNamedQuery(e,n){return jP(e).put(function(s){return{name:s.name,readTime:ca(Ct(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function DP(t){return Vt(t,"bundles")}function jP(t){return Vt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Xg(e,r)}getOverlay(e,n){return gu(e).get(NP(this.userId,n)).next(r=>r?a0(this.serializer,r):null)}getOverlays(e,n){const r=Lr();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new sE(n,o);s.push(this.ht(e,a))}),$.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(fn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(gu(e).j("collectionPathOverlayIndex",a))}),$.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Lr(),i=fn(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return gu(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=a0(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Lr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return gu(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const h=a0(this.serializer,c);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}ht(e,n){return gu(e).put(function(s,i,o){const[a,l,c]=NP(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Vd(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function gu(t){return Vt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{Pt(e){return Vt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Et.fromUint8Array(r):Et.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(it(e.integerValue));else if("doubleValue"in e){const r=it(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Nd(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Ns(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(ks(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?sO(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Hg(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ie()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(it(a)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),te.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}ko.vt=new ko;function jQ(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function OP(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=jQ(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class OQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=OP(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=OP(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class MQ{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class VQ{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class yu{constructor(){this.jt=new OQ,this.Ht=new MQ(this.jt),this.Jt=new VQ(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Do(this.indexId,this.documentKey,this.arrayValue,r)}}function si(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=MP(t.arrayValue,e.arrayValue),n!==0?n:(n=MP(t.directionalValue,e.directionalValue),n!==0?n:te.comparator(t.documentKey,e.documentKey)))}function MP(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.Xt=new Ge((n,r)=>at.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ue(e.collectionGroup===this.collectionId),this.nn)return!1;const n=cw(e);if(n!==void 0&&!this.sn(n))return!1;const r=Po(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ge(at.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Go(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Go(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Go(r.field,r.dir==="asc"?0:1)));return new tc(tc.UNKNOWN_ID,this.collectionId,n,nc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){var e,n;if(ue(t instanceof je||t instanceof ze),t instanceof je){if(t instanceof fO){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>je.create(t.field,"==",i)))||[];return ze.create(s,"or")}return t}const r=t.filters.map(s=>XO(s));return ze.create(r,t.op)}function LQ(t){if(t.getFilters().length===0)return[];const e=Ew(XO(t));return ue(JO(e)),_w(e)||bw(e)?[e]:e.getFilters()}function _w(t){return t instanceof je}function bw(t){return t instanceof ze&&Xb(t)}function JO(t){return _w(t)||bw(t)||function(n){if(n instanceof ze&&fw(n)){for(const r of n.getFilters())if(!_w(r)&&!bw(r))return!1;return!0}return!1}(t)}function Ew(t){if(ue(t instanceof je||t instanceof ze),t instanceof je)return t;if(t.filters.length===1)return Ew(t.filters[0]);const e=t.filters.map(r=>Ew(r));let n=ze.create(e,t.op);return n=Um(n),JO(n)?n:(ue(n instanceof ze),ue(sc(n)),ue(n.filters.length>1),n.filters.reduce((r,s)=>lE(r,s)))}function lE(t,e){let n;return ue(t instanceof je||t instanceof ze),ue(e instanceof je||e instanceof ze),n=t instanceof je?e instanceof je?function(s,i){return ze.create([s,i],"and")}(t,e):LP(t,e):e instanceof je?LP(e,t):function(s,i){if(ue(s.filters.length>0&&i.filters.length>0),sc(s)&&sc(i))return uO(s,i.getFilters());const o=fw(s)?s:i,a=fw(s)?i:s,l=o.filters.map(c=>lE(c,a));return ze.create(l,"or")}(t,e),Um(n)}function LP(t,e){if(sc(e))return uO(e,t.getFilters());{const n=e.filters.map(r=>lE(t,r));return ze.create(n,"or")}}function Um(t){if(ue(t instanceof je||t instanceof ze),t instanceof je)return t;const e=t.getFilters();if(e.length===1)return Um(e[0]);if(lO(t))return t;const n=e.map(s=>Um(s)),r=[];return n.forEach(s=>{s instanceof je?r.push(s):s instanceof ze&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:ze.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Q{constructor(){this.un=new cE}addToCollectionParentIndex(e,n){return this.un.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Zn.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Zn.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class cE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ge(De.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ge(De.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf=new Uint8Array(0);class FQ{constructor(e,n){this.databaseId=n,this.cn=new cE,this.ln=new Ws(r=>oa(r),(r,s)=>xh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:fn(s)};return $P(e).put(i)}return $.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[qj(n),""],!1,!0);return $P(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Vr(o.parent))}return r})}addFieldIndex(e,n){const r=vu(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Ga(e);return i.next(a=>{o.put(kP(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=vu(e),s=Ga(e),i=Wa(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=vu(e),r=Wa(e),s=Ga(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return $.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new VP(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Wa(e);let s=!0;const i=new Map;return $.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Te();const a=[];return $.forEach(i,(l,c)=>{Q("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(S=>`${S.fieldPath}:${S.kind}`).join(",")}`}(l)} to execute ${oa(n)}`);const d=function(b,S){const A=cw(S);if(A===void 0)return null;for(const D of Vm(b,A.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null}(c,l),h=function(b,S){const A=new Map;for(const D of Po(S))for(const C of Vm(b,D.fieldPath))switch(C.op){case"==":case"in":A.set(D.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return A.set(D.fieldPath.canonicalString(),C.value),Array.from(A.values())}return null}(c,l),m=function(b,S){const A=[];let D=!0;for(const C of Po(S)){const I=C.kind===0?yP(b,C.fieldPath,b.startAt):vP(b,C.fieldPath,b.startAt);A.push(I.value),D&&(D=I.inclusive)}return new Yi(A,D)}(c,l),g=function(b,S){const A=[];let D=!0;for(const C of Po(S)){const I=C.kind===0?vP(b,C.fieldPath,b.endAt):yP(b,C.fieldPath,b.endAt);A.push(I.value),D&&(D=I.inclusive)}return new Yi(A,D)}(c,l),v=this.In(l,c,m),y=this.In(l,c,g),w=this.Tn(l,c,h),_=this.En(l.indexId,d,v,m.inclusive,y,g.inclusive,w);return $.forEach(_,x=>r.G(x,n.limit).next(b=>{b.forEach(S=>{const A=te.fromSegments(S.documentKey);o.has(A)||(o=o.add(A),a.push(A))})}))}).next(()=>a)}return $.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=LQ(ze.create(e.filters,"and")).map(r=>mw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const m=n?this.dn(n[h/c]):Bf,g=this.An(e,m,r[h%c],s),v=this.Rn(e,m,i[h%c],o),y=a.map(w=>this.An(e,m,w,!0));d.push(...this.createRange(g,v,y))}return d}An(e,n,r,s){const i=new Do(e,te.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new Do(e,te.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new VP(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return $.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Ge(at.comparator),d=!1;for(const h of l.filters)for(const m of h.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:c=c.add(m.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new yu;for(const s of Po(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);ko.vt.It(i,o)}return r.zt()}dn(e){const n=new yu;return ko.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new yu;return ko.vt.It(ia(this.databaseId,n),r.Yt(function(i){const o=Po(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new yu);let i=0;for(const o of Po(e)){const a=r[i++];for(const l of s)if(this.fn(n,o.fieldPath)&&jd(a))s=this.gn(s,o,a);else{const c=l.Yt(o.kind);ko.vt.It(a,c)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new yu;l.seed(a.zt()),ko.vt.It(o,l.Yt(n.kind)),i.push(l)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof je&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=vu(e),s=Ga(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return $.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const m=h?new nc(h.sequenceNumber,new Zn(ua(h.readTime),new te(Vr(h.documentKey)),h.largestBatchId)):nc.empty(),g=d.fields.map(([v,y])=>new Go(at.fromServerFormat(v),y));return new tc(d.indexId,d.collectionGroup,g,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ve(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=vu(e),i=Ga(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>$.forEach(a,l=>i.put(kP(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return $.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?$.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),$.forEach(a,l=>this.wn(e,s,l).next(c=>{const d=this.Sn(i,l);return c.isEqual(d)?$.resolve():this.bn(e,i,l,c,d)}))))})}Dn(e,n,r,s){return Wa(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return Wa(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=Wa(e);let i=new Ge(si);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{i=i.add(new Do(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}Sn(e,n){let r=new Ge(si);const s=this.Vn(n,e);if(s==null)return r;const i=cw(n);if(i!=null){const o=e.data.field(i.fieldPath);if(jd(o))for(const a of o.arrayValue.values||[])r=r.add(new Do(n.indexId,e.key,this.dn(a),s))}else r=r.add(new Do(n.indexId,e.key,Bf,s));return r}bn(e,n,r,s,i){Q("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,m){const g=l.getIterator(),v=c.getIterator();let y=qa(g),w=qa(v);for(;y||w;){let _=!1,x=!1;if(y&&w){const b=d(y,w);b<0?x=!0:b>0&&(_=!0)}else y!=null?x=!0:_=!0;_?(h(w),w=qa(v)):x?(m(y),y=qa(g)):(y=qa(g),w=qa(v))}}(s,i,si,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),$.waitFor(o)}yn(e){let n=1;return Ga(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>si(o,a)).filter((o,a,l)=>!a||si(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=si(o,e),l=si(o,n);if(a===0)s[0]=e.Zt();else if(a>0&&l<0)s.push(o),s.push(o.Zt());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,Bf,[]],l=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,Bf,[]];i.push(IDBKeyRange.bound(a,l))}return i}Cn(e,n){return si(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(FP)}getMinOffset(e,n){return $.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||ie())).next(FP)}}function $P(t){return Vt(t,"collectionParents")}function Wa(t){return Vt(t,"indexEntries")}function vu(t){return Vt(t,"indexConfiguration")}function Ga(t){return Vt(t,"indexState")}function FP(t){ue(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Kb(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Zn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class dn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(d,h,m)=>(a++,m.delete()));i.push(l.next(()=>{ue(a===1)}));const c=[];for(const d of n.mutations){const h=Xj(e,d.key.path,n.batchId);i.push(s.delete(h)),c.push(d.key)}return $.waitFor(i).next(()=>c)}function Bm(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ie();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(41943040,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);class Jg{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){ue(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Jg(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ii(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=il(e),o=ii(e);return o.add({}).next(a=>{ue(typeof a=="number");const l=new nE(a,n,r,s),c=function(g,v,y){const w=y.baseMutations.map(x=>Vd(g.ct,x)),_=y.mutations.map(x=>Vd(g.ct,x));return{userId:v,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:w,mutations:_}}(this.serializer,this.userId,l),d=[];let h=new Ge((m,g)=>ve(m.canonicalString(),g.canonicalString()));for(const m of s){const g=Xj(this.userId,m.key.path,a);h=h.add(m.key.path.popLast()),d.push(o.put(c)),d.push(i.put(g,PK))}return h.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),$.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return ii(e).get(n).next(r=>r?(ue(r.userId===this.userId),No(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?$.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return ii(e).J({index:"userMutationsIndex",range:s},(o,a,l)=>{a.userId===this.userId&&(ue(a.batchId>=r),i=No(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ii(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ii(e).U("userMutationsIndex",n).next(r=>r.map(s=>No(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Np(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return il(e).J({range:s},(o,a,l)=>{const[c,d,h]=o,m=Vr(d);if(c===this.userId&&n.path.isEqual(m))return ii(e).get(h).next(g=>{if(!g)throw ie();ue(g.userId===this.userId),i.push(No(this.serializer,g))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(ve);const s=[];return n.forEach(i=>{const o=Np(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=il(e).J({range:a},(c,d,h)=>{const[m,g,v]=c,y=Vr(g);m===this.userId&&i.path.isEqual(y)?r=r.add(v):h.done()});s.push(l)}),$.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Np(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Ge(ve);return il(e).J({range:o},(l,c,d)=>{const[h,m,g]=l,v=Vr(m);h===this.userId&&r.isPrefixOf(v)?v.length===s&&(a=a.add(g)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(ii(e).get(i).next(o=>{if(o===null)throw ie();ue(o.userId===this.userId),r.push(No(this.serializer,o))}))}),$.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return ZO(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),$.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return $.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return il(e).J({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Vr(i[1]);s.push(l)}else a.done()}).next(()=>{ue(s.length===0)})})}containsKey(e,n){return eM(e,this.userId,n)}Nn(e){return tM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function eM(t,e,n){const r=Np(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return il(t).J({range:i,H:!0},(a,l,c)=>{const[d,h,m]=a;d===e&&h===s&&(o=!0),c.done()}).next(()=>o)}function ii(t){return Vt(t,"mutations")}function il(t){return Vt(t,"documentMutations")}function tM(t){return Vt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new da(0)}static kn(){return new da(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UQ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new da(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>he.fromTimestamp(new Xe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ha(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ue(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Ha(e).J((o,a)=>{const l=Ou(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>$.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Ha(e).J((r,s)=>{const i=Ou(s);n(i)})}qn(e){return BP(e).get("targetGlobalKey").next(n=>(ue(n!==null),n))}Qn(e,n){return BP(e).put("targetGlobalKey",n)}Kn(e,n){return Ha(e).put(YO(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=oa(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Ha(e).J({range:s,index:"queryTargetsIndex"},(o,a,l)=>{const c=Ou(a);xh(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=xi(e);return n.forEach(o=>{const a=fn(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),$.waitFor(s)}removeMatchingKeys(e,n,r){const s=xi(e);return $.forEach(n,i=>{const o=fn(i.path);return $.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=xi(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=xi(e);let i=Te();return s.J({range:r,H:!0},(o,a,l)=>{const c=Vr(o[1]),d=new te(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=fn(n.path),s=IDBKeyRange.bound([r],[qj(r)],!1,!0);let i=0;return xi(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,n){return Ha(e).get(n).next(r=>r?Ou(r):null)}}function Ha(t){return Vt(t,"targets")}function BP(t){return Vt(t,"targetGlobal")}function xi(t){return Vt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP([t,e],[n,r]){const s=ve(t,n);return s===0?ve(e,r):s}class BQ{constructor(e){this.Un=e,this.buffer=new Ge(zP),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zP(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class nM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lo(n)?Q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ao(n)}await this.Hn(3e5)})}}class zQ{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(kn.oe);const r=new BQ(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(UP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UP):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),nl()<=ke.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function rM(t,e){return new zQ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(e,n){this.db=e,this.garbageCollector=rM(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return zf(e,r)}removeReference(e,n,r){return zf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return zf(e,n)}nr(e,n){return function(s,i){let o=!1;return tM(s).Y(a=>eM(s,a,i).next(l=>(l&&(o=!0),$.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,he.min()),xi(e).delete(function(h){return[0,fn(h.path)]}(o))))});s.push(l)}}).next(()=>$.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return zf(e,n)}tr(e,n){const r=xi(e);let s,i=kn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==kn.oe&&n(new te(Vr(s)),i),i=c,s=l):i=kn.oe}).next(()=>{i!==kn.oe&&n(new te(Vr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zf(t,e){return xi(t).put(function(r,s){return{targetId:0,path:fn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.changes=new Ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return _o(e).put(r)}removeEntry(e,n,r){return _o(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Fm(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=nt.newInvalidDocument(n);return _o(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xu(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:nt.newInvalidDocument(n)};return _o(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xu(n))},(s,i)=>{r={document:this.ir(n,i),size:Bm(i)}}).next(()=>r)}getEntries(e,n){let r=jn();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=jn(),s=new Je(te.comparator);return this._r(e,n,(i,o)=>{const a=this.ir(i,o);r=r.insert(i,a),s=s.insert(i,Bm(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return $.resolve();let s=new Ge(GP);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(xu(s.first()),xu(s.last())),o=s.getIterator();let a=o.getNext();return _o(e).J({index:"documentKeyIndex",range:i},(l,c,d)=>{const h=te.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&GP(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(xu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Fm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _o(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=jn();for(const h of c){const m=this.ir(te.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(_h(n,m)||s.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=jn();const o=WP(n,r),a=WP(n,Zn.max());return _o(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.ir(te.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new GQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return qP(e).get("remoteDocumentGlobalKey").next(n=>(ue(!!n),n))}rr(e,n){return qP(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=NQ(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(he.min())))return r}return nt.newInvalidDocument(e)}}function iM(t){return new WQ(t)}class GQ extends sM{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Ws(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Ge((i,o)=>ve(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=RP(this.cr.serializer,o);s=s.add(i.path.popLast());const c=Bm(l);r+=c-a.size,n.push(this.cr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=RP(this.cr.serializer,o.convertToNoDocument(he.min()));n.push(this.cr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),$.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function qP(t){return Vt(t,"remoteDocumentGlobal")}function _o(t){return Vt(t,"remoteDocumentsV14")}function xu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WP(t,e){const n=e.documentKey.path.toArray();return[t,Fm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function GP(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ve(n[i],r[i]),s)return s;return s=ve(n.length,r.length),s||(s=ve(n[n.length-2],r[r.length-2]),s||ve(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ed(r.mutation,s,Dn.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const s=Lr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Du();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Lr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=jn();const o=Zu(),a=function(){return Zu()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Gs)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),ed(d.mutation,c,d.mutation.getFieldMask(),Xe.now())):o.set(c.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new HQ(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Zu();let s=new Je((o,a)=>o-a),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Dn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||Te()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=bO();d.forEach(m=>{if(!i.has(m)){const g=AO(n.get(m),r.get(m));g!==null&&h.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Jb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(Lr());let a=-1,l=i;return o.next(c=>$.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?$.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Te())).next(d=>({batchId:a,changes:_O(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Du();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Du();return this.indexManager.getCollectionParents(e,i).next(a=>$.forEach(a,l=>{const c=function(h,m){return new qs(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,nt.newInvalidDocument(d)))});let a=Du();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&ed(d.mutation,c,Dn.empty(),Xe.now()),_h(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KQ{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return $.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ct(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:aE(s.bundledQuery),readTime:Ct(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{constructor(){this.overlays=new Je(te.comparator),this.Ir=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Lr();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=Lr(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Je((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Lr(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Lr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return $.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sE(n,r));let i=this.Ir.get(n);i===void 0&&(i=Te(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YQ{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.Tr=new Ge(Lt.Er),this.dr=new Ge(Lt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Lt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Lt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new De([])),r=new Lt(n,e),s=new Lt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new De([])),r=new Lt(n,e),s=new Lt(n,e+1);let i=Te();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Lt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Lt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||ve(e.wr,n.wr)}static Ar(e,n){return ve(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ge(Lt.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nE(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Lt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Lt(n,0),s=new Lt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(ve);return n.forEach(s=>{const i=new Lt(s,0),o=new Lt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new Lt(new te(i),0);let a=new Ge(ve);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),$.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ue(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(n.mutations,s=>{const i=new Lt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Lt(n,0),s=this.br.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(e){this.Mr=e,this.docs=function(){return new Je(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(n))}getEntries(e,n){let r=jn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():nt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=jn();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Kb(Gj(d),r)<=0||(s.has(d.key)||_h(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Or(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ZQ(this)}getSize(e){return $.resolve(this.size)}}class ZQ extends sM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eY{constructor(e){this.persistence=e,this.Nr=new Ws(n=>oa(n),xh),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Lr=0,this.Br=new uE,this.targetCount=0,this.kr=da.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),$.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new da(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Kn(n),$.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n){this.qr={},this.overlays={},this.Qr=new kn(0),this.Kr=!1,this.Kr=!0,this.$r=new YQ,this.referenceDelegate=e(this),this.Ur=new eY(this),this.indexManager=new $Q,this.remoteDocumentCache=function(s){return new JQ(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new QO(n),this.Gr=new KQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new XQ(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new tY(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class tY extends Kj{constructor(e){super(),this.currentSequenceNumber=e}}class Zg{constructor(e){this.persistence=e,this.Jr=new uE,this.Yr=null}static Zr(e){return new Zg(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const s=te.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,he.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return $.or([()=>$.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class zm{constructor(e,n){this.persistence=e,this.ti=new Ws(r=>fn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=rM(this,n)}static Zr(e,n){return new zm(e,n)}zr(){}jr(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Yn(e){const n=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}Zn(e,n){return $.forEach(this.ti,(r,s)=>this.nr(e,r,s).next(i=>i?$.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Or(e,o=>this.nr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,he.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ti.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.ti.set(n,e.currentSequenceNumber),$.resolve()}Wr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dp(e.data.value)),n}nr(e,n,r){return $.or([()=>this.persistence.Hr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.ti.get(n);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nY{constructor(e){this.serializer=e}O(e,n,r,s){const i=new qg("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oP,{unique:!0}),l.createObjectStore("documentMutations")}(e),HP(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=$.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),HP(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:he.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oP,{unique:!0});const h=c.store("mutations"),m=d.map(g=>h.put(g));return $.waitFor(m)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:FK});c.createIndex("collectionPathOverlayIndex",UK,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",BK,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:AK});c.createIndex("documentKeyIndex",RK),c.createIndex("collectionGroupIndex",NK)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:MK}).createIndex("sequenceNumberIndex",VK,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:LK}).createIndex("documentKeyIndex",$K,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=Bm(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>$.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>$.forEach(a,l=>{ue(l.userId===i.userId);const c=No(this.serializer,l);return ZO(e,i.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,a)=>{const l=new De(o),c=function(h){return[0,fn(h)]}(l);i.push(n.get(c).next(d=>d?$.resolve():(h=>n.put({targetId:0,path:fn(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>$.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:OK});const r=n.store("collectionParents"),s=new cE,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:fn(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new De(o);return i(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const d=Vr(a);return i(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=Ou(s),o=YO(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new te(De.fromString(h.document.name).popFirst(5)):h.noDocument?te.fromSegments(h.noDocument.path):h.unknownDocument?te.fromSegments(h.unknownDocument.path):ie()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>$.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=iM(this.serializer),i=new dE(Zg.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:Te();No(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),$.forEach(a,(l,c)=>{const d=new Ft(c),h=Xg.lt(this.serializer,d),m=i.getIndexManager(d),g=Jg.lt(d,this.serializer,m,i.referenceDelegate);return new oM(s,g,h,m).recalculateAndSaveOverlaysForDocumentKeys(new uw(n,kn.oe),l).next()})})}}function HP(t){t.createObjectStore("targetDocuments",{keyPath:DK}).createIndex("documentTargetsIndex",jK,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kK,{unique:!0}),t.createObjectStore("targetGlobal")}const l0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class hE{constructor(e,n,r,s,i,o,a,l,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!hE.D())throw new Y(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qQ(this,s),this.Ai=n+"main",this.serializer=new QO(l),this.Ri=new Wr(this.Ai,this.hi,new nY(this.serializer)),this.$r=new DQ,this.Ur=new UQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iM(this.serializer),this.Gr=new kQ,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&It("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y(U.FAILED_PRECONDITION,l0);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new kn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(lo(e))return Q("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Q("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return wu(e).get("owner").next(n=>$.resolve(this.vi(n)))}Ci(e){return qf(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Vt(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return $.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?$.resolve(!0):wu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new Y(U.FAILED_PRECONDITION,l0);return!1}}return!(!this.networkEnabled||!this.inForeground)||qf(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Q("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new uw(e,kn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>qf(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Jg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new FQ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Xg.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===17?WK:l===16?qK:l===15?Yb:l===14?eO:l===13?Zj:l===12?zK:l===11?Jj:void ie()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,a=>(o=new uw(a,this.Qr?this.Qr.next():kn.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw It(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Y(U.FAILED_PRECONDITION,Hj);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return wu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Y(U.FAILED_PRECONDITION,l0)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wu(e).put("owner",n)}static D(){return Wr.D()}bi(e){const n=wu(e);return n.get("owner").next(r=>this.vi(r)?(Q("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):$.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(It(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;qD()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return Q("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return It("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){It("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wu(t){return Vt(t,"owner")}function qf(t){return Vt(t,"clientMetadata")}function fE(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Te(),s=Te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new pE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qD()?8:Qj(Mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new rY;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(nl()<=ke.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",rl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(nl()<=ke.DEBUG&&Q("QueryEngine","Query:",rl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(nl()<=ke.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",rl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(n))):$.resolve())}Yi(e,n){if(xP(n))return $.resolve(null);let r=pn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Lm(n,null,"F"),r=pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Te(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Lm(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return xP(n)||s.isEqual(he.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?$.resolve(null):(nl()<=ke.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rl(n)),this.rs(e,o,n,Wj(s,-1)).next(a=>a))})}ts(e,n){let r=new Ge(xO(e));return n.forEach((s,i)=>{_h(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return nl()<=ke.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",rl(n)),this.Ji.getDocumentsMatchingQuery(e,n,Zn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Je(ve),this._s=new Ws(i=>oa(i),xh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function lM(t,e,n,r){return new sY(t,e,n,r)}async function cM(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Te();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function iY(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,m=h.keys();let g=$.resolve();return m.forEach(v=>{g=g.next(()=>d.getEntry(l,v)).next(y=>{const w=c.docVersions.get(v);ue(w!==null),y.version.compareTo(w)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Te();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function uM(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function oY(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,h)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Et.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(h,g),function(y,w,_){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,g,d)&&a.push(n.Ur.updateTargetData(i,g))});let l=jn(),c=Te();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(dM(i,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(he.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(h=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return $.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function dM(t,e,n){let r=Te(),s=Te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=jn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(he.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function aY(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lc(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new ys(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function cc(t,e,n){const r=Z(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!lo(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function qm(t,e,n){const r=Z(t);let s=he.min(),i=Te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=Z(l),m=h._s.get(d);return m!==void 0?$.resolve(h.os.get(m)):h.Ur.getTargetData(c,d)}(r,o,pn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:he.min(),n?i:Te())).next(a=>(pM(r,vO(e),a),{documents:a,Ts:i})))}function hM(t,e){const n=Z(t),r=Z(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.ot(i,e).next(o=>o?o.target:null))}function fM(t,e){const n=Z(t),r=n.us.get(e)||he.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,Wj(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(pM(n,e,s),s))}function pM(t,e,n){let r=t.us.get(e)||he.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}async function lY(t,e,n,r){const s=Z(t);let i=Te(),o=jn();for(const c of n){const d=e.Es(c.metadata.name);c.document&&(i=i.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),o=o.insert(d,h)}const a=s.cs.newChangeBuffer({trackRemovals:!0}),l=await lc(s,function(d){return pn(Rc(De.fromString(`__bundle__/docs/${d}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>dM(c,a,o).next(d=>(a.apply(c),d)).next(d=>s.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>s.Ur.addMatchingKeys(c,i,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function cY(t,e,n=Te()){const r=await lc(t,pn(aE(e.bundledQuery))),s=Z(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=Ct(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Gr.saveNamedQuery(i,e);const a=r.withResumeToken(Et.EMPTY_BYTE_STRING,o);return s.os=s.os.insert(a.targetId,a),s.Ur.updateTargetData(i,a).next(()=>s.Ur.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Ur.addMatchingKeys(i,n,r.targetId)).next(()=>s.Gr.saveNamedQuery(i,e))})}function KP(t,e){return`firestore_clients_${t}_${e}`}function QP(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function c0(t,e){return`firestore_targets_${t}_${e}`}class Wm{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new Y(s.error.code,s.error.message))),o?new Wm(e,n,s.state,i):(It("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class td{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new Y(r.error.code,r.error.message))),i?new td(e,r.state,s):(It("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gm{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Zb();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=Yj(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Gm(e,i):(It("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class mE{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new mE(n.clientId,n.onlineState):(It("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Tw{constructor(){this.activeTargetIds=Zb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u0{constructor(e,n,r,s,i){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Je(ve),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=KP(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Tw),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(KP(this.persistenceKey,r));if(s){const i=Gm.Rs(r,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(c0(this.persistenceKey,e));if(s){const i=td.Rs(e,s);i&&(r=i.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(c0(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Q("SharedClientState","READ",e,n),n}setItem(e,n){Q("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Q("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(Q("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void It("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(i){let o=kn.oe;if(i!=null)try{const a=JSON.parse(i);ue(typeof a=="number"),o=a}catch(a){It("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==kn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new Wm(this.currentUser,e,n,r),i=QP(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const n=QP(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=c0(this.persistenceKey,e),i=new td(e,n,r);this.setItem(s,i.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return Gm.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Wm.Rs(new Ft(i),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return td.Rs(s,n)}Ls(e){return mE.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Q("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Zb();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class mM{constructor(){this.so=new Tw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Tw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wf=null;function d0(){return Wf===null?Wf=function(){return 268435456+Math.round(2147483648*Math.random())}():Wf++,"0x"+Wf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hY{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class fY extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=d0(),l=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(d=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw fr("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ac}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=dY[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=d0();return new Promise((o,a)=>{const l=new Mj;l.setWithCredentials(!0),l.listenOnce(Vj.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Rp.NO_ERROR:const d=l.getResponseJson();Q(cn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Rp.TIMEOUT:Q(cn,`RPC '${e}' ${i} timed out`),a(new Y(U.DEADLINE_EXCEEDED,"Request time out"));break;case Rp.HTTP_ERROR:const h=l.getStatus();if(Q(cn,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const v=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(_)>=0?_:U.UNKNOWN}(g.status);a(new Y(v,g.message))}else a(new Y(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(U.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{Q(cn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Q(cn,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=d0(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Fj(),a=$j(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Q(cn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let m=!1,g=!1;const v=new hY({Io:w=>{g?Q(cn,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(m||(Q(cn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),Q(cn,`RPC '${e}' stream ${s} sending:`,w),h.send(w))},To:()=>h.close()}),y=(w,_,x)=>{w.listen(_,b=>{try{x(b)}catch(S){setTimeout(()=>{throw S},0)}})};return y(h,ku.EventType.OPEN,()=>{g||(Q(cn,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),y(h,ku.EventType.CLOSE,()=>{g||(g=!0,Q(cn,`RPC '${e}' stream ${s} transport closed`),v.So())}),y(h,ku.EventType.ERROR,w=>{g||(g=!0,fr(cn,`RPC '${e}' stream ${s} transport errored:`,w),v.So(new Y(U.UNAVAILABLE,"The operation could not be completed")))}),y(h,ku.EventType.MESSAGE,w=>{var _;if(!g){const x=w.data[0];ue(!!x);const b=x,S=b.error||((_=b[0])===null||_===void 0?void 0:_.error);if(S){Q(cn,`RPC '${e}' stream ${s} received error:`,S);const A=S.status;let D=function(P){const R=At[P];if(R!==void 0)return DO(R)}(A),C=S.message;D===void 0&&(D=U.INTERNAL,C="Unknown error status: "+A+" with message "+S.message),g=!0,v.So(new Y(D,C)),h.close()}else Q(cn,`RPC '${e}' stream ${s} received:`,x),v.bo(x)}}),y(a,Lj.STAT_EVENT,w=>{w.stat===lw.PROXY?Q(cn,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===lw.NOPROXY&&Q(cn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(){return typeof window<"u"?window:null}function Vp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){return new _Q(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(It(n.toString()),It("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Y(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pY extends yM{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=TQ(this.serializer,e),r=function(i){if(!("targetChange"in i))return he.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Ct(o.readTime):he.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=xw(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Mm(l)?{documents:zO(i,l)}:{query:Yg(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=VO(i,o.resumeToken);const c=yw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=ac(i,o.snapshotVersion.toTimestamp());const c=yw(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=IQ(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=xw(this.serializer),n.removeTarget=e,this.a_(n)}}class mY extends yM{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ue(!!e.streamToken),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=SQ(e.writeResults,e.commitTime),r=Ct(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=xw(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Vd(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gY extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,vw(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,vw(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class yY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(It(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vY{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{uo(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Z(l);c.L_.add(4),await Dc(c),c.q_.set("Unknown"),c.L_.delete(4),await Ih(c)}(this))})}),this.q_=new yY(r,s)}}async function Ih(t){if(uo(t))for(const e of t.B_)await e(!0)}async function Dc(t){for(const e of t.B_)await e(!1)}function ey(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xE(n)?vE(n):Oc(n).r_()&&yE(n,e))}function uc(t,e){const n=Z(t),r=Oc(n);n.N_.delete(e),r.r_()&&vM(n,e),n.N_.size===0&&(r.r_()?r.o_():uo(n)&&n.q_.set("Unknown"))}function yE(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oc(t).A_(e)}function vM(t,e){t.Q_.xe(e),Oc(t).R_(e)}function vE(t){t.Q_=new yQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Oc(t).start(),t.q_.v_()}function xE(t){return uo(t)&&!Oc(t).n_()&&t.N_.size>0}function uo(t){return Z(t).L_.size===0}function xM(t){t.Q_=void 0}async function xY(t){t.q_.set("Online")}async function wY(t){t.N_.forEach((e,n)=>{yE(t,e)})}async function _Y(t,e){xM(t),xE(t)?(t.q_.M_(e),vE(t)):t.q_.set("Unknown")}async function bY(t,e,n){if(t.q_.set("Online"),e instanceof MO&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hm(t,r)}else if(e instanceof Mp?t.Q_.Ke(e):e instanceof OO?t.Q_.He(e):t.Q_.We(e),!n.isEqual(he.min()))try{const r=await uM(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(Et.EMPTY_BYTE_STRING,d.snapshotVersion)),vM(i,l);const h=new ys(d.target,l,c,d.sequenceNumber);yE(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await Hm(t,r)}}async function Hm(t,e,n){if(!lo(e))throw e;t.L_.add(1),await Dc(t),t.q_.set("Offline"),n||(n=()=>uM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ih(t)})}function wM(t,e){return e().catch(n=>Hm(t,n,e))}async function jc(t){const e=Z(t),n=Xi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;EY(e);)try{const s=await aY(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,TY(e,s)}catch(s){await Hm(e,s)}_M(e)&&bM(e)}function EY(t){return uo(t)&&t.O_.length<10}function TY(t,e){t.O_.push(e);const n=Xi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function _M(t){return uo(t)&&!Xi(t).n_()&&t.O_.length>0}function bM(t){Xi(t).start()}async function SY(t){Xi(t).p_()}async function IY(t){const e=Xi(t);for(const n of t.O_)e.m_(n.mutations)}async function CY(t,e,n){const r=t.O_.shift(),s=rE.from(r,e,n);await wM(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await jc(t)}async function PY(t,e){e&&Xi(t).V_&&await async function(r,s){if(function(o){return kO(o)&&o!==U.ABORTED}(s.code)){const i=r.O_.shift();Xi(r).s_(),await wM(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await jc(r)}}(t,e),_M(t)&&bM(t)}async function XP(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=uo(n);n.L_.add(3),await Dc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ih(n)}async function Sw(t,e){const n=Z(t);e?(n.L_.delete(2),await Ih(n)):e||(n.L_.add(2),await Dc(n),n.q_.set("Unknown"))}function Oc(t){return t.K_||(t.K_=function(n,r,s){const i=Z(n);return i.w_(),new pY(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:xY.bind(null,t),Ro:wY.bind(null,t),mo:_Y.bind(null,t),d_:bY.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xE(t)?vE(t):t.q_.set("Unknown")):(await t.K_.stop(),xM(t))})),t.K_}function Xi(t){return t.U_||(t.U_=function(n,r,s){const i=Z(n);return i.w_(),new mY(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:SY.bind(null,t),mo:PY.bind(null,t),f_:IY.bind(null,t),g_:CY.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await jc(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new zt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new wE(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mc(t,e){if(It("AsyncQueue",`${e}: ${t}`),lo(t))return new Y(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Du(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new jl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new jl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.W_=new Je(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class dc{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new dc(e,n,jl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AY{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class RY{constructor(){this.queries=ZP(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=ZP(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Y(U.ABORTED,"Firestore shutting down"))}}function ZP(){return new Ws(t=>yO(t),wh)}async function _E(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new AY,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Mc(o,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&EE(n)}async function bE(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function NY(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&EE(n)}function kY(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function EE(t){t.Y_.forEach(e=>{e.next()})}var Iw,eA;(eA=Iw||(Iw={})).ea="default",eA.Cache="cache";class TE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new dc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Iw.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.serializer=e}Es(e){return Gr(this.serializer,e)}ds(e){return e.metadata.exists?BO(this.serializer,e.document,!1):nt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ct(e)}}class jY{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=EM(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=De.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new tA(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.Es(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||Te()).add(i);n.set(o,a)}}return n}async complete(){const e=await lY(this.localStore,new tA(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await cY(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function EM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e){this.key=e}}class SM{constructor(e){this.key=e}}class IM{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Te(),this.mutatedKeys=Te(),this.Aa=xO(e),this.Ra=new jl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new JP,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),g=_h(this.query,h)?h:null,v=!!m&&this.mutatedKeys.has(m.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;m&&g?m.data.isEqual(g.data)?v!==y&&(r.track({type:3,doc:g}),w=!0):this.ga(m,g)||(r.track({type:2,doc:g}),w=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),w=!0):m&&!g&&(r.track({type:1,doc:m}),w=!0,(l||c)&&(a=!0)),w&&(g?(o=o.add(g),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(g,v){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return y(g)-y(v)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new dc(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new JP,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new SM(r))}),this.da.forEach(r=>{e.has(r)||n.push(new TM(r))}),n}ba(e){this.Ta=e.Ts,this.da=Te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return dc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class OY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class MY{constructor(e){this.key=e,this.va=!1}}class VY{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ws(a=>yO(a),wh),this.Ma=new Map,this.xa=new Set,this.Oa=new Je(te.comparator),this.Na=new Map,this.La=new uE,this.Ba={},this.ka=new Map,this.qa=da.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function LY(t,e,n=!0){const r=ty(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await CM(r,e,n,!0),s}async function $Y(t,e){const n=ty(t);await CM(n,e,!0,!1)}async function CM(t,e,n,r){const s=await lc(t.localStore,pn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await SE(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&ey(t.remoteStore,s),a}async function SE(t,e,n,r,s){t.Ka=(h,m,g)=>async function(y,w,_,x){let b=w.view.ma(_);b.ns&&(b=await qm(y.localStore,w.query,!1).then(({documents:C})=>w.view.ma(C,b)));const S=x&&x.targetChanges.get(w.targetId),A=x&&x.targetMismatches.get(w.targetId)!=null,D=w.view.applyChanges(b,y.isPrimaryClient,S,A);return Cw(y,w.targetId,D.wa),D.snapshot}(t,h,m,g);const i=await qm(t.localStore,e,!0),o=new IM(e,i.Ts),a=o.ma(i.documents),l=Th.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Cw(t,n,c.wa);const d=new OY(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function FY(t,e,n){const r=Z(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!wh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await cc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&uc(r.remoteStore,s.targetId),hc(r,s.targetId)}).catch(ao)):(hc(r,s.targetId),await cc(r.localStore,s.targetId,!0))}async function UY(t,e){const n=Z(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uc(n.remoteStore,r.targetId))}async function BY(t,e,n){const r=AE(t);try{const s=await function(o,a){const l=Z(o),c=Xe.now(),d=a.reduce((g,v)=>g.add(v.key),Te());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=jn(),y=Te();return l.cs.getEntries(g,d).next(w=>{v=w,v.forEach((_,x)=>{x.isValidDocument()||(y=y.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(w=>{h=w;const _=[];for(const x of a){const b=pQ(x,h.get(x.key).overlayedDocument);b!=null&&_.push(new Gs(x.key,b,oO(b.value.mapValue),lt.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,_,a)}).next(w=>{m=w;const _=w.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(g,w.batchId,_)})}).then(()=>({batchId:m.batchId,changes:_O(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Je(ve)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await Hs(r,s.changes),await jc(r.remoteStore)}catch(s){const i=Mc(s,"Failed to persist write");n.reject(i)}}async function PM(t,e){const n=Z(t);try{const r=await oY(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ue(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ue(o.va):s.removedDocuments.size>0&&(ue(o.va),o.va=!1))}),await Hs(n,r,e)}catch(r){await ao(r)}}function nA(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Z(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const m of h.j_)m.Z_(a)&&(c=!0)}),c&&EE(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zY(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Je(te.comparator);o=o.insert(i,nt.newNoDocument(i,he.min()));const a=Te().add(i),l=new Eh(he.min(),new Map,new Je(ve),o,a);await PM(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),PE(r)}else await cc(r.localStore,e,!1).then(()=>hc(r,e,n)).catch(ao)}async function qY(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await iY(n.localStore,e);CE(n,r,null),IE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hs(n,s)}catch(s){await ao(s)}}async function WY(t,e,n){const r=Z(t);try{const s=await function(o,a){const l=Z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ue(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);CE(r,e,n),IE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hs(r,s)}catch(s){await ao(s)}}async function GY(t,e){const n=Z(t);uo(n.remoteStore)||Q("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=Z(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const s=n.ka.get(r)||[];s.push(e),n.ka.set(r,s)}catch(r){const s=Mc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function IE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function CE(t,e,n){const r=Z(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function hc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||AM(t,r)})}function AM(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(uc(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),PE(t))}function Cw(t,e,n){for(const r of n)r instanceof TM?(t.La.addReference(r.key,e),HY(t,r)):r instanceof SM?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||AM(t,r.key)):ie()}function HY(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),PE(t))}function PE(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(De.fromString(e)),r=t.qa.next();t.Na.set(r,new MY(n)),t.Oa=t.Oa.insert(n,r),ey(t.remoteStore,new ys(pn(Rc(n.path)),r,"TargetPurposeLimboResolution",kn.oe))}}async function Hs(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=pE.Wi(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const d=Z(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>$.forEach(c,m=>$.forEach(m.$i,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>$.forEach(m.Ui,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!lo(h))throw h;Q("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const g=d.os.get(m),v=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(v);d.os=d.os.insert(m,y)}}}(r.localStore,i))}async function KY(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await cM(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new Y(U.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hs(n,r.hs)}}function QY(t,e){const n=Z(t),r=n.Na.get(e);if(r&&r.va)return Te().add(r.key);{let s=Te();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}async function YY(t,e){const n=Z(t),r=await qm(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&Cw(n,e.targetId,s.wa),s}async function XY(t,e){const n=Z(t);return fM(n.localStore,e).then(r=>Hs(n,r))}async function JY(t,e,n,r){const s=Z(t),i=await function(a,l){const c=Z(a),d=Z(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,l).next(m=>m?c.localDocuments.getDocuments(h,m):$.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await jc(s.remoteStore):n==="acknowledged"||n==="rejected"?(CE(s,e,r||null),IE(s,e),function(a,l){Z(Z(a).mutationQueue).On(l)}(s.localStore,e)):ie(),await Hs(s,i)):Q("SyncEngine","Cannot apply mutation batch with id: "+e)}async function ZY(t,e){const n=Z(t);if(ty(n),AE(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await rA(n,r.toArray());n.Qa=!0,await Sw(n.remoteStore,!0);for(const i of s)ey(n.remoteStore,i)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(hc(n,o),cc(n.localStore,o,!0))),uc(n.remoteStore,o)}),await s,await rA(n,r),function(o){const a=Z(o);a.Na.forEach((l,c)=>{uc(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Je(te.comparator)}(n),n.Qa=!1,await Sw(n.remoteStore,!1)}}async function rA(t,e,n){const r=Z(t),s=[],i=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await lc(r.localStore,pn(l[0]));for(const c of l){const d=r.Fa.get(c),h=await YY(r,d);h.snapshot&&i.push(h.snapshot)}}else{const c=await hM(r.localStore,o);a=await lc(r.localStore,c),await SE(r,RM(c),o,!1,a.resumeToken)}s.push(a)}return r.Ca.d_(i),s}function RM(t){return pO(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function eX(t){return function(n){return Z(Z(n).persistence).Qi()}(Z(t).localStore)}async function tX(t,e,n,r){const s=Z(t);if(s.Qa)return void Q("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await fM(s.localStore,vO(i[0])),a=Eh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Et.EMPTY_BYTE_STRING);await Hs(s,o,a);break}case"rejected":await cc(s.localStore,e,!0),hc(s,e,r);break;default:ie()}}async function nX(t,e,n){const r=ty(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){Q("SyncEngine","Adding an already active target "+s);continue}const i=await hM(r.localStore,s),o=await lc(r.localStore,i);await SE(r,RM(i),o.targetId,!1,o.resumeToken),ey(r.remoteStore,o)}for(const s of n)r.Ma.has(s)&&await cc(r.localStore,s,!1).then(()=>{uc(r.remoteStore,s),hc(r,s)}).catch(ao)}}function ty(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zY.bind(null,e),e.Ca.d_=NY.bind(null,e.eventManager),e.Ca.$a=kY.bind(null,e.eventManager),e}function AE(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WY.bind(null,e),e}function rX(t,e,n){const r=Z(t);(async function(i,o,a){try{const l=await o.getMetadata();if(await function(g,v){const y=Z(g),w=Ct(v.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",_=>y.Gr.getBundleMetadata(_,v.id)).then(_=>!!_&&_.createTime.compareTo(w)>=0)}(i.localStore,l))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(EM(l));const c=new jY(l,i.localStore,o.serializer);let d=await o.Ua();for(;d;){const m=await c.la(d);m&&a._updateProgress(m),d=await o.Ua()}const h=await c.complete();return await Hs(i,h.Ia,void 0),await function(g,v){const y=Z(g);return y.persistence.runTransaction("Save bundle","readwrite",w=>y.Gr.saveBundleMetadata(w,v))}(i.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(l){return fr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class Ji{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return lM(this.persistence,new aM,e.initialUser,this.serializer)}Ga(e){return new dE(Zg.Zr,this.serializer)}Wa(e){return new mM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ji.provider={build:()=>new Ji};class sX extends Ji{constructor(e){super(),this.cacheSizeBytes=e}ja(e,n){ue(this.persistence.referenceDelegate instanceof zm);const r=this.persistence.referenceDelegate.garbageCollector;return new nM(r,e.asyncQueue,n)}Ga(e){const n=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new dE(r=>zm.Zr(r,n),this.serializer)}}class RE extends Ji{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await AE(this.Ja.syncEngine),await jc(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return lM(this.persistence,new aM,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new nM(r,e.asyncQueue,n)}Ha(e,n){const r=new IK(n,this.persistence);return new SK(e.asyncQueue,r)}Ga(e){const n=fE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new hE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,gM(),Vp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new mM}}class NM extends RE{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof u0&&(this.sharedClientState.syncEngine={no:JY.bind(null,n),ro:tX.bind(null,n),io:nX.bind(null,n),Qi:eX.bind(null,n),eo:XY.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await ZY(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=gM();if(!u0.D(n))throw new Y(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=fE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new u0(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Zi{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KY.bind(null,this.syncEngine),await Sw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RY}()}createDatastore(e){const n=Sh(e.databaseInfo.databaseId),r=function(i){return new fY(i)}(e.databaseInfo);return function(i,o,a,l){return new gY(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new vY(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>nA(this.syncEngine,n,0),function(){return YP.D()?new YP:new uY}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new VY(s,i,o,a,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);Q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Dc(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Zi.provider={build:()=>new Zi};function sA(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):It("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iX{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new zt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const s=await this.iu(r);return new DY(JSON.parse(s),e.length+r)}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Y(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=Z(s),a={documents:i.map(h=>Md(o.serializer,h))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,De.emptyPath(),a,i.length),c=new Map;l.forEach(h=>{const m=EQ(o.serializer,h);c.set(m.key.toString(),m)});const d=[];return i.forEach(h=>{const m=c.get(h.toString());ue(!!m),d.push(m)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new kc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=te.fromPath(r);this.mutations.push(new tE(s,this.precondition(s)))}),await async function(r,s){const i=Z(r),o={writes:s.map(a=>Vd(i.serializer,a))};await i.Mo("Commit",i.serializer.databaseId,De.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ie();n=he.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Y(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(he.min())?lt.exists(!1):lt.updateTime(n):lt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(he.min()))throw new Y(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lt.updateTime(n)}return lt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aX{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new gE(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new oX(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!vh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!kO(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lX{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ft.UNAUTHENTICATED,this.clientId=zj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Mc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function h0(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await cM(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await NE(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>XP(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>XP(e.remoteStore,s)),t._onlineComponents=e}async function NE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await h0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fr("Error using user provided cache. Falling back to memory cache: "+n),await h0(t,new Ji)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await h0(t,new Ji);return t._offlineComponents}async function ry(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await iA(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await iA(t,new Zi))),t._onlineComponents}function kM(t){return NE(t).then(e=>e.persistence)}function Vc(t){return NE(t).then(e=>e.localStore)}function DM(t){return ry(t).then(e=>e.remoteStore)}function kE(t){return ry(t).then(e=>e.syncEngine)}function jM(t){return ry(t).then(e=>e.datastore)}async function fc(t){const e=await ry(t),n=e.eventManager;return n.onListen=LY.bind(null,e.syncEngine),n.onUnlisten=FY.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$Y.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UY.bind(null,e.syncEngine),n}function cX(t){return t.asyncQueue.enqueue(async()=>{const e=await kM(t),n=await DM(t);return e.setNetworkEnabled(!0),function(s){const i=Z(s);return i.L_.delete(0),Ih(i)}(n)})}function uX(t){return t.asyncQueue.enqueue(async()=>{const e=await kM(t),n=await DM(t);return e.setNetworkEnabled(!1),async function(s){const i=Z(s);i.L_.add(0),await Dc(i),i.q_.set("Offline")}(n)})}function dX(t,e){const n=new zt;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(c,d){const h=Z(c);return h.persistence.runTransaction("read document","readonly",m=>h.localDocuments.getDocument(m,d))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new Y(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Mc(a,`Failed to get document '${i} from cache`);o.reject(l)}}(await Vc(t),e,n)),n.promise}function OM(t,e,n={}){const r=new zt;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new ny({next:m=>{d.Za(),o.enqueueAndForget(()=>bE(i,h));const g=m.docs.has(a);!g&&m.fromCache?c.reject(new Y(U.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?c.reject(new Y(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new TE(Rc(a.path),d,{includeMetadataChanges:!0,_a:!0});return _E(i,h)}(await fc(t),t.asyncQueue,e,n,r)),r.promise}function hX(t,e){const n=new zt;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await qm(s,i,!0),l=new IM(i,a.Ts),c=l.ma(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Mc(a,`Failed to execute query '${i} against cache`);o.reject(l)}}(await Vc(t),e,n)),n.promise}function MM(t,e,n={}){const r=new zt;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new ny({next:m=>{d.Za(),o.enqueueAndForget(()=>bE(i,h)),m.fromCache&&l.source==="server"?c.reject(new Y(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new TE(a,d,{includeMetadataChanges:!0,_a:!0});return _E(i,h)}(await fc(t),t.asyncQueue,e,n,r)),r.promise}function fX(t,e,n){const r=new zt;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await jM(t);r.resolve(async function(o,a,l){var c;const d=Z(o),{request:h,ut:m,parent:g}=qO(d.serializer,mO(a),l);d.connection.Fo||delete h.parent;const v=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,g,h,1)).filter(w=>!!w.result);ue(v.length===1);const y=(c=v[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(y).reduce((w,_)=>(w[m[_]]=y[_],w),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}function pX(t,e){const n=new ny(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){Z(s).Y_.add(i),i.next()}(await fc(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){Z(s).Y_.delete(i)}(await fc(t),n))}}function mX(t,e,n,r){const s=function(o,a){let l;return l=typeof o=="string"?jO().encode(o):o,function(d,h){return new iX(d,h)}(function(d,h){if(d instanceof Uint8Array)return sA(d,h);if(d instanceof ArrayBuffer)return sA(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Sh(e));t.asyncQueue.enqueueAndForget(async()=>{rX(await kE(t),s,r)})}function gX(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const i=Z(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.Gr.getNamedQuery(o,s))}(await Vc(t),e))}function yX(t,e){return t.asyncQueue.enqueue(async()=>async function(r,s){const i=Z(r),o=i.indexManager,a=[];return i.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(c=>function(h,m,g,v,y){h=[...h],m=[...m],h.sort(g),m.sort(g);const w=h.length,_=m.length;let x=0,b=0;for(;x<_&&b<w;){const S=g(h[b],m[x]);S<0?y(h[b++]):S>0?v(m[x++]):(x++,b++)}for(;x<_;)v(m[x++]);for(;b<w;)y(h[b++])}(c,s,_K,d=>{a.push(o.addFieldIndex(l,d))},d=>{a.push(o.deleteFieldIndex(l,d))})).next(()=>$.waitFor(a)))}(await Vc(t),e))}function vX(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){Z(r).ss.zi=s}(await Vc(t),e))}function xX(t){return t.asyncQueue.enqueue(async()=>function(n){const r=Z(n),s=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",i=>s.deleteAllFieldIndexes(i))}(await Vc(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t,e,n){if(!n)throw new Y(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wX(t,e,n,r){if(e===!0&&r===!0)throw new Y(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function aA(t){if(!te.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lA(t){if(te.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Pe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sy(t);throw new Y(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function LM(t,e){if(e<=0)throw new Y(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wX("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ch{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cA({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cA(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fK;switch(r.type){case"firstParty":return new yK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=oA.get(n);r&&(Q("ComponentProvider","Removing Datastore"),oA.delete(n),r.terminate())}(this),Promise.resolve()}}function _X(t,e,n,r={}){var s;const i=(t=Pe(t,Ch))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ft.MOCK_USER;else{a=zD(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Y(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ft(c)}t._authCredentials=new pK(new Uj(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zt(this.firestore,e,this._query)}}class Pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}}class Hr extends Zt{constructor(e,n,r){super(e,n,Rc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new te(e))}withConverter(e){return new Hr(this.firestore,e,this._path)}}function Qn(t,e,...n){if(t=Le(t),DE("collection","path",e),t instanceof Ch){const r=De.fromString(e,...n);return lA(r),new Hr(t,null,r)}{if(!(t instanceof Pt||t instanceof Hr))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(De.fromString(e,...n));return lA(r),new Hr(t.firestore,null,r)}}function Hde(t,e){if(t=Pe(t,Ch),DE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Y(U.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zt(t,null,function(r){return new qs(De.emptyPath(),r)}(e))}function mn(t,e,...n){if(t=Le(t),arguments.length===1&&(e=zj.newId()),DE("doc","path",e),t instanceof Ch){const r=De.fromString(e,...n);return aA(r),new Pt(t,null,new te(r))}{if(!(t instanceof Pt||t instanceof Hr))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(De.fromString(e,...n));return aA(r),new Pt(t.firestore,t instanceof Hr?t.converter:null,new te(r))}}function Kde(t,e){return t=Le(t),e=Le(e),(t instanceof Pt||t instanceof Hr)&&(e instanceof Pt||e instanceof Hr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function $M(t,e){return t=Le(t),e=Le(e),t instanceof Zt&&e instanceof Zt&&t.firestore===e.firestore&&wh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gE(this,"async_queue_retry"),this.Vu=()=>{const r=Vp();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Vp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Vp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new zt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!lo(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw It("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=wE.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Pw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class bX{constructor(){this._progressObserver={},this._taskCompletionResolver=new zt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qde=-1;class Ke extends Ch{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new uA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uA(e),this._firestoreClient=void 0,await e}}}function Yde(t,e,n){n||(n="(default)");const r=Pc(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(Wi(i,e))return s;throw new Y(U.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Y(U.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function EX(t,e){const n=typeof t=="object"?t:kb(),r=typeof t=="string"?t:e||"(default)",s=Pc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=FD("firestore");i&&_X(s,...i)}return s}function yt(t){if(t._terminated)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FM(t),t._firestoreClient}function FM(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new HK(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,VM(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new lX(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function Xde(t,e){fr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return UM(t,Zi.provider,{build:r=>new RE(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Jde(t){fr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();UM(t,Zi.provider,{build:n=>new NM(n,e.cacheSizeBytes)})}function UM(t,e,n){if((t=Pe(t,Ke))._firestoreClient||t._terminated)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Y(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},FM(t)}function Zde(t){if(t._initialized&&!t._terminated)throw new Y(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Wr.D())return Promise.resolve();const s=r+"main";await Wr.delete(s)}(fE(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function ehe(t){return function(n){const r=new zt;return n.asyncQueue.enqueueAndForget(async()=>GY(await kE(n),r)),r.promise}(yt(t=Pe(t,Ke)))}function the(t){return cX(yt(t=Pe(t,Ke)))}function nhe(t){return uX(yt(t=Pe(t,Ke)))}function rhe(t){return FW(t.app,"firestore",t._databaseId.database),t._delete()}function she(t,e){const n=yt(t=Pe(t,Ke)),r=new bX;return mX(n,t._databaseId,e,r),r}function ihe(t,e){return gX(yt(t=Pe(t,Ke)),e).then(n=>n?new Zt(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class TX{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ha(Et.fromBase64String(e))}catch(n){throw new Y(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ha(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function ohe(){return new Ia("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SX=/^__.*__$/;class IX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nc(e,this.data,n,this.fieldTransforms)}}class BM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class oy{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new oy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Km(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(zM(this.Cu)&&SX.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class CX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Sh(e)}Qu(e,n,r,s=!1){return new oy({Cu:e,methodName:n,qu:r,path:at.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pa(t){const e=t._freezeSettings(),n=Sh(t._databaseId);return new CX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ay(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);UE("Data must be an object, but it was:",o,r);const a=GM(r,o);let l,c;if(i.merge)l=new Dn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const m=$d(e,h,n);if(!o.contains(m))throw new Y(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);KM(d,m)||d.push(m)}l=new Dn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new IX(new Yt(a),l,c)}class Ph extends Ca{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ph}}function qM(t,e,n){return new oy({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class OE extends Ca{_toFieldTransform(e){return new bh(e.path,new ic)}isEqual(e){return e instanceof OE}}class ME extends Ca{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=qM(this,e,!0),r=this.Ku.map(i=>Aa(i,n)),s=new aa(r);return new bh(e.path,s)}isEqual(e){return e instanceof ME&&Wi(this.Ku,e.Ku)}}class VE extends Ca{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=qM(this,e,!0),r=this.Ku.map(i=>Aa(i,n)),s=new la(r);return new bh(e.path,s)}isEqual(e){return e instanceof VE&&Wi(this.Ku,e.Ku)}}class LE extends Ca{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new oc(e.serializer,TO(e.serializer,this.$u));return new bh(e.path,n)}isEqual(e){return e instanceof LE&&this.$u===e.$u}}function $E(t,e,n,r){const s=t.Qu(1,e,n);UE("Data must be an object, but it was:",s,r);const i=[],o=Yt.empty();co(r,(l,c)=>{const d=ly(e,l,n);c=Le(c);const h=s.Nu(d);if(c instanceof Ph)i.push(d);else{const m=Aa(c,h);m!=null&&(i.push(d),o.set(d,m))}});const a=new Dn(i);return new BM(o,a,s.fieldTransforms)}function FE(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[$d(e,r,n)],l=[s];if(i.length%2!=0)throw new Y(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push($d(e,i[m])),l.push(i[m+1]);const c=[],d=Yt.empty();for(let m=a.length-1;m>=0;--m)if(!KM(c,a[m])){const g=a[m];let v=l[m];v=Le(v);const y=o.Nu(g);if(v instanceof Ph)c.push(g);else{const w=Aa(v,y);w!=null&&(c.push(g),d.set(g,w))}}const h=new Dn(c);return new BM(d,h,o.fieldTransforms)}function WM(t,e,n,r=!1){return Aa(n,t.Qu(r?4:3,e))}function Aa(t,e){if(HM(t=Le(t)))return UE("Unsupported field value:",e,t),GM(t,e);if(t instanceof Ca)return function(r,s){if(!zM(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Aa(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Xe.fromDate(r);return{timestampValue:ac(s.serializer,i)}}if(r instanceof Xe){const i=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ac(s.serializer,i)}}if(r instanceof jE)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ha)return{bytesValue:VO(s.serializer,r._byteString)};if(r instanceof Pt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:oE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof iy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return eE(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${sy(r)}`)}(t,e)}function GM(t,e){const n={};return nO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(t,(r,s)=>{const i=Aa(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function HM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof jE||t instanceof ha||t instanceof Pt||t instanceof Ca||t instanceof iy)}function UE(t,e,n){if(!HM(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=sy(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function $d(t,e,n){if((e=Le(e))instanceof Ia)return e._internalPath;if(typeof e=="string")return ly(t,e);throw Km("Field path arguments must be of type string or ",t,!1,void 0,n)}const PX=new RegExp("[~\\*/\\[\\]]");function ly(t,e,n){if(e.search(PX)>=0)throw Km(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ia(...e.split("."))._internalPath}catch{throw Km(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Km(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Y(U.INVALID_ARGUMENT,a+t+l)}function KM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AX extends Fd{data(){return super.data()}}function cy(t,e){return typeof e=="string"?ly(t,e):e instanceof Ia?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BE{}class Ah extends BE{}function Ds(t,e,...n){let r=[];e instanceof BE&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Lc).length,a=i.filter(l=>l instanceof Rh).length;if(o>1||o>0&&a>0)throw new Y(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Rh extends Ah{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Rh(e,n,r)}_apply(e){const n=this._parse(e);return XM(e._query,n),new Zt(e.firestore,e.converter,gw(e._query,n))}_parse(e){const n=Pa(e.firestore);return function(i,o,a,l,c,d,h){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){hA(h,d);const g=[];for(const v of h)g.push(dA(l,i,v));m={arrayValue:{values:g}}}else m=dA(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||hA(h,d),m=WM(a,o,h,d==="in"||d==="not-in");return je.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zE(t,e,n){const r=e,s=cy("where",t);return Rh._create(s,r,n)}class Lc extends BE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lc(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ze.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)XM(o,l),o=gw(o,l)}(e._query,n),new Zt(e.firestore,e.converter,gw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ahe(...t){return t.forEach(e=>JM("or",e)),Lc._create("or",t)}function lhe(...t){return t.forEach(e=>JM("and",e)),Lc._create("and",t)}class qE extends Ah{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new qE(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Y(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Od(i,o)}(e._query,this._field,this._direction);return new Zt(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new qs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function js(t,e="asc"){const n=e,r=cy("orderBy",t);return qE._create(r,n)}class uy extends Ah{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new uy(e,n,r)}_apply(e){return new Zt(e.firestore,e.converter,Lm(e._query,this._limit,this._limitType))}}function RX(t){return LM("limit",t),uy._create("limit",t,"F")}function che(t){return LM("limitToLast",t),uy._create("limitToLast",t,"L")}class dy extends Ah{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new dy(e,n,r)}_apply(e){const n=YM(e,this.type,this._docOrFields,this._inclusive);return new Zt(e.firestore,e.converter,function(s,i){return new qs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function uhe(...t){return dy._create("startAt",t,!0)}function dhe(...t){return dy._create("startAfter",t,!1)}class hy extends Ah{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new hy(e,n,r)}_apply(e){const n=YM(e,this.type,this._docOrFields,this._inclusive);return new Zt(e.firestore,e.converter,function(s,i){return new qs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}}function hhe(...t){return hy._create("endBefore",t,!1)}function fhe(...t){return hy._create("endAt",t,!0)}function YM(t,e,n,r){if(n[0]=Le(n[0]),n[0]instanceof Fd)return function(i,o,a,l,c){if(!l)throw new Y(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Dl(i))if(h.field.isKeyField())d.push(ia(o,l.key));else{const m=l.data.field(h.field);if(Wg(m))throw new Y(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const g=h.field.canonicalString();throw new Y(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(m)}return new Yi(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Pa(t.firestore);return function(o,a,l,c,d,h){const m=o.explicitOrderBy;if(d.length>m.length)throw new Y(U.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let v=0;v<d.length;v++){const y=d[v];if(m[v].field.isKeyField()){if(typeof y!="string")throw new Y(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!Jb(o)&&y.indexOf("/")!==-1)throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);const w=o.path.child(De.fromString(y));if(!te.isDocumentKey(w))throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${w}' is not because it contains an odd number of segments.`);const _=new te(w);g.push(ia(a,_))}else{const w=WM(l,c,y);g.push(w)}}return new Yi(g,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function dA(t,e,n){if(typeof(n=Le(n))=="string"){if(n==="")throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jb(e)&&n.indexOf("/")!==-1)throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(De.fromString(n));if(!te.isDocumentKey(r))throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ia(t,new te(r))}if(n instanceof Pt)return ia(t,n._key);throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sy(n)}.`)}function hA(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XM(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function JM(t,e){if(!(e instanceof Rh||e instanceof Lc))throw new Y(U.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class ZM{convertValue(e,n="none"){switch(Ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return co(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>it(o.doubleValue));return new iy(i)}convertGeoPoint(e){return new jE(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(kd(e));default:return null}}convertTimestamp(e){const n=Ns(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=De.fromString(e);ue(KO(r));const s=new sa(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||It(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class NX extends ZM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ha(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function phe(t){return new Ld("sum",$d("sum",t))}function mhe(t){return new Ld("avg",$d("average",t))}function kX(){return new Ld("count")}function ghe(t,e){var n,r;return t instanceof Ld&&e instanceof Ld&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())===((r=e._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())}function yhe(t,e){return $M(t.query,e.query)&&Wi(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pc extends Fd{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Lp extends pc{data(e={}){return super.data(e)}}class mc{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Fo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Lp(this._firestore,this._userDataWriter,r.key,r,new Fo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Lp(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Fo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Lp(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Fo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:DX(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function DX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function vhe(t,e){return t instanceof pc&&e instanceof pc?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof mc&&e instanceof mc&&t._firestore===e._firestore&&$M(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t){t=Pe(t,Pt);const e=Pe(t.firestore,Ke);return OM(yt(e),t._key).then(n=>HE(e,t,n))}class ho extends ZM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ha(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function xhe(t){t=Pe(t,Pt);const e=Pe(t.firestore,Ke),n=yt(e),r=new ho(e);return dX(n,t._key).then(s=>new pc(e,r,t._key,s,new Fo(s!==null&&s.hasLocalMutations,!0),t.converter))}function whe(t){t=Pe(t,Pt);const e=Pe(t.firestore,Ke);return OM(yt(e),t._key,{source:"server"}).then(n=>HE(e,t,n))}function py(t){t=Pe(t,Zt);const e=Pe(t.firestore,Ke),n=yt(e),r=new ho(e);return QM(t._query),MM(n,t._query).then(s=>new mc(e,r,t,s))}function _he(t){t=Pe(t,Zt);const e=Pe(t.firestore,Ke),n=yt(e),r=new ho(e);return hX(n,t._query).then(s=>new mc(e,r,t,s))}function bhe(t){t=Pe(t,Zt);const e=Pe(t.firestore,Ke),n=yt(e),r=new ho(e);return MM(n,t._query,{source:"server"}).then(s=>new mc(e,r,t,s))}function eV(t,e,n){t=Pe(t,Pt);const r=Pe(t.firestore,Ke),s=fy(t.converter,e,n);return Dh(r,[ay(Pa(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,lt.none())])}function Nh(t,e,n,...r){t=Pe(t,Pt);const s=Pe(t.firestore,Ke),i=Pa(s);let o;return o=typeof(e=Le(e))=="string"||e instanceof Ia?FE(i,"updateDoc",t._key,e,n,r):$E(i,"updateDoc",t._key,e),Dh(s,[o.toMutation(t._key,lt.exists(!0))])}function my(t){return Dh(Pe(t.firestore,Ke),[new kc(t._key,lt.none())])}function GE(t,e){const n=Pe(t.firestore,Ke),r=mn(t),s=fy(t.converter,e);return Dh(n,[ay(Pa(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,lt.exists(!1))]).then(()=>r)}function kh(t,...e){var n,r,s;t=Le(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Pw(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Pw(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,d;if(t instanceof Pt)c=Pe(t.firestore,Ke),d=Rc(t._key.path),l={next:h=>{e[o]&&e[o](HE(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Pe(t,Zt);c=Pe(h.firestore,Ke),d=h._query;const m=new ho(c);l={next:g=>{e[o]&&e[o](new mc(c,m,h,g))},error:e[o+1],complete:e[o+2]},QM(t._query)}return function(m,g,v,y){const w=new ny(y),_=new TE(g,w,v);return m.asyncQueue.enqueueAndForget(async()=>_E(await fc(m),_)),()=>{w.Za(),m.asyncQueue.enqueueAndForget(async()=>bE(await fc(m),_))}}(yt(c),d,a,l)}function Ehe(t,e){return pX(yt(t=Pe(t,Ke)),Pw(e)?e:{next:e})}function Dh(t,e){return function(r,s){const i=new zt;return r.asyncQueue.enqueueAndForget(async()=>BY(await kE(r),s,i)),i.promise}(yt(t),e)}function HE(t,e,n){const r=n.docs.get(e._key),s=new ho(t);return new pc(t,s,e._key,r,new Fo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function The(t){return jX(t,{count:kX()})}function jX(t,e){const n=Pe(t.firestore,Ke),r=yt(n),s=tO(e,(i,o)=>new NO(o,i.aggregateType,i._internalFieldPath));return fX(r,t._query,s).then(i=>function(a,l,c){const d=new ho(a);return new TX(l,d,c)}(n,t,i))}class OX{constructor(e){this.kind="memory",this._onlineComponentProvider=Zi.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Ji.provider}toJSON(){return{kind:this.kind}}}class MX{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=UX(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class VX{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Ji.provider}toJSON(){return{kind:this.kind}}}class LX{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new sX(e)}}toJSON(){return{kind:this.kind}}}function She(){return new VX}function Ihe(t){return new LX(t==null?void 0:t.cacheSizeBytes)}function Che(t){return new OX(t)}function Phe(t){return new MX(t)}class $X{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Zi.provider,this._offlineComponentProvider={build:n=>new RE(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class FX{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Zi.provider,this._offlineComponentProvider={build:n=>new NM(n,e==null?void 0:e.cacheSizeBytes)}}}function UX(t){return new $X(t==null?void 0:t.forceOwnership)}function Ahe(){return new FX}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BX={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zX{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pa(e)}set(e,n,r){this._verifyNotCommitted();const s=wi(e,this._firestore),i=fy(s.converter,n,r),o=ay(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,lt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=wi(e,this._firestore);let o;return o=typeof(n=Le(n))=="string"||n instanceof Ia?FE(this._dataReader,"WriteBatch.update",i._key,n,r,s):$E(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,lt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=wi(e,this._firestore);return this._mutations=this._mutations.concat(new kc(n._key,lt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wi(t,e){if((t=Le(t)).firestore!==e)throw new Y(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qX extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Pa(n)}get(n){const r=wi(n,this._firestore),s=new NX(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return ie();const o=i[0];if(o.isFoundDocument())return new Fd(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new Fd(this._firestore,s,r._key,null,r.converter);throw ie()})}set(n,r,s){const i=wi(n,this._firestore),o=fy(i.converter,r,s),a=ay(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=wi(n,this._firestore);let a;return a=typeof(r=Le(r))=="string"||r instanceof Ia?FE(this._dataReader,"Transaction.update",o._key,r,s,i):$E(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=wi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=wi(e,this._firestore),r=new ho(this._firestore);return super.get(e).then(s=>new pc(this._firestore,r,n._key,s._document,new Fo(!1,!1),n.converter))}}function WX(t,e,n){t=Pe(t,Ke);const r=Object.assign(Object.assign({},BX),n);return function(i){if(i.maxAttempts<1)throw new Y(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const l=new zt;return i.asyncQueue.enqueueAndForget(async()=>{const c=await jM(i);new aX(i.asyncQueue,c,a,o,l).au()}),l.promise}(yt(t),s=>e(new qX(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nhe(){return new Ph("deleteField")}function Qm(){return new OE("serverTimestamp")}function khe(...t){return new ME("arrayUnion",t)}function Dhe(...t){return new VE("arrayRemove",t)}function tV(t){return new LE("increment",t)}function jhe(t){return new iy(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t){return yt(t=Pe(t,Ke)),new zX(t,e=>Dh(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ohe(t,e){const n=yt(t=Pe(t,Ke));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return fr("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(i){const o=typeof i=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new Y(U.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(i):i,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const c=fA(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const h of l.fields){const m=ly("setIndexConfiguration",fA(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new Go(m,2)):h.order==="ASCENDING"?d.push(new Go(m,0)):h.order==="DESCENDING"&&d.push(new Go(m,1))}a.push(new tc(tc.UNKNOWN_ID,c,d,nc.empty()))}return a}(e);return yX(n,r)}function fA(t,e){if(typeof t[e]!="string")throw new Y(U.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GX{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function Mhe(t){var e;t=Pe(t,Ke);const n=pA.get(t);if(n)return n;if(((e=yt(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const r=new GX(t);return pA.set(t,r),r}function Vhe(t){nV(t,!0)}function Lhe(t){nV(t,!1)}function $he(t){xX(yt(t._firestore)).then(e=>Q("deleting all persistent cache indexes succeeded")).catch(e=>fr("deleting all persistent cache indexes failed",e))}function nV(t,e){vX(yt(t._firestore),e).then(n=>Q(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>fr(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const pA=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fhe(t){var e;const n=(e=yt(Pe(t.firestore,Ke))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return n===void 0?null:Yg(n,pn(t._query))._t}function Uhe(t,e){var n;const r=tO(e,(i,o)=>new NO(o,i.aggregateType,i._internalFieldPath)),s=(n=yt(Pe(t.firestore,Ke))._onlineComponents)===null||n===void 0?void 0:n.datastore.serializer;return s===void 0?null:qO(s,mO(t._query),r,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bhe{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return QE.instance.onExistenceFilterMismatch(e)}}class QE{constructor(){this.Uu=new Map}static get instance(){return Gf||(Gf=new QE,function(n){if($m)throw new Error("a TestingHooksSpi instance is already set");$m=n}(Gf)),Gf}et(e){this.Uu.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Uu;return r.set(n,e),()=>r.delete(n)}}let Gf=null;(function(e,n=!0){(function(s){Ac=s})(Ea),ea(new Gi("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ke(new mK(r.getProvider("auth-internal")),new vK(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sa(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),zr(rP,"4.7.3",e),zr(rP,"4.7.3","esm2017")})();var HX="firebase",KX="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr(HX,KX,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV="firebasestorage.googleapis.com",sV="storageBucket",QX=2*60*1e3,YX=10*60*1e3,XX=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt extends Jr{constructor(e,n,r=0){super(f0(e),`Firebase Storage: ${n} (${f0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return f0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var st;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(st||(st={}));function f0(t){return"storage/"+t}function YE(){const t="An unknown error occurred, please check the error payload for server response.";return new vt(st.UNKNOWN,t)}function JX(t){return new vt(st.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ZX(t){return new vt(st.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function eJ(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vt(st.UNAUTHENTICATED,t)}function tJ(){return new vt(st.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nJ(t){return new vt(st.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function iV(){return new vt(st.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oV(){return new vt(st.CANCELED,"User canceled the upload/download.")}function rJ(t){return new vt(st.INVALID_URL,"Invalid URL '"+t+"'.")}function sJ(t){return new vt(st.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function iJ(){return new vt(st.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+sV+"' property when initializing the app?")}function aV(){return new vt(st.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oJ(){return new vt(st.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function aJ(){return new vt(st.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function lJ(t){return new vt(st.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Aw(t){return new vt(st.INVALID_ARGUMENT,t)}function lV(){return new vt(st.APP_DELETED,"The Firebase app was deleted.")}function cJ(t){return new vt(st.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nd(t,e){return new vt(st.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function _u(t){throw new vt(st.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Hn.makeFromUrl(e,n)}catch{return new Hn(e,"")}if(r.path==="")return r;throw sJ(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${s}/o${m}`,"i"),v={bucket:1,path:3},y=n===rV?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",_=new RegExp(`^https?://${y}/${s}/${w}`,"i"),b=[{regex:a,indices:l,postModify:i},{regex:g,indices:v,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<b.length;S++){const A=b[S],D=A.regex.exec(e);if(D){const C=D[A.indices.bucket];let I=D[A.indices.path];I||(I=""),r=new Hn(C,I),A.postModify(r);break}}if(r==null)throw rJ(e);return r}}class uJ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dJ(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...w){c||(c=!0,e.apply(null,w))}function h(w){s=setTimeout(()=>{s=null,t(g,l())},w)}function m(){i&&clearTimeout(i)}function g(w,..._){if(c){m();return}if(w){m(),d.call(null,w,..._);return}if(l()||o){m(),d.call(null,w,..._);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,h(b)}let v=!1;function y(w){v||(v=!0,m(),!c&&(s!==null?(w||(a=2),clearTimeout(s),h(0)):w||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function hJ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fJ(t){return t!==void 0}function pJ(t){return typeof t=="function"}function mJ(t){return typeof t=="object"&&!Array.isArray(t)}function gy(t){return typeof t=="string"||t instanceof String}function mA(t){return XE()&&t instanceof Blob}function XE(){return typeof Blob<"u"}function gA(t,e,n,r){if(r<e)throw Aw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Aw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function cV(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ho;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ho||(Ho={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gJ{constructor(e,n,r,s,i,o,a,l,c,d,h,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Hf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ho.NO_ERROR,l=i.getStatus();if(!a||uV(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Ho.ABORT;r(!1,new Hf(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Hf(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());fJ(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=YE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?lV():oV();o(l)}else{const l=iV();o(l)}};this.canceled_?n(!1,new Hf(!1,null,!0)):this.backoffId_=dJ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&hJ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function yJ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function vJ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function xJ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function wJ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function _J(t,e,n,r,s,i,o=!0){const a=cV(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return xJ(c,e),yJ(c,n),vJ(c,i),wJ(c,r),new gJ(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function EJ(...t){const e=bJ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(XE())return new Blob(t);throw new vt(st.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function TJ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SJ(t){if(typeof atob>"u")throw lJ("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class p0{constructor(e,n){this.data=e,this.contentType=n||null}}function IJ(t,e){switch(t){case $r.RAW:return new p0(dV(e));case $r.BASE64:case $r.BASE64URL:return new p0(hV(t,e));case $r.DATA_URL:return new p0(PJ(e),AJ(e))}throw YE()}function dV(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function CJ(t){let e;try{e=decodeURIComponent(t)}catch{throw nd($r.DATA_URL,"Malformed data URL.")}return dV(e)}function hV(t,e){switch(t){case $r.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw nd(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case $r.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw nd(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=SJ(e)}catch(s){throw s.message.includes("polyfill")?s:nd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class fV{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw nd($r.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=RJ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function PJ(t){const e=new fV(t);return e.base64?hV($r.BASE64,e.rest):CJ(e.rest)}function AJ(t){return new fV(t).contentType}function RJ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){let r=0,s="";mA(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(mA(this.data_)){const r=this.data_,s=TJ(r,e,n);return s===null?null:new _i(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new _i(r,!0)}}static getBlob(...e){if(XE()){const n=e.map(r=>r instanceof _i?r.data_:r);return new _i(EJ.apply(null,n))}else{const n=e.map(o=>gy(o)?IJ($r.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new _i(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(t){let e;try{e=JSON.parse(t)}catch{return null}return mJ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NJ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kJ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function mV(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DJ(t,e){return e}class wn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||DJ}}let Kf=null;function jJ(t){return!gy(t)||t.length<2?t:mV(t)}function gV(){if(Kf)return Kf;const t=[];t.push(new wn("bucket")),t.push(new wn("generation")),t.push(new wn("metageneration")),t.push(new wn("name","fullPath",!0));function e(i,o){return jJ(o)}const n=new wn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new wn("size");return s.xform=r,t.push(s),t.push(new wn("timeCreated")),t.push(new wn("updated")),t.push(new wn("md5Hash",null,!0)),t.push(new wn("cacheControl",null,!0)),t.push(new wn("contentDisposition",null,!0)),t.push(new wn("contentEncoding",null,!0)),t.push(new wn("contentLanguage",null,!0)),t.push(new wn("contentType",null,!0)),t.push(new wn("metadata","customMetadata",!0)),Kf=t,Kf}function OJ(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Hn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function MJ(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return OJ(r,t),r}function yV(t,e,n){const r=pV(e);return r===null?null:MJ(t,r,n)}function VJ(t,e,n,r){const s=pV(e);if(s===null||!gy(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),g=jh(m,n,r),v=cV({alt:"media",token:c});return g+v})[0]}function vV(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class $c{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t){if(!t)throw YE()}function JE(t,e){function n(r,s){const i=yV(t,s,e);return bs(i!==null),i}return n}function LJ(t,e){function n(r,s){const i=yV(t,s,e);return bs(i!==null),VJ(i,s,t.host,t._protocol)}return n}function Oh(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=tJ():s=eJ():n.getStatus()===402?s=ZX(t.bucket):n.getStatus()===403?s=nJ(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function xV(t){const e=Oh(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=JX(t.path)),i.serverResponse=s.serverResponse,i}return n}function $J(t,e,n){const r=e.fullServerUrl(),s=jh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new $c(s,i,JE(t,n),o);return a.errorHandler=xV(e),a}function FJ(t,e,n){const r=e.fullServerUrl(),s=jh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new $c(s,i,LJ(t,n),o);return a.errorHandler=xV(e),a}function UJ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function wV(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=UJ(null,e)),r}function BJ(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let S=0;S<2;S++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=wV(e,r,s),d=vV(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",g=_i.getBlob(h,r,m);if(g===null)throw aV();const v={name:c.fullPath},y=jh(i,t.host,t._protocol),w="POST",_=t.maxUploadRetryTime,x=new $c(y,w,JE(t,n),_);return x.urlParams=v,x.headers=o,x.body=g.uploadData(),x.errorHandler=Oh(e),x}class Ym{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function ZE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{bs(!1)}return bs(!!n&&(e||["active"]).indexOf(n)!==-1),n}function zJ(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=wV(e,r,s),a={name:o.fullPath},l=jh(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=vV(o,n),m=t.maxUploadRetryTime;function g(y){ZE(y);let w;try{w=y.getResponseHeader("X-Goog-Upload-URL")}catch{bs(!1)}return bs(gy(w)),w}const v=new $c(l,c,g,m);return v.urlParams=a,v.headers=d,v.body=h,v.errorHandler=Oh(e),v}function qJ(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=ZE(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{bs(!1)}h||bs(!1);const m=Number(h);return bs(!isNaN(m)),new Ym(m,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new $c(n,o,i,a);return l.headers=s,l.errorHandler=Oh(e),l}const yA=256*1024;function WJ(t,e,n,r,s,i,o,a){const l=new Ym(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw oJ();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const h=l.current,m=h+d;let g="";d===0?g="finalize":c===d?g="upload, finalize":g="upload";const v={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${l.current}`},y=r.slice(h,m);if(y===null)throw aV();function w(S,A){const D=ZE(S,["active","final"]),C=l.current+d,I=r.size();let P;return D==="final"?P=JE(e,i)(S,A):P=null,new Ym(C,I,D==="final",P)}const _="POST",x=e.maxUploadRetryTime,b=new $c(n,_,w,x);return b.headers=v,b.body=y.uploadData(),b.progressCallback=a||null,b.errorHandler=Oh(t),b}const Pn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function m0(t){switch(t){case"running":case"pausing":case"canceling":return Pn.RUNNING;case"paused":return Pn.PAUSED;case"success":return Pn.SUCCESS;case"canceled":return Pn.CANCELED;case"error":return Pn.ERROR;default:return Pn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GJ{constructor(e,n,r){if(pJ(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class HJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ho.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ho.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ho.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw _u("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _u("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _u("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _u("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _u("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class KJ extends HJ{initXhr(){this.xhr_.responseType="text"}}function ol(){return new KJ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QJ{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=gV(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(st.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(uV(s.status,[]))if(i)s=iV();else{this.sleepTime=Math.max(this.sleepTime*2,XX),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(st.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=zJ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ol,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=qJ(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,ol,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=yA*this._chunkMultiplier,n=new Ym(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=WJ(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ol,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){yA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=$J(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,ol,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=BJ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ol,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=oV(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=m0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new GJ(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(m0(this._state)){case Pn.SUCCESS:Ka(this._resolve.bind(null,this.snapshot))();break;case Pn.CANCELED:case Pn.ERROR:const n=this._reject;Ka(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(m0(this._state)){case Pn.RUNNING:case Pn.PAUSED:e.next&&Ka(e.next.bind(e,this.snapshot))();break;case Pn.SUCCESS:e.complete&&Ka(e.complete.bind(e))();break;case Pn.CANCELED:case Pn.ERROR:e.error&&Ka(e.error.bind(e,this._error))();break;default:e.error&&Ka(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this._service=e,n instanceof Hn?this._location=n:this._location=Hn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new fa(e,n)}get root(){const e=new Hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mV(this._location.path)}get storage(){return this._service}get parent(){const e=NJ(this._location.path);if(e===null)return null;const n=new Hn(this._location.bucket,e);return new fa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw cJ(e)}}function YJ(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new QJ(t,new _i(e),n)}function XJ(t){t._throwIfRoot("getDownloadURL");const e=FJ(t.storage,t._location,gV());return t.storage.makeRequestWithTokens(e,ol).then(n=>{if(n===null)throw aJ();return n})}function JJ(t,e){const n=kJ(t._location.path,e),r=new Hn(t._location.bucket,n);return new fa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZJ(t){return/^[A-Za-z]+:\/\//.test(t)}function eZ(t,e){return new fa(t,e)}function _V(t,e){if(t instanceof e1){const n=t;if(n._bucket==null)throw iJ();const r=new fa(n,n._bucket);return e!=null?_V(r,e):r}else return e!==void 0?JJ(t,e):t}function tZ(t,e){if(e&&ZJ(e)){if(t instanceof e1)return eZ(t,e);throw Aw("To use ref(service, url), the first argument must be a Storage instance.")}else return _V(t,e)}function vA(t,e){const n=e==null?void 0:e[sV];return n==null?null:Hn.makeFromBucketSpec(n,t)}function nZ(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:zD(s,t.app.options.projectId))}class e1{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=rV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=QX,this._maxUploadRetryTime=YX,this._requests=new Set,s!=null?this._bucket=Hn.makeFromBucketSpec(s,this._host):this._bucket=vA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hn.makeFromBucketSpec(this._url,e):this._bucket=vA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fa(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new uJ(lV());{const o=_J(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const xA="@firebase/storage",wA="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV="storage";function rZ(t,e,n){return t=Le(t),YJ(t,e,n)}function sZ(t){return t=Le(t),XJ(t)}function iZ(t,e){return t=Le(t),tZ(t,e)}function oZ(t=kb(),e){t=Le(t);const r=Pc(t,bV).getImmediate({identifier:e}),s=FD("storage");return s&&aZ(r,...s),r}function aZ(t,e,n,r={}){nZ(t,e,n,r)}function lZ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new e1(n,r,s,e,Ea)}function cZ(){ea(new Gi(bV,lZ,"PUBLIC").setMultipleInstances(!0)),zr(xA,wA,""),zr(xA,wA,"esm2017")}cZ();const uZ={apiKey:"AIzaSyBVkdyjJi3l-QB1KpSQJle_P9ujHQ2LTn0",authDomain:"right-water.firebaseapp.com",databaseURL:"https://right-water-default-rtdb.firebaseio.com",projectId:"right-water",storageBucket:"right-water.firebasestorage.app",messagingSenderId:"134412024932",appId:"1:134412024932:web:be47e36b50f087e2a87371",measurementId:"G-0RZ3XYPXR7"},t1=KD(uZ),us=jj(t1),Ue=EX(t1),dZ=oZ(t1),EV=new ls,TV=new as,SV=new cs,hZ=Object.freeze(Object.defineProperty({__proto__:null,EmailAuthProvider:Sa,Timestamp:Xe,addDoc:GE,auth:us,collection:Qn,createUserWithEmailAndPassword:zb,db:Ue,deleteDoc:my,doc:mn,facebookProvider:TV,getDoc:WE,getDocs:py,getDownloadURL:sZ,googleProvider:EV,increment:tV,onAuthStateChanged:wj,onSnapshot:kh,orderBy:js,query:Ds,reauthenticateWithCredential:YG,ref:iZ,sendPasswordResetEmail:Bb,serverTimestamp:Qm,signInWithEmailAndPassword:qb,signInWithPopup:kj,signOut:_j,storage:dZ,twitterProvider:SV,updateDoc:Nh,updatePassword:ZG,updateProfile:Dm,uploadBytesResumable:rZ,where:zE,writeBatch:KE},Symbol.toStringTag,{value:"Module"}));var fZ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const pZ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),se=(t,e)=>{const n=p.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...l},c)=>p.createElement("svg",{ref:c,...fZ,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${pZ(t)}`,...l},[...e.map(([d,h])=>p.createElement(d,h)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n},n1=se("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),IV=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Fc=se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),mZ=se("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),gZ=se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),yZ=se("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),vZ=se("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),xZ=se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),yy=se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),CV=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),_A=se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Rw=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),wZ=se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),bA=se("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),EA=se("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),_Z=se("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),bZ=se("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]),EZ=se("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),TZ=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),SZ=se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),IZ=se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),gc=se("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),CZ=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),PV=se("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),g0=se("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),PZ=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),AZ=se("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),RZ=se("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),NZ=se("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),kZ=se("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),pa=se("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),DZ=se("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),jZ=se("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),OZ=se("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),MZ=se("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Nw=se("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]),kt=se("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),VZ=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),AV=se("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),RV=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Mh=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),LZ=se("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),NV=se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),$Z=se("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),kV=se("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),FZ=se("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),DV=se("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]),Ud=se("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),UZ=se("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),BZ=se("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),jV=se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),OV=se("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),zZ=se("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),Vh=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),MV=se("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),r1=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Lh=se("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),qZ=se("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),yc=se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),jo=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),WZ=se("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),GZ=se("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),vy=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),VV=se("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),HZ=se("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]),KZ=se("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),QZ=se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),YZ=se("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),xy=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),vc=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),LV=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$V=se("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),XZ=()=>{const[t,e]=p.useState(0),[n,r]=p.useState(!1);p.useEffect(()=>{const l=setInterval(()=>{e(c=>{if(c>=100)return clearInterval(l),setTimeout(()=>r(!0),300),100;const d=Math.random()*10;return Math.min(c+d,100)})},150);return()=>clearInterval(l)},[]);const s="Right Water",i={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},o={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},a={initial:{scale:0,opacity:0,rotate:-90},animate:{scale:[1,1.5,1.2,2.5,0],rotate:[0,15,-15,0,0],opacity:[1,.8,.6,.2,0],transition:{duration:.7,ease:"easeOut"}}};return u.jsx("div",{className:"fixed inset-0 z-[200] flex flex-col items-center justify-center bg-background",children:u.jsx(Ab,{children:n?u.jsx(oe.div,{variants:a,initial:"initial",animate:"animate",children:u.jsx(gc,{size:150,className:"text-primary"})},"splash"):u.jsxs(oe.div,{initial:{opacity:1},exit:{opacity:0,scale:.8,transition:{duration:.3}},className:"flex flex-col items-center justify-center",children:[u.jsx(oe.div,{variants:i,initial:"hidden",animate:"visible",className:"flex items-center mb-6",dir:"ltr",children:s.split("").map((l,c)=>u.jsx(oe.span,{variants:o,className:`text-4xl md:text-5xl font-bold text-primary ${l===" "?"mx-2":""}`,children:l},`${l}-${c}`))}),u.jsx("div",{className:"w-64 h-2 bg-muted rounded-full overflow-hidden",children:u.jsx(oe.div,{className:"h-full bg-primary",style:{originX:0},initial:{scaleX:0},animate:{scaleX:t/100},transition:{duration:.2,ease:"linear"}})})]},"loader")})})},FV=p.createContext();function Ks(){return p.useContext(FV)}function JZ({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState(!1),[i,o]=p.useState(!0);p.useEffect(()=>{const g=wj(us,async v=>{if(v){n(v);try{const y=await v.getIdTokenResult(!0);s(!!y.claims.admin)}catch(y){console.error("     :",y),s(!1)}}else n(null),s(!1);setTimeout(()=>o(!1),3500)});return()=>g()},[]);const m={currentUser:e,isAdmin:r,loading:i,signUp:async(g,v,y)=>{const _=(await zb(us,g,v)).user;return await Dm(_,{displayName:y}),await eV(mn(Ue,"users",_.uid),{uid:_.uid,displayName:y,email:_.email,createdAt:Qm(),role:"customer"}),_},signIn:(g,v)=>qb(us,g,v),signOut:()=>_j(us),sendPasswordReset:g=>Bb(us,g,{url:`${window.location.origin}/login`}),updateUserProfileInDb:async(g,v)=>{if(!g)return;const y=mn(Ue,"users",g);return Nh(y,v)},updateProfile:Dm};return i?u.jsx(XZ,{}):u.jsx(FV.Provider,{value:m,children:t})}const ZZ=10;let y0=0;function eee(){return y0=(y0+1)%Number.MAX_SAFE_INTEGER,y0.toString()}const v0=new Map,tee=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,ZZ)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return v0.has(n)&&(clearTimeout(v0.get(n)),v0.delete(n)),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},$p=[];let Fp={toasts:[]};function Up(t){Fp=tee(Fp,t),$p.forEach(e=>{e(Fp)})}function nee(t){const e=eee(),n=s=>Up({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Up({type:"DISMISS_TOAST",toastId:e});return Up({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function tn(){const[t,e]=p.useState(Fp);return p.useEffect(()=>($p.push(e),()=>{const n=$p.indexOf(e);n>-1&&$p.splice(n,1)}),[t]),{...t,toast:nee,dismiss:n=>Up({type:"DISMISS_TOAST",toastId:n})}}const UV=p.createContext(),wy=()=>p.useContext(UV),ree=({children:t})=>{const[e,n]=p.useState([]),{toast:r}=tn();p.useEffect(()=>{const h=localStorage.getItem("cartItems");n(h?JSON.parse(h):[])},[]);const s=h=>{localStorage.setItem("cartItems",JSON.stringify(h)),n(h),window.dispatchEvent(new CustomEvent("cartUpdated"))},i=p.useCallback(h=>{n(m=>{const g=m.find(y=>y.id===h.id);let v;if(g)if(g.quantity<h.stock)v=m.map(y=>y.id===h.id?{...y,quantity:y.quantity+1}:y);else return r({title:"  ",description:`      "${h.name}".      ${h.stock}.`,variant:"destructive"}),m;else if(h.stock>0)v=[...m,{...h,quantity:1}];else return r({title:" ",description:`  "${h.name}"   .`,variant:"destructive"}),m;return s(v),r({title:"   !",description:`${h.name}       .`,className:"bg-green-500 text-white"}),v})},[r]),o=p.useCallback((h,m)=>{n(g=>{const v=g.map(y=>y.id===h?m<1?y:m>y.stock?(r({title:"  ",description:`   ${y.name}    (${y.stock}).`,variant:"destructive"}),y):{...y,quantity:m}:y);return s(v),v})},[r]),a=p.useCallback(h=>{n(m=>{const g=m.filter(v=>v.id!==h);return s(g),r({title:"    ",description:"       .",className:"bg-red-500 text-white"}),g})},[r]),l=p.useCallback(()=>{s([])},[]),c=e.reduce((h,m)=>h+(m.price||0)*(m.quantity||0),0),d=e.reduce((h,m)=>h+(m.quantity||0),0);return u.jsx(UV.Provider,{value:{cartItems:e,addItemToCart:i,updateItemQuantity:o,removeItemFromCart:a,clearCart:l,cartTotal:c,cartCount:d},children:t})};function BV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=BV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function zV(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=BV(t))&&(r&&(r+=" "),r+=e);return r}function see(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=qV(e))&&(r&&(r+=" "),r+=n);return r}function qV(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=qV(t[r]))&&(n&&(n+=" "),n+=e);return n}var s1="-";function iee(t){var e=aee(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,s=r===void 0?{}:r;function i(a){var l=a.split(s1);return l[0]===""&&l.length!==1&&l.shift(),WV(l,e)||oee(a)}function o(a,l){var c=n[a]||[];return l&&s[a]?[].concat(c,s[a]):c}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function WV(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),s=r?WV(t.slice(1),r):void 0;if(s)return s;if(e.validators.length!==0){var i=t.join(s1);return(o=e.validators.find(function(a){var l=a.validator;return l(i)}))==null?void 0:o.classGroupId}}var TA=/^\[(.+)\]$/;function oee(t){if(TA.test(t)){var e=TA.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function aee(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},s=cee(Object.entries(t.classGroups),n);return s.forEach(function(i){var o=i[0],a=i[1];kw(a,r,o,e)}),r}function kw(t,e,n,r){t.forEach(function(s){if(typeof s=="string"){var i=s===""?e:SA(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(lee(s)){kw(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(function(o){var a=o[0],l=o[1];kw(l,SA(e,a),n,r)})})}function SA(t,e){var n=t;return e.split(s1).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function lee(t){return t.isThemeGetter}function cee(t,e){return e?t.map(function(n){var r=n[0],s=n[1],i=s.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],c=a[1];return[e+l,c]})):o});return[r,i]}):t}function uee(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function s(i,o){n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(o){var a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set:function(o,a){n.has(o)?n.set(o,a):s(o,a)}}}var GV="!";function dee(t){var e=t.separator||":",n=e.length===1,r=e[0],s=e.length;return function(o){for(var a=[],l=0,c=0,d,h=0;h<o.length;h++){var m=o[h];if(l===0){if(m===r&&(n||o.slice(h,h+s)===e)){a.push(o.slice(c,h)),c=h+s;continue}if(m==="/"){d=h;continue}}m==="["?l++:m==="]"&&l--}var g=a.length===0?o:o.substring(c),v=g.startsWith(GV),y=v?g.substring(1):g,w=d&&d>c?d-c:void 0;return{modifiers:a,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:w}}}function hee(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var s=r[0]==="[";s?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function fee(t){return{cache:uee(t.cacheSize),splitModifiers:dee(t),...iee(t)}}var pee=/\s+/;function mee(t,e){var n=e.splitModifiers,r=e.getClassGroupId,s=e.getConflictingClassGroupIds,i=new Set;return t.trim().split(pee).map(function(o){var a=n(o),l=a.modifiers,c=a.hasImportantModifier,d=a.baseClassName,h=a.maybePostfixModifierPosition,m=r(h?d.substring(0,h):d),g=!!h;if(!m){if(!h)return{isTailwindClass:!1,originalClassName:o};if(m=r(d),!m)return{isTailwindClass:!1,originalClassName:o};g=!1}var v=hee(l).join(":"),y=c?v+GV:v;return{isTailwindClass:!0,modifierId:y,classGroupId:m,originalClassName:o,hasPostfixModifier:g}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,c=o.hasPostfixModifier,d=a+l;return i.has(d)?!1:(i.add(d),s(l,c).forEach(function(h){return i.add(a+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function gee(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,s,i,o=a;function a(c){var d=e[0],h=e.slice(1),m=h.reduce(function(g,v){return v(g)},d());return r=fee(m),s=r.cache.get,i=r.cache.set,o=l,l(c)}function l(c){var d=s(c);if(d)return d;var h=mee(c,r);return i(c,h),h}return function(){return o(see.apply(null,arguments))}}function et(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var HV=/^\[(?:([a-z-]+):)?(.+)\]$/i,yee=/^\d+\/\d+$/,vee=new Set(["px","full","screen"]),xee=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wee=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_ee=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function wr(t){return Uo(t)||vee.has(t)||yee.test(t)||Dw(t)}function Dw(t){return Ra(t,"length",Cee)}function bee(t){return Ra(t,"size",KV)}function Eee(t){return Ra(t,"position",KV)}function Tee(t){return Ra(t,"url",Pee)}function Qf(t){return Ra(t,"number",Uo)}function Uo(t){return!Number.isNaN(Number(t))}function See(t){return t.endsWith("%")&&Uo(t.slice(0,-1))}function bu(t){return IA(t)||Ra(t,"number",IA)}function Ne(t){return HV.test(t)}function Eu(){return!0}function oi(t){return xee.test(t)}function Iee(t){return Ra(t,"",Aee)}function Ra(t,e,n){var r=HV.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function Cee(t){return wee.test(t)}function KV(){return!1}function Pee(t){return t.startsWith("url(")}function IA(t){return Number.isInteger(Number(t))}function Aee(t){return _ee.test(t)}function Ree(){var t=et("colors"),e=et("spacing"),n=et("blur"),r=et("brightness"),s=et("borderColor"),i=et("borderRadius"),o=et("borderSpacing"),a=et("borderWidth"),l=et("contrast"),c=et("grayscale"),d=et("hueRotate"),h=et("invert"),m=et("gap"),g=et("gradientColorStops"),v=et("gradientColorStopPositions"),y=et("inset"),w=et("margin"),_=et("opacity"),x=et("padding"),b=et("saturate"),S=et("scale"),A=et("sepia"),D=et("skew"),C=et("space"),I=et("translate"),P=function(){return["auto","contain","none"]},R=function(){return["auto","hidden","clip","visible","scroll"]},j=function(){return["auto",Ne,e]},O=function(){return[Ne,e]},k=function(){return["",wr]},W=function(){return["auto",Uo,Ne]},z=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},G=function(){return["solid","dashed","dotted","double","none"]},H=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},M=function(){return["start","end","center","between","around","evenly","stretch"]},F=function(){return["","0",Ne]},V=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},q=function(){return[Uo,Qf]},X=function(){return[Uo,Ne]};return{cacheSize:500,theme:{colors:[Eu],spacing:[wr],blur:["none","",oi,Ne],brightness:q(),borderColor:[t],borderRadius:["none","","full",oi,Ne],borderSpacing:O(),borderWidth:k(),contrast:q(),grayscale:F(),hueRotate:X(),invert:F(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[See,Dw],inset:j(),margin:j(),opacity:q(),padding:O(),saturate:q(),scale:q(),sepia:F(),skew:X(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Ne]}],container:["container"],columns:[{columns:[oi]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(z(),[Ne])}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",bu]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ne]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",bu]}],"grid-cols":[{"grid-cols":[Eu]}],"col-start-end":[{col:["auto",{span:["full",bu]},Ne]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Eu]}],"row-start-end":[{row:["auto",{span:[bu]},Ne]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ne]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ne]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(M())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(M(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(M(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ne,e]}],"min-w":[{"min-w":["min","max","fit",Ne,wr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[oi]},oi,Ne]}],h:[{h:[Ne,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ne,wr]}],"max-h":[{"max-h":[Ne,e,"min","max","fit"]}],"font-size":[{text:["base",oi,Dw]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Qf]}],"font-family":[{font:[Eu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ne]}],"line-clamp":[{"line-clamp":["none",Uo,Qf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ne,wr]}],"list-image":[{"list-image":["none",Ne]}],"list-style-type":[{list:["none","disc","decimal",Ne]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(G(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",wr]}],"underline-offset":[{"underline-offset":["auto",Ne,wr]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(z(),[Eee])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",bee]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Tee]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[].concat(G(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:G()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(G())}],"outline-offset":[{"outline-offset":[Ne,wr]}],"outline-w":[{outline:[wr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[wr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",oi,Iee]}],"shadow-color":[{shadow:[Eu]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":H()}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",oi,Ne]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ne]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",Ne]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ne]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[bu,Ne]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ne]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ne]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ne]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[wr,Qf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Nee=gee(Ree);function ae(...t){return Nee(zV(t))}function CA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function _y(...t){return e=>{let n=!1;const r=t.map(s=>{const i=CA(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():CA(t[s],null)}}}}function Ae(...t){return p.useCallback(_y(...t),t)}function xc(t){const e=Dee(t),n=p.forwardRef((r,s)=>{const{children:i,...o}=r,a=p.Children.toArray(i),l=a.find(Oee);if(l){const c=l.props.children,d=a.map(h=>h===l?p.Children.count(c)>1?p.Children.only(null):p.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:s,children:p.isValidElement(c)?p.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var kee=xc("Slot");function Dee(t){const e=p.forwardRef((n,r)=>{const{children:s,...i}=n,o=p.isValidElement(s)?Vee(s):void 0,a=Ae(o,r);if(p.isValidElement(s)){const l=Mee(i,s.props);return s.type!==p.Fragment&&(l.ref=a),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var QV=Symbol("radix.slottable");function jee(t){const e=({children:n})=>u.jsx(u.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=QV,e}function Oee(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===QV}function Mee(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function Vee(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const PA=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,AA=zV,by=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return AA(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const m=PA(d)||PA(h);return s[c][m]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,m]=d;return m===void 0||(c[h]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:m,...g}=d;return Object.entries(g).every(v=>{let[y,w]=v;return Array.isArray(w)?w.includes({...i,...a}[y]):{...i,...a}[y]===w})?[...c,h,m]:c},[]);return AA(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},i1=by("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),de=re.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?kee:"button";return u.jsx(o,{className:ae(i1({variant:e,size:n,className:t})),ref:i,...s})});de.displayName="Button";const Lee=()=>{const{currentUser:t,isAdmin:e,signOut:n}=Ks(),r=$n(),{toast:s}=tn(),[i,o]=p.useState(0);p.useEffect(()=>{const l=()=>{const c=JSON.parse(localStorage.getItem("cartItems"))||[];o(c.reduce((d,h)=>d+h.quantity,0))};return l(),window.addEventListener("cartUpdated",l),()=>window.removeEventListener("cartUpdated",l)},[]);const a=async()=>{try{await n(),s({title:"   !",description:"    .",variant:"default"}),r("/")}catch(l){s({title:"   ",description:l.message,variant:"destructive"})}};return u.jsx(oe.nav,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,ease:"easeOut"},className:"bg-gradient-to-r from-water-blue to-water-green/80 shadow-lg sticky top-0 z-50 py-3 px-4 md:px-8",children:u.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[u.jsxs(Me,{to:"/",className:"flex items-center space-x-2 text-white hover:opacity-90 transition-opacity","aria-label":" ",children:[u.jsx(gc,{size:36,className:"text-white"}),u.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:" "})]}),u.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 md:space-x-4",children:[u.jsx(Me,{to:"/products",children:u.jsx(de,{"aria-label":"",variant:"ghost",className:"text-white hover:bg-white/20 px-2 sm:px-3",children:""})}),u.jsx(Me,{to:"/cart",children:u.jsxs(de,{"aria-label":"",variant:"ghost",className:"text-white hover:bg-white/20 relative px-2 sm:px-3",children:[u.jsx(yc,{size:20}),u.jsx("span",{className:"ml-1 hidden md:inline",children:""}),i>0&&u.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] rounded-full min-h-4 min-w-4 px-[4px] flex items-center justify-center",children:i>99?"99+":i})]})}),t?u.jsxs(u.Fragment,{children:[e&&u.jsx(Me,{to:"/AdminDashboard",children:u.jsxs(de,{"aria-label":" ",variant:"ghost",className:"text-white hover:bg-white/20 px-2 sm:px-3",children:[u.jsx(Lh,{size:20}),u.jsx("span",{className:"ml-1 hidden md:inline",children:""})]})}),u.jsx(Me,{to:"/profile",children:u.jsxs(de,{"aria-label":" ",variant:"ghost",className:"text-white hover:bg-white/20 px-2 sm:px-3",children:[u.jsx(xy,{size:20}),u.jsx("span",{className:"ml-1 hidden md:inline",children:""})]})}),u.jsxs(de,{"aria-label":" ",variant:"ghost",onClick:a,className:"text-white hover:bg-white/20 px-2 sm:px-3",children:[u.jsx(RV,{size:20}),u.jsx("span",{className:"ml-1 hidden md:inline",children:""})]})]}):u.jsx(Me,{to:"/login",children:u.jsxs(de,{"aria-label":" ",variant:"outline",className:"text-white border-white hover:bg-white hover:text-primary px-2 sm:px-3",children:[u.jsx(AV,{size:20}),u.jsx("span",{className:"ml-1",children:""})]})})]})]})})},$ee=()=>{const t=new Date().getFullYear(),e={facebook:"https://www.facebook.com/share/1AMT8hGZMM/",twitter:"https://twitter.com/your_username",instagram:"https://instagram.com/your_username",linkedin:"https://linkedin.com/company/your_company"};return u.jsxs(oe.footer,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},className:"bg-gradient-to-r from-water-blue-dark to-water-blue text-primary-foreground py-12 px-4",children:[u.jsxs("div",{className:"container mx-auto grid grid-cols-1 md:grid-cols-4 gap-8 text-center md:text-right",children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsxs("div",{className:"flex items-center justify-center md:justify-start mb-4",children:[u.jsx(gc,{size:32,className:"mr-2"}),u.jsx("span",{className:"text-2xl font-bold",children:" "})]}),u.jsx("p",{className:"text-sm text-blue-100 max-w-md",children:"            ."})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xl font-semibold mb-4",children:" "}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx(Me,{to:"/",className:"hover:text-water-blue-light transition-colors",children:""})}),u.jsx("li",{children:u.jsx(Me,{to:"/products",className:"hover:text-water-blue-light transition-colors",children:""})}),u.jsx("li",{children:u.jsx(Me,{to:"/about",className:"hover:text-water-blue-light transition-colors",children:" "})}),u.jsx("li",{children:u.jsx(Me,{to:"/contact",className:"hover:text-water-blue-light transition-colors",children:" "})}),u.jsx("li",{children:u.jsx(Me,{to:"/terms-conditions",className:"hover:text-water-blue-light transition-colors",children:" "})})]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xl font-semibold mb-4",children:""}),u.jsxs("div",{className:"flex justify-center md:justify-start space-x-4 space-x-reverse mb-4",children:[u.jsx("a",{href:e.facebook,target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",className:"hover:text-water-blue-light transition-colors",children:u.jsx(PV,{size:24})}),u.jsx("a",{href:e.twitter,target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",className:"hover:text-water-blue-light transition-colors",children:u.jsx(VV,{size:24})}),u.jsx("a",{href:e.instagram,target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",className:"hover:text-water-blue-light transition-colors",children:u.jsx(kZ,{size:24})}),u.jsx("a",{href:e.linkedin,target:"_blank",rel:"noopener noreferrer","aria-label":"LinkedIn",className:"hover:text-water-blue-light transition-colors",children:u.jsx(OZ,{size:24})})]})]})]}),u.jsx("div",{className:"mt-8 pt-8 border-t border-water-blue-light/30 text-center text-sm text-blue-100",children:u.jsxs("p",{children:[" ",t,"   .   ."]})})]})};function ce(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Fee(t,e){const n=p.createContext(e),r=i=>{const{children:o,...a}=i,l=p.useMemo(()=>a,Object.values(a));return u.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=p.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function gr(t,e=[]){let n=[];function r(i,o){const a=p.createContext(o),l=n.length;n=[...n,o];const c=h=>{var _;const{scope:m,children:g,...v}=h,y=((_=m==null?void 0:m[t])==null?void 0:_[l])||a,w=p.useMemo(()=>v,Object.values(v));return u.jsx(y.Provider,{value:w,children:g})};c.displayName=i+"Provider";function d(h,m){var y;const g=((y=m==null?void 0:m[t])==null?void 0:y[l])||a,v=p.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,Uee(s,...e)]}function Uee(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ey(t){const e=t+"CollectionProvider",[n,r]=gr(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:w,children:_}=y,x=re.useRef(null),b=re.useRef(new Map).current;return u.jsx(s,{scope:w,itemMap:b,collectionRef:x,children:_})};o.displayName=e;const a=t+"CollectionSlot",l=xc(a),c=re.forwardRef((y,w)=>{const{scope:_,children:x}=y,b=i(a,_),S=Ae(w,b.collectionRef);return u.jsx(l,{ref:S,children:x})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",m=xc(d),g=re.forwardRef((y,w)=>{const{scope:_,children:x,...b}=y,S=re.useRef(null),A=Ae(w,S),D=i(d,_);return re.useEffect(()=>(D.itemMap.set(S,{ref:S,...b}),()=>void D.itemMap.delete(S))),u.jsx(m,{[h]:"",ref:A,children:x})});g.displayName=d;function v(y){const w=i(t+"CollectionConsumer",y);return re.useCallback(()=>{const x=w.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((D,C)=>b.indexOf(D.ref.current)-b.indexOf(C.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},v,r]}var Bee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Oe=Bee.reduce((t,e)=>{const n=xc(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function o1(t,e){t&&Nr.flushSync(()=>t.dispatchEvent(e))}function qt(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function YV(t,e=globalThis==null?void 0:globalThis.document){const n=qt(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var zee="DismissableLayer",jw="dismissableLayer.update",qee="dismissableLayer.pointerDownOutside",Wee="dismissableLayer.focusOutside",RA,XV=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ty=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=p.useContext(XV),[d,h]=p.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=p.useState({}),v=Ae(e,C=>h(C)),y=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=y.indexOf(w),x=d?y.indexOf(d):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=x>=_,A=Hee(C=>{const I=C.target,P=[...c.branches].some(R=>R.contains(I));!S||P||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},m),D=Kee(C=>{const I=C.target;[...c.branches].some(R=>R.contains(I))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},m);return YV(C=>{x===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},m),p.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(RA=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),NA(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=RA)}},[d,m,n,c]),p.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),NA())},[d,c]),p.useEffect(()=>{const C=()=>g({});return document.addEventListener(jw,C),()=>document.removeEventListener(jw,C)},[]),u.jsx(Oe.div,{...l,ref:v,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:ce(t.onFocusCapture,D.onFocusCapture),onBlurCapture:ce(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:ce(t.onPointerDownCapture,A.onPointerDownCapture)})});Ty.displayName=zee;var Gee="DismissableLayerBranch",JV=p.forwardRef((t,e)=>{const n=p.useContext(XV),r=p.useRef(null),s=Ae(e,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),u.jsx(Oe.div,{...t,ref:s})});JV.displayName=Gee;function Hee(t,e=globalThis==null?void 0:globalThis.document){const n=qt(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){ZV(qee,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Kee(t,e=globalThis==null?void 0:globalThis.document){const n=qt(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&ZV(Wee,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function NA(){const t=new CustomEvent(jw);document.dispatchEvent(t)}function ZV(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?o1(s,i):s.dispatchEvent(i)}var Qee=Ty,Yee=JV,pr=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},Xee="Portal",Sy=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=p.useState(!1);pr(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Cg.createPortal(u.jsx(Oe.div,{...r,ref:e}),o):null});Sy.displayName=Xee;function Jee(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var yr=t=>{const{present:e,children:n}=t,r=Zee(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=Ae(r.ref,ete(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};yr.displayName="Presence";function Zee(t){const[e,n]=p.useState(),r=p.useRef(null),s=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Jee(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=Yf(r.current);i.current=a==="mounted"?c:"none"},[a]),pr(()=>{const c=r.current,d=s.current;if(d!==t){const m=i.current,g=Yf(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),pr(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=g=>{const y=Yf(r.current).includes(g.animationName);if(g.target===e&&y&&(l("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},m=g=>{g.target===e&&(i.current=Yf(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Yf(t){return(t==null?void 0:t.animationName)||"none"}function ete(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var tte=rh[" useInsertionEffect ".trim().toString()]||pr;function Na({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=nte({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const d=p.useRef(t!==void 0);p.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=p.useCallback(d=>{var h;if(a){const m=rte(d)?d(t):d;m!==t&&((h=o.current)==null||h.call(o,m))}else i(d)},[a,t,i,o]);return[l,c]}function nte({defaultProp:t,onChange:e}){const[n,r]=p.useState(t),s=p.useRef(n),i=p.useRef(e);return tte(()=>{i.current=e},[e]),p.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function rte(t){return typeof t=="function"}var ste=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ite="VisuallyHidden",a1=p.forwardRef((t,e)=>u.jsx(Oe.span,{...t,ref:e,style:{...ste,...t.style}}));a1.displayName=ite;var l1="ToastProvider",[c1,ote,ate]=Ey("Toast"),[eL,zhe]=gr("Toast",[ate]),[lte,Iy]=eL(l1),tL=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=p.useState(null),[c,d]=p.useState(0),h=p.useRef(!1),m=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${l1}\`. Expected non-empty \`string\`.`),u.jsx(c1.Provider,{scope:e,children:u.jsx(lte,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:p.useCallback(()=>d(g=>g+1),[]),onToastRemove:p.useCallback(()=>d(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};tL.displayName=l1;var nL="ToastViewport",cte=["F8"],Ow="toast.viewportPause",Mw="toast.viewportResume",rL=p.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=cte,label:s="Notifications ({hotkey})",...i}=t,o=Iy(nL,n),a=ote(n),l=p.useRef(null),c=p.useRef(null),d=p.useRef(null),h=p.useRef(null),m=Ae(e,h,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;p.useEffect(()=>{const w=_=>{var b;r.length!==0&&r.every(S=>_[S]||_.code===S)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),p.useEffect(()=>{const w=l.current,_=h.current;if(v&&w&&_){const x=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(Ow);_.dispatchEvent(D),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(Mw);_.dispatchEvent(D),o.isClosePausedRef.current=!1}},S=D=>{!w.contains(D.relatedTarget)&&b()},A=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",x),w.addEventListener("focusout",S),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",A),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",S),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",A),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[v,o.isClosePausedRef]);const y=p.useCallback(({tabbingDirection:w})=>{const x=a().map(b=>{const S=b.ref.current,A=[S,...bte(S)];return w==="forwards"?A:A.reverse()});return(w==="forwards"?x.reverse():x).flat()},[a]);return p.useEffect(()=>{const w=h.current;if(w){const _=x=>{var A,D,C;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const I=document.activeElement,P=x.shiftKey;if(x.target===w&&P){(A=c.current)==null||A.focus();return}const O=y({tabbingDirection:P?"backwards":"forwards"}),k=O.findIndex(W=>W===I);x0(O.slice(k+1))?x.preventDefault():P?(D=c.current)==null||D.focus():(C=d.current)==null||C.focus()}};return w.addEventListener("keydown",_),()=>w.removeEventListener("keydown",_)}},[a,y]),u.jsxs(Yee,{ref:l,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&u.jsx(Vw,{ref:c,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"forwards"});x0(w)}}),u.jsx(c1.Slot,{scope:n,children:u.jsx(Oe.ol,{tabIndex:-1,...i,ref:m})}),v&&u.jsx(Vw,{ref:d,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"backwards"});x0(w)}})]})});rL.displayName=nL;var sL="ToastFocusProxy",Vw=p.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Iy(sL,n);return u.jsx(a1,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});Vw.displayName=sL;var $h="Toast",ute="toast.swipeStart",dte="toast.swipeMove",hte="toast.swipeCancel",fte="toast.swipeEnd",iL=p.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,l]=Na({prop:r,defaultProp:s??!0,onChange:i,caller:$h});return u.jsx(yr,{present:n||a,children:u.jsx(gte,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:qt(t.onPause),onResume:qt(t.onResume),onSwipeStart:ce(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ce(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ce(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ce(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});iL.displayName=$h;var[pte,mte]=eL($h,{onClose(){}}),gte=p.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:g,...v}=t,y=Iy($h,n),[w,_]=p.useState(null),x=Ae(e,W=>_(W)),b=p.useRef(null),S=p.useRef(null),A=s||y.duration,D=p.useRef(0),C=p.useRef(A),I=p.useRef(0),{onToastAdd:P,onToastRemove:R}=y,j=qt(()=>{var z;(w==null?void 0:w.contains(document.activeElement))&&((z=y.viewport)==null||z.focus()),o()}),O=p.useCallback(W=>{!W||W===1/0||(window.clearTimeout(I.current),D.current=new Date().getTime(),I.current=window.setTimeout(j,W))},[j]);p.useEffect(()=>{const W=y.viewport;if(W){const z=()=>{O(C.current),c==null||c()},G=()=>{const H=new Date().getTime()-D.current;C.current=C.current-H,window.clearTimeout(I.current),l==null||l()};return W.addEventListener(Ow,G),W.addEventListener(Mw,z),()=>{W.removeEventListener(Ow,G),W.removeEventListener(Mw,z)}}},[y.viewport,A,l,c,O]),p.useEffect(()=>{i&&!y.isClosePausedRef.current&&O(A)},[i,A,y.isClosePausedRef,O]),p.useEffect(()=>(P(),()=>R()),[P,R]);const k=p.useMemo(()=>w?hL(w):null,[w]);return y.viewport?u.jsxs(u.Fragment,{children:[k&&u.jsx(yte,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),u.jsx(pte,{scope:n,onClose:j,children:Nr.createPortal(u.jsx(c1.ItemSlot,{scope:n,children:u.jsx(Qee,{asChild:!0,onEscapeKeyDown:ce(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||j(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:u.jsx(Oe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...v,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ce(t.onKeyDown,W=>{W.key==="Escape"&&(a==null||a(W.nativeEvent),W.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:ce(t.onPointerDown,W=>{W.button===0&&(b.current={x:W.clientX,y:W.clientY})}),onPointerMove:ce(t.onPointerMove,W=>{if(!b.current)return;const z=W.clientX-b.current.x,G=W.clientY-b.current.y,H=!!S.current,M=["left","right"].includes(y.swipeDirection),F=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,V=M?F(0,z):0,q=M?0:F(0,G),X=W.pointerType==="touch"?10:2,K={x:V,y:q},fe={originalEvent:W,delta:K};H?(S.current=K,Xf(dte,h,fe,{discrete:!1})):kA(K,y.swipeDirection,X)?(S.current=K,Xf(ute,d,fe,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(z)>X||Math.abs(G)>X)&&(b.current=null)}),onPointerUp:ce(t.onPointerUp,W=>{const z=S.current,G=W.target;if(G.hasPointerCapture(W.pointerId)&&G.releasePointerCapture(W.pointerId),S.current=null,b.current=null,z){const H=W.currentTarget,M={originalEvent:W,delta:z};kA(z,y.swipeDirection,y.swipeThreshold)?Xf(fte,g,M,{discrete:!0}):Xf(hte,m,M,{discrete:!0}),H.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),yte=t=>{const{__scopeToast:e,children:n,...r}=t,s=Iy($h,e),[i,o]=p.useState(!1),[a,l]=p.useState(!1);return wte(()=>o(!0)),p.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:u.jsx(Sy,{asChild:!0,children:u.jsx(a1,{...r,children:i&&u.jsxs(u.Fragment,{children:[s.label," ",n]})})})},vte="ToastTitle",oL=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return u.jsx(Oe.div,{...r,ref:e})});oL.displayName=vte;var xte="ToastDescription",aL=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return u.jsx(Oe.div,{...r,ref:e})});aL.displayName=xte;var lL="ToastAction",cL=p.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?u.jsx(dL,{altText:n,asChild:!0,children:u.jsx(u1,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${lL}\`. Expected non-empty \`string\`.`),null)});cL.displayName=lL;var uL="ToastClose",u1=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=mte(uL,n);return u.jsx(dL,{asChild:!0,children:u.jsx(Oe.button,{type:"button",...r,ref:e,onClick:ce(t.onClick,s.onClose)})})});u1.displayName=uL;var dL=p.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return u.jsx(Oe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function hL(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),_te(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...hL(r))}}),e}function Xf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?o1(s,i):s.dispatchEvent(i)}var kA=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function wte(t=()=>{}){const e=qt(t);pr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function _te(t){return t.nodeType===t.ELEMENT_NODE}function bte(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function x0(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Ete=tL,fL=rL,pL=iL,mL=oL,gL=aL,yL=cL,vL=u1;const Tte=Ete,xL=re.forwardRef(({className:t,...e},n)=>u.jsx(fL,{ref:n,className:ae("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));xL.displayName=fL.displayName;const Ste=by("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),wL=re.forwardRef(({className:t,variant:e,...n},r)=>u.jsx(pL,{ref:r,className:ae(Ste({variant:e}),t),...n}));wL.displayName=pL.displayName;const Ite=re.forwardRef(({className:t,...e},n)=>u.jsx(yL,{ref:n,className:ae("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Ite.displayName=yL.displayName;const _L=re.forwardRef(({className:t,...e},n)=>u.jsx(vL,{ref:n,className:ae("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:u.jsx(LV,{className:"h-4 w-4"})}));_L.displayName=vL.displayName;const bL=re.forwardRef(({className:t,...e},n)=>u.jsx(mL,{ref:n,className:ae("text-sm font-semibold",t),...e}));bL.displayName=mL.displayName;const EL=re.forwardRef(({className:t,...e},n)=>u.jsx(gL,{ref:n,className:ae("text-sm opacity-90",t),...e}));EL.displayName=gL.displayName;function TL(){const{toasts:t}=tn();return u.jsxs(Tte,{children:[t.map(({id:e,title:n,description:r,action:s,...i})=>u.jsxs(wL,{...i,children:[u.jsxs("div",{className:"grid gap-1",children:[n&&u.jsx(bL,{children:n}),r&&u.jsx(EL,{children:r})]}),s,u.jsx(_L,{})]},e)),u.jsx(xL,{})]})}const Cte=()=>u.jsxs("div",{className:"flex flex-col min-h-screen bg-background overflow-x-hidden",children:[u.jsx(Lee,{}),u.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:u.jsx(Ng,{})}),u.jsx($ee,{}),u.jsx(TL,{})]}),DA=({adminOnly:t=!1})=>{const{currentUser:e,isAdmin:n,loading:r}=Ks();return r?u.jsx("div",{className:"flex items-center justify-center h-screen",children:u.jsx(kt,{className:"h-12 w-12 animate-spin text-primary"})}):e?t&&!n?u.jsx(_I,{to:"/",replace:!0}):u.jsx(Ng,{}):u.jsx(_I,{to:"/login",replace:!0})};let Pte={data:""},Ate=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Pte,Rte=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Nte=/\/\*[^]*?\*\/|  +/g,jA=/\n+/g,bi=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?bi(o,i):i+"{"+bi(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=bi(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=bi.p?bi.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},ns={},SL=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+SL(t[n]);return e}return t},kte=(t,e,n,r,s)=>{let i=SL(t),o=ns[i]||(ns[i]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(i));if(!ns[o]){let l=i!==t?t:(c=>{let d,h,m=[{}];for(;d=Rte.exec(c.replace(Nte,""));)d[4]?m.shift():d[3]?(h=d[3].replace(jA," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][d[1]]=d[2].replace(jA," ").trim();return m[0]})(t);ns[o]=bi(s?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&ns.g?ns.g:null;return n&&(ns.g=ns[o]),((l,c,d,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(ns[o],e,r,a),o},Dte=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":bi(a,""):a===!1?"":a}return r+s+(o??"")},"");function Cy(t){let e=this||{},n=t.call?t(e.p):t;return kte(n.unshift?n.raw?Dte(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,Ate(e.target),e.g,e.o,e.k)}let IL,Lw,$w;Cy.bind({g:1});let Os=Cy.bind({k:1});function jte(t,e,n,r){bi.p=e,IL=t,Lw=n,$w=r}function fo(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;n.p=Object.assign({theme:Lw&&Lw()},a),n.o=/ *go\d+/.test(l),a.className=Cy.apply(n,r)+(l?" "+l:""),e&&(a.ref=o);let c=t;return t[0]&&(c=a.as||t,delete a.as),$w&&c[0]&&$w(a),IL(c,a)}return e?e(s):s}}var Ote=t=>typeof t=="function",Xm=(t,e)=>Ote(t)?t(e):t,Mte=(()=>{let t=0;return()=>(++t).toString()})(),CL=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Vte=20,PL=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Vte)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return PL(t,{type:t.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},Bp=[],Bo={toasts:[],pausedAt:void 0},ka=t=>{Bo=PL(Bo,t),Bp.forEach(e=>{e(Bo)})},Lte={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},$te=(t={})=>{let[e,n]=p.useState(Bo),r=p.useRef(Bo);p.useEffect(()=>(r.current!==Bo&&n(Bo),Bp.push(n),()=>{let i=Bp.indexOf(n);i>-1&&Bp.splice(i,1)}),[]);let s=e.toasts.map(i=>{var o,a,l;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((a=t[i.type])==null?void 0:a.duration)||(t==null?void 0:t.duration)||Lte[i.type],style:{...t.style,...(l=t[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:s}},Fte=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Mte()}),Fh=t=>(e,n)=>{let r=Fte(e,t,n);return ka({type:2,toast:r}),r.id},Rn=(t,e)=>Fh("blank")(t,e);Rn.error=Fh("error");Rn.success=Fh("success");Rn.loading=Fh("loading");Rn.custom=Fh("custom");Rn.dismiss=t=>{ka({type:3,toastId:t})};Rn.remove=t=>ka({type:4,toastId:t});Rn.promise=(t,e,n)=>{let r=Rn.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Xm(e.success,s):void 0;return i?Rn.success(i,{id:r,...n,...n==null?void 0:n.success}):Rn.dismiss(r),s}).catch(s=>{let i=e.error?Xm(e.error,s):void 0;i?Rn.error(i,{id:r,...n,...n==null?void 0:n.error}):Rn.dismiss(r)}),t};var Ute=(t,e)=>{ka({type:1,toast:{id:t,height:e}})},Bte=()=>{ka({type:5,time:Date.now()})},rd=new Map,zte=1e3,qte=(t,e=zte)=>{if(rd.has(t))return;let n=setTimeout(()=>{rd.delete(t),ka({type:4,toastId:t})},e);rd.set(t,n)},Wte=t=>{let{toasts:e,pausedAt:n}=$te(t);p.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(i-a.createdAt);if(l<0){a.visible&&Rn.dismiss(a.id);return}return setTimeout(()=>Rn.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=p.useCallback(()=>{n&&ka({type:6,time:Date.now()})},[n]),s=p.useCallback((i,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:c}=o||{},d=e.filter(g=>(g.position||c)===(i.position||c)&&g.height),h=d.findIndex(g=>g.id===i.id),m=d.filter((g,v)=>v<h&&g.visible).length;return d.filter(g=>g.visible).slice(...a?[m+1]:[0,m]).reduce((g,v)=>g+(v.height||0)+l,0)},[e]);return p.useEffect(()=>{e.forEach(i=>{if(i.dismissed)qte(i.id,i.removeDelay);else{let o=rd.get(i.id);o&&(clearTimeout(o),rd.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:Ute,startPause:Bte,endPause:r,calculateOffset:s}}},Gte=Os`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Hte=Os`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Kte=Os`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Qte=fo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Gte} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Hte} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Kte} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Yte=Os`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Xte=fo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Yte} 1s linear infinite;
`,Jte=Os`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Zte=Os`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ene=fo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Jte} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Zte} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,tne=fo("div")`
  position: absolute;
`,nne=fo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,rne=Os`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,sne=fo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${rne} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ine=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?p.createElement(sne,null,e):e:n==="blank"?null:p.createElement(nne,null,p.createElement(Xte,{...r}),n!=="loading"&&p.createElement(tne,null,n==="error"?p.createElement(Qte,{...r}):p.createElement(ene,{...r})))},one=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ane=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,lne="0%{opacity:0;} 100%{opacity:1;}",cne="0%{opacity:1;} 100%{opacity:0;}",une=fo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,dne=fo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,hne=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=CL()?[lne,cne]:[one(n),ane(n)];return{animation:e?`${Os(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Os(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},fne=p.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?hne(t.position||e||"top-center",t.visible):{opacity:0},i=p.createElement(ine,{toast:t}),o=p.createElement(dne,{...t.ariaProps},Xm(t.message,t));return p.createElement(une,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):p.createElement(p.Fragment,null,i,o))});jte(p.createElement);var pne=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=p.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return p.createElement("div",{ref:i,className:e,style:n},s)},mne=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:CL()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},gne=Cy`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Jf=16,yne=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:a,handlers:l}=Wte(n);return p.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Jf,left:Jf,right:Jf,bottom:Jf,pointerEvents:"none",...i},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(c=>{let d=c.position||e,h=l.calculateOffset(c,{reverseOrder:t,gutter:r,defaultPosition:e}),m=mne(d,h);return p.createElement(pne,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?gne:"",style:m},c.type==="custom"?Xm(c.message,c):s?s(c):p.createElement(fne,{toast:c,position:d}))}))};const vne=()=>{const t=({isActive:e})=>`flex items-center px-4 py-3 text-lg rounded-lg transition-colors ${e?"bg-sky-500 text-white shadow-md":"text-slate-100 hover:bg-white/20"}`;return u.jsxs("div",{className:"flex min-h-screen bg-slate-200 dark:bg-gray-900",children:[u.jsxs("aside",{className:"w-64 bg-slate-800 text-white p-4 flex flex-col shadow-lg",children:[u.jsx("div",{className:"text-2xl font-bold mb-10 text-center",children:u.jsx(Me,{to:"/AdminDashboard",children:" "})}),u.jsxs("nav",{className:"flex flex-col gap-3",children:[u.jsxs(gi,{to:"/AdminDashboard",end:!0,className:t,children:[u.jsx(DZ,{className:"mr-3 rtl:ml-3"}),"  "]}),u.jsxs(gi,{to:"/AdminDashboard/orders",className:t,children:[u.jsx(Nw,{className:"mr-3 rtl:ml-3"}),"  "]}),u.jsxs(gi,{to:"/AdminDashboard/products",className:t,children:[u.jsx(Ud,{className:"mr-3 rtl:ml-3"}),"  "]}),u.jsxs(gi,{to:"/AdminDashboard/users",className:t,children:[u.jsx(vc,{className:"mr-3 rtl:ml-3"}),"  "]}),u.jsxs(gi,{to:"/AdminDashboard/settings",className:t,children:[u.jsx(r1,{className:"mr-3 rtl:ml-3"})," "]})]}),u.jsx("div",{className:"mt-auto pt-4 border-t border-slate-700",children:u.jsxs(Me,{to:"/",className:"flex items-center justify-center px-4 py-3 text-lg rounded-lg transition-colors text-slate-300 hover:bg-white/10 hover:text-white",children:[u.jsx(NZ,{className:"mr-3 rtl:ml-3"}),"  "]})})]}),u.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto",children:u.jsx(Ng,{})})]})},Tt=re.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:ae("rounded-lg border bg-card text-card-foreground shadow-sm glassmorphism-card",t),...e}));Tt.displayName="Card";const en=re.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:ae("flex flex-col space-y-1.5 p-6",t),...e}));en.displayName="CardHeader";const Wt=re.forwardRef(({className:t,...e},n)=>u.jsx("h3",{ref:n,className:ae("text-2xl font-semibold leading-none tracking-tight",t),...e}));Wt.displayName="CardTitle";const Qs=re.forwardRef(({className:t,...e},n)=>u.jsx("p",{ref:n,className:ae("text-sm text-muted-foreground",t),...e}));Qs.displayName="CardDescription";const Dt=re.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:ae("p-6 pt-0",t),...e}));Dt.displayName="CardContent";const Da=re.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:ae("flex items-center p-6 pt-0",t),...e}));Da.displayName="CardFooter";const xne=()=>{const{currentUser:t,signOut:e}=Ks(),n=$n(),{toast:r}=tn(),s=async()=>{try{await e(),r({title:"   !"}),n("/")}catch(o){r({title:"   ",description:o.message,variant:"destructive"})}},i=({isActive:o})=>`flex items-center px-4 py-3 text-sm font-medium rounded-md transition-colors ${o?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted/50 hover:text-foreground"}`;return u.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[u.jsx("aside",{className:"md:col-span-1",children:u.jsx(Tt,{children:u.jsxs(Dt,{className:"p-4",children:[u.jsxs("div",{className:"text-center mb-6 pt-4",children:[u.jsx("img",{src:(t==null?void 0:t.photoURL)||`https://ui-avatars.com/api/?name=${(t==null?void 0:t.displayName)||"User"}&background=random`,alt:"User Avatar",className:"w-24 h-24 rounded-full mx-auto mb-4 border-4 border-primary/50"}),u.jsx("h3",{className:"font-bold text-lg",children:t==null?void 0:t.displayName}),u.jsx("p",{className:"text-sm text-muted-foreground",children:t==null?void 0:t.email})]}),u.jsxs("nav",{className:"space-y-2",children:[u.jsxs(gi,{to:"/profile",end:!0,className:i,children:[u.jsx(xy,{className:"mr-3 rtl:ml-3 h-4 w-4"})," "]}),u.jsxs(gi,{to:"/profile/orders",className:i,children:[u.jsx(yc,{className:"mr-3 rtl:ml-3 h-4 w-4"}),""]}),u.jsxs(gi,{to:"/profile/change-password",className:i,children:[u.jsx(pa,{className:"mr-3 rtl:ml-3 h-4 w-4"}),"  "]}),u.jsxs("button",{onClick:s,className:`${i({isActive:!1})} w-full text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20`,children:[u.jsx(RV,{className:"mr-3 rtl:ml-3 h-4 w-4"})," "]})]})]})})}),u.jsx("main",{className:"md:col-span-3",children:u.jsx(Tt,{children:u.jsx(Dt,{className:"p-6",children:u.jsx(Ng,{})})})})]})},wne=by("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Uc({className:t,variant:e,...n}){return u.jsx("div",{className:ae(wne({variant:e}),t),...n})}const AL=({product:t})=>{const{toast:e}=tn(),{addItemToCart:n}=wy();if(!t)return null;const r=t.stock<=0,s=()=>{if(r){e({title:" ",description:`  "${t.name}"   .`,variant:"destructive"});return}n(t,1),e({title:"    ",description:`  "${t.name}"   .`,className:"bg-green-500 text-white"})},i=o=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(o||0);return u.jsx(oe.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"w-full h-full",children:u.jsxs(Tt,{className:`overflow-hidden h-full flex flex-col group bg-white dark:bg-slate-800 border dark:border-slate-700 hover:shadow-xl transition-shadow duration-300 transform hover:-translate-y-1 ${r?"opacity-70 bg-slate-50 dark:bg-slate-800/50":""}`,children:[u.jsxs(en,{className:"p-0 relative",children:[u.jsx(Me,{to:`/products/${t.id}`,className:r?"pointer-events-none cursor-not-allowed":"",children:u.jsx("div",{className:"aspect-square w-full overflow-hidden",children:u.jsx("img",{alt:t.name||" ",className:"w-full h-full object-cover transition-transform duration-500 ease-in-out group-hover:scale-110",src:t.image||"https://via.placeholder.com/400?text=No+Image"})})}),t.originalPrice&&!r&&u.jsx(Uc,{variant:"destructive",className:"absolute top-3 right-3 shadow-lg",children:""}),r&&u.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-black/60 text-white text-sm font-bold px-4 py-2 rounded-md shadow-lg flex items-center backdrop-blur-sm",children:[u.jsx(DV,{className:"mr-2 h-5 w-5"}),"  "]})]}),u.jsxs(Dt,{className:"p-4 flex-grow flex flex-col",children:[u.jsxs("div",{className:"flex-grow",children:[u.jsx("span",{className:"text-xs text-muted-foreground",children:t.category||" "}),u.jsx(Me,{to:`/products/${t.id}`,className:r?"pointer-events-none":"",children:u.jsx(Wt,{className:"text-base font-bold text-slate-800 dark:text-slate-200 hover:text-primary transition-colors mt-1 mb-2 h-12 overflow-hidden",children:t.name||"   "})}),u.jsxs("div",{className:"flex items-center text-sm text-slate-500 dark:text-slate-400 mb-3",children:[u.jsx(jo,{className:"h-4 w-4 text-yellow-400 fill-current mr-1"}),u.jsxs("span",{children:[t.rating||0," (",t.reviews||0," )"]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-baseline space-x-2 space-x-reverse mb-2",children:[u.jsx("p",{className:"text-xl font-extrabold text-primary",children:i(t.price)}),t.originalPrice&&u.jsx("p",{className:"text-sm text-muted-foreground line-through",children:i(t.originalPrice)})]}),u.jsxs("p",{className:"text-xs text-muted-foreground",children:[": ",t.stock||0]})]})]}),u.jsx(Da,{className:"p-3 border-t dark:border-slate-700/50 mt-auto",children:u.jsxs(de,{onClick:s,className:"w-full",disabled:r,children:[u.jsx(yc,{className:"mr-2 h-4 w-4"}),r?" ":"  "]})})]})})},_ne="/assets/hero-video-0d8b3f94.mp4",Zf=({icon:t,title:e,description:n,delay:r})=>u.jsx(oe.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:r},children:u.jsxs(Tt,{className:"text-center h-full glassmorphism-card hover:shadow-2xl transition-shadow duration-300",children:[u.jsxs(en,{children:[u.jsx("div",{className:"mx-auto bg-gradient-to-br from-primary to-secondary text-white rounded-full p-4 w-fit mb-4",children:t}),u.jsx(Wt,{className:"text-2xl text-primary",children:e})]}),u.jsx(Dt,{children:u.jsx(Qs,{className:"text-foreground/80 text-base",children:n})})]})}),bne=()=>{const[t,e]=p.useState([]),[n,r]=p.useState(!0);return p.useEffect(()=>{(async()=>{try{const i=Qn(Ue,"products"),o=Ds(i,js("createdAt","desc"),RX(3)),l=(await py(o)).docs.map(c=>({id:c.id,...c.data()}));e(l)}catch(i){console.error("Error fetching featured products: ",i)}finally{r(!1)}})()},[]),u.jsxs("div",{className:"space-y-16",children:[u.jsxs(oe.section,{className:"relative text-center py-20 md:py-32 rounded-xl shadow-lg overflow-hidden",children:[u.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute top-0 left-0 w-full h-full object-cover z-0",children:[u.jsx("source",{src:_ne,type:"video/mp4"}),"    ."]}),u.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-black/50 z-10"}),u.jsxs("div",{className:"relative z-20 container mx-auto px-4",children:[u.jsx(oe.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"inline-block p-4 bg-white/20 rounded-full mb-6 shadow-md backdrop-blur-sm",children:u.jsx(gc,{size:64,className:"text-white"})}),u.jsx(oe.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"text-5xl md:text-6xl font-extrabold mb-6 text-white drop-shadow-lg",children:"      "}),u.jsx(oe.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"text-xl md:text-2xl text-slate-200 mb-10 max-w-3xl mx-auto drop-shadow-md",children:"               ."}),u.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},children:u.jsx(Me,{to:"/products",children:u.jsx(de,{size:"lg",className:"bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-lg px-10 py-6 rounded-full shadow-lg transform hover:scale-105 transition-transform duration-300",children:" "})})})]})]}),u.jsxs("section",{className:"container mx-auto px-4",children:[u.jsx("h2",{className:"text-4xl font-bold text-center mb-12 text-primary",children:"   "}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[u.jsx(Zf,{icon:u.jsx(gc,{size:40}),title:"  ",description:"       .",delay:.2}),u.jsx(Zf,{icon:u.jsx(Lh,{size:40}),title:" ",description:"        .",delay:.4}),u.jsx(Zf,{icon:u.jsx($V,{size:40}),title:" ",description:"      .",delay:.6}),u.jsx(Zf,{icon:u.jsx(vc,{size:40}),title:"  ",description:"      .",delay:.8})]})]}),u.jsx("section",{className:"container mx-auto px-4 py-12",children:u.jsx("div",{className:"bg-gradient-to-r from-secondary to-primary text-white p-10 rounded-xl shadow-xl text-center md:text-right",children:u.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[u.jsxs("div",{className:"mb-6 md:mb-0",children:[u.jsx("h2",{className:"text-3xl font-bold mb-3",children:"     "}),u.jsx("p",{className:"text-lg opacity-90",children:"          ."})]}),u.jsx(Me,{to:"/contact",children:u.jsx(de,{variant:"outline",size:"lg",className:"border-white text-white hover:bg-white hover:text-primary text-lg px-8 py-4 rounded-full transform hover:scale-105 transition-transform duration-300",children:"  "})})]})})}),u.jsxs("section",{className:"container mx-auto px-4 text-center",children:[u.jsx("h2",{className:"text-4xl font-bold text-center mb-8 text-primary",children:" "}),n?u.jsx("div",{className:"flex justify-center p-8",children:u.jsx(kt,{className:"h-10 w-10 animate-spin text-primary"})}):u.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:t.map(s=>u.jsx(AL,{product:s},s.id))}),u.jsx(Me,{to:"/products",className:"mt-10 inline-block",children:u.jsx(de,{size:"lg",variant:"link",className:"text-primary text-lg hover:text-secondary",children:"   "})})]})]})},Ee=re.forwardRef(({className:t,type:e,...n},r)=>u.jsx("input",{type:e,className:ae("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Ee.displayName="Input";var Ene="Label",RL=p.forwardRef((t,e)=>u.jsx(Oe.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));RL.displayName=Ene;var NL=RL;const Tne=by("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_e=re.forwardRef(({className:t,...e},n)=>u.jsx(NL,{ref:n,className:ae(Tne(),t),...e}));_e.displayName=NL.displayName;function kL(t,[e,n]){return Math.min(n,Math.max(e,t))}var Sne=p.createContext(void 0);function d1(t){const e=p.useContext(Sne);return t||e||"ltr"}function DL(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Py(t){const[e,n]=p.useState(void 0);return pr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var jL=["PageUp","PageDown"],OL=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ML={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Bc="Slider",[Fw,Ine,Cne]=Ey(Bc),[VL,qhe]=gr(Bc,[Cne]),[Pne,Ay]=VL(Bc),LL=p.forwardRef((t,e)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:v,...y}=t,w=p.useRef(new Set),_=p.useRef(0),b=o==="horizontal"?Ane:Rne,[S=[],A]=Na({prop:d,defaultProp:c,onChange:j=>{var k;(k=[...w.current][_.current])==null||k.focus(),h(j)}}),D=p.useRef(S);function C(j){const O=One(S,j);R(j,O)}function I(j){R(j,_.current)}function P(){const j=D.current[_.current];S[_.current]!==j&&m(S)}function R(j,O,{commit:k}={commit:!1}){const W=$ne(i),z=Fne(Math.round((j-r)/i)*i+r,W),G=kL(z,[r,s]);A((H=[])=>{const M=Dne(H,G,O);if(Lne(M,l*i)){_.current=M.indexOf(G);const F=String(M)!==String(H);return F&&k&&m(M),F?M:H}else return H})}return u.jsx(Pne,{scope:t.__scopeSlider,name:n,disabled:a,min:r,max:s,valueIndexToChangeRef:_,thumbs:w.current,values:S,orientation:o,form:v,children:u.jsx(Fw.Provider,{scope:t.__scopeSlider,children:u.jsx(Fw.Slot,{scope:t.__scopeSlider,children:u.jsx(b,{"aria-disabled":a,"data-disabled":a?"":void 0,...y,ref:e,onPointerDown:ce(y.onPointerDown,()=>{a||(D.current=S)}),min:r,max:s,inverted:g,onSlideStart:a?void 0:C,onSlideMove:a?void 0:I,onSlideEnd:a?void 0:P,onHomeKeyDown:()=>!a&&R(r,0,{commit:!0}),onEndKeyDown:()=>!a&&R(s,S.length-1,{commit:!0}),onStepKeyDown:({event:j,direction:O})=>{if(!a){const z=jL.includes(j.key)||j.shiftKey&&OL.includes(j.key)?10:1,G=_.current,H=S[G],M=i*z*O;R(H+M,G,{commit:!0})}}})})})})});LL.displayName=Bc;var[$L,FL]=VL(Bc,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ane=p.forwardRef((t,e)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...d}=t,[h,m]=p.useState(null),g=Ae(e,b=>m(b)),v=p.useRef(void 0),y=d1(s),w=y==="ltr",_=w&&!i||!w&&i;function x(b){const S=v.current||h.getBoundingClientRect(),A=[0,S.width],C=h1(A,_?[n,r]:[r,n]);return v.current=S,C(b-S.left)}return u.jsx($L,{scope:t.__scopeSlider,startEdge:_?"left":"right",endEdge:_?"right":"left",direction:_?1:-1,size:"width",children:u.jsx(UL,{dir:y,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const S=x(b.clientX);o==null||o(S)},onSlideMove:b=>{const S=x(b.clientX);a==null||a(S)},onSlideEnd:()=>{v.current=void 0,l==null||l()},onStepKeyDown:b=>{const A=ML[_?"from-left":"from-right"].includes(b.key);c==null||c({event:b,direction:A?-1:1})}})})}),Rne=p.forwardRef((t,e)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,d=p.useRef(null),h=Ae(e,d),m=p.useRef(void 0),g=!s;function v(y){const w=m.current||d.current.getBoundingClientRect(),_=[0,w.height],b=h1(_,g?[r,n]:[n,r]);return m.current=w,b(y-w.top)}return u.jsx($L,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:u.jsx(UL,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const w=v(y.clientY);i==null||i(w)},onSlideMove:y=>{const w=v(y.clientY);o==null||o(w)},onSlideEnd:()=>{m.current=void 0,a==null||a()},onStepKeyDown:y=>{const _=ML[g?"from-bottom":"from-top"].includes(y.key);l==null||l({event:y,direction:_?-1:1})}})})}),UL=p.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,d=Ay(Bc,n);return u.jsx(Oe.span,{...c,ref:e,onKeyDown:ce(t.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(a(h),h.preventDefault()):jL.concat(OL).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:ce(t.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():r(h)}),onPointerMove:ce(t.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:ce(t.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),BL="SliderTrack",zL=p.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=Ay(BL,n);return u.jsx(Oe.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});zL.displayName=BL;var Uw="SliderRange",qL=p.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=Ay(Uw,n),i=FL(Uw,n),o=p.useRef(null),a=Ae(e,o),l=s.values.length,c=s.values.map(m=>HL(m,s.min,s.max)),d=l>1?Math.min(...c):0,h=100-Math.max(...c);return u.jsx(Oe.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:a,style:{...t.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});qL.displayName=Uw;var Bw="SliderThumb",WL=p.forwardRef((t,e)=>{const n=Ine(t.__scopeSlider),[r,s]=p.useState(null),i=Ae(e,a=>s(a)),o=p.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return u.jsx(Nne,{...t,ref:i,index:o})}),Nne=p.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:s,...i}=t,o=Ay(Bw,n),a=FL(Bw,n),[l,c]=p.useState(null),d=Ae(e,x=>c(x)),h=l?o.form||!!l.closest("form"):!0,m=Py(l),g=o.values[r],v=g===void 0?0:HL(g,o.min,o.max),y=jne(r,o.values.length),w=m==null?void 0:m[a.size],_=w?Mne(w,v,a.direction):0;return p.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),u.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${v}% + ${_}px)`},children:[u.jsx(Fw.ItemSlot,{scope:t.__scopeSlider,children:u.jsx(Oe.span,{role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:d,style:g===void 0?{display:"none"}:t.style,onFocus:ce(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&u.jsx(GL,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},r)]})});WL.displayName=Bw;var kne="RadioBubbleInput",GL=p.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const s=p.useRef(null),i=Ae(s,r),o=DL(e);return p.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&d){const h=new Event("input",{bubbles:!0});d.call(a,e),a.dispatchEvent(h)}},[o,e]),u.jsx(Oe.input,{style:{display:"none"},...n,ref:i,defaultValue:e})});GL.displayName=kne;function Dne(t=[],e,n){const r=[...t];return r[n]=e,r.sort((s,i)=>s-i)}function HL(t,e,n){const i=100/(n-e)*(t-e);return kL(i,[0,100])}function jne(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function One(t,e){if(t.length===1)return 0;const n=t.map(s=>Math.abs(s-e)),r=Math.min(...n);return n.indexOf(r)}function Mne(t,e,n){const r=t/2,i=h1([0,50],[0,r]);return(r-i(e)*n)*n}function Vne(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Lne(t,e){if(e>0){const n=Vne(t);return Math.min(...n)>=e}return!0}function h1(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function $ne(t){return(String(t).split(".")[1]||"").length}function Fne(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var KL=LL,Une=zL,Bne=qL,zne=WL;const QL=re.forwardRef(({className:t,...e},n)=>u.jsxs(KL,{ref:n,className:ae("relative flex w-full touch-none select-none items-center",t),...e,children:[u.jsx(Une,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:u.jsx(Bne,{className:"absolute h-full bg-primary"})}),(Array.isArray(e.value)?e.value:[e.defaultValue||0]).map((r,s)=>u.jsx(zne,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"},s))]}));QL.displayName=KL.displayName;var Ry="Checkbox",[qne,Whe]=gr(Ry),[Wne,f1]=qne(Ry);function Gne(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:h}=t,[m,g]=Na({prop:n,defaultProp:s??!1,onChange:l,caller:Ry}),[v,y]=p.useState(null),[w,_]=p.useState(null),x=p.useRef(!1),b=v?!!o||!!v.closest("form"):!0,S={checked:m,disabled:i,setChecked:g,control:v,setControl:y,name:a,form:o,value:d,hasConsumerStoppedPropagationRef:x,required:c,defaultChecked:Fi(s)?!1:s,isFormControl:b,bubbleInput:w,setBubbleInput:_};return u.jsx(Wne,{scope:e,...S,children:Hne(h)?h(S):r})}var YL="CheckboxTrigger",XL=p.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:g,bubbleInput:v}=f1(YL,t),y=Ae(s,d),w=p.useRef(l);return p.useEffect(()=>{const _=i==null?void 0:i.form;if(_){const x=()=>h(w.current);return _.addEventListener("reset",x),()=>_.removeEventListener("reset",x)}},[i,h]),u.jsx(Oe.button,{type:"button",role:"checkbox","aria-checked":Fi(l)?"mixed":l,"aria-required":c,"data-state":n$(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:y,onKeyDown:ce(e,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:ce(n,_=>{h(x=>Fi(x)?!0:!x),v&&g&&(m.current=_.isPropagationStopped(),m.current||_.stopPropagation())})})});XL.displayName=YL;var p1=p.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:d,...h}=t;return u.jsx(Gne,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:m})=>u.jsxs(u.Fragment,{children:[u.jsx(XL,{...h,ref:e,__scopeCheckbox:n}),m&&u.jsx(t$,{__scopeCheckbox:n})]})})});p1.displayName=Ry;var JL="CheckboxIndicator",ZL=p.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=f1(JL,n);return u.jsx(yr,{present:r||Fi(i.checked)||i.checked===!0,children:u.jsx(Oe.span,{"data-state":n$(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});ZL.displayName=JL;var e$="CheckboxBubbleInput",t$=p.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:d,form:h,bubbleInput:m,setBubbleInput:g}=f1(e$,t),v=Ae(n,g),y=DL(i),w=Py(r);p.useEffect(()=>{const x=m;if(!x)return;const b=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(b,"checked").set,D=!s.current;if(y!==i&&A){const C=new Event("click",{bubbles:D});x.indeterminate=Fi(i),A.call(x,Fi(i)?!1:i),x.dispatchEvent(C)}},[m,y,i,s]);const _=p.useRef(Fi(i)?!1:i);return u.jsx(Oe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??_.current,required:a,disabled:l,name:c,value:d,form:h,...e,tabIndex:-1,ref:v,style:{...e.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});t$.displayName=e$;function Hne(t){return typeof t=="function"}function Fi(t){return t==="indeterminate"}function n$(t){return Fi(t)?"indeterminate":t?"checked":"unchecked"}const Jm=re.forwardRef(({className:t,...e},n)=>u.jsx(p1,{ref:n,className:ae("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:u.jsx(ZL,{className:ae("flex items-center justify-center text-current"),children:u.jsx(yy,{className:"h-4 w-4"})})}));Jm.displayName=p1.displayName;const Kne=()=>{const[t,e]=p.useState([]),[n,r]=p.useState([]),[s,i]=p.useState(""),[o,a]=p.useState([0,5e4]),[l,c]=p.useState([]),[d,h]=p.useState(!0),[m,g]=p.useState(null),v=re.useMemo(()=>{if(t.length===0)return[];const w=new Set(t.map(_=>_.category).filter(Boolean));return Array.from(w)},[t]);p.useEffect(()=>{(async()=>{h(!0),g(null);try{const _=Ds(Qn(Ue,"products"),js("name","asc")),b=(await py(_)).docs.map(S=>({id:S.id,...S.data()}));b.length===0&&g("    .     ."),e(b)}catch(_){g("    ."),console.error("Firestore fetch error:",_)}finally{h(!1)}})()},[]),p.useEffect(()=>{let w=[...t];s&&(w=w.filter(_=>_.name.toLowerCase().includes(s.toLowerCase())||_.description&&_.description.toLowerCase().includes(s.toLowerCase()))),w=w.filter(_=>_.price>=o[0]&&_.price<=o[1]),l.length>0&&(w=w.filter(_=>l.includes(_.category))),r(w)},[s,o,l,t]);const y=w=>{c(_=>_.includes(w)?_.filter(x=>x!==w):[..._,w])};return d?u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:[u.jsx(kt,{className:"h-16 w-16 animate-spin text-primary mb-4"}),u.jsx("p",{className:"text-xl text-foreground",children:"  ..."})]}):u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsxs(oe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-12 text-center",children:[u.jsx("h1",{className:"text-5xl font-extrabold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:""}),u.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"            ."})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[u.jsxs(oe.aside,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"md:col-span-1 space-y-8 p-6 bg-card/50 rounded-xl shadow-lg glassmorphism-card h-fit sticky top-24",children:[u.jsxs("div",{children:[u.jsxs(_e,{htmlFor:"search",className:"text-lg font-semibold text-primary mb-2 flex items-center",children:[u.jsx(Vh,{className:"ml-2 h-5 w-5"}),"   "]}),u.jsx(Ee,{id:"search",type:"text",placeholder:"  ...",value:s,onChange:w=>i(w.target.value),className:"bg-background/70 border-primary/30 focus:border-primary"})]}),u.jsxs("div",{children:[u.jsxs(_e,{className:"text-lg font-semibold text-primary mb-4 flex items-center",children:[u.jsx(PZ,{className:"ml-2 h-5 w-5"}),"    (.)"]}),u.jsx(QL,{min:0,max:5e4,step:100,value:o,onValueChange:a,className:"[&>span:first-child]:h-1 [&>span:first-child]:bg-primary/30 [&_[role=slider]]:bg-primary [&_[role=slider]]:w-5 [&_[role=slider]]:h-5 [&_[role=slider]]:border-2 [&_[role=slider]]:border-primary-foreground"}),u.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[u.jsx("span",{children:o[0].toLocaleString("ar-EG")}),u.jsx("span",{children:o[1].toLocaleString("ar-EG")})]})]}),v.length>0&&u.jsxs("div",{children:[u.jsxs(_e,{className:"text-lg font-semibold text-primary mb-3 flex items-center",children:[u.jsx(WZ,{className:"ml-2 h-5 w-5"})," "]}),u.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:v.map(w=>u.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[u.jsx(Jm,{id:w,checked:l.includes(w),onCheckedChange:()=>y(w),className:"border-primary data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground"}),u.jsx(_e,{htmlFor:w,className:"font-normal text-foreground hover:text-primary cursor-pointer transition-colors",children:w})]},w))})]})]}),u.jsxs("main",{className:"md:col-span-3",children:[m&&u.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-10 col-span-full bg-red-50 border border-red-200 rounded-lg p-6 flex flex-col items-center justify-center",children:[u.jsx(n1,{className:"w-12 h-12 mx-auto mb-4 text-red-500"}),u.jsx("p",{className:"text-xl text-red-700 font-semibold",children:m}),u.jsx("p",{className:"text-sm text-red-600 mt-2",children:"      ."})]}),!d&&!m&&n.length===0&&u.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-10 col-span-full flex flex-col items-center justify-center",children:[u.jsx(AZ,{className:"w-24 h-24 mx-auto mb-6 text-muted-foreground opacity-50"}),u.jsx("p",{className:"text-2xl text-muted-foreground mb-2",children:t.length>0?"     .":"    ."}),t.length>0&&u.jsx("p",{className:"text-md text-muted-foreground",children:"      ."})]}),!m&&n.length>0&&u.jsx(oe.div,{layout:!0,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:u.jsx(Ab,{children:n.map(w=>u.jsx(AL,{product:w},w.id))})})]})]})]})},OA=t=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(t||0),Qne=()=>{const{productId:t}=ob(),[e,n]=p.useState(null),[r,s]=p.useState(!0),[i,o]=p.useState(1),{addItemToCart:a}=wy(),{toast:l}=tn();p.useEffect(()=>{(async()=>{s(!0);try{const h=mn(Ue,"products",t),m=await WE(h);m.exists()?n({id:m.id,...m.data()}):(console.log("No such product!"),n(null))}catch(h){console.error("Error fetching product:",h)}finally{s(!1)}})()},[t]);const c=()=>{e&&(a({...e,quantity:i}),l({title:"    ",description:`  "${e.name}"   .`}))};return r?u.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-200px)]",children:u.jsx(kt,{className:"h-16 w-16 animate-spin text-primary"})}):e?u.jsx("div",{className:"container mx-auto px-4 py-12",children:u.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"grid md:grid-cols-2 gap-8 lg:gap-12 items-start",children:[u.jsx(oe.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},children:u.jsx(Tt,{className:"overflow-hidden shadow-lg",children:u.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-auto object-cover aspect-square"})})}),u.jsxs(oe.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"space-y-6",children:[u.jsx(Uc,{variant:"secondary",children:e.category||" "}),u.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:e.name}),u.jsx("p",{className:"text-lg text-muted-foreground",children:e.description||"    ."}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("p",{className:"text-3xl font-bold text-foreground",children:OA(e.price)}),e.oldPrice&&u.jsx("p",{className:"text-xl text-muted-foreground line-through",children:OA(e.oldPrice)})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"flex items-center text-amber-500",children:[u.jsx(jo,{className:"h-5 w-5 fill-current"}),u.jsx(jo,{className:"h-5 w-5 fill-current"}),u.jsx(jo,{className:"h-5 w-5 fill-current"}),u.jsx(jo,{className:"h-5 w-5 fill-current"}),u.jsx(jo,{className:"h-5 w-5 fill-current"})]}),u.jsx("span",{className:"text-sm text-muted-foreground",children:"()"})]}),u.jsxs("div",{className:"border-t pt-6 space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(Label,{htmlFor:"quantity",className:"text-lg",children:":"}),u.jsx(Input,{id:"quantity",type:"number",min:"1",max:e.stock,value:i,onChange:d=>o(Math.max(1,parseInt(d.target.value)||1)),className:"w-20 text-center"})]}),u.jsxs(de,{onClick:c,size:"lg",className:"w-full",disabled:e.stock<=0,children:[u.jsx(yc,{className:"ml-2 h-5 w-5"}),e.stock>0?"  ":" "]})]})]})]})}):u.jsx("div",{className:"text-center py-20",children:u.jsx("h1",{children:"      ."})})},Yne=()=>{const t=[{name:"/  ",role:"   ",image:"https://images.unsplash.com/photo-1560250097-0b93528c311a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8Y2VvfGVufDB8fDB8fHww&auto=format&fit=crop&w=300&q=60",description:"         15 ."},{name:"/  ",role:"   ",image:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8ZmVtYWxlJTIwc2NpZW50aXN0fGVufDB8fDB8fHww&auto=format&fit=crop&w=300&q=60",description:"       ."},{name:"/  ",role:"  ",image:"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8bWFuYWdlcnxlbnwwfHwwfHx8MA&auto=format&fit=crop&w=300&q=60",description:"        ."}],e=[{icon:u.jsx(gc,{className:"h-10 w-10 text-primary"}),title:"  ",description:"           ."},{icon:u.jsx(Lh,{className:"h-10 w-10 text-primary"}),title:" ",description:"          ."},{icon:u.jsx($V,{className:"h-10 w-10 text-primary"}),title:" ",description:"           ."}];return u.jsxs("div",{className:"container mx-auto px-4 py-12",children:[u.jsxs(oe.section,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7},className:"text-center mb-16",children:[u.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:"   "}),u.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"              .               ."})]}),u.jsxs(oe.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"mb-16 grid md:grid-cols-2 gap-12 items-center",children:[u.jsx("div",{children:u.jsx("img",{src:"https://images.unsplash.com/photo-1567427018141-0584cfcbf1b8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fHdhdGVyJTIwdHJlYXRtZW50JTIwcGxhbnR8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=600&q=80",alt:"       ",className:"rounded-xl shadow-2xl w-full h-auto object-cover"})}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("h2",{className:"text-4xl font-bold text-primary flex items-center",children:[u.jsx(GZ,{className:"mr-3 h-10 w-10"}),"  "]}),u.jsxs("p",{className:"text-lg text-foreground leading-relaxed",children:[u.jsx("strong",{children:":"}),"                        ."]}),u.jsxs("p",{className:"text-lg text-foreground leading-relaxed",children:[u.jsx("strong",{children:":"}),"                    ."]})]})]}),u.jsxs(oe.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.6},className:"mb-16",children:[u.jsxs("h2",{className:"text-4xl font-bold text-primary text-center mb-12 flex items-center justify-center",children:[u.jsx(vc,{className:"mr-3 h-10 w-10"}),"  "]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((n,r)=>u.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2*r+.6},children:u.jsxs(Tt,{className:"text-center glassmorphism-card h-full hover:shadow-xl transition-shadow",children:[u.jsxs(en,{className:"items-center",children:[u.jsx("img",{src:n.image,alt:n.name,className:"w-32 h-32 rounded-full object-cover mb-4 border-4 border-primary/50"}),u.jsx(Wt,{className:"text-xl text-primary",children:n.name}),u.jsx("p",{className:"text-sm text-secondary font-medium",children:n.role})]}),u.jsx(Dt,{children:u.jsx("p",{className:"text-muted-foreground text-sm",children:n.description})})]})},r))})]}),u.jsxs(oe.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.9},children:[u.jsx("h2",{className:"text-4xl font-bold text-primary text-center mb-12",children:" "}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map((n,r)=>u.jsx(oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2*r+.9},children:u.jsxs(Tt,{className:"text-center p-6 glassmorphism-card h-full hover:shadow-xl transition-shadow",children:[u.jsx("div",{className:"flex justify-center mb-4",children:n.icon}),u.jsx("h3",{className:"text-2xl font-semibold text-primary mb-2",children:n.title}),u.jsx("p",{className:"text-muted-foreground",children:n.description})]})},r))})]}),u.jsxs(oe.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:1.2},className:"mt-16 text-center",children:[u.jsx("p",{className:"text-lg text-foreground",children:"                  ."}),u.jsx("img",{alt:"         ",class:"w-full max-w-4xl mx-auto mt-8 rounded-lg shadow-lg",src:"https://images.unsplash.com/photo-1623990088169-3eafccdec2c0"})]})]})},m1=re.forwardRef(({className:t,...e},n)=>u.jsx("textarea",{className:ae("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));m1.displayName="Textarea";const Xne=()=>{const{toast:t}=tn(),[e,n]=p.useState({name:"",email:"",subject:"",message:""}),[r,s]=p.useState(!1),i=l=>{const{name:c,value:d}=l.target;n(h=>({...h,[c]:d}))},o=async l=>{l.preventDefault(),s(!0),await new Promise(c=>setTimeout(c,1500)),console.log("Form submitted:",e),t({title:"    !",description:"  .       .",className:"bg-green-500 text-white"}),n({name:"",email:"",subject:"",message:""}),s(!1)},a=[{icon:u.jsx(yZ,{className:"h-8 w-8 text-primary"}),title:" ",details:["123    "]},{icon:u.jsx(jV,{className:"h-8 w-8 text-primary"}),title:"",details:["0123-456-7890","02-2345-6789"]},{icon:u.jsx(Mh,{className:"h-8 w-8 text-primary"}),title:" ",details:["info@rightwater.com.eg","sales@rightwater.com.eg"]},{icon:u.jsx(TZ,{className:"h-8 w-8 text-primary"}),title:" ",details:[" - : 9  - 5 "," : "]}];return u.jsxs("div",{className:"container mx-auto px-4 py-12",children:[u.jsxs(oe.section,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7},className:"text-center mb-16",children:[u.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:" "}),u.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"  !                    ."})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-start",children:[u.jsxs(oe.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.7,delay:.2},className:"space-y-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-primary mb-6",children:" "}),a.map((l,c)=>u.jsx(Tt,{className:"glassmorphism-card overflow-hidden",children:u.jsxs(Dt,{className:"p-6 flex items-start space-x-4 space-x-reverse",children:[u.jsx("div",{className:"flex-shrink-0 mt-1",children:l.icon}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-foreground mb-1",children:l.title}),l.details.map((d,h)=>u.jsx("p",{className:"text-muted-foreground",children:d},h))]})]})},c))]}),u.jsx(oe.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.7,delay:.4},children:u.jsxs(Tt,{className:"glassmorphism-card p-6 md:p-8 shadow-xl",children:[u.jsx(en,{className:"p-0 mb-6",children:u.jsx(Wt,{className:"text-3xl font-bold text-primary text-center",children:"  "})}),u.jsx(Dt,{className:"p-0",children:u.jsxs("form",{onSubmit:o,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"name",className:"text-foreground font-medium",children:" "}),u.jsx(Ee,{type:"text",name:"name",id:"name",value:e.name,onChange:i,required:!0,className:"mt-1 bg-background/70 border-primary/30 focus:border-primary",placeholder:":  "})]}),u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"email",className:"text-foreground font-medium",children:" "}),u.jsx(Ee,{type:"email",name:"email",id:"email",value:e.email,onChange:i,required:!0,className:"mt-1 bg-background/70 border-primary/30 focus:border-primary",placeholder:"example@domain.com"})]}),u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"subject",className:"text-foreground font-medium",children:""}),u.jsx(Ee,{type:"text",name:"subject",id:"subject",value:e.subject,onChange:i,required:!0,className:"mt-1 bg-background/70 border-primary/30 focus:border-primary",placeholder:"  ..."})]}),u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"message",className:"text-foreground font-medium",children:""}),u.jsx(m1,{name:"message",id:"message",rows:"5",value:e.message,onChange:i,required:!0,className:"mt-1 bg-background/70 border-primary/30 focus:border-primary",placeholder:"  ..."})]}),u.jsx(de,{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 transition-opacity text-lg py-3",children:r?u.jsxs(u.Fragment,{children:[u.jsx(oe.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"ml-2 h-5 w-5 border-2 border-transparent border-t-white rounded-full"})," ..."]}):u.jsxs(u.Fragment,{children:[u.jsx(MV,{className:"ml-2 h-5 w-5"}),"  "]})})]})})]})})]}),u.jsxs(oe.section,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.6},className:"mt-16",children:[u.jsx("h2",{className:"text-3xl font-bold text-primary text-center mb-8",children:"  "}),u.jsx("div",{className:"aspect-w-16 aspect-h-9 rounded-xl overflow-hidden shadow-2xl border-4 border-primary/30",children:u.jsx("iframe",{src:"https://www.openstreetmap.org/export/embed.html?bbox=31.198167800903324%2C30.03986893231807%2C31.20899200439453%2C30.04569608970079&layer=mapnik&marker=30.04278251960827%2C31.203579902648926",width:"100%",height:"450",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"   "})}),u.jsx("div",{className:"text-center mt-4",children:u.jsx("a",{href:"https://www.openstreetmap.org/?mlat=30.04278&mlon=31.20358#map=17/30.04278/31.20358",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"  "})})]})]})},Jne=()=>{const{cartItems:t,updateItemQuantity:e,removeItemFromCart:n,cartTotal:r}=wy(),{toast:s}=tn(),i=$n(),o=r>0?50:0,a=r+o,l=()=>{if(t.length===0){s({title:"  ",description:"       .",variant:"destructive"});return}const c=t.filter(d=>d.quantity>d.stock);if(c.length>0){s({title:"  ",description:`   : ${c.map(d=>d.name).join(", ")}.     .`,variant:"destructive"});return}i("/checkout",{state:{cartItems:t,subtotal:r,shippingCost:o,total:a,fromCart:!0}})};return u.jsxs("div",{className:"container mx-auto px-4 py-12",children:[u.jsxs(oe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-10 text-center",children:[u.jsxs("h1",{className:"text-5xl font-extrabold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary",children:[u.jsx(yc,{className:"inline-block h-12 w-12 mr-3"}),"  "]}),u.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"         ."})]}),t.length===0?u.jsxs(oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"text-center py-16",children:[u.jsx("img",{alt:"  ",className:"mx-auto w-64 h-64 mb-6 opacity-70",src:"https://images.unsplash.com/photo-1641833278434-50f92b93d65a"}),u.jsx("h2",{className:"text-3xl font-semibold text-foreground mb-4",children:"  !"}),u.jsx("p",{className:"text-muted-foreground mb-8",children:"       .   !"}),u.jsx(Me,{to:"/products",children:u.jsxs(de,{size:"lg",className:"bg-gradient-to-r from-primary to-secondary hover:opacity-90 transition-opacity",children:[u.jsx(yc,{className:"ml-2 h-5 w-5"}),"  "]})})]}):u.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 items-start",children:[u.jsx(oe.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},className:"lg:col-span-2 space-y-6",children:u.jsx(Ab,{children:t.map(c=>u.jsx(oe.div,{layout:!0,initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50,transition:{duration:.3}},transition:{type:"spring",stiffness:300,damping:30},children:u.jsxs(Tt,{className:"flex flex-col sm:flex-row items-center p-4 glassmorphism-card overflow-hidden",children:[u.jsx("img",{src:c.image||"https://images.unsplash.com/photo-1600857080039-639f0a2c6f93?auto=format&fit=crop&w=100&q=60",alt:c.name,className:"w-24 h-24 object-cover rounded-md mb-4 sm:mb-0 sm:mr-4 sm:ml-4"}),u.jsxs("div",{className:"flex-grow text-center sm:text-right",children:[u.jsx(Me,{to:`/products/${c.id}`,children:u.jsx("h3",{className:"text-lg font-semibold text-primary hover:underline",children:c.name})}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:[": ",(c.price||0).toLocaleString("ar-EG",{style:"currency",currency:"EGP"})]}),c.stock<=0&&u.jsxs("p",{className:"text-xs text-red-500 flex items-center justify-center sm:justify-start",children:[u.jsx(DV,{className:"ml-1 h-3 w-3"}),"  "]}),c.stock>0&&c.quantity>c.stock&&u.jsxs("p",{className:"text-xs text-red-500",children:["    (",c.stock,")"]})]}),u.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse my-4 sm:my-0 sm:mx-4",children:[u.jsx(de,{variant:"ghost",size:"icon",onClick:()=>e(c.id,c.quantity-1),disabled:c.quantity<=1,children:u.jsx($Z,{className:"h-5 w-5 text-primary"})}),u.jsx(Ee,{type:"number",value:c.quantity,onChange:d=>{const h=parseInt(d.target.value);isNaN(h)||e(c.id,h)},min:"1",max:c.stock,className:"w-16 text-center bg-background/70 border-primary/30",disabled:c.stock<=0}),u.jsx(de,{variant:"ghost",size:"icon",onClick:()=>e(c.id,c.quantity+1),disabled:c.quantity>=c.stock||c.stock<=0,children:u.jsx(OV,{className:"h-5 w-5 text-primary"})})]}),u.jsxs("p",{className:"font-semibold text-lg text-foreground my-2 sm:my-0 sm:mr-4 sm:ml-4",children:[": ",((c.price||0)*c.quantity).toLocaleString("ar-EG",{style:"currency",currency:"EGP"})]}),u.jsx(de,{variant:"ghost",size:"icon",onClick:()=>n(c.id),className:"text-red-500 hover:text-red-700",children:u.jsx(vy,{className:"h-5 w-5"})})]})},c.id))})}),u.jsx(oe.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"lg:col-span-1",children:u.jsxs(Tt,{className:"p-6 glassmorphism-card shadow-xl sticky top-24",children:[u.jsx(en,{className:"p-0 mb-6",children:u.jsx(Wt,{className:"text-2xl font-bold text-primary text-center",children:" "})}),u.jsxs(Dt,{className:"space-y-4 p-0",children:[u.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[u.jsx("span",{children:" "}),u.jsx("span",{children:r.toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]}),u.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[u.jsx("span",{children:" "}),u.jsx("span",{children:o.toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]}),u.jsx("hr",{className:"my-2 border-border/50"}),u.jsxs("div",{className:"flex justify-between text-xl font-bold text-foreground",children:[u.jsx("span",{children:" "}),u.jsx("span",{children:a.toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]})]}),u.jsxs(Da,{className:"p-0 mt-8 flex flex-col space-y-3",children:[u.jsxs(de,{onClick:l,size:"lg",className:"w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 transition-opacity text-lg py-3",disabled:t.some(c=>c.quantity>c.stock||c.stock<=0)||t.length===0,children:[u.jsx(SZ,{className:"ml-2 h-5 w-5"}),"   "]}),t.some(c=>c.quantity>c.stock||c.stock<=0)&&u.jsx("p",{className:"text-xs text-red-500 text-center",children:"         ."}),u.jsx(Me,{to:"/products",className:"w-full",children:u.jsxs(de,{variant:"outline",size:"lg",className:"w-full text-primary border-primary hover:bg-primary/10",children:[u.jsx(IV,{className:"ml-2 h-5 w-5"}),"  "]})})]})]})})]})]})},Zne="/assets/web-fox-logo-be4f294c.png",ere=()=>{const[t,e]=p.useState(""),[n,r]=p.useState(""),[s,i]=p.useState(!1),o=$n(),{toast:a}=tn(),l=async d=>{d.preventDefault(),i(!0);try{const m=await(await qb(us,t,n)).user.getIdTokenResult();a({title:"   !",description:" ."}),m.claims.admin?o("/admin"):o("/profile")}catch(h){a({title:"  ",description:h.code==="auth/invalid-credential"?"      .":h.message,variant:"destructive"})}i(!1)},c=async d=>{i(!0);try{await kj(us,d),a({title:"   !"}),o("/profile")}catch(h){a({title:"   ",description:h.message,variant:"destructive"})}i(!1)};return u.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)] p-4",children:[u.jsxs(Tt,{className:"w-full max-w-md shadow-2xl glassmorphism-card",children:[u.jsxs(en,{className:"text-center",children:[u.jsx(oe.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},className:"mx-auto bg-gradient-to-r from-primary to-secondary text-white rounded-full p-3 w-fit mb-4",children:u.jsx(AV,{size:32})}),u.jsx(Wt,{className:"text-3xl font-bold text-primary",children:" "}),u.jsx(Qs,{children:" !   ."})]}),u.jsxs(Dt,{children:[u.jsxs("form",{onSubmit:l,className:"space-y-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(_e,{htmlFor:"email",children:" "}),u.jsxs("div",{className:"relative",children:[u.jsx(Mh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),u.jsx(Ee,{id:"email",type:"email",placeholder:"example@mail.com",value:t,onChange:d=>e(d.target.value),required:!0,className:"pl-10"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(_e,{htmlFor:"password",children:" "}),u.jsxs("div",{className:"relative",children:[u.jsx(pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),u.jsx(Ee,{id:"password",type:"password",placeholder:"********",value:n,onChange:d=>r(d.target.value),required:!0,className:"pl-10"})]})]}),u.jsx(de,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-lg",disabled:s,children:s?" ...":" "})]}),u.jsxs("div",{className:"mt-6 relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("span",{className:"w-full border-t"})}),u.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:u.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"   "})})]}),u.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-3",children:[u.jsxs(de,{variant:"outline",onClick:()=>c(EV),disabled:s,children:[u.jsx(bZ,{className:"mr-2 h-4 w-4"})," Google"]}),u.jsxs(de,{variant:"outline",onClick:()=>c(TV),disabled:s,children:[u.jsx(PV,{className:"mr-2 h-4 w-4"})," Facebook"]}),u.jsxs(de,{variant:"outline",onClick:()=>c(SV),disabled:s,children:[u.jsx(VV,{className:"mr-2 h-4 w-4"})," Twitter"]})]})]}),u.jsxs(Da,{className:"flex flex-col items-center space-y-2",children:[u.jsx(Me,{to:"/forgot-password",children:u.jsx(de,{variant:"link",className:"text-sm text-primary",children:"   "})}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:["  "," ",u.jsx(Me,{to:"/signup",className:"font-medium text-primary hover:underline",children:"  "})]})]})]}),u.jsxs("div",{className:"mt-8 text-center",children:[u.jsx("img",{src:Zne,alt:"Web Fox Logo",className:"w-20 h-20 opacity-80 mx-auto"}),u.jsx("p",{className:"text-sm text-muted-foreground font-medium mt-2",children:"    "}),u.jsx("p",{className:"text-lg text-foreground font-semibold",children:"Mohammed Nasser"})]})]})},tre=()=>{const[t,e]=p.useState(""),[n,r]=p.useState(""),[s,i]=p.useState(""),[o,a]=p.useState(""),[l,c]=p.useState(!1),d=$n(),{toast:h}=tn(),m=async g=>{if(g.preventDefault(),s.length<6){h({title:"  ",description:"     6   .",variant:"destructive"});return}if(s!==o){h({title:"   ",description:"   .",variant:"destructive"});return}c(!0);try{const y=(await zb(us,n,s)).user;await Dm(y,{displayName:t}),await eV(mn(Ue,"users",y.uid),{uid:y.uid,displayName:t,email:n,createdAt:Xe.now(),role:"user"}),h({title:"   !",description:`  ${t||n}!`}),d("/")}catch(v){let y="   .    .";v.code==="auth/email-already-in-use"?y="    .   .":v.code==="auth/invalid-email"&&(y="     ."),h({title:"  ",description:y,variant:"destructive"})}c(!1)};return u.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-center min-h-[calc(100vh-200px)] bg-gradient-to-br from-water-blue/10 to-water-green/5 p-4",children:u.jsxs(Tt,{className:"w-full max-w-md shadow-2xl glassmorphism-card",children:[u.jsxs(en,{className:"text-center",children:[u.jsx(oe.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},className:"mx-auto bg-gradient-to-r from-primary to-secondary text-white rounded-full p-3 w-fit mb-4",children:u.jsx(QZ,{size:32})}),u.jsx(Wt,{className:"text-3xl font-bold text-primary",children:"  "}),u.jsx(Qs,{children:"      ."})]}),u.jsx(Dt,{children:u.jsxs("form",{onSubmit:m,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx(_e,{htmlFor:"displayName",children:" "}),u.jsxs("div",{className:"relative",children:[u.jsx(xy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),u.jsx(Ee,{id:"displayName",type:"text",placeholder:":  ",value:t,onChange:g=>e(g.target.value),required:!0,className:"pl-10"})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx(_e,{htmlFor:"email",children:" "}),u.jsxs("div",{className:"relative",children:[u.jsx(Mh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),u.jsx(Ee,{id:"email",type:"email",placeholder:"example@mail.com",value:n,onChange:g=>r(g.target.value),required:!0,className:"pl-10"})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx(_e,{htmlFor:"password",children:" "}),u.jsxs("div",{className:"relative",children:[u.jsx(pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),u.jsx(Ee,{id:"password",type:"password",placeholder:"6   ",value:s,onChange:g=>i(g.target.value),required:!0,className:"pl-10"})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx(_e,{htmlFor:"confirmPassword",children:"  "}),u.jsxs("div",{className:"relative",children:[u.jsx(pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),u.jsx(Ee,{id:"confirmPassword",type:"password",placeholder:"********",value:o,onChange:g=>a(g.target.value),required:!0,className:"pl-10"})]})]}),u.jsx(de,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-lg",disabled:l,children:l?" ...":" "})]})}),u.jsx(Da,{className:"flex justify-center",children:u.jsxs("p",{className:"text-sm text-muted-foreground",children:["  "," ",u.jsx(Me,{to:"/login",className:"font-medium text-primary hover:underline",children:" "})]})})]})})},nre=()=>{const[t,e]=p.useState(""),[n,r]=p.useState(!1),[s,i]=p.useState(""),{sendPasswordReset:o}=Ks(),{toast:a}=tn(),l=$n(),c=async d=>{if(d.preventDefault(),r(!0),i(""),!o){a({title:"  ",description:"      .",variant:"destructive"}),r(!1);return}try{await o(t),i("         .        ( )."),a({title:"   ",description:"      .",className:"bg-green-500 text-white"}),setTimeout(()=>l("/login"),3e3)}catch(h){console.error("Forgot Password Error:",h);let m="       .";h.code==="auth/user-not-found"?m="        .":h.code==="auth/invalid-email"&&(m="     ."),i(m),a({title:"   ",description:m,variant:"destructive"})}finally{r(!1)}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-secondary/10 p-4",children:u.jsx(oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"w-full max-w-md",children:u.jsxs(Tt,{className:"shadow-2xl glassmorphism-card overflow-hidden",children:[u.jsxs(en,{className:"text-center p-8 bg-primary/10",children:[u.jsx(pa,{className:"mx-auto h-16 w-16 text-primary mb-4"}),u.jsx(Wt,{className:"text-3xl font-bold text-primary",children:"  "}),u.jsx(Qs,{className:"text-muted-foreground pt-2",children:" !           ."})]}),u.jsx(Dt,{className:"p-8 space-y-6",children:u.jsxs("form",{onSubmit:c,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs(_e,{htmlFor:"email",className:"text-foreground font-medium flex items-center",children:[u.jsx(Mh,{className:"ml-2 h-4 w-4 text-primary"})," "]}),u.jsx(Ee,{id:"email",type:"email",value:t,onChange:d=>e(d.target.value),placeholder:"example@domain.com",required:!0,className:"mt-1 bg-background/70 border-primary/30 focus:border-primary text-lg p-3"})]}),s&&u.jsx("p",{className:`text-sm p-3 rounded-md ${s.includes("")||s.includes(" ")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s}),u.jsx(de,{type:"submit",className:"w-full text-lg py-3 bg-gradient-to-r from-primary to-secondary hover:opacity-90 transition-opacity",disabled:n,children:n?u.jsxs(u.Fragment,{children:[u.jsx(kt,{className:"ml-2 h-5 w-5 animate-spin"})," ..."]}):u.jsxs(u.Fragment,{children:[u.jsx(MV,{className:"ml-2 h-5 w-5"}),"   "]})})]})}),u.jsxs(Da,{className:"p-8 bg-primary/5 text-center flex flex-col items-center",children:[u.jsxs("p",{className:"text-sm text-muted-foreground",children:["  "," ",u.jsx(Me,{to:"/login",className:"font-medium text-primary hover:underline",children:" "})]}),u.jsxs(Me,{to:"/",className:"mt-4 text-sm text-primary hover:underline flex items-center",children:["   ",u.jsx(Fc,{className:"mr-1 h-4 w-4"})]})]})]})})})},rre=()=>{const{currentUser:t,updateProfile:e,updateUserProfileInDb:n}=Ks(),{toast:r}=tn(),[s,i]=p.useState(!1),[o,a]=p.useState({name:"",phone:""});p.useEffect(()=>{t&&a({name:t.displayName||"",phone:t.phoneNumber||""})},[t]);const l=d=>{a({...o,[d.target.name]:d.target.value})},c=async d=>{if(d.preventDefault(),!o.name){r({title:"",description:"      .",variant:"destructive"});return}i(!0);try{t.displayName!==o.name&&await e(t,{displayName:o.name}),await n(t.uid,{displayName:o.name,phone:o.phone}),r({title:" ",description:"   ."})}catch(h){console.error("Error updating profile: ",h),r({title:"",description:"  .",variant:"destructive"})}finally{i(!1)}};return u.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[u.jsxs(en,{className:"p-0 mb-6",children:[u.jsx(Wt,{className:"text-2xl font-bold",children:" "}),u.jsx(Qs,{children:"      ."})]}),u.jsx(Dt,{className:"p-0",children:u.jsxs("form",{onSubmit:c,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"name",children:" "}),u.jsx(Ee,{id:"name",name:"name",value:o.name,onChange:l,required:!0})]}),u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"email",children:"  (  )"}),u.jsx(Ee,{id:"email",type:"email",value:(t==null?void 0:t.email)||"",disabled:!0})]}),u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"phone",children:"  ()"}),u.jsx(Ee,{id:"phone",name:"phone",type:"tel",value:o.phone,onChange:l})]}),u.jsxs(de,{type:"submit",className:"w-full sm:w-auto",disabled:s,children:[s?u.jsx(kt,{className:"animate-spin mr-2"}):null,s?" ...":" "]})]})})]})},sre=()=>{const{reauthenticateAndChangePassword:t,signOut:e}=Ks(),{toast:n}=tn(),r=$n(),[s,i]=p.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[o,a]=p.useState(!1),[l,c]=p.useState(""),d=m=>{i({...s,[m.target.name]:m.target.value})},h=async m=>{if(m.preventDefault(),c(""),s.newPassword!==s.confirmPassword){c("     .");return}if(s.newPassword.length<6){c("      6   .");return}a(!0);try{await t(s.currentPassword,s.newPassword),n({title:"     !",description:"   .     .",className:"bg-green-500 text-white",duration:5e3}),await e(),r("/login")}catch(g){console.error(g),g.code==="auth/wrong-password"||g.code==="auth/invalid-credential"?c("      ."):c("  .    .")}finally{a(!1)}};return u.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full",children:u.jsxs(Tt,{className:"border-none shadow-none",children:[u.jsxs(en,{children:[u.jsx(pa,{className:"mx-auto h-10 w-10 text-primary mb-2"}),u.jsx(Wt,{className:"text-xl font-bold",children:"  "}),u.jsx(Qs,{children:"      ."})]}),u.jsx(Dt,{children:u.jsxs("form",{onSubmit:h,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"currentPassword",children:"  "}),u.jsx(Ee,{id:"currentPassword",name:"currentPassword",type:"password",value:s.currentPassword,onChange:d,required:!0})]}),u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"newPassword",children:"  "}),u.jsx(Ee,{id:"newPassword",name:"newPassword",type:"password",value:s.newPassword,onChange:d,required:!0})]}),u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"confirmPassword",children:"   "}),u.jsx(Ee,{id:"confirmPassword",name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:d,required:!0})]}),l&&u.jsx("p",{className:"text-sm text-red-500",children:l}),u.jsxs(de,{type:"submit",className:"w-full",disabled:o,children:[o?u.jsx(kt,{className:"animate-spin mr-2 h-4 w-4"}):u.jsx(Lh,{className:"mr-2 h-4 w-4"}),o?" ...":"  "]})]})})]})})},Bd={_origin:"https://api.emailjs.com"},ire=(t,e="https://api.emailjs.com")=>{Bd._userID=t,Bd._origin=e},r$=(t,e,n)=>{if(!t)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class MA{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const s$=(t,e,n={})=>new Promise((r,s)=>{const i=new XMLHttpRequest;i.addEventListener("load",({target:o})=>{const a=new MA(o);a.status===200||a.text==="OK"?r(a):s(a)}),i.addEventListener("error",({target:o})=>{s(new MA(o))}),i.open("POST",Bd._origin+t,!0),Object.keys(n).forEach(o=>{i.setRequestHeader(o,n[o])}),i.send(e)}),ore=(t,e,n,r)=>{const s=r||Bd._userID;return r$(s,t,e),s$("/api/v1.0/email/send",JSON.stringify({lib_version:"3.12.1",user_id:s,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"})},are=t=>{let e;if(typeof t=="string"?e=document.querySelector(t):e=t,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},lre=(t,e,n,r)=>{const s=r||Bd._userID,i=are(n);r$(s,t,e);const o=new FormData(i);return o.append("lib_version","3.12.1"),o.append("service_id",t),o.append("template_id",e),o.append("user_id",s),s$("/api/v1.0/email/send-form",o)},VA={init:ire,send:ore,sendForm:lre};var cre=rh[" useId ".trim().toString()]||(()=>{}),ure=0;function Ko(t){const[e,n]=p.useState(cre());return pr(()=>{t||n(r=>r??String(ure++))},[t]),t||(e?`radix-${e}`:"")}var w0="focusScope.autoFocusOnMount",_0="focusScope.autoFocusOnUnmount",LA={bubbles:!1,cancelable:!0},dre="FocusScope",g1=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=p.useState(null),c=qt(s),d=qt(i),h=p.useRef(null),m=Ae(e,y=>l(y)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let y=function(b){if(g.paused||!a)return;const S=b.target;a.contains(S)?h.current=S:li(h.current,{select:!0})},w=function(b){if(g.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||li(h.current,{select:!0}))},_=function(b){if(document.activeElement===document.body)for(const A of b)A.removedNodes.length>0&&li(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const x=new MutationObserver(_);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),x.disconnect()}}},[r,a,g.paused]),p.useEffect(()=>{if(a){FA.add(g);const y=document.activeElement;if(!a.contains(y)){const _=new CustomEvent(w0,LA);a.addEventListener(w0,c),a.dispatchEvent(_),_.defaultPrevented||(hre(yre(i$(a)),{select:!0}),document.activeElement===y&&li(a))}return()=>{a.removeEventListener(w0,c),setTimeout(()=>{const _=new CustomEvent(_0,LA);a.addEventListener(_0,d),a.dispatchEvent(_),_.defaultPrevented||li(y??document.body,{select:!0}),a.removeEventListener(_0,d),FA.remove(g)},0)}}},[a,c,d,g]);const v=p.useCallback(y=>{if(!n&&!r||g.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,_=document.activeElement;if(w&&_){const x=y.currentTarget,[b,S]=fre(x);b&&S?!y.shiftKey&&_===S?(y.preventDefault(),n&&li(b,{select:!0})):y.shiftKey&&_===b&&(y.preventDefault(),n&&li(S,{select:!0})):_===x&&y.preventDefault()}},[n,r,g.paused]);return u.jsx(Oe.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});g1.displayName=dre;function hre(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(li(r,{select:e}),document.activeElement!==n)return}function fre(t){const e=i$(t),n=$A(e,t),r=$A(e.reverse(),t);return[n,r]}function i$(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function $A(t,e){for(const n of t)if(!pre(n,{upTo:e}))return n}function pre(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function mre(t){return t instanceof HTMLInputElement&&"select"in t}function li(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&mre(t)&&e&&t.select()}}var FA=gre();function gre(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=UA(t,e),t.unshift(e)},remove(e){var n;t=UA(t,e),(n=t[0])==null||n.resume()}}}function UA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function yre(t){return t.filter(e=>e.tagName!=="A")}var b0=0;function y1(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??BA()),document.body.insertAdjacentElement("beforeend",t[1]??BA()),b0++,()=>{b0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),b0--}},[])}function BA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ol="right-scroll-bar-position",Ml="width-before-scroll-bar",vre="with-scroll-bars-hidden",xre="--removed-body-scroll-bar-size";function E0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function wre(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var _re=typeof window<"u"?p.useLayoutEffect:p.useEffect,zA=new WeakMap;function v1(t,e){var n=wre(e||null,function(r){return t.forEach(function(s){return E0(s,r)})});return _re(function(){var r=zA.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||E0(a,null)}),i.forEach(function(a){s.has(a)||E0(a,o)})}zA.set(n,t)},[t]),n}function bre(t){return t}function Ere(t,e){e===void 0&&(e=bre);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function x1(t){t===void 0&&(t={});var e=Ere(null);return e.options=bt({async:!0,ssr:!1},t),e}var o$=function(t){var e=t.sideCar,n=Ta(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,bt({},n))};o$.isSideCarExport=!0;function w1(t,e){return t.useMedium(e),o$}var a$=x1(),T0=function(){},Ny=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:T0,onWheelCapture:T0,onTouchMoveCapture:T0}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,g=t.noIsolation,v=t.inert,y=t.allowPinchZoom,w=t.as,_=w===void 0?"div":w,x=t.gapMode,b=Ta(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,A=v1([n,e]),D=bt(bt({},b),s);return p.createElement(p.Fragment,null,d&&p.createElement(S,{sideCar:a$,removeScrollBar:c,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:x}),o?p.cloneElement(p.Children.only(a),bt(bt({},D),{ref:A})):p.createElement(_,bt({},D,{className:l,ref:A}),a))});Ny.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ny.classNames={fullWidth:Ml,zeroRight:Ol};var qA,Tre=function(){if(qA)return qA;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Sre(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Tre();return e&&t.setAttribute("nonce",e),t}function Ire(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Cre(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Pre=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Sre())&&(Ire(e,n),Cre(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Are=function(){var t=Pre();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ky=function(){var t=Are(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Rre={left:0,top:0,right:0,gap:0},S0=function(t){return parseInt(t||"",10)||0},Nre=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[S0(n),S0(r),S0(s)]},kre=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Rre;var e=Nre(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Dre=ky(),Vl="data-scroll-locked",jre=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(vre,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Vl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ol,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ml,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ol," .").concat(Ol,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ml," .").concat(Ml,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Vl,`] {
    `).concat(xre,": ").concat(a,`px;
  }
`)},WA=function(){var t=parseInt(document.body.getAttribute(Vl)||"0",10);return isFinite(t)?t:0},Ore=function(){p.useEffect(function(){return document.body.setAttribute(Vl,(WA()+1).toString()),function(){var t=WA()-1;t<=0?document.body.removeAttribute(Vl):document.body.setAttribute(Vl,t.toString())}},[])},_1=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Ore();var i=p.useMemo(function(){return kre(s)},[s]);return p.createElement(Dre,{styles:jre(i,!e,s,n?"":"!important")})},zw=!1;if(typeof window<"u")try{var ep=Object.defineProperty({},"passive",{get:function(){return zw=!0,!0}});window.addEventListener("test",ep,ep),window.removeEventListener("test",ep,ep)}catch{zw=!1}var Qa=zw?{passive:!1}:!1,Mre=function(t){return t.tagName==="TEXTAREA"},l$=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Mre(t)&&n[e]==="visible")},Vre=function(t){return l$(t,"overflowY")},Lre=function(t){return l$(t,"overflowX")},GA=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=c$(t,r);if(s){var i=u$(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},$re=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Fre=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},c$=function(t,e){return t==="v"?Vre(e):Lre(e)},u$=function(t,e){return t==="v"?$re(e):Fre(e)},Ure=function(t,e){return t==="h"&&e==="rtl"?-1:1},Bre=function(t,e,n,r,s){var i=Ure(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,m=0;do{var g=u$(t,a),v=g[0],y=g[1],w=g[2],_=y-w-i*v;(v||_)&&c$(t,a)&&(h+=_,m+=v),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(s&&Math.abs(h)<1||!s&&o>h)||!d&&(s&&Math.abs(m)<1||!s&&-o>m))&&(c=!0),c},tp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},HA=function(t){return[t.deltaX,t.deltaY]},KA=function(t){return t&&"current"in t?t.current:t},zre=function(t,e){return t[0]===e[0]&&t[1]===e[1]},qre=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Wre=0,Ya=[];function Gre(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(Wre++)[0],i=p.useState(ky)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=Db([t.lockRef.current],(t.shards||[]).map(KA),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var _=tp(y),x=n.current,b="deltaX"in y?y.deltaX:x[0]-_[0],S="deltaY"in y?y.deltaY:x[1]-_[1],A,D=y.target,C=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in y&&C==="h"&&D.type==="range")return!1;var I=GA(C,D);if(!I)return!0;if(I?A=C:(A=C==="v"?"h":"v",I=GA(C,D)),!I)return!1;if(!r.current&&"changedTouches"in y&&(b||S)&&(r.current=A),!A)return!0;var P=r.current||A;return Bre(P,w,y,P==="h"?b:S,!0)},[]),l=p.useCallback(function(y){var w=y;if(!(!Ya.length||Ya[Ya.length-1]!==i)){var _="deltaY"in w?HA(w):tp(w),x=e.current.filter(function(A){return A.name===w.type&&(A.target===w.target||w.target===A.shadowParent)&&zre(A.delta,_)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(KA).filter(Boolean).filter(function(A){return A.contains(w.target)}),S=b.length>0?a(w,b[0]):!o.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),c=p.useCallback(function(y,w,_,x){var b={name:y,delta:w,target:_,should:x,shadowParent:Hre(_)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),d=p.useCallback(function(y){n.current=tp(y),r.current=void 0},[]),h=p.useCallback(function(y){c(y.type,HA(y),y.target,a(y,t.lockRef.current))},[]),m=p.useCallback(function(y){c(y.type,tp(y),y.target,a(y,t.lockRef.current))},[]);p.useEffect(function(){return Ya.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Qa),document.addEventListener("touchmove",l,Qa),document.addEventListener("touchstart",d,Qa),function(){Ya=Ya.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,Qa),document.removeEventListener("touchmove",l,Qa),document.removeEventListener("touchstart",d,Qa)}},[]);var g=t.removeScrollBar,v=t.inert;return p.createElement(p.Fragment,null,v?p.createElement(i,{styles:qre(s)}):null,g?p.createElement(_1,{gapMode:t.gapMode}):null)}function Hre(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Kre=w1(a$,Gre);var d$=p.forwardRef(function(t,e){return p.createElement(Ny,bt({},t,{ref:e,sideCar:Kre}))});d$.classNames=Ny.classNames;const b1=d$;var Qre=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Xa=new WeakMap,np=new WeakMap,rp={},I0=0,h$=function(t){return t&&(t.host||h$(t.parentNode))},Yre=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=h$(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Xre=function(t,e,n,r){var s=Yre(e,Array.isArray(t)?t:[t]);rp[n]||(rp[n]=new WeakMap);var i=rp[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(a.has(m))d(m);else try{var g=m.getAttribute(r),v=g!==null&&g!=="false",y=(Xa.get(m)||0)+1,w=(i.get(m)||0)+1;Xa.set(m,y),i.set(m,w),o.push(m),y===1&&v&&np.set(m,!0),w===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",m,_)}})};return d(e),a.clear(),I0++,function(){o.forEach(function(h){var m=Xa.get(h)-1,g=i.get(h)-1;Xa.set(h,m),i.set(h,g),m||(np.has(h)||h.removeAttribute(r),np.delete(h)),g||h.removeAttribute(n)}),I0--,I0||(Xa=new WeakMap,Xa=new WeakMap,np=new WeakMap,rp={})}},Uh=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=e||Qre(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Xre(r,s,n,"aria-hidden")):function(){return null}},Dy="Dialog",[f$,p$]=gr(Dy),[Jre,Dr]=f$(Dy),m$=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=p.useRef(null),l=p.useRef(null),[c,d]=Na({prop:r,defaultProp:s??!1,onChange:i,caller:Dy});return u.jsx(Jre,{scope:e,triggerRef:a,contentRef:l,contentId:Ko(),titleId:Ko(),descriptionId:Ko(),open:c,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};m$.displayName=Dy;var g$="DialogTrigger",y$=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Dr(g$,n),i=Ae(e,s.triggerRef);return u.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":S1(s.open),...r,ref:i,onClick:ce(t.onClick,s.onOpenToggle)})});y$.displayName=g$;var E1="DialogPortal",[Zre,v$]=f$(E1,{forceMount:void 0}),x$=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Dr(E1,e);return u.jsx(Zre,{scope:e,forceMount:n,children:p.Children.map(r,o=>u.jsx(yr,{present:n||i.open,children:u.jsx(Sy,{asChild:!0,container:s,children:o})}))})};x$.displayName=E1;var Zm="DialogOverlay",w$=p.forwardRef((t,e)=>{const n=v$(Zm,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Dr(Zm,t.__scopeDialog);return i.modal?u.jsx(yr,{present:r||i.open,children:u.jsx(tse,{...s,ref:e})}):null});w$.displayName=Zm;var ese=xc("DialogOverlay.RemoveScroll"),tse=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Dr(Zm,n);return u.jsx(b1,{as:ese,allowPinchZoom:!0,shards:[s.contentRef],children:u.jsx(Oe.div,{"data-state":S1(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ma="DialogContent",_$=p.forwardRef((t,e)=>{const n=v$(ma,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Dr(ma,t.__scopeDialog);return u.jsx(yr,{present:r||i.open,children:i.modal?u.jsx(nse,{...s,ref:e}):u.jsx(rse,{...s,ref:e})})});_$.displayName=ma;var nse=p.forwardRef((t,e)=>{const n=Dr(ma,t.__scopeDialog),r=p.useRef(null),s=Ae(e,n.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return Uh(i)},[]),u.jsx(b$,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ce(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ce(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:ce(t.onFocusOutside,i=>i.preventDefault())})}),rse=p.forwardRef((t,e)=>{const n=Dr(ma,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return u.jsx(b$,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),b$=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Dr(ma,n),l=p.useRef(null),c=Ae(e,l);return y1(),u.jsxs(u.Fragment,{children:[u.jsx(g1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:u.jsx(Ty,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":S1(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(ise,{titleId:a.titleId}),u.jsx(ase,{contentRef:l,descriptionId:a.descriptionId})]})]})}),T1="DialogTitle",E$=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Dr(T1,n);return u.jsx(Oe.h2,{id:s.titleId,...r,ref:e})});E$.displayName=T1;var T$="DialogDescription",S$=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Dr(T$,n);return u.jsx(Oe.p,{id:s.descriptionId,...r,ref:e})});S$.displayName=T$;var I$="DialogClose",C$=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Dr(I$,n);return u.jsx(Oe.button,{type:"button",...r,ref:e,onClick:ce(t.onClick,()=>s.onOpenChange(!1))})});C$.displayName=I$;function S1(t){return t?"open":"closed"}var P$="DialogTitleWarning",[sse,A$]=Fee(P$,{contentName:ma,titleName:T1,docsSlug:"dialog"}),ise=({titleId:t})=>{const e=A$(P$),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},ose="DialogDescriptionWarning",ase=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${A$(ose).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},R$=m$,N$=y$,k$=x$,I1=w$,C1=_$,P1=E$,A1=S$,jy=C$;const sd=R$,lse=N$,cse=k$,use=jy,D$=re.forwardRef(({className:t,...e},n)=>u.jsx(I1,{ref:n,className:ae("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));D$.displayName=I1.displayName;const id=re.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(cse,{children:[u.jsx(D$,{}),u.jsxs(C1,{ref:r,className:ae("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,u.jsxs(jy,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(LV,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));id.displayName=C1.displayName;const Ll=({className:t,...e})=>u.jsx("div",{className:ae("flex flex-col space-y-1.5 text-center sm:text-right",t),...e});Ll.displayName="DialogHeader";const Bh=({className:t,...e})=>u.jsx("div",{className:ae("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 sm:space-x-reverse",t),...e});Bh.displayName="DialogFooter";const $l=re.forwardRef(({className:t,...e},n)=>u.jsx(P1,{ref:n,className:ae("text-lg font-semibold leading-none tracking-tight",t),...e}));$l.displayName=P1.displayName;const dse=re.forwardRef(({className:t,...e},n)=>u.jsx(A1,{ref:n,className:ae("text-sm text-muted-foreground",t),...e}));dse.displayName=A1.displayName;var QA=1,hse=.9,fse=.8,pse=.17,C0=.1,P0=.999,mse=.9999,gse=.99,yse=/[\\\/_+.#"@\[\(\{&]/,vse=/[\\\/_+.#"@\[\(\{&]/g,xse=/[\s-]/,j$=/[\s-]/g;function qw(t,e,n,r,s,i,o){if(i===e.length)return s===t.length?QA:gse;var a=`${s},${i}`;if(o[a]!==void 0)return o[a];for(var l=r.charAt(i),c=n.indexOf(l,s),d=0,h,m,g,v;c>=0;)h=qw(t,e,n,r,c+1,i+1,o),h>d&&(c===s?h*=QA:yse.test(t.charAt(c-1))?(h*=fse,g=t.slice(s,c-1).match(vse),g&&s>0&&(h*=Math.pow(P0,g.length))):xse.test(t.charAt(c-1))?(h*=hse,v=t.slice(s,c-1).match(j$),v&&s>0&&(h*=Math.pow(P0,v.length))):(h*=pse,s>0&&(h*=Math.pow(P0,c-s))),t.charAt(c)!==e.charAt(i)&&(h*=mse)),(h<C0&&n.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(c-1)!==r.charAt(i))&&(m=qw(t,e,n,r,c+1,i+2,o),m*C0>h&&(h=m*C0)),h>d&&(d=h),c=n.indexOf(l,c+1);return o[a]=d,d}function YA(t){return t.toLowerCase().replace(j$," ")}function wse(t,e){return qw(t,e,YA(t),YA(e),0,0,{})}function be(){return be=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},be.apply(null,arguments)}function Fl(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function _se(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function O$(...t){return e=>t.forEach(n=>_se(n,e))}function zh(...t){return p.useCallback(O$(...t),t)}function bse(t,e=[]){let n=[];function r(i,o){const a=p.createContext(o),l=n.length;n=[...n,o];function c(h){const{scope:m,children:g,...v}=h,y=(m==null?void 0:m[t][l])||a,w=p.useMemo(()=>v,Object.values(v));return p.createElement(y.Provider,{value:w},g)}function d(h,m){const g=(m==null?void 0:m[t][l])||a,v=p.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,d]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,Ese(s,...e)]}function Ese(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}const Ww=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},Tse=rh["useId".toString()]||(()=>{});let Sse=0;function A0(t){const[e,n]=p.useState(Tse());return Ww(()=>{t||n(r=>r??String(Sse++))},[t]),t||(e?`radix-${e}`:"")}function ga(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function Ise({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=Cse({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=ga(n),l=p.useCallback(c=>{if(i){const h=typeof c=="function"?c(t):c;h!==t&&a(h)}else s(c)},[i,t,s,a]);return[o,l]}function Cse({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,s=p.useRef(r),i=ga(e);return p.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}const R1=p.forwardRef((t,e)=>{const{children:n,...r}=t,s=p.Children.toArray(n),i=s.find(Ase);if(i){const o=i.props.children,a=s.map(l=>l===i?p.Children.count(o)>1?p.Children.only(null):p.isValidElement(o)?o.props.children:null:l);return p.createElement(Gw,be({},r,{ref:e}),p.isValidElement(o)?p.cloneElement(o,void 0,a):null)}return p.createElement(Gw,be({},r,{ref:e}),n)});R1.displayName="Slot";const Gw=p.forwardRef((t,e)=>{const{children:n,...r}=t;return p.isValidElement(n)?p.cloneElement(n,{...Rse(r,n.props),ref:O$(e,n.ref)}):p.Children.count(n)>1?p.Children.only(null):null});Gw.displayName="SlotClone";const Pse=({children:t})=>p.createElement(p.Fragment,null,t);function Ase(t){return p.isValidElement(t)&&t.type===Pse}function Rse(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?n[r]=(...a)=>{i==null||i(...a),s==null||s(...a)}:r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}const Nse=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],Oy=Nse.reduce((t,e)=>{const n=p.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?R1:e;return p.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),p.createElement(a,be({},o,{ref:s}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function kse(t,e){t&&Nr.flushSync(()=>t.dispatchEvent(e))}function Dse(t){const e=ga(t);p.useEffect(()=>{const n=r=>{r.key==="Escape"&&e(r)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e])}const Hw="dismissableLayer.update",jse="dismissableLayer.pointerDownOutside",Ose="dismissableLayer.focusOutside";let XA;const Mse=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Vse=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=p.useContext(Mse),[d,h]=p.useState(null),[,m]=p.useState({}),g=zh(e,D=>h(D)),v=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=v.indexOf(y),_=d?v.indexOf(d):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,b=_>=w,S=Lse(D=>{const C=D.target,I=[...c.branches].some(P=>P.contains(C));!b||I||(s==null||s(D),o==null||o(D),D.defaultPrevented||a==null||a())}),A=$se(D=>{const C=D.target;[...c.branches].some(P=>P.contains(C))||(i==null||i(D),o==null||o(D),D.defaultPrevented||a==null||a())});return Dse(D=>{_===c.layers.size-1&&(r==null||r(D),!D.defaultPrevented&&a&&(D.preventDefault(),a()))}),p.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(XA=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),JA(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(document.body.style.pointerEvents=XA)}},[d,n,c]),p.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),JA())},[d,c]),p.useEffect(()=>{const D=()=>m({});return document.addEventListener(Hw,D),()=>document.removeEventListener(Hw,D)},[]),p.createElement(Oy.div,be({},l,{ref:g,style:{pointerEvents:x?b?"auto":"none":void 0,...t.style},onFocusCapture:Fl(t.onFocusCapture,A.onFocusCapture),onBlurCapture:Fl(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:Fl(t.onPointerDownCapture,S.onPointerDownCapture)}))});function Lse(t){const e=ga(t),n=p.useRef(!1),r=p.useRef(()=>{});return p.useEffect(()=>{const s=o=>{if(o.target&&!n.current){let l=function(){M$(jse,e,a,{discrete:!0})};const a={originalEvent:o};o.pointerType==="touch"?(document.removeEventListener("click",r.current),r.current=l,document.addEventListener("click",r.current,{once:!0})):l()}n.current=!1},i=window.setTimeout(()=>{document.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),document.removeEventListener("pointerdown",s),document.removeEventListener("click",r.current)}},[e]),{onPointerDownCapture:()=>n.current=!0}}function $se(t){const e=ga(t),n=p.useRef(!1);return p.useEffect(()=>{const r=s=>{s.target&&!n.current&&M$(Ose,e,{originalEvent:s},{discrete:!1})};return document.addEventListener("focusin",r),()=>document.removeEventListener("focusin",r)},[e]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function JA(){const t=new CustomEvent(Hw);document.dispatchEvent(t)}function M$(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?kse(s,i):s.dispatchEvent(i)}const R0="focusScope.autoFocusOnMount",N0="focusScope.autoFocusOnUnmount",ZA={bubbles:!1,cancelable:!0},Fse=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=p.useState(null),c=ga(s),d=ga(i),h=p.useRef(null),m=zh(e,y=>l(y)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let y=function(_){if(g.paused||!a)return;const x=_.target;a.contains(x)?h.current=x:Ao(h.current,{select:!0})},w=function(_){g.paused||!a||a.contains(_.relatedTarget)||Ao(h.current,{select:!0})};return document.addEventListener("focusin",y),document.addEventListener("focusout",w),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w)}}},[r,a,g.paused]),p.useEffect(()=>{if(a){tR.add(g);const y=document.activeElement;if(!a.contains(y)){const _=new CustomEvent(R0,ZA);a.addEventListener(R0,c),a.dispatchEvent(_),_.defaultPrevented||(Use(Gse(V$(a)),{select:!0}),document.activeElement===y&&Ao(a))}return()=>{a.removeEventListener(R0,c),setTimeout(()=>{const _=new CustomEvent(N0,ZA);a.addEventListener(N0,d),a.dispatchEvent(_),_.defaultPrevented||Ao(y??document.body,{select:!0}),a.removeEventListener(N0,d),tR.remove(g)},0)}}},[a,c,d,g]);const v=p.useCallback(y=>{if(!n&&!r||g.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,_=document.activeElement;if(w&&_){const x=y.currentTarget,[b,S]=Bse(x);b&&S?!y.shiftKey&&_===S?(y.preventDefault(),n&&Ao(b,{select:!0})):y.shiftKey&&_===b&&(y.preventDefault(),n&&Ao(S,{select:!0})):_===x&&y.preventDefault()}},[n,r,g.paused]);return p.createElement(Oy.div,be({tabIndex:-1},o,{ref:m,onKeyDown:v}))});function Use(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ao(r,{select:e}),document.activeElement!==n)return}function Bse(t){const e=V$(t),n=eR(e,t),r=eR(e.reverse(),t);return[n,r]}function V$(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function eR(t,e){for(const n of t)if(!zse(n,{upTo:e}))return n}function zse(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function qse(t){return t instanceof HTMLInputElement&&"select"in t}function Ao(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&qse(t)&&e&&t.select()}}const tR=Wse();function Wse(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=nR(t,e),t.unshift(e)},remove(e){var n;t=nR(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function nR(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Gse(t){return t.filter(e=>e.tagName!=="A")}const Hse=p.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...s}=t;return r?Cg.createPortal(p.createElement(Oy.div,be({},s,{ref:e})),r):null});function Kse(t,e){return p.useReducer((n,r)=>{const s=e[n][r];return s??n},t)}const My=t=>{const{present:e,children:n}=t,r=Qse(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=zh(r.ref,s.ref);return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};My.displayName="Presence";function Qse(t){const[e,n]=p.useState(),r=p.useRef({}),s=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Kse(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=sp(r.current);i.current=a==="mounted"?c:"none"},[a]),Ww(()=>{const c=r.current,d=s.current;if(d!==t){const m=i.current,g=sp(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Ww(()=>{if(e){const c=h=>{const g=sp(r.current).includes(h.animationName);h.target===e&&g&&Nr.flushSync(()=>l("ANIMATION_END"))},d=h=>{h.target===e&&(i.current=sp(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function sp(t){return(t==null?void 0:t.animationName)||"none"}let k0=0;function Yse(){p.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:rR()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:rR()),k0++,()=>{k0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),k0--}},[])}function rR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var L$=x1(),D0=function(){},Vy=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:D0,onWheelCapture:D0,onTouchMoveCapture:D0}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,g=t.noIsolation,v=t.inert,y=t.allowPinchZoom,w=t.as,_=w===void 0?"div":w,x=Ta(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=m,S=v1([n,e]),A=bt(bt({},x),s);return p.createElement(p.Fragment,null,d&&p.createElement(b,{sideCar:L$,removeScrollBar:c,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!y,lockRef:n}),o?p.cloneElement(p.Children.only(a),bt(bt({},A),{ref:S})):p.createElement(_,bt({},A,{className:l,ref:S}),a))});Vy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vy.classNames={fullWidth:Ml,zeroRight:Ol};var Kw=!1;if(typeof window<"u")try{var ip=Object.defineProperty({},"passive",{get:function(){return Kw=!0,!0}});window.addEventListener("test",ip,ip),window.removeEventListener("test",ip,ip)}catch{Kw=!1}var Ja=Kw?{passive:!1}:!1,Xse=function(t){var e=window.getComputedStyle(t);return e.overflowY!=="hidden"&&!(e.overflowY===e.overflowX&&e.overflowY==="visible")},Jse=function(t){var e=window.getComputedStyle(t);return e.overflowX!=="hidden"&&!(e.overflowY===e.overflowX&&e.overflowX==="visible")},sR=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=$$(t,n);if(r){var s=F$(t,n),i=s[1],o=s[2];if(i>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Zse=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},eie=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},$$=function(t,e){return t==="v"?Xse(e):Jse(e)},F$=function(t,e){return t==="v"?Zse(e):eie(e)},tie=function(t,e){return t==="h"&&e==="rtl"?-1:1},nie=function(t,e,n,r,s){var i=tie(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,m=0;do{var g=F$(t,a),v=g[0],y=g[1],w=g[2],_=y-w-i*v;(v||_)&&$$(t,a)&&(h+=_,m+=v),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(s&&h===0||!s&&o>h)||!d&&(s&&m===0||!s&&-o>m))&&(c=!0),c},op=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},iR=function(t){return[t.deltaX,t.deltaY]},oR=function(t){return t&&"current"in t?t.current:t},rie=function(t,e){return t[0]===e[0]&&t[1]===e[1]},sie=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},iie=0,Za=[];function oie(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(iie++)[0],i=p.useState(function(){return ky()})[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=Db([t.lockRef.current],(t.shards||[]).map(oR),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(y,w){if("touches"in y&&y.touches.length===2)return!o.current.allowPinchZoom;var _=op(y),x=n.current,b="deltaX"in y?y.deltaX:x[0]-_[0],S="deltaY"in y?y.deltaY:x[1]-_[1],A,D=y.target,C=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in y&&C==="h"&&D.type==="range")return!1;var I=sR(C,D);if(!I)return!0;if(I?A=C:(A=C==="v"?"h":"v",I=sR(C,D)),!I)return!1;if(!r.current&&"changedTouches"in y&&(b||S)&&(r.current=A),!A)return!0;var P=r.current||A;return nie(P,w,y,P==="h"?b:S,!0)},[]),l=p.useCallback(function(y){var w=y;if(!(!Za.length||Za[Za.length-1]!==i)){var _="deltaY"in w?iR(w):op(w),x=e.current.filter(function(A){return A.name===w.type&&A.target===w.target&&rie(A.delta,_)})[0];if(x&&x.should){w.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(oR).filter(Boolean).filter(function(A){return A.contains(w.target)}),S=b.length>0?a(w,b[0]):!o.current.noIsolation;S&&w.preventDefault()}}},[]),c=p.useCallback(function(y,w,_,x){var b={name:y,delta:w,target:_,should:x};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),d=p.useCallback(function(y){n.current=op(y),r.current=void 0},[]),h=p.useCallback(function(y){c(y.type,iR(y),y.target,a(y,t.lockRef.current))},[]),m=p.useCallback(function(y){c(y.type,op(y),y.target,a(y,t.lockRef.current))},[]);p.useEffect(function(){return Za.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Ja),document.addEventListener("touchmove",l,Ja),document.addEventListener("touchstart",d,Ja),function(){Za=Za.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,Ja),document.removeEventListener("touchmove",l,Ja),document.removeEventListener("touchstart",d,Ja)}},[]);var g=t.removeScrollBar,v=t.inert;return p.createElement(p.Fragment,null,v?p.createElement(i,{styles:sie(s)}):null,g?p.createElement(_1,{gapMode:"margin"}):null)}const aie=w1(L$,oie);var U$=p.forwardRef(function(t,e){return p.createElement(Vy,bt({},t,{ref:e,sideCar:aie}))});U$.classNames=Vy.classNames;const lie=U$,B$="Dialog",[z$,Ghe]=bse(B$),[cie,ja]=z$(B$),uie=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=p.useRef(null),l=p.useRef(null),[c=!1,d]=Ise({prop:r,defaultProp:s,onChange:i});return p.createElement(cie,{scope:e,triggerRef:a,contentRef:l,contentId:A0(),titleId:A0(),descriptionId:A0(),open:c,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:o},n)},q$="DialogPortal",[die,W$]=z$(q$,{forceMount:void 0}),hie=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=ja(q$,e);return p.createElement(die,{scope:e,forceMount:n},p.Children.map(r,o=>p.createElement(My,{present:n||i.open},p.createElement(Hse,{asChild:!0,container:s},o))))},Qw="DialogOverlay",fie=p.forwardRef((t,e)=>{const n=W$(Qw,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ja(Qw,t.__scopeDialog);return i.modal?p.createElement(My,{present:r||i.open},p.createElement(pie,be({},s,{ref:e}))):null}),pie=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ja(Qw,n);return p.createElement(lie,{as:R1,allowPinchZoom:!0,shards:[s.contentRef]},p.createElement(Oy.div,be({"data-state":H$(s.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),zd="DialogContent",mie=p.forwardRef((t,e)=>{const n=W$(zd,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ja(zd,t.__scopeDialog);return p.createElement(My,{present:r||i.open},i.modal?p.createElement(gie,be({},s,{ref:e})):p.createElement(yie,be({},s,{ref:e})))}),gie=p.forwardRef((t,e)=>{const n=ja(zd,t.__scopeDialog),r=p.useRef(null),s=zh(e,n.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return Uh(i)},[]),p.createElement(G$,be({},t,{ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fl(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:Fl(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Fl(t.onFocusOutside,i=>i.preventDefault())}))}),yie=p.forwardRef((t,e)=>{const n=ja(zd,t.__scopeDialog),r=p.useRef(!1);return p.createElement(G$,be({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i;if((i=t.onCloseAutoFocus)===null||i===void 0||i.call(t,s),!s.defaultPrevented){var o;r.current||(o=n.triggerRef.current)===null||o===void 0||o.focus(),s.preventDefault()}r.current=!1},onInteractOutside:s=>{var i,o;(i=t.onInteractOutside)===null||i===void 0||i.call(t,s),s.defaultPrevented||(r.current=!0);const a=s.target;((o=n.triggerRef.current)===null||o===void 0?void 0:o.contains(a))&&s.preventDefault()}}))}),G$=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=ja(zd,n),l=p.useRef(null),c=zh(e,l);return Yse(),p.createElement(p.Fragment,null,p.createElement(Fse,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i},p.createElement(Vse,be({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":H$(a.open)},o,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)});function H$(t){return t?"open":"closed"}const vie=uie,xie=hie,wie=fie,_ie=mie;var bie='[cmdk-list-sizer=""]',Tu='[cmdk-group=""]',j0='[cmdk-group-items=""]',Eie='[cmdk-group-heading=""]',N1='[cmdk-item=""]',aR=`${N1}:not([aria-disabled="true"])`,Yw="cmdk-item-select",ss="data-value",Tie=(t,e)=>wse(t,e),K$=p.createContext(void 0),qh=()=>p.useContext(K$),Q$=p.createContext(void 0),k1=()=>p.useContext(Q$),Y$=p.createContext(void 0),X$=p.forwardRef((t,e)=>{let n=p.useRef(null),r=al(()=>{var V,q,X;return{search:"",value:(X=(q=t.value)!=null?q:(V=t.defaultValue)==null?void 0:V.toLowerCase())!=null?X:"",filtered:{count:0,items:new Map,groups:new Set}}}),s=al(()=>new Set),i=al(()=>new Map),o=al(()=>new Map),a=al(()=>new Set),l=J$(t),{label:c,children:d,value:h,onValueChange:m,filter:g,shouldFilter:v,vimBindings:y=!0,...w}=t,_=p.useId(),x=p.useId(),b=p.useId(),S=Oie();zc(()=>{if(h!==void 0){let V=h.trim().toLowerCase();r.current.value=V,S(6,j),A.emit()}},[h]);let A=p.useMemo(()=>({subscribe:V=>(a.current.add(V),()=>a.current.delete(V)),snapshot:()=>r.current,setState:(V,q,X)=>{var K,fe,we;if(!Object.is(r.current[V],q)){if(r.current[V]=q,V==="search")R(),I(),S(1,P);else if(V==="value")if(((K=l.current)==null?void 0:K.value)!==void 0){let ge=q??"";(we=(fe=l.current).onValueChange)==null||we.call(fe,ge);return}else X||S(5,j);A.emit()}},emit:()=>{a.current.forEach(V=>V())}}),[]),D=p.useMemo(()=>({value:(V,q)=>{q!==o.current.get(V)&&(o.current.set(V,q),r.current.filtered.items.set(V,C(q)),S(2,()=>{I(),A.emit()}))},item:(V,q)=>(s.current.add(V),q&&(i.current.has(q)?i.current.get(q).add(V):i.current.set(q,new Set([V]))),S(3,()=>{R(),I(),r.current.value||P(),A.emit()}),()=>{o.current.delete(V),s.current.delete(V),r.current.filtered.items.delete(V);let X=O();S(4,()=>{R(),(X==null?void 0:X.getAttribute("id"))===V&&P(),A.emit()})}),group:V=>(i.current.has(V)||i.current.set(V,new Set),()=>{o.current.delete(V),i.current.delete(V)}),filter:()=>l.current.shouldFilter,label:c||t["aria-label"],commandRef:n,listId:_,inputId:b,labelId:x}),[]);function C(V){var q,X;let K=(X=(q=l.current)==null?void 0:q.filter)!=null?X:Tie;return V?K(V,r.current.search):0}function I(){if(!n.current||!r.current.search||l.current.shouldFilter===!1)return;let V=r.current.filtered.items,q=[];r.current.filtered.groups.forEach(K=>{let fe=i.current.get(K),we=0;fe.forEach(ge=>{let ne=V.get(ge);we=Math.max(ne,we)}),q.push([K,we])});let X=n.current.querySelector(bie);k().sort((K,fe)=>{var we,ge;let ne=K.getAttribute(ss),Se=fe.getAttribute(ss);return((we=V.get(Se))!=null?we:0)-((ge=V.get(ne))!=null?ge:0)}).forEach(K=>{let fe=K.closest(j0);fe?fe.appendChild(K.parentElement===fe?K:K.closest(`${j0} > *`)):X.appendChild(K.parentElement===X?K:K.closest(`${j0} > *`))}),q.sort((K,fe)=>fe[1]-K[1]).forEach(K=>{let fe=n.current.querySelector(`${Tu}[${ss}="${K[0]}"]`);fe==null||fe.parentElement.appendChild(fe)})}function P(){let V=k().find(X=>!X.ariaDisabled),q=V==null?void 0:V.getAttribute(ss);A.setState("value",q||void 0)}function R(){if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=s.current.size;return}r.current.filtered.groups=new Set;let V=0;for(let q of s.current){let X=o.current.get(q),K=C(X);r.current.filtered.items.set(q,K),K>0&&V++}for(let[q,X]of i.current)for(let K of X)if(r.current.filtered.items.get(K)>0){r.current.filtered.groups.add(q);break}r.current.filtered.count=V}function j(){var V,q,X;let K=O();K&&(((V=K.parentElement)==null?void 0:V.firstChild)===K&&((X=(q=K.closest(Tu))==null?void 0:q.querySelector(Eie))==null||X.scrollIntoView({block:"nearest"})),K.scrollIntoView({block:"nearest"}))}function O(){var V;return(V=n.current)==null?void 0:V.querySelector(`${N1}[aria-selected="true"]`)}function k(){return Array.from(n.current.querySelectorAll(aR))}function W(V){let q=k()[V];q&&A.setState("value",q.getAttribute(ss))}function z(V){var q;let X=O(),K=k(),fe=K.findIndex(ge=>ge===X),we=K[fe+V];(q=l.current)!=null&&q.loop&&(we=fe+V<0?K[K.length-1]:fe+V===K.length?K[0]:K[fe+V]),we&&A.setState("value",we.getAttribute(ss))}function G(V){let q=O(),X=q==null?void 0:q.closest(Tu),K;for(;X&&!K;)X=V>0?Die(X,Tu):jie(X,Tu),K=X==null?void 0:X.querySelector(aR);K?A.setState("value",K.getAttribute(ss)):z(V)}let H=()=>W(k().length-1),M=V=>{V.preventDefault(),V.metaKey?H():V.altKey?G(1):z(1)},F=V=>{V.preventDefault(),V.metaKey?W(0):V.altKey?G(-1):z(-1)};return p.createElement("div",{ref:Wh([n,e]),...w,"cmdk-root":"",onKeyDown:V=>{var q;if((q=w.onKeyDown)==null||q.call(w,V),!V.defaultPrevented)switch(V.key){case"n":case"j":{y&&V.ctrlKey&&M(V);break}case"ArrowDown":{M(V);break}case"p":case"k":{y&&V.ctrlKey&&F(V);break}case"ArrowUp":{F(V);break}case"Home":{V.preventDefault(),W(0);break}case"End":{V.preventDefault(),H();break}case"Enter":if(!V.nativeEvent.isComposing){V.preventDefault();let X=O();if(X){let K=new Event(Yw);X.dispatchEvent(K)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:D.inputId,id:D.labelId,style:Mie},c),p.createElement(Q$.Provider,{value:A},p.createElement(K$.Provider,{value:D},d)))}),Sie=p.forwardRef((t,e)=>{var n,r;let s=p.useId(),i=p.useRef(null),o=p.useContext(Y$),a=qh(),l=J$(t),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;zc(()=>a.item(s,o==null?void 0:o.id),[]);let d=Z$(s,i,[t.value,t.children,i]),h=k1(),m=ya(A=>A.value&&A.value===d.current),g=ya(A=>c||a.filter()===!1?!0:A.search?A.filtered.items.get(s)>0:!0);p.useEffect(()=>{let A=i.current;if(!(!A||t.disabled))return A.addEventListener(Yw,v),()=>A.removeEventListener(Yw,v)},[g,t.onSelect,t.disabled]);function v(){var A,D;y(),(D=(A=l.current).onSelect)==null||D.call(A,d.current)}function y(){h.setState("value",d.current,!0)}if(!g)return null;let{disabled:w,value:_,onSelect:x,forceMount:b,...S}=t;return p.createElement("div",{ref:Wh([i,e]),...S,id:s,"cmdk-item":"",role:"option","aria-disabled":w||void 0,"aria-selected":m||void 0,"data-disabled":w||void 0,"data-selected":m||void 0,onPointerMove:w?void 0:y,onClick:w?void 0:v},t.children)}),Iie=p.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:s,...i}=t,o=p.useId(),a=p.useRef(null),l=p.useRef(null),c=p.useId(),d=qh(),h=ya(v=>s||d.filter()===!1?!0:v.search?v.filtered.groups.has(o):!0);zc(()=>d.group(o),[]),Z$(o,a,[t.value,t.heading,l]);let m=p.useMemo(()=>({id:o,forceMount:s}),[s]),g=p.createElement(Y$.Provider,{value:m},r);return p.createElement("div",{ref:Wh([a,e]),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&p.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},g))}),Cie=p.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,s=p.useRef(null),i=ya(o=>!o.search);return!n&&!i?null:p.createElement("div",{ref:Wh([s,e]),...r,"cmdk-separator":"",role:"separator"})}),Pie=p.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,s=t.value!=null,i=k1(),o=ya(d=>d.search),a=ya(d=>d.value),l=qh(),c=p.useMemo(()=>{var d;let h=(d=l.commandRef.current)==null?void 0:d.querySelector(`${N1}[${ss}="${a}"]`);return h==null?void 0:h.getAttribute("id")},[a,l.commandRef]);return p.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),p.createElement("input",{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":c,id:l.inputId,type:"text",value:s?t.value:o,onChange:d=>{s||i.setState("search",d.target.value),n==null||n(d.target.value)}})}),Aie=p.forwardRef((t,e)=>{let{children:n,...r}=t,s=p.useRef(null),i=p.useRef(null),o=qh();return p.useEffect(()=>{if(i.current&&s.current){let a=i.current,l=s.current,c,d=new ResizeObserver(()=>{c=requestAnimationFrame(()=>{let h=a.offsetHeight;l.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return d.observe(a),()=>{cancelAnimationFrame(c),d.unobserve(a)}}},[]),p.createElement("div",{ref:Wh([s,e]),...r,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:o.listId,"aria-labelledby":o.inputId},p.createElement("div",{ref:i,"cmdk-list-sizer":""},n))}),Rie=p.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:s,contentClassName:i,container:o,...a}=t;return p.createElement(vie,{open:n,onOpenChange:r},p.createElement(xie,{container:o},p.createElement(wie,{"cmdk-overlay":"",className:s}),p.createElement(_ie,{"aria-label":t.label,"cmdk-dialog":"",className:i},p.createElement(X$,{ref:e,...a}))))}),Nie=p.forwardRef((t,e)=>{let n=p.useRef(!0),r=ya(s=>s.filtered.count===0);return p.useEffect(()=>{n.current=!1},[]),n.current||!r?null:p.createElement("div",{ref:e,...t,"cmdk-empty":"",role:"presentation"})}),kie=p.forwardRef((t,e)=>{let{progress:n,children:r,...s}=t;return p.createElement("div",{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},p.createElement("div",{"aria-hidden":!0},r))}),Fn=Object.assign(X$,{List:Aie,Item:Sie,Input:Pie,Group:Iie,Separator:Cie,Dialog:Rie,Empty:Nie,Loading:kie});function Die(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function jie(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function J$(t){let e=p.useRef(t);return zc(()=>{e.current=t}),e}var zc=typeof window>"u"?p.useEffect:p.useLayoutEffect;function al(t){let e=p.useRef();return e.current===void 0&&(e.current=t()),e}function Wh(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function ya(t){let e=k1(),n=()=>t(e.snapshot());return p.useSyncExternalStore(e.subscribe,n,n)}function Z$(t,e,n){let r=p.useRef(),s=qh();return zc(()=>{var i;let o=(()=>{var a;for(let l of n){if(typeof l=="string")return l.trim().toLowerCase();if(typeof l=="object"&&"current"in l)return l.current?(a=l.current.textContent)==null?void 0:a.trim().toLowerCase():r.current}})();s.value(t,o),(i=e.current)==null||i.setAttribute(ss,o),r.current=o}),r}var Oie=()=>{let[t,e]=p.useState(),n=al(()=>new Map);return zc(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,s)=>{n.current.set(r,s),e({})}},Mie={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const e4=p.forwardRef(({className:t,...e},n)=>u.jsx(Fn,{ref:n,className:ae("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));e4.displayName=Fn.displayName;const t4=p.forwardRef(({className:t,...e},n)=>u.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[u.jsx(Vh,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),u.jsx(Fn.Input,{ref:n,className:ae("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));t4.displayName=Fn.Input.displayName;const n4=p.forwardRef(({className:t,...e},n)=>u.jsx(Fn.List,{ref:n,className:ae("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));n4.displayName=Fn.List.displayName;const r4=p.forwardRef((t,e)=>u.jsx(Fn.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));r4.displayName=Fn.Empty.displayName;const s4=p.forwardRef(({className:t,...e},n)=>u.jsx(Fn.Group,{ref:n,className:ae("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));s4.displayName=Fn.Group.displayName;const Vie=p.forwardRef(({className:t,...e},n)=>u.jsx(Fn.Separator,{ref:n,className:ae("-mx-1 my-1 h-px bg-border",t),...e}));Vie.displayName=Fn.Separator.displayName;const i4=p.forwardRef(({className:t,...e},n)=>u.jsx(Fn.Item,{ref:n,className:ae("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...e}));i4.displayName=Fn.Item.displayName;function o4(t){const e=Lie(t),n=p.forwardRef((r,s)=>{const{children:i,...o}=r,a=p.Children.toArray(i),l=a.find(Fie);if(l){const c=l.props.children,d=a.map(h=>h===l?p.Children.count(c)>1?p.Children.only(null):p.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:s,children:p.isValidElement(c)?p.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function Lie(t){const e=p.forwardRef((n,r)=>{const{children:s,...i}=n;if(p.isValidElement(s)){const o=Bie(s),a=Uie(i,s.props);return s.type!==p.Fragment&&(a.ref=r?_y(r,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var $ie=Symbol("radix.slottable");function Fie(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$ie}function Uie(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function Bie(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zie=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ys=zie.reduce((t,e)=>{const n=o4(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function qie(t,e){t&&Nr.flushSync(()=>t.dispatchEvent(e))}var Wie="DismissableLayer",Xw="dismissableLayer.update",Gie="dismissableLayer.pointerDownOutside",Hie="dismissableLayer.focusOutside",lR,a4=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),l4=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=p.useContext(a4),[d,h]=p.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=p.useState({}),v=Ae(e,C=>h(C)),y=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=y.indexOf(w),x=d?y.indexOf(d):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=x>=_,A=Yie(C=>{const I=C.target,P=[...c.branches].some(R=>R.contains(I));!S||P||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},m),D=Xie(C=>{const I=C.target;[...c.branches].some(R=>R.contains(I))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},m);return YV(C=>{x===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},m),p.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(lR=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),cR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=lR)}},[d,m,n,c]),p.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),cR())},[d,c]),p.useEffect(()=>{const C=()=>g({});return document.addEventListener(Xw,C),()=>document.removeEventListener(Xw,C)},[]),u.jsx(Ys.div,{...l,ref:v,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:ce(t.onFocusCapture,D.onFocusCapture),onBlurCapture:ce(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:ce(t.onPointerDownCapture,A.onPointerDownCapture)})});l4.displayName=Wie;var Kie="DismissableLayerBranch",Qie=p.forwardRef((t,e)=>{const n=p.useContext(a4),r=p.useRef(null),s=Ae(e,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),u.jsx(Ys.div,{...t,ref:s})});Qie.displayName=Kie;function Yie(t,e=globalThis==null?void 0:globalThis.document){const n=qt(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){c4(Gie,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Xie(t,e=globalThis==null?void 0:globalThis.document){const n=qt(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&c4(Hie,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function cR(){const t=new CustomEvent(Xw);document.dispatchEvent(t)}function c4(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?qie(s,i):s.dispatchEvent(i)}var O0="focusScope.autoFocusOnMount",M0="focusScope.autoFocusOnUnmount",uR={bubbles:!1,cancelable:!0},Jie="FocusScope",u4=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=p.useState(null),c=qt(s),d=qt(i),h=p.useRef(null),m=Ae(e,y=>l(y)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let y=function(b){if(g.paused||!a)return;const S=b.target;a.contains(S)?h.current=S:ci(h.current,{select:!0})},w=function(b){if(g.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||ci(h.current,{select:!0}))},_=function(b){if(document.activeElement===document.body)for(const A of b)A.removedNodes.length>0&&ci(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const x=new MutationObserver(_);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),x.disconnect()}}},[r,a,g.paused]),p.useEffect(()=>{if(a){hR.add(g);const y=document.activeElement;if(!a.contains(y)){const _=new CustomEvent(O0,uR);a.addEventListener(O0,c),a.dispatchEvent(_),_.defaultPrevented||(Zie(soe(d4(a)),{select:!0}),document.activeElement===y&&ci(a))}return()=>{a.removeEventListener(O0,c),setTimeout(()=>{const _=new CustomEvent(M0,uR);a.addEventListener(M0,d),a.dispatchEvent(_),_.defaultPrevented||ci(y??document.body,{select:!0}),a.removeEventListener(M0,d),hR.remove(g)},0)}}},[a,c,d,g]);const v=p.useCallback(y=>{if(!n&&!r||g.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,_=document.activeElement;if(w&&_){const x=y.currentTarget,[b,S]=eoe(x);b&&S?!y.shiftKey&&_===S?(y.preventDefault(),n&&ci(b,{select:!0})):y.shiftKey&&_===b&&(y.preventDefault(),n&&ci(S,{select:!0})):_===x&&y.preventDefault()}},[n,r,g.paused]);return u.jsx(Ys.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});u4.displayName=Jie;function Zie(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ci(r,{select:e}),document.activeElement!==n)return}function eoe(t){const e=d4(t),n=dR(e,t),r=dR(e.reverse(),t);return[n,r]}function d4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function dR(t,e){for(const n of t)if(!toe(n,{upTo:e}))return n}function toe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function noe(t){return t instanceof HTMLInputElement&&"select"in t}function ci(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&noe(t)&&e&&t.select()}}var hR=roe();function roe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=fR(t,e),t.unshift(e)},remove(e){var n;t=fR(t,e),(n=t[0])==null||n.resume()}}}function fR(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function soe(t){return t.filter(e=>e.tagName!=="A")}const ioe=["top","right","bottom","left"],eo=Math.min,Wn=Math.max,eg=Math.round,ap=Math.floor,Kr=t=>({x:t,y:t}),ooe={left:"right",right:"left",bottom:"top",top:"bottom"},aoe={start:"end",end:"start"};function Jw(t,e,n){return Wn(t,eo(e,n))}function Ms(t,e){return typeof t=="function"?t(e):t}function Vs(t){return t.split("-")[0]}function qc(t){return t.split("-")[1]}function D1(t){return t==="x"?"y":"x"}function j1(t){return t==="y"?"height":"width"}function Es(t){return["top","bottom"].includes(Vs(t))?"y":"x"}function O1(t){return D1(Es(t))}function loe(t,e,n){n===void 0&&(n=!1);const r=qc(t),s=O1(t),i=j1(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=tg(o)),[o,tg(o)]}function coe(t){const e=tg(t);return[Zw(t),e,Zw(e)]}function Zw(t){return t.replace(/start|end/g,e=>aoe[e])}function uoe(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function doe(t,e,n,r){const s=qc(t);let i=uoe(Vs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Zw)))),i}function tg(t){return t.replace(/left|right|bottom|top/g,e=>ooe[e])}function hoe(t){return{top:0,right:0,bottom:0,left:0,...t}}function h4(t){return typeof t!="number"?hoe(t):{top:t,right:t,bottom:t,left:t}}function ng(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function pR(t,e,n){let{reference:r,floating:s}=t;const i=Es(e),o=O1(e),a=j1(o),l=Vs(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let g;switch(l){case"top":g={x:d,y:r.y-s.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-s.width,y:h};break;default:g={x:r.x,y:r.y}}switch(qc(e)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const foe=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=pR(c,r,l),m=r,g={},v=0;for(let y=0;y<a.length;y++){const{name:w,fn:_}=a[y],{x,y:b,data:S,reset:A}=await _({x:d,y:h,initialPlacement:r,placement:m,strategy:s,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});d=x??d,h=b??h,g={...g,[w]:{...g[w],...S}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(m=A.placement),A.rects&&(c=A.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):A.rects),{x:d,y:h}=pR(c,m,l)),y=-1)}return{x:d,y:h,placement:m,strategy:s,middlewareData:g}};async function qd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Ms(e,t),v=h4(g),w=a[m?h==="floating"?"reference":"floating":h],_=ng(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),x=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),S=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},A=ng(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:b,strategy:l}):x);return{top:(_.top-A.top+v.top)/S.y,bottom:(A.bottom-_.bottom+v.bottom)/S.y,left:(_.left-A.left+v.left)/S.x,right:(A.right-_.right+v.right)/S.x}}const poe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Ms(t,e)||{};if(c==null)return{};const h=h4(d),m={x:n,y:r},g=O1(s),v=j1(g),y=await o.getDimensions(c),w=g==="y",_=w?"top":"left",x=w?"bottom":"right",b=w?"clientHeight":"clientWidth",S=i.reference[v]+i.reference[g]-m[g]-i.floating[v],A=m[g]-i.reference[g],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=D?D[b]:0;(!C||!await(o.isElement==null?void 0:o.isElement(D)))&&(C=a.floating[b]||i.floating[v]);const I=S/2-A/2,P=C/2-y[v]/2-1,R=eo(h[_],P),j=eo(h[x],P),O=R,k=C-y[v]-j,W=C/2-y[v]/2+I,z=Jw(O,W,k),G=!l.arrow&&qc(s)!=null&&W!==z&&i.reference[v]/2-(W<O?R:j)-y[v]/2<0,H=G?W<O?W-O:W-k:0;return{[g]:m[g]+H,data:{[g]:z,centerOffset:W-z-H,...G&&{alignmentOffset:H}},reset:G}}}),moe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...w}=Ms(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=Vs(s),x=Es(a),b=Vs(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=m||(b||!y?[tg(a)]:coe(a)),D=v!=="none";!m&&D&&A.push(...doe(a,y,v,S));const C=[a,...A],I=await qd(e,w),P=[];let R=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&P.push(I[_]),h){const z=loe(s,o,S);P.push(I[z[0]],I[z[1]])}if(R=[...R,{placement:s,overflows:P}],!P.every(z=>z<=0)){var j,O;const z=(((j=i.flip)==null?void 0:j.index)||0)+1,G=C[z];if(G){var k;const M=h==="alignment"?x!==Es(G):!1,F=((k=R[0])==null?void 0:k.overflows[0])>0;if(!M||F)return{data:{index:z,overflows:R},reset:{placement:G}}}let H=(O=R.filter(M=>M.overflows[0]<=0).sort((M,F)=>M.overflows[1]-F.overflows[1])[0])==null?void 0:O.placement;if(!H)switch(g){case"bestFit":{var W;const M=(W=R.filter(F=>{if(D){const V=Es(F.placement);return V===x||V==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(V=>V>0).reduce((V,q)=>V+q,0)]).sort((F,V)=>F[1]-V[1])[0])==null?void 0:W[0];M&&(H=M);break}case"initialPlacement":H=a;break}if(s!==H)return{reset:{placement:H}}}return{}}}};function mR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function gR(t){return ioe.some(e=>t[e]>=0)}const goe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ms(t,e);switch(r){case"referenceHidden":{const i=await qd(e,{...s,elementContext:"reference"}),o=mR(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:gR(o)}}}case"escaped":{const i=await qd(e,{...s,altBoundary:!0}),o=mR(i,n.floating);return{data:{escapedOffsets:o,escaped:gR(o)}}}default:return{}}}}};async function yoe(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Vs(n),a=qc(n),l=Es(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=Ms(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),l?{x:g*d,y:m*c}:{x:m*c,y:g*d}}const voe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await yoe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},xoe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:_,y:x}=w;return{x:_,y:x}}},...l}=Ms(t,e),c={x:n,y:r},d=await qd(e,l),h=Es(Vs(s)),m=D1(h);let g=c[m],v=c[h];if(i){const w=m==="y"?"top":"left",_=m==="y"?"bottom":"right",x=g+d[w],b=g-d[_];g=Jw(x,g,b)}if(o){const w=h==="y"?"top":"left",_=h==="y"?"bottom":"right",x=v+d[w],b=v-d[_];v=Jw(x,v,b)}const y=a.fn({...e,[m]:g,[h]:v});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[m]:i,[h]:o}}}}}},woe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ms(t,e),d={x:n,y:r},h=Es(s),m=D1(h);let g=d[m],v=d[h];const y=Ms(a,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const b=m==="y"?"height":"width",S=i.reference[m]-i.floating[b]+w.mainAxis,A=i.reference[m]+i.reference[b]-w.mainAxis;g<S?g=S:g>A&&(g=A)}if(c){var _,x;const b=m==="y"?"width":"height",S=["top","left"].includes(Vs(s)),A=i.reference[h]-i.floating[b]+(S&&((_=o.offset)==null?void 0:_[h])||0)+(S?0:w.crossAxis),D=i.reference[h]+i.reference[b]+(S?0:((x=o.offset)==null?void 0:x[h])||0)-(S?w.crossAxis:0);v<A?v=A:v>D&&(v=D)}return{[m]:g,[h]:v}}}},_oe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ms(t,e),d=await qd(e,c),h=Vs(s),m=qc(s),g=Es(s)==="y",{width:v,height:y}=i.floating;let w,_;h==="top"||h==="bottom"?(w=h,_=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=h,w=m==="end"?"top":"bottom");const x=y-d.top-d.bottom,b=v-d.left-d.right,S=eo(y-d[w],x),A=eo(v-d[_],b),D=!e.middlewareData.shift;let C=S,I=A;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=x),D&&!m){const R=Wn(d.left,0),j=Wn(d.right,0),O=Wn(d.top,0),k=Wn(d.bottom,0);g?I=v-2*(R!==0||j!==0?R+j:Wn(d.left,d.right)):C=y-2*(O!==0||k!==0?O+k:Wn(d.top,d.bottom))}await l({...e,availableWidth:I,availableHeight:C});const P=await o.getDimensions(a.floating);return v!==P.width||y!==P.height?{reset:{rects:!0}}:{}}}};function Ly(){return typeof window<"u"}function Wc(t){return f4(t)?(t.nodeName||"").toLowerCase():"#document"}function Yn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Zr(t){var e;return(e=(f4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function f4(t){return Ly()?t instanceof Node||t instanceof Yn(t).Node:!1}function Ar(t){return Ly()?t instanceof Element||t instanceof Yn(t).Element:!1}function Yr(t){return Ly()?t instanceof HTMLElement||t instanceof Yn(t).HTMLElement:!1}function yR(t){return!Ly()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Yn(t).ShadowRoot}function Gh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Rr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function boe(t){return["table","td","th"].includes(Wc(t))}function $y(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function M1(t){const e=V1(),n=Ar(t)?Rr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Eoe(t){let e=to(t);for(;Yr(e)&&!wc(e);){if(M1(e))return e;if($y(e))return null;e=to(e)}return null}function V1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wc(t){return["html","body","#document"].includes(Wc(t))}function Rr(t){return Yn(t).getComputedStyle(t)}function Fy(t){return Ar(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function to(t){if(Wc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||yR(t)&&t.host||Zr(t);return yR(e)?e.host:e}function p4(t){const e=to(t);return wc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Yr(e)&&Gh(e)?e:p4(e)}function Wd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=p4(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Yn(s);if(i){const a=e_(o);return e.concat(o,o.visualViewport||[],Gh(s)?s:[],a&&n?Wd(a):[])}return e.concat(s,Wd(s,[],n))}function e_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function m4(t){const e=Rr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Yr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=eg(n)!==i||eg(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function L1(t){return Ar(t)?t:t.contextElement}function Ul(t){const e=L1(t);if(!Yr(e))return Kr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=m4(e);let o=(i?eg(n.width):n.width)/r,a=(i?eg(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Toe=Kr(0);function g4(t){const e=Yn(t);return!V1()||!e.visualViewport?Toe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Soe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Yn(t)?!1:e}function va(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=L1(t);let o=Kr(1);e&&(r?Ar(r)&&(o=Ul(r)):o=Ul(t));const a=Soe(i,n,r)?g4(i):Kr(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const m=Yn(i),g=r&&Ar(r)?Yn(r):r;let v=m,y=e_(v);for(;y&&r&&g!==v;){const w=Ul(y),_=y.getBoundingClientRect(),x=Rr(y),b=_.left+(y.clientLeft+parseFloat(x.paddingLeft))*w.x,S=_.top+(y.clientTop+parseFloat(x.paddingTop))*w.y;l*=w.x,c*=w.y,d*=w.x,h*=w.y,l+=b,c+=S,v=Yn(y),y=e_(v)}}return ng({width:d,height:h,x:l,y:c})}function $1(t,e){const n=Fy(t).scrollLeft;return e?e.left+n:va(Zr(t)).left+n}function y4(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:$1(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function Ioe(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Zr(r),a=e?$y(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Kr(1);const d=Kr(0),h=Yr(r);if((h||!h&&!i)&&((Wc(r)!=="body"||Gh(o))&&(l=Fy(r)),Yr(r))){const g=va(r);c=Ul(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const m=o&&!h&&!i?y4(o,l,!0):Kr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+m.x,y:n.y*c.y-l.scrollTop*c.y+d.y+m.y}}function Coe(t){return Array.from(t.getClientRects())}function Poe(t){const e=Zr(t),n=Fy(t),r=t.ownerDocument.body,s=Wn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Wn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+$1(t);const a=-n.scrollTop;return Rr(r).direction==="rtl"&&(o+=Wn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function Aoe(t,e){const n=Yn(t),r=Zr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=V1();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function Roe(t,e){const n=va(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Yr(t)?Ul(t):Kr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function vR(t,e,n){let r;if(e==="viewport")r=Aoe(t,n);else if(e==="document")r=Poe(Zr(t));else if(Ar(e))r=Roe(e,n);else{const s=g4(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return ng(r)}function v4(t,e){const n=to(t);return n===e||!Ar(n)||wc(n)?!1:Rr(n).position==="fixed"||v4(n,e)}function Noe(t,e){const n=e.get(t);if(n)return n;let r=Wd(t,[],!1).filter(a=>Ar(a)&&Wc(a)!=="body"),s=null;const i=Rr(t).position==="fixed";let o=i?to(t):t;for(;Ar(o)&&!wc(o);){const a=Rr(o),l=M1(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Gh(o)&&!l&&v4(t,o))?r=r.filter(d=>d!==o):s=a,o=to(o)}return e.set(t,r),r}function koe(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?$y(e)?[]:Noe(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=vR(e,d,s);return c.top=Wn(h.top,c.top),c.right=eo(h.right,c.right),c.bottom=eo(h.bottom,c.bottom),c.left=Wn(h.left,c.left),c},vR(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Doe(t){const{width:e,height:n}=m4(t);return{width:e,height:n}}function joe(t,e,n){const r=Yr(e),s=Zr(e),i=n==="fixed",o=va(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Kr(0);function c(){l.x=$1(s)}if(r||!r&&!i)if((Wc(e)!=="body"||Gh(s))&&(a=Fy(e)),r){const g=va(e,!0,i,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else s&&c();i&&!r&&s&&c();const d=s&&!r&&!i?y4(s,a):Kr(0),h=o.left+a.scrollLeft-l.x-d.x,m=o.top+a.scrollTop-l.y-d.y;return{x:h,y:m,width:o.width,height:o.height}}function V0(t){return Rr(t).position==="static"}function xR(t,e){if(!Yr(t)||Rr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Zr(t)===n&&(n=n.ownerDocument.body),n}function x4(t,e){const n=Yn(t);if($y(t))return n;if(!Yr(t)){let s=to(t);for(;s&&!wc(s);){if(Ar(s)&&!V0(s))return s;s=to(s)}return n}let r=xR(t,e);for(;r&&boe(r)&&V0(r);)r=xR(r,e);return r&&wc(r)&&V0(r)&&!M1(r)?n:r||Eoe(t)||n}const Ooe=async function(t){const e=this.getOffsetParent||x4,n=this.getDimensions,r=await n(t.floating);return{reference:joe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Moe(t){return Rr(t).direction==="rtl"}const Voe={convertOffsetParentRelativeRectToViewportRelativeRect:Ioe,getDocumentElement:Zr,getClippingRect:koe,getOffsetParent:x4,getElementRects:Ooe,getClientRects:Coe,getDimensions:Doe,getScale:Ul,isElement:Ar,isRTL:Moe};function w4(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Loe(t,e){let n=null,r;const s=Zr(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:m,height:g}=c;if(a||e(),!m||!g)return;const v=ap(h),y=ap(s.clientWidth-(d+m)),w=ap(s.clientHeight-(h+g)),_=ap(d),b={rootMargin:-v+"px "+-y+"px "+-w+"px "+-_+"px",threshold:Wn(0,eo(1,l))||1};let S=!0;function A(D){const C=D[0].intersectionRatio;if(C!==l){if(!S)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!w4(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(A,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(A,b)}n.observe(t)}return o(!0),i}function F1(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=L1(t),d=s||i?[...c?Wd(c):[],...Wd(e)]:[];d.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const h=c&&a?Loe(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(_=>{let[x]=_;x&&x.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=g)==null||b.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let v,y=l?va(t):null;l&&w();function w(){const _=va(t);y&&!w4(y,_)&&n(),y=_,v=requestAnimationFrame(w)}return n(),()=>{var _;d.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),h==null||h(),(_=g)==null||_.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const $oe=voe,Foe=xoe,Uoe=moe,Boe=_oe,zoe=goe,wR=poe,qoe=woe,Woe=(t,e,n)=>{const r=new Map,s={platform:Voe,...n},i={...s.platform,_c:r};return foe(t,e,{...s,platform:i})};var zp=typeof document<"u"?p.useLayoutEffect:p.useEffect;function rg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!rg(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!rg(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function _4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function _R(t,e){const n=_4(t);return Math.round(e*n)/n}function L0(t){const e=p.useRef(t);return zp(()=>{e.current=t}),e}function U1(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=p.useState(r);rg(m,r)||g(r);const[v,y]=p.useState(null),[w,_]=p.useState(null),x=p.useCallback(M=>{M!==D.current&&(D.current=M,y(M))},[]),b=p.useCallback(M=>{M!==C.current&&(C.current=M,_(M))},[]),S=i||v,A=o||w,D=p.useRef(null),C=p.useRef(null),I=p.useRef(d),P=l!=null,R=L0(l),j=L0(s),O=L0(c),k=p.useCallback(()=>{if(!D.current||!C.current)return;const M={placement:e,strategy:n,middleware:m};j.current&&(M.platform=j.current),Woe(D.current,C.current,M).then(F=>{const V={...F,isPositioned:O.current!==!1};W.current&&!rg(I.current,V)&&(I.current=V,Nr.flushSync(()=>{h(V)}))})},[m,e,n,j,O]);zp(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,h(M=>({...M,isPositioned:!1})))},[c]);const W=p.useRef(!1);zp(()=>(W.current=!0,()=>{W.current=!1}),[]),zp(()=>{if(S&&(D.current=S),A&&(C.current=A),S&&A){if(R.current)return R.current(S,A,k);k()}},[S,A,k,R,P]);const z=p.useMemo(()=>({reference:D,floating:C,setReference:x,setFloating:b}),[x,b]),G=p.useMemo(()=>({reference:S,floating:A}),[S,A]),H=p.useMemo(()=>{const M={position:n,left:0,top:0};if(!G.floating)return M;const F=_R(G.floating,d.x),V=_R(G.floating,d.y);return a?{...M,transform:"translate("+F+"px, "+V+"px)",..._4(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:V}},[n,a,G.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:k,refs:z,elements:G,floatingStyles:H}),[d,k,z,G,H])}const Goe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?wR({element:r.current,padding:s}).fn(n):{}:r?wR({element:r,padding:s}).fn(n):{}}}},B1=(t,e)=>({...$oe(t),options:[t,e]}),z1=(t,e)=>({...Foe(t),options:[t,e]}),q1=(t,e)=>({...qoe(t),options:[t,e]}),W1=(t,e)=>({...Uoe(t),options:[t,e]}),G1=(t,e)=>({...Boe(t),options:[t,e]}),H1=(t,e)=>({...zoe(t),options:[t,e]}),K1=(t,e)=>({...Goe(t),options:[t,e]});var Hoe="Arrow",b4=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return u.jsx(Ys.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});b4.displayName=Hoe;var Koe=b4,Q1="Popper",[E4,T4]=gr(Q1),[Qoe,S4]=E4(Q1),I4=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return u.jsx(Qoe,{scope:e,anchor:r,onAnchorChange:s,children:n})};I4.displayName=Q1;var C4="PopperAnchor",P4=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=S4(C4,n),o=p.useRef(null),a=Ae(e,o);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:u.jsx(Ys.div,{...s,ref:a})});P4.displayName=C4;var Y1="PopperContent",[Yoe,Xoe]=E4(Y1),A4=p.forwardRef((t,e)=>{var ne,Se,Ie,xe,ye,Ce;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...y}=t,w=S4(Y1,n),[_,x]=p.useState(null),b=Ae(e,Be=>x(Be)),[S,A]=p.useState(null),D=Py(S),C=(D==null?void 0:D.width)??0,I=(D==null?void 0:D.height)??0,P=r+(i!=="center"?"-"+i:""),R=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},j=Array.isArray(c)?c:[c],O=j.length>0,k={padding:R,boundary:j.filter(Zoe),altBoundary:O},{refs:W,floatingStyles:z,placement:G,isPositioned:H,middlewareData:M}=U1({strategy:"fixed",placement:P,whileElementsMounted:(...Be)=>F1(...Be,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[B1({mainAxis:s+I,alignmentAxis:o}),l&&z1({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?q1():void 0,...k}),l&&W1({...k}),G1({...k,apply:({elements:Be,rects:ct,availableWidth:Gt,availableHeight:Un})=>{const{width:nr,height:mo}=ct.reference,Cn=Be.floating.style;Cn.setProperty("--radix-popper-available-width",`${Gt}px`),Cn.setProperty("--radix-popper-available-height",`${Un}px`),Cn.setProperty("--radix-popper-anchor-width",`${nr}px`),Cn.setProperty("--radix-popper-anchor-height",`${mo}px`)}}),S&&K1({element:S,padding:a}),eae({arrowWidth:C,arrowHeight:I}),m&&H1({strategy:"referenceHidden",...k})]}),[F,V]=k4(G),q=qt(v);pr(()=>{H&&(q==null||q())},[H,q]);const X=(ne=M.arrow)==null?void 0:ne.x,K=(Se=M.arrow)==null?void 0:Se.y,fe=((Ie=M.arrow)==null?void 0:Ie.centerOffset)!==0,[we,ge]=p.useState();return pr(()=>{_&&ge(window.getComputedStyle(_).zIndex)},[_]),u.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:H?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[(xe=M.transformOrigin)==null?void 0:xe.x,(ye=M.transformOrigin)==null?void 0:ye.y].join(" "),...((Ce=M.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:u.jsx(Yoe,{scope:n,placedSide:F,onArrowChange:A,arrowX:X,arrowY:K,shouldHideArrow:fe,children:u.jsx(Ys.div,{"data-side":F,"data-align":V,...y,ref:b,style:{...y.style,animation:H?void 0:"none"}})})})});A4.displayName=Y1;var R4="PopperArrow",Joe={top:"bottom",right:"left",bottom:"top",left:"right"},N4=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=Xoe(R4,r),o=Joe[i.placedSide];return u.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:u.jsx(Koe,{...s,ref:n,style:{...s.style,display:"block"}})})});N4.displayName=R4;function Zoe(t){return t!==null}var eae=t=>({name:"transformOrigin",options:t,fn(e){var w,_,x;const{placement:n,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=k4(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,g=(((x=s.arrow)==null?void 0:x.y)??0)+l/2;let v="",y="";return c==="bottom"?(v=o?h:`${m}px`,y=`${-l}px`):c==="top"?(v=o?h:`${m}px`,y=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,y=o?h:`${g}px`):c==="left"&&(v=`${r.floating.width+l}px`,y=o?h:`${g}px`),{data:{x:v,y}}}});function k4(t){const[e,n="center"]=t.split("-");return[e,n]}var tae=I4,D4=P4,nae=A4,rae=N4,sae="Portal",j4=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=p.useState(!1);pr(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Cg.createPortal(u.jsx(Ys.div,{...r,ref:e}),o):null});j4.displayName=sae;var Uy="Popover",[O4,Hhe]=gr(Uy,[T4]),Hh=T4(),[iae,po]=O4(Uy),M4=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=t,a=Hh(e),l=p.useRef(null),[c,d]=p.useState(!1),[h,m]=Na({prop:r,defaultProp:s??!1,onChange:i,caller:Uy});return u.jsx(tae,{...a,children:u.jsx(iae,{scope:e,contentId:Ko(),triggerRef:l,open:h,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:c,onCustomAnchorAdd:p.useCallback(()=>d(!0),[]),onCustomAnchorRemove:p.useCallback(()=>d(!1),[]),modal:o,children:n})})};M4.displayName=Uy;var V4="PopoverAnchor",oae=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=po(V4,n),i=Hh(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return p.useEffect(()=>(o(),()=>a()),[o,a]),u.jsx(D4,{...i,...r,ref:e})});oae.displayName=V4;var L4="PopoverTrigger",$4=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=po(L4,n),i=Hh(n),o=Ae(e,s.triggerRef),a=u.jsx(Ys.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":q4(s.open),...r,ref:o,onClick:ce(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:u.jsx(D4,{asChild:!0,...i,children:a})});$4.displayName=L4;var X1="PopoverPortal",[aae,lae]=O4(X1,{forceMount:void 0}),F4=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=po(X1,e);return u.jsx(aae,{scope:e,forceMount:n,children:u.jsx(yr,{present:n||i.open,children:u.jsx(j4,{asChild:!0,container:s,children:r})})})};F4.displayName=X1;var _c="PopoverContent",U4=p.forwardRef((t,e)=>{const n=lae(_c,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=po(_c,t.__scopePopover);return u.jsx(yr,{present:r||i.open,children:i.modal?u.jsx(uae,{...s,ref:e}):u.jsx(dae,{...s,ref:e})})});U4.displayName=_c;var cae=o4("PopoverContent.RemoveScroll"),uae=p.forwardRef((t,e)=>{const n=po(_c,t.__scopePopover),r=p.useRef(null),s=Ae(e,r),i=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return Uh(o)},[]),u.jsx(b1,{as:cae,allowPinchZoom:!0,children:u.jsx(B4,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ce(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),i.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ce(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ce(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),dae=p.forwardRef((t,e)=>{const n=po(_c,t.__scopePopover),r=p.useRef(!1),s=p.useRef(!1);return u.jsx(B4,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),B4=p.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...h}=t,m=po(_c,n),g=Hh(n);return y1(),u.jsx(u4,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:u.jsx(l4,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:u.jsx(nae,{"data-state":q4(m.open),role:"dialog",id:m.contentId,...g,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),z4="PopoverClose",hae=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=po(z4,n);return u.jsx(Ys.button,{type:"button",...r,ref:e,onClick:ce(t.onClick,()=>s.onOpenChange(!1))})});hae.displayName=z4;var fae="PopoverArrow",pae=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Hh(n);return u.jsx(rae,{...s,...r,ref:e})});pae.displayName=fae;function q4(t){return t?"open":"closed"}var mae=M4,gae=$4,yae=F4,W4=U4;const vae=mae,xae=gae,G4=p.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>u.jsx(yae,{children:u.jsx(W4,{ref:s,align:e,sideOffset:n,className:ae("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));G4.displayName=W4.displayName;function wae({options:t,value:e,onSelect:n,placeholder:r,searchPlaceholder:s,emptyPlaceholder:i,triggerClassName:o}){var c;const[a,l]=p.useState(!1);return u.jsxs(vae,{open:a,onOpenChange:l,children:[u.jsx(xae,{asChild:!0,children:u.jsxs(de,{variant:"outline",role:"combobox","aria-expanded":a,className:ae("w-full justify-between font-normal",o),children:[e?(c=t.find(d=>d.value===e))==null?void 0:c.label:r||"Select option...",u.jsx(_Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),u.jsx(G4,{className:"w-[--radix-popover-trigger-width] p-0",children:u.jsxs(e4,{children:[u.jsx(t4,{placeholder:s||"Search..."}),u.jsxs(n4,{children:[u.jsx(r4,{children:i||"No results found."}),u.jsx(s4,{children:t.map(d=>u.jsxs(i4,{value:d.label,onSelect:()=>{n(d.value),l(!1)},children:[u.jsx(yy,{className:ae("mr-2 h-4 w-4",e===d.value?"opacity-100":"opacity-0")}),d.label]},d.value))})]})]})})]})}const bR=[{value:"AR",label:""},{value:"JO",label:""},{value:"EC",label:""},{value:"AE",label:"  "},{value:"BS",label:""},{value:"BH",label:""},{value:"BR",label:""},{value:"PT",label:""},{value:"BA",label:" "},{value:"GA",label:""},{value:"ME",label:" "},{value:"DZ",label:""},{value:"DK",label:""},{value:"CV",label:" "},{value:"SV",label:""},{value:"SN",label:""},{value:"SD",label:""},{value:"SE",label:""},{value:"EH",label:" "},{value:"SO",label:""},{value:"CN",label:""},{value:"IQ",label:""},{value:"PH",label:""},{value:"CM",label:""},{value:"CG",label:" - "},{value:"CD",label:" - "},{value:"KW",label:""},{value:"HU",label:""},{value:"MA",label:""},{value:"MX",label:""},{value:"SA",label:"  "},{value:"GB",label:" "},{value:"NO",label:""},{value:"AT",label:""},{value:"NE",label:""},{value:"IN",label:""},{value:"US",label:" "},{value:"JP",label:""},{value:"YE",label:""},{value:"GR",label:""},{value:"AW",label:""},{value:"AZ",label:""},{value:"AM",label:""},{value:"ES",label:""},{value:"AU",label:""},{value:"EE",label:""},{value:"IL",label:""},{value:"AF",label:""},{value:"AL",label:""},{value:"DE",label:""},{value:"IT",label:""},{value:"AQ",label:""},{value:"AG",label:" "},{value:"AD",label:""},{value:"ID",label:""},{value:"AO",label:""},{value:"AI",label:""},{value:"UY",label:""},{value:"UZ",label:""},{value:"UG",label:""},{value:"UA",label:""},{value:"IR",label:""},{value:"IE",label:""},{value:"IS",label:""},{value:"ET",label:""},{value:"ER",label:""},{value:"PG",label:"  "},{value:"PY",label:""},{value:"PK",label:""},{value:"PW",label:""},{value:"BB",label:""},{value:"BM",label:""},{value:"BN",label:""},{value:"BE",label:""},{value:"BG",label:""},{value:"BZ",label:""},{value:"BD",label:""},{value:"PA",label:""},{value:"BJ",label:""},{value:"BT",label:""},{value:"BW",label:""},{value:"PR",label:""},{value:"BF",label:" "},{value:"BI",label:""},{value:"PL",label:""},{value:"BO",label:""},{value:"PF",label:" "},{value:"PE",label:""},{value:"TZ",label:""},{value:"TH",label:""},{value:"TW",label:""},{value:"TM",label:""},{value:"TR",label:""},{value:"TT",label:" "},{value:"TD",label:""},{value:"CL",label:""},{value:"TG",label:""},{value:"TV",label:""},{value:"TK",label:""},{value:"TN",label:""},{value:"TO",label:""},{value:"TL",label:" - "},{value:"JM",label:""},{value:"GI",label:" "},{value:"AX",label:" "},{value:"AN",label:"  "},{value:"TC",label:"  "},{value:"KM",label:" "},{value:"MV",label:" "},{value:"SB",label:" "},{value:"FO",label:" "},{value:"FK",label:" "},{value:"FJ",label:" "},{value:"KY",label:" "},{value:"CK",label:" "},{value:"CC",label:" "},{value:"MH",label:" "},{value:"MP",label:"  "},{value:"VI",label:"  "},{value:"VG",label:"  "},{value:"CF",label:"  "},{value:"CZ",label:" "},{value:"DO",label:" "},{value:"ZA",label:" "},{value:"GP",label:""},{value:"GE",label:""},{value:"DJ",label:""},{value:"RW",label:""},{value:"RU",label:""},{value:"BY",label:" "},{value:"RO",label:""},{value:"RE",label:""},{value:"ZM",label:""},{value:"ZW",label:""},{value:"CI",label:" "},{value:"WS",label:""},{value:"AS",label:" "},{value:"SM",label:" "},{value:"ST",label:"  "},{value:"LK",label:""},{value:"SK",label:""},{value:"SI",label:""},{value:"SG",label:""},{value:"SZ",label:""},{value:"SY",label:""},{value:"SR",label:""},{value:"CH",label:""},{value:"SL",label:""},{value:"SC",label:""},{value:"RS",label:""},{value:"TJ",label:""},{value:"OM",label:""},{value:"GM",label:""},{value:"GH",label:""},{value:"GD",label:""},{value:"GT",label:""},{value:"GY",label:""},{value:"GF",label:" "},{value:"GN",label:""},{value:"GQ",label:" "},{value:"GW",label:" "},{value:"VU",label:""},{value:"FR",label:""},{value:"PS",label:""},{value:"VE",label:""},{value:"FI",label:""},{value:"VN",label:""},{value:"CY",label:""},{value:"QA",label:""},{value:"KG",label:""},{value:"KZ",label:""},{value:"HR",label:""},{value:"KH",label:""},{value:"CA",label:""},{value:"CU",label:""},{value:"KR",label:" "},{value:"KP",label:" "},{value:"CR",label:""},{value:"CO",label:""},{value:"KI",label:""},{value:"KE",label:""},{value:"LV",label:""},{value:"LA",label:""},{value:"LB",label:""},{value:"LU",label:""},{value:"LY",label:""},{value:"LR",label:""},{value:"LT",label:""},{value:"LI",label:""},{value:"LS",label:""},{value:"MQ",label:""},{value:"MT",label:""},{value:"ML",label:""},{value:"MY",label:""},{value:"YT",label:""},{value:"MG",label:""},{value:"EG",label:""},{value:"MK",label:""},{value:"MW",label:""},{value:"MN",label:""},{value:"MR",label:""},{value:"MU",label:""},{value:"MZ",label:""},{value:"MD",label:""},{value:"MC",label:""},{value:"MS",label:""},{value:"MM",label:" ()"},{value:"FM",label:""},{value:"NA",label:""},{value:"NR",label:""},{value:"NP",label:""},{value:"NG",label:""},{value:"NI",label:""},{value:"NZ",label:""},{value:"NU",label:""},{value:"HT",label:""},{value:"HN",label:""},{value:"NL",label:""},{value:"HK",label:" "}],_ae=t=>{const e={};return/^[a-zA-Z\u0600-\u06FF\s-']+$/.test(t.firstName.trim())||(e.firstName="       ."),/^[a-zA-Z\u0600-\u06FF\s-']+$/.test(t.lastName.trim())||(e.lastName="       ."),/^\S+@\S+\.\S+$/.test(t.email)||(e.email="    ."),/^\+?[0-9\s-()]{7,15}$/.test(t.phone)||(e.phone="    ."),t.address.trim().length<10&&(e.address="     10 ."),t.city.trim().length<2&&(e.city="      ."),t.country||(e.country="  ."),t.postalCode&&!/^[a-zA-Z0-9\s-]{3,10}$/.test(t.postalCode)&&(e.postalCode="   ."),e},bae=()=>{const t=$n(),{toast:e}=tn(),n=io(),{cartItems:r,cartTotal:s,clearCart:i}=wy(),{currentUser:o}=Ks(),[a,l]=p.useState(!1),[c,d]=p.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",country:"EG",postalCode:"",paymentMethod:"cod"}),[h,m]=p.useState({});p.useEffect(()=>{var x;r.length===0&&!((x=n.state)!=null&&x.fromCart)&&(e({title:" !",description:"   .",variant:"destructive"}),t("/products"))},[r,t,e,n.state]),p.useEffect(()=>{var x;if(o){const b=((x=o.displayName)==null?void 0:x.split(" "))||["",""];d(S=>({...S,email:o.email||"",firstName:b[0]||"",lastName:b.slice(1).join(" ")||"",phone:o.phoneNumber||""}))}},[o]);const g=s>0?50:0,v=s+g,y=x=>{const{name:b,value:S}=x.target;d(A=>({...A,[b]:S})),h[b]&&m(A=>({...A,[b]:null}))},w=x=>{d(b=>({...b,country:x,postalCode:""})),h.country&&m(b=>({...b,country:null,postalCode:null}))},_=async x=>{var S;if(x.preventDefault(),!r||r.length===0)return;const b=_ae(c);if(Object.keys(b).length>0){m(b),e({title:"  ",description:"      .",variant:"destructive"});return}l(!0);try{const A=((S=bR.find(z=>z.value===c.country))==null?void 0:S.label)||c.country,D={userId:o?o.uid:null,shipping:{fullName:`${c.firstName.trim()} ${c.lastName.trim()}`,phone:c.phone,address:c.address,city:c.city,country:A,postalCode:c.postalCode},userEmail:c.email,items:r.map(z=>({id:z.id,name:z.name,quantity:z.quantity,price:z.price,imageUrl:z.image||null})),subtotal:s,shippingCost:g,total:v,status:"pending",paymentMethod:c.paymentMethod,createdAt:Xe.now()},C=await GE(Qn(Ue,"orders"),D),I=KE(Ue);r.forEach(z=>{const G=mn(Ue,"products",z.id);I.update(G,{stock:tV(-z.quantity)})}),await I.commit();const P=r.map(z=>`
          <tr>
            <td style="padding:8px; border-bottom:1px solid #ddd;">${z.name}</td>
            <td style="padding:8px; border-bottom:1px solid #ddd; text-align:center;">${z.quantity}</td>
            <td style="padding:8px; border-bottom:1px solid #ddd; text-align:right;">${(z.price*z.quantity).toLocaleString("ar-EG",{style:"currency",currency:"EGP"})}</td>
          </tr>
        `).join(""),R={to_name:D.shipping.fullName,order_id:C.id,order_total:v.toLocaleString("ar-EG",{style:"currency",currency:"EGP"}),order_address:`${D.shipping.address}, ${D.shipping.city}, ${D.shipping.country}`,order_items_html:P,customer_phone:D.shipping.phone,payment_method:"  ",order_subtotal:s.toLocaleString("ar-EG",{style:"currency",currency:"EGP"}),order_shipping_cost:g.toLocaleString("ar-EG",{style:"currency",currency:"EGP"}),from_name:" Right Water",support_email:"rightwater156@gmail.com"},j="service_uu3h5on",O="template_12584ol",k="template_6dk4ib8",W="Yv-DxRXZ5X9ZmSg3K";try{const z={...R,to_email:D.userEmail,reply_to:"rightwater156@gmail.com"};await VA.send(j,O,z,W);const G={...R,to_email:"rightwater156@gmail.com",client_email:D.userEmail,reply_to:D.userEmail};await VA.send(j,k,G,W)}catch(z){console.error("  :",z)}i(),e({title:"    !",description:` .   : ${C.id}`,className:"bg-green-500 text-white",duration:7e3}),t(`/order-success/${C.id}`,{state:{orderData:{id:C.id,...D}}})}catch(A){console.error("Error placing order: ",A),e({title:" ",description:"    .   .",variant:"destructive"})}finally{l(!1)}};return!r.length&&!a?u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:[u.jsx(kt,{className:"h-12 w-12 animate-spin text-primary mb-4"}),u.jsx("p",{className:"text-lg text-muted-foreground",children:"   ..."})]}):u.jsxs("div",{className:"container mx-auto px-4 py-12",children:[u.jsx(oe.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-4xl font-extrabold text-center mb-8 text-primary",children:"  "}),u.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 items-start",children:[u.jsxs(oe.form,{onSubmit:_,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-2 space-y-4 bg-card p-6 rounded-xl shadow-xl",children:[u.jsx("h2",{className:"text-xl font-semibold border-b pb-2 mb-4",children:" "}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"firstName",children:" "}),u.jsx(Ee,{id:"firstName",name:"firstName",value:c.firstName,onChange:y,required:!0,className:h.firstName?"border-destructive":""}),h.firstName&&u.jsx("p",{className:"text-destructive text-xs mt-1",children:h.firstName})]}),u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"lastName",children:" "}),u.jsx(Ee,{id:"lastName",name:"lastName",value:c.lastName,onChange:y,required:!0,className:h.lastName?"border-destructive":""}),h.lastName&&u.jsx("p",{className:"text-destructive text-xs mt-1",children:h.lastName})]}),u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"email",children:" "}),u.jsx(Ee,{id:"email",name:"email",type:"email",value:c.email,onChange:y,required:!0,className:h.email?"border-destructive":""}),h.email&&u.jsx("p",{className:"text-destructive text-xs mt-1",children:h.email})]}),u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"phone",children:" "}),u.jsx(Ee,{id:"phone",name:"phone",type:"tel",value:c.phone,onChange:y,required:!0,className:h.phone?"border-destructive":""}),h.phone&&u.jsx("p",{className:"text-destructive text-xs mt-1",children:h.phone})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx(_e,{htmlFor:"address",children:" "}),u.jsx(Ee,{id:"address",name:"address",value:c.address,onChange:y,required:!0,className:h.address?"border-destructive":""}),h.address&&u.jsx("p",{className:"text-destructive text-xs mt-1",children:h.address})]}),u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"country",children:""}),u.jsx(wae,{options:bR,value:c.country,onSelect:w,placeholder:" ...",searchPlaceholder:"...",emptyPlaceholder:"  .",triggerClassName:h.country?"border-destructive":""}),h.country&&u.jsx("p",{className:"text-destructive text-xs mt-1",children:h.country})]}),u.jsxs("div",{children:[u.jsx(_e,{htmlFor:"city",children:" / "}),u.jsx(Ee,{id:"city",name:"city",value:c.city,onChange:y,required:!0,className:h.city?"border-destructive":""}),h.city&&u.jsx("p",{className:"text-destructive text-xs mt-1",children:h.city})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx(_e,{htmlFor:"postalCode",children:"  ()"}),u.jsx(Ee,{id:"postalCode",name:"postalCode",value:c.postalCode,onChange:y,className:h.postalCode?"border-destructive":""}),h.postalCode&&u.jsx("p",{className:"text-destructive text-xs mt-1",children:h.postalCode})]})]}),u.jsxs(de,{type:"submit",className:"w-full mt-6",size:"lg",disabled:a,children:[a?u.jsx(kt,{className:"animate-spin mr-2 h-4 w-4"}):u.jsx(VZ,{className:"mr-2 h-4 w-4"}),a?"  ...":"    "]})]}),u.jsx(oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"sticky top-24",children:u.jsxs(Tt,{className:"p-6 shadow-xl rounded-xl bg-card",children:[u.jsx(en,{className:"p-0 mb-4",children:u.jsx(Wt,{className:"text-center text-lg font-semibold text-primary",children:" "})}),u.jsxs(Dt,{className:"p-0",children:[u.jsx("div",{className:"max-h-60 overflow-y-auto pr-2 custom-scrollbar space-y-3 mb-3",children:r.map(x=>u.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:x.image,alt:x.name,className:"w-12 h-12 rounded-md object-cover"}),u.jsxs("div",{className:"text-sm",children:[u.jsx("p",{className:"font-semibold",children:x.name}),u.jsxs("p",{className:"text-muted-foreground",children:[": ",x.quantity]})]})]}),u.jsx("p",{className:"text-sm font-medium",children:(x.price*x.quantity).toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]},x.id))}),u.jsxs("div",{className:"pt-3 border-t space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[u.jsx("span",{children:" :"}),u.jsx("span",{children:s.toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]}),g>0&&u.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[u.jsx("span",{children:" :"}),u.jsx("span",{children:g.toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]}),u.jsxs("div",{className:"flex justify-between pt-2 border-t font-semibold text-lg",children:[u.jsx("span",{children:" :"}),u.jsx("span",{children:v.toLocaleString("ar-EG",{style:"currency",currency:"EGP"})})]})]})]})]})})]})]})},Eae="modulepreload",Tae=function(t){return"/"+t},ER={},H4=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=Tae(i),i in ER)return;ER[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Eae,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((d,h)=>{c.addEventListener("load",d),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Sae=()=>{var a,l,c,d,h,m,g,v,y;const{orderId:t}=ob(),e=io(),[n,r]=p.useState(((a=e.state)==null?void 0:a.orderData)||null),[s,i]=p.useState(!((l=e.state)!=null&&l.orderData));p.useEffect(()=>{!n&&t&&(async()=>{try{const{db:_,doc:x,getDoc:b}=await H4(()=>Promise.resolve().then(()=>hZ),void 0),S=await b(x(_,"orders",t));S.exists()&&r({id:S.id,...S.data()})}catch(_){console.error("Error fetching order:",_),r(null)}finally{i(!1)}})()},[t,n]);const o=w=>typeof w!="number"?"":new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(w);return s?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:u.jsx(kt,{className:"h-12 w-12 text-sky-500 animate-spin"})}):n?u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-12",children:u.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl mx-auto bg-white dark:bg-slate-800 rounded-xl shadow-xl p-6 sm:p-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx(oe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:u.jsx(xZ,{className:"w-12 h-12 text-green-500"})}),u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"   !"}),u.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-2",children:["  ",(c=n.shipping)==null?void 0:c.fullName,".      ."]}),u.jsxs("p",{className:"text-sky-600 dark:text-sky-400 font-medium bg-sky-50 dark:bg-sky-900/50 rounded-md p-2 inline-block",children:[" : ",n.id]})]}),u.jsxs("div",{className:"border-t border-b dark:border-slate-700 py-6 mb-6",children:[u.jsxs("h2",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[u.jsx(Ud,{className:"mr-2 rtl:ml-2 rtl:mr-0 text-sky-500"})," "]}),u.jsx("div",{className:"space-y-4",children:(d=n.items)==null?void 0:d.map(w=>u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[u.jsx("img",{src:w.imageUrl||"https://via.placeholder.com/64",alt:w.name,className:"w-16 h-16 object-cover rounded-lg border dark:border-slate-700"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.name}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[": ",w.quantity]})]})]}),u.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:o(w.price*w.quantity)})]},w.id||w.name))})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200 mb-4",children:"  "}),u.jsxs("div",{className:"text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[u.jsx("p",{className:"font-semibold",children:(h=n.shipping)==null?void 0:h.fullName}),u.jsx("p",{children:(m=n.shipping)==null?void 0:m.address}),u.jsxs("p",{children:[(g=n.shipping)==null?void 0:g.city,", ",(v=n.shipping)==null?void 0:v.country]}),u.jsxs("p",{children:[": ",(y=n.shipping)==null?void 0:y.phone]})]})]}),u.jsxs("div",{className:"border-t dark:border-slate-700 pt-6 flex flex-col sm:flex-row justify-between items-center gap-4",children:[u.jsx(de,{asChild:!0,variant:"outline",children:u.jsxs(Me,{to:"/products",className:"w-full sm:w-auto flex items-center justify-center",children:[u.jsx(Fc,{className:"ml-2 rtl:mr-2 rtl:ml-0 h-4 w-4"})," "]})}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[" : ",o(n.subtotal)]}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[": ",o(n.shippingCost)]}),u.jsxs("p",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:[": ",o(n.total)]})]})]})]})})}):u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:u.jsxs("div",{className:"text-center p-4",children:[u.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"      "}),u.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"        ."}),u.jsx(de,{asChild:!0,children:u.jsx(Me,{to:"/",children:"  "})})]})})},lp=t=>typeof t!="number"?"N/A":new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(t),Iae=t=>t!=null&&t.toDate?new Intl.DateTimeFormat("ar-EG",{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"2-digit"}).format(t.toDate()):"  ",Cae=t=>({pending:{label:" ",color:"bg-yellow-100 dark:bg-yellow-900/50",textColor:"text-yellow-800 dark:text-yellow-300"},processing:{label:" ",color:"bg-blue-100 dark:bg-blue-900/50",textColor:"text-blue-800 dark:text-blue-300"},shipped:{label:" ",color:"bg-sky-100 dark:bg-sky-900/50",textColor:"text-sky-800 dark:text-sky-300"},completed:{label:"",color:"bg-green-100 dark:bg-green-900/50",textColor:"text-green-800 dark:text-green-300"},cancelled:{label:"",color:"bg-red-100 dark:bg-red-900/50",textColor:"text-red-800 dark:text-red-300"},"on-hold":{label:" ",color:"bg-orange-100 dark:bg-orange-900/50",textColor:"text-orange-800 dark:text-orange-300"}})[t]||{label:t,color:"bg-slate-100 dark:bg-slate-700",textColor:"text-slate-800 dark:text-slate-300"},Pae=()=>{var o,a,l,c,d;const{orderId:t}=ob(),[e,n]=p.useState(null),[r,s]=p.useState(!0);if(p.useEffect(()=>{if(!t)return;(async()=>{s(!0);try{const m=await WE(mn(Ue,"orders",t));m.exists()&&n({id:m.id,...m.data()})}catch(m){console.error("Error fetching order:",m)}finally{s(!1)}})()},[t]),r)return u.jsx("div",{className:"flex justify-center items-center h-screen",children:u.jsx(kt,{className:"h-12 w-12 animate-spin text-primary"})});if(!e)return u.jsx("div",{className:"text-center p-8",children:u.jsx("h1",{children:"     ."})});const i=Cae(e.status);return u.jsx("div",{className:"bg-slate-50 dark:bg-slate-900 min-h-screen py-12",children:u.jsx("div",{className:"container mx-auto px-4",children:u.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsxs(Tt,{className:"max-w-4xl mx-auto shadow-xl",children:[u.jsxs(en,{className:"border-b dark:border-slate-700 p-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:[u.jsxs("div",{children:[u.jsxs(Wt,{className:"text-2xl font-bold flex items-center gap-2",children:[u.jsx(RZ,{className:"h-6 w-6 text-primary"}),u.jsx("span",{children:" "})]}),u.jsxs(Qs,{children:[" : ",e.id]})]}),u.jsx(Uc,{className:`text-sm px-3 py-1 ${i.color} ${i.textColor}`,children:i.label})]}),u.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-4 flex items-center gap-2",children:[u.jsx(vZ,{className:"h-4 w-4"}),u.jsxs("span",{children:[" : ",Iae(e.createdAt)]})]})]}),u.jsxs(Dt,{className:"p-6 space-y-8",children:[u.jsxs("section",{children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:"  "}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-slate-700 dark:text-slate-300",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(xy,{className:"h-5 w-5 text-primary"}),u.jsx("span",{children:(o=e.shipping)==null?void 0:o.fullName})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(jV,{className:"h-5 w-5 text-primary"}),u.jsx("span",{children:(a=e.shipping)==null?void 0:a.phone})]}),u.jsxs("div",{className:"md:col-span-2 flex items-start gap-3",children:[u.jsx(LZ,{className:"h-5 w-5 text-primary mt-1"}),u.jsx("span",{children:`${(l=e.shipping)==null?void 0:l.address}, ${(c=e.shipping)==null?void 0:c.city}`})]})]})]}),u.jsxs("section",{children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:""}),u.jsx("div",{className:"space-y-4",children:(d=e.items)==null?void 0:d.map(h=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("img",{src:h.imageUrl,alt:h.name,className:"w-16 h-16 object-cover rounded-md"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold",children:h.name}),u.jsxs("p",{className:"text-sm text-slate-500",children:[": ",h.quantity]})]})]}),u.jsx("p",{className:"font-semibold",children:lp(h.price*h.quantity)})]},h.id))})]}),u.jsxs("section",{className:"border-t dark:border-slate-700 pt-6",children:[u.jsx("h2",{className:"text-xl font-semibold mb-4",children:" "}),u.jsxs("div",{className:"space-y-2 max-w-sm ml-auto rtl:mr-auto rtl:ml-0",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-slate-500",children:" :"}),u.jsx("span",{children:lp(e.subtotal)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-slate-500",children:" :"}),u.jsx("span",{children:lp(e.shippingCost)})]}),u.jsxs("div",{className:"flex justify-between font-bold text-lg border-t dark:border-slate-600 pt-2 mt-2",children:[u.jsx("span",{children:" :"}),u.jsx("span",{children:lp(e.total)})]})]})]})]})]}),u.jsx("div",{className:"text-center mt-8",children:u.jsx(de,{asChild:!0,variant:"outline",children:u.jsxs(Me,{to:"/profile",children:[u.jsx(IV,{className:"ml-2 h-4 w-4"}),"  "]})})})]})})})},Aae=()=>{const t=[{icon:u.jsx(g0,{size:28,className:"text-sky-500"}),title:"1.   ",content:"     .          .               .              ."},{icon:u.jsx(KZ,{size:28,className:"text-sky-500"}),title:"2.    ",content:"    18       .                 .          ."},{icon:u.jsx(qZ,{size:28,className:"text-sky-500"}),title:"3.  ",content:"           .     .                  .    ."},{icon:u.jsx(Lh,{size:28,className:"text-sky-500"}),title:"4.  ",content:"                         ."},{icon:u.jsx(n1,{size:28,className:"text-sky-500"}),title:"5.  ",content:"                      ."},{icon:u.jsx(g0,{size:28,className:"text-sky-500"}),title:"6.  ",content:"         ."},{icon:u.jsx(Mh,{size:28,className:"text-sky-500"}),title:"7.  ",content:"              ' '."}];return u.jsx("div",{className:"bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 py-12 md:py-20",children:u.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs(oe.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7,ease:"easeOut"},className:"text-center mb-12 md:mb-16",children:[u.jsx(g0,{className:"mx-auto text-sky-500 mb-4 h-16 w-16"}),u.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-sky-600 dark:text-sky-400 mb-3",children:" "}),u.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:" : 8  2024"})]}),u.jsx("div",{className:"max-w-3xl mx-auto bg-white dark:bg-slate-800 p-6 sm:p-10 rounded-xl shadow-2xl space-y-10",children:t.map((e,n)=>u.jsxs(oe.section,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.5,delay:n*.1},children:[u.jsxs("div",{className:"flex items-start space-x-4 rtl:space-x-reverse mb-4",children:[u.jsx("div",{className:"flex-shrink-0 p-2 bg-sky-100 dark:bg-sky-700/30 rounded-full mt-1",children:e.icon}),u.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-slate-700 dark:text-slate-200",children:e.title})]}),u.jsx("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed",children:e.content})]},n))})]})})},Rae=t=>typeof t!="number"?"N/A":new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(t),Nae=t=>t!=null&&t.toDate?new Intl.DateTimeFormat("ar-EG",{day:"numeric",month:"long",year:"numeric"}).format(t.toDate()):"  ",kae=t=>({pending:{label:" ",color:"bg-yellow-100 dark:bg-yellow-900/50",textColor:"text-yellow-800 dark:text-yellow-300"},processing:{label:" ",color:"bg-blue-100 dark:bg-blue-900/50",textColor:"text-blue-800 dark:text-blue-300"},shipped:{label:" ",color:"bg-sky-100 dark:bg-sky-900/50",textColor:"text-sky-800 dark:text-sky-300"},delivered:{label:" ",color:"bg-green-100 dark:bg-green-900/50",textColor:"text-green-800 dark:text-green-300"},cancelled:{label:"",color:"bg-red-100 dark:bg-red-900/50",textColor:"text-red-800 dark:text-red-300"},"on-hold":{label:" ",color:"bg-orange-100 dark:bg-orange-900/50",textColor:"text-orange-800 dark:text-orange-300"}})[t]||{label:t,color:"bg-slate-100 dark:bg-slate-700",textColor:"text-slate-800 dark:text-slate-300"},Dae=()=>{const{currentUser:t}=Ks(),[e,n]=p.useState([]),[r,s]=p.useState(!0);return p.useEffect(()=>{if(!t){s(!1);return}s(!0);const i=Ds(Qn(Ue,"orders"),zE("userId","==",t.uid),js("createdAt","desc")),o=kh(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));n(l),s(!1)},a=>{console.error("Error fetching user orders: ",a),s(!1)});return()=>o()},[t]),r?u.jsx(kt,{className:"h-8 w-8 animate-spin mx-auto mt-8"}):u.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[u.jsxs(en,{className:"p-0 mb-6",children:[u.jsx(Wt,{className:"text-2xl font-bold",children:" "}),u.jsx(Qs,{children:"    ."})]}),u.jsx(Dt,{className:"p-0",children:e.length>0?u.jsx("div",{className:"space-y-4",children:e.map(i=>{const o=kae(i.status);return u.jsxs("div",{className:"border p-4 rounded-lg flex justify-between items-center hover:bg-muted/50 transition-colors",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold",children:["  #",i.id.slice(0,8),"..."]}),u.jsx("p",{className:"text-sm text-muted-foreground",children:Nae(i.createdAt)}),u.jsx(Uc,{variant:"outline",className:`${o.color} ${o.textColor} mt-2`,children:o.label})]}),u.jsxs("div",{className:"text-left",children:[u.jsx("p",{className:"font-bold",children:Rae(i.total)}),u.jsx(de,{asChild:!0,variant:"link",className:"p-0 h-auto text-primary",children:u.jsx(Me,{to:`/profile/orders/${i.id}`,children:" "})})]})]},i.id)})}):u.jsx("p",{className:"text-muted-foreground text-center py-8",children:"   ."})})]})},jae=({title:t,value:e,icon:n,color:r,linkTo:s})=>u.jsx(oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4},className:"h-full",children:u.jsxs(Tt,{className:`bg-white dark:bg-slate-800 shadow-lg hover:shadow-xl transition-shadow duration-300 border-l-4 border-${r}-500 dark:border-${r}-400 h-full flex flex-col`,children:[u.jsxs(en,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(Wt,{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:t}),n]}),u.jsx(Dt,{className:"flex-grow",children:u.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50",children:e})}),s&&u.jsx(Da,{className:"pt-0",children:u.jsx(de,{variant:"link",asChild:!0,className:`p-0 h-auto text-xs text-${r}-600 dark:text-${r}-400 hover:text-${r}-700`,children:u.jsx(Me,{to:s,children:"  "})})})]})}),Oae=({to:t,title:e,description:n,icon:r,bgColorClass:s})=>u.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"h-full",children:u.jsx(Me,{to:t,className:"block h-full group",children:u.jsxs(Tt,{className:`${s} text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 h-full flex flex-col justify-between p-6 rounded-lg`,children:[u.jsxs("div",{children:[u.jsx("div",{className:"p-3 bg-white/20 rounded-full w-fit mb-4 group-hover:bg-white/30 transition-colors",children:r}),u.jsx(Wt,{className:"text-xl sm:text-2xl font-semibold mb-2",children:e}),u.jsx("p",{className:"text-sm opacity-90",children:n})]}),u.jsx("div",{className:"mt-4 text-right",children:u.jsx("span",{className:"text-sm font-medium group-hover:underline",children:" "})})]})})}),Mae=()=>{const[t,e]=p.useState([]),[n,r]=p.useState({users:0,products:0}),[s,i]=p.useState(!0);p.useEffect(()=>{(async()=>{try{const{getDocs:y}=await H4(()=>import("./index.esm-03592cfc.js"),[]),w=await y(Qn(Ue,"users")),_=await y(Qn(Ue,"products"));r({users:w.size,products:_.size})}catch(y){console.error("Error fetching static data: ",y)}})();const g=Ds(Qn(Ue,"orders"),js("createdAt","desc")),v=kh(g,y=>{const w=y.docs.map(_=>({id:_.id,..._.data()}));e(w),i(!1)},y=>{console.error("Error listening to orders: ",y),i(!1)});return()=>v()},[]);const o=p.useMemo(()=>{const g=t.filter(v=>v.status==="delivered").reduce((v,y)=>v+(y.total||0),0);return{totalOrders:t.length,totalRevenue:g,recentOrders:t.slice(0,5)}},[t]),a=m=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(m),l=m=>m!=null&&m.toDate?new Date(m.toDate()).toLocaleDateString("ar-EG",{day:"2-digit",month:"short",year:"numeric"}):"-",c=m=>({pending:" ",processing:" ",shipped:" ",completed:"",cancelled:""})[m]||m,d=[{title:" ",value:s?"...":n.users,icon:u.jsx(vc,{className:"h-6 w-6 text-sky-500"}),color:"sky",linkTo:"/AdminDashboard/users"},{title:" ",value:s?"...":o.totalOrders,icon:u.jsx(Nw,{className:"h-6 w-6 text-green-500"}),color:"green",linkTo:"/AdminDashboard/orders"},{title:" ",value:s?"...":a(o.totalRevenue),icon:u.jsx(IZ,{className:"h-6 w-6 text-amber-500"}),color:"amber"},{title:" ",value:s?"...":n.products,icon:u.jsx(Ud,{className:"h-6 w-6 text-purple-500"}),color:"purple",linkTo:"/AdminDashboard/products"}],h=[{to:"/AdminDashboard/products",title:" ",description:"   .",icon:u.jsx(Ud,{className:"h-8 w-8 text-white"}),bgColorClass:"bg-gradient-to-br from-sky-500 to-sky-700"},{to:"/AdminDashboard/orders",title:" ",description:"   .",icon:u.jsx(Nw,{className:"h-8 w-8 text-white"}),bgColorClass:"bg-gradient-to-br from-green-500 to-green-700"},{to:"/AdminDashboard/users",title:" ",description:"   .",icon:u.jsx(vc,{className:"h-8 w-8 text-white"}),bgColorClass:"bg-gradient-to-br from-purple-500 to-purple-700"},{to:"/AdminDashboard/settings",title:" ",description:"   .",icon:u.jsx(r1,{className:"h-8 w-8 text-white"}),bgColorClass:"bg-gradient-to-br from-slate-500 to-slate-700"}];return u.jsxs("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-900 p-4 sm:p-6 lg:p-8",children:[u.jsxs(oe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col sm:flex-row justify-between items-center mb-8",children:[u.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100",children:"  "}),u.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[u.jsxs(de,{variant:"outline",size:"icon",className:"relative",children:[u.jsx(gZ,{className:"h-5 w-5"}),u.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:"3"})]}),u.jsxs(de,{variant:"outline",children:[u.jsx(NV,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-5 w-5"}),"  "]})]})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:d.map(m=>u.jsx(jae,{...m},m.title))}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:h.map(m=>u.jsx(Oae,{...m},m.title))}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsx(oe.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},children:u.jsxs(Tt,{className:"bg-white dark:bg-slate-800 shadow-lg h-full",children:[u.jsx(en,{children:u.jsx(Wt,{className:"text-xl font-semibold text-slate-700 dark:text-slate-200",children:" "})}),u.jsx(Dt,{children:s?u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"  ..."}):o.recentOrders.length>0?u.jsx("ul",{className:"space-y-3",children:o.recentOrders.map(m=>{var g;return u.jsxs("li",{className:"flex justify-between items-center p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 rounded-md transition-colors",children:[u.jsxs("div",{children:[u.jsxs(Me,{to:`/AdminDashboard/orders/${m.id}`,className:"font-medium text-sky-600 dark:text-sky-400 hover:underline",children:["#",m.id.slice(0,8)]}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:((g=m.shipping)==null?void 0:g.fullName)||m.userEmail})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:a(m.total)}),u.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[l(m.createdAt)," - ",c(m.status)]})]})]},m.id)})}):u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"   ."})})]})}),u.jsx(oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:u.jsxs(Tt,{className:"bg-white dark:bg-slate-800 shadow-lg h-full",children:[u.jsx(en,{children:u.jsx(Wt,{className:"text-xl font-semibold text-slate-700 dark:text-slate-200",children:"   "})}),u.jsx(Dt,{children:u.jsxs("div",{className:"h-64 flex items-center justify-center text-slate-400 dark:text-slate-500",children:[u.jsx(mZ,{size:48}),u.jsx("p",{className:"ml-4 rtl:mr-4",children:"   "})]})})]})})]})]})},Kh=re.forwardRef(({className:t,...e},n)=>u.jsx("div",{className:"w-full overflow-auto",children:u.jsx("table",{ref:n,className:ae("w-full caption-bottom text-sm",t),...e})}));Kh.displayName="Table";const Qh=re.forwardRef(({className:t,...e},n)=>u.jsx("thead",{ref:n,className:ae("[&_tr]:border-b",t),...e}));Qh.displayName="TableHeader";const Yh=re.forwardRef(({className:t,...e},n)=>u.jsx("tbody",{ref:n,className:ae("[&_tr:last-child]:border-0",t),...e}));Yh.displayName="TableBody";const Vae=re.forwardRef(({className:t,...e},n)=>u.jsx("tfoot",{ref:n,className:ae("bg-primary font-medium text-primary-foreground",t),...e}));Vae.displayName="TableFooter";const Ls=re.forwardRef(({className:t,...e},n)=>u.jsx("tr",{ref:n,className:ae("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Ls.displayName="TableRow";const dt=re.forwardRef(({className:t,...e},n)=>u.jsx("th",{ref:n,className:ae("h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));dt.displayName="TableHead";const ht=re.forwardRef(({className:t,...e},n)=>u.jsx("td",{ref:n,className:ae("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));ht.displayName="TableCell";const Lae=re.forwardRef(({className:t,...e},n)=>u.jsx("caption",{ref:n,className:ae("mt-4 text-sm text-muted-foreground",t),...e}));Lae.displayName="TableCaption";function TR(t,[e,n]){return Math.min(n,Math.max(e,t))}function Ut(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function J1(t,e=[]){let n=[];function r(i,o){const a=p.createContext(o),l=n.length;n=[...n,o];function c(h){const{scope:m,children:g,...v}=h,y=(m==null?void 0:m[t][l])||a,w=p.useMemo(()=>v,Object.values(v));return p.createElement(y.Provider,{value:w},g)}function d(h,m){const g=(m==null?void 0:m[t][l])||a,v=p.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,d]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,$ae(s,...e)]}function $ae(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Fae(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function K4(...t){return e=>t.forEach(n=>Fae(n,e))}function yn(...t){return p.useCallback(K4(...t),t)}const Gd=p.forwardRef((t,e)=>{const{children:n,...r}=t,s=p.Children.toArray(n),i=s.find(Bae);if(i){const o=i.props.children,a=s.map(l=>l===i?p.Children.count(o)>1?p.Children.only(null):p.isValidElement(o)?o.props.children:null:l);return p.createElement(t_,be({},r,{ref:e}),p.isValidElement(o)?p.cloneElement(o,void 0,a):null)}return p.createElement(t_,be({},r,{ref:e}),n)});Gd.displayName="Slot";const t_=p.forwardRef((t,e)=>{const{children:n,...r}=t;return p.isValidElement(n)?p.cloneElement(n,{...zae(r,n.props),ref:e?K4(e,n.ref):n.ref}):p.Children.count(n)>1?p.Children.only(null):null});t_.displayName="SlotClone";const Uae=({children:t})=>p.createElement(p.Fragment,null,t);function Bae(t){return p.isValidElement(t)&&t.type===Uae}function zae(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function qae(t){const e=t+"CollectionProvider",[n,r]=J1(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:y}=g,w=re.useRef(null),_=re.useRef(new Map).current;return re.createElement(s,{scope:v,itemMap:_,collectionRef:w},y)},a=t+"CollectionSlot",l=re.forwardRef((g,v)=>{const{scope:y,children:w}=g,_=i(a,y),x=yn(v,_.collectionRef);return re.createElement(Gd,{ref:x},w)}),c=t+"CollectionItemSlot",d="data-radix-collection-item",h=re.forwardRef((g,v)=>{const{scope:y,children:w,..._}=g,x=re.useRef(null),b=yn(v,x),S=i(c,y);return re.useEffect(()=>(S.itemMap.set(x,{ref:x,..._}),()=>void S.itemMap.delete(x))),re.createElement(Gd,{[d]:"",ref:b},w)});function m(g){const v=i(t+"CollectionConsumer",g);return re.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const _=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((S,A)=>_.indexOf(S.ref.current)-_.indexOf(A.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},m,r]}const Wae=p.createContext(void 0);function Gae(t){const e=p.useContext(Wae);return t||e||"ltr"}const Hae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],nn=Hae.reduce((t,e)=>{const n=p.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?Gd:e;return p.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),p.createElement(a,be({},o,{ref:s}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Kae(t,e){t&&Nr.flushSync(()=>t.dispatchEvent(e))}function $s(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function Qae(t,e=globalThis==null?void 0:globalThis.document){const n=$s(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const n_="dismissableLayer.update",Yae="dismissableLayer.pointerDownOutside",Xae="dismissableLayer.focusOutside";let SR;const Jae=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zae=p.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,d=p.useContext(Jae),[h,m]=p.useState(null),g=(n=h==null?void 0:h.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,v]=p.useState({}),y=yn(e,I=>m(I)),w=Array.from(d.layers),[_]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=w.indexOf(_),b=h?w.indexOf(h):-1,S=d.layersWithOutsidePointerEventsDisabled.size>0,A=b>=x,D=ele(I=>{const P=I.target,R=[...d.branches].some(j=>j.contains(P));!A||R||(i==null||i(I),a==null||a(I),I.defaultPrevented||l==null||l())},g),C=tle(I=>{const P=I.target;[...d.branches].some(j=>j.contains(P))||(o==null||o(I),a==null||a(I),I.defaultPrevented||l==null||l())},g);return Qae(I=>{b===d.layers.size-1&&(s==null||s(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},g),p.useEffect(()=>{if(h)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(SR=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),IR(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=SR)}},[h,g,r,d]),p.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),IR())},[h,d]),p.useEffect(()=>{const I=()=>v({});return document.addEventListener(n_,I),()=>document.removeEventListener(n_,I)},[]),p.createElement(nn.div,be({},c,{ref:y,style:{pointerEvents:S?A?"auto":"none":void 0,...t.style},onFocusCapture:Ut(t.onFocusCapture,C.onFocusCapture),onBlurCapture:Ut(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Ut(t.onPointerDownCapture,D.onPointerDownCapture)}))});function ele(t,e=globalThis==null?void 0:globalThis.document){const n=$s(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){Q4(Yae,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function tle(t,e=globalThis==null?void 0:globalThis.document){const n=$s(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&Q4(Xae,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function IR(){const t=new CustomEvent(n_);document.dispatchEvent(t)}function Q4(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Kae(s,i):s.dispatchEvent(i)}let $0=0;function nle(){p.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:CR()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:CR()),$0++,()=>{$0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),$0--}},[])}function CR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const F0="focusScope.autoFocusOnMount",U0="focusScope.autoFocusOnUnmount",PR={bubbles:!1,cancelable:!0},rle=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=p.useState(null),c=$s(s),d=$s(i),h=p.useRef(null),m=yn(e,y=>l(y)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let y=function(b){if(g.paused||!a)return;const S=b.target;a.contains(S)?h.current=S:ui(h.current,{select:!0})},w=function(b){if(g.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||ui(h.current,{select:!0}))},_=function(b){if(document.activeElement===document.body)for(const A of b)A.removedNodes.length>0&&ui(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const x=new MutationObserver(_);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),x.disconnect()}}},[r,a,g.paused]),p.useEffect(()=>{if(a){RR.add(g);const y=document.activeElement;if(!a.contains(y)){const _=new CustomEvent(F0,PR);a.addEventListener(F0,c),a.dispatchEvent(_),_.defaultPrevented||(sle(cle(Y4(a)),{select:!0}),document.activeElement===y&&ui(a))}return()=>{a.removeEventListener(F0,c),setTimeout(()=>{const _=new CustomEvent(U0,PR);a.addEventListener(U0,d),a.dispatchEvent(_),_.defaultPrevented||ui(y??document.body,{select:!0}),a.removeEventListener(U0,d),RR.remove(g)},0)}}},[a,c,d,g]);const v=p.useCallback(y=>{if(!n&&!r||g.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,_=document.activeElement;if(w&&_){const x=y.currentTarget,[b,S]=ile(x);b&&S?!y.shiftKey&&_===S?(y.preventDefault(),n&&ui(b,{select:!0})):y.shiftKey&&_===b&&(y.preventDefault(),n&&ui(S,{select:!0})):_===x&&y.preventDefault()}},[n,r,g.paused]);return p.createElement(nn.div,be({tabIndex:-1},o,{ref:m,onKeyDown:v}))});function sle(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ui(r,{select:e}),document.activeElement!==n)return}function ile(t){const e=Y4(t),n=AR(e,t),r=AR(e.reverse(),t);return[n,r]}function Y4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function AR(t,e){for(const n of t)if(!ole(n,{upTo:e}))return n}function ole(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function ale(t){return t instanceof HTMLInputElement&&"select"in t}function ui(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&ale(t)&&e&&t.select()}}const RR=lle();function lle(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=NR(t,e),t.unshift(e)},remove(e){var n;t=NR(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function NR(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function cle(t){return t.filter(e=>e.tagName!=="A")}const mr=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},ule=rh["useId".toString()]||(()=>{});let dle=0;function X4(t){const[e,n]=p.useState(ule());return mr(()=>{t||n(r=>r??String(dle++))},[t]),t||(e?`radix-${e}`:"")}function hle(t){const[e,n]=p.useState(void 0);return mr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const J4="Popper",[Z4,eF]=J1(J4),[fle,tF]=Z4(J4),ple=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return p.createElement(fle,{scope:e,anchor:r,onAnchorChange:s},n)},mle="PopperAnchor",gle=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=tF(mle,n),o=p.useRef(null),a=yn(e,o);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:p.createElement(nn.div,be({},s,{ref:a}))}),nF="PopperContent",[yle,Khe]=Z4(nF),vle=p.forwardRef((t,e)=>{var n,r,s,i,o,a,l,c;const{__scopePopper:d,side:h="bottom",sideOffset:m=0,align:g="center",alignOffset:v=0,arrowPadding:y=0,avoidCollisions:w=!0,collisionBoundary:_=[],collisionPadding:x=0,sticky:b="partial",hideWhenDetached:S=!1,updatePositionStrategy:A="optimized",onPlaced:D,...C}=t,I=tF(nF,d),[P,R]=p.useState(null),j=yn(e,Gt=>R(Gt)),[O,k]=p.useState(null),W=hle(O),z=(n=W==null?void 0:W.width)!==null&&n!==void 0?n:0,G=(r=W==null?void 0:W.height)!==null&&r!==void 0?r:0,H=h+(g!=="center"?"-"+g:""),M=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},F=Array.isArray(_)?_:[_],V=F.length>0,q={padding:M,boundary:F.filter(xle),altBoundary:V},{refs:X,floatingStyles:K,placement:fe,isPositioned:we,middlewareData:ge}=U1({strategy:"fixed",placement:H,whileElementsMounted:(...Gt)=>F1(...Gt,{animationFrame:A==="always"}),elements:{reference:I.anchor},middleware:[B1({mainAxis:m+G,alignmentAxis:v}),w&&z1({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?q1():void 0,...q}),w&&W1({...q}),G1({...q,apply:({elements:Gt,rects:Un,availableWidth:nr,availableHeight:mo})=>{const{width:Cn,height:ef}=Un.reference,Js=Gt.floating.style;Js.setProperty("--radix-popper-available-width",`${nr}px`),Js.setProperty("--radix-popper-available-height",`${mo}px`),Js.setProperty("--radix-popper-anchor-width",`${Cn}px`),Js.setProperty("--radix-popper-anchor-height",`${ef}px`)}}),O&&K1({element:O,padding:y}),wle({arrowWidth:z,arrowHeight:G}),S&&H1({strategy:"referenceHidden",...q})]}),[ne,Se]=rF(fe),Ie=$s(D);mr(()=>{we&&(Ie==null||Ie())},[we,Ie]);const xe=(s=ge.arrow)===null||s===void 0?void 0:s.x,ye=(i=ge.arrow)===null||i===void 0?void 0:i.y,Ce=((o=ge.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Be,ct]=p.useState();return mr(()=>{P&&ct(window.getComputedStyle(P).zIndex)},[P]),p.createElement("div",{ref:X.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:we?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Be,"--radix-popper-transform-origin":[(a=ge.transformOrigin)===null||a===void 0?void 0:a.x,(l=ge.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},p.createElement(yle,{scope:d,placedSide:ne,onArrowChange:k,arrowX:xe,arrowY:ye,shouldHideArrow:Ce},p.createElement(nn.div,be({"data-side":ne,"data-align":Se},C,{ref:j,style:{...C.style,animation:we?void 0:"none",opacity:(c=ge.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function xle(t){return t!==null}const wle=t=>({name:"transformOrigin",options:t,fn(e){var n,r,s,i,o;const{placement:a,rects:l,middlewareData:c}=e,h=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,m=h?0:t.arrowWidth,g=h?0:t.arrowHeight,[v,y]=rF(a),w={start:"0%",center:"50%",end:"100%"}[y],_=((r=(s=c.arrow)===null||s===void 0?void 0:s.x)!==null&&r!==void 0?r:0)+m/2,x=((i=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+g/2;let b="",S="";return v==="bottom"?(b=h?w:`${_}px`,S=`${-g}px`):v==="top"?(b=h?w:`${_}px`,S=`${l.floating.height+g}px`):v==="right"?(b=`${-g}px`,S=h?w:`${x}px`):v==="left"&&(b=`${l.floating.width+g}px`,S=h?w:`${x}px`),{data:{x:b,y:S}}}});function rF(t){const[e,n="center"]=t.split("-");return[e,n]}const _le=ple,ble=gle,Ele=vle,Tle=p.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...s}=t;return r?Cg.createPortal(p.createElement(nn.div,be({},s,{ref:e})),r):null});function kR({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=Sle({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=$s(n),l=p.useCallback(c=>{if(i){const h=typeof c=="function"?c(t):c;h!==t&&a(h)}else s(c)},[i,t,s,a]);return[o,l]}function Sle({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,s=p.useRef(r),i=$s(e);return p.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}function Ile(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const Cle=p.forwardRef((t,e)=>p.createElement(nn.span,be({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})));var sF=x1(),B0=function(){},By=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:B0,onWheelCapture:B0,onTouchMoveCapture:B0}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,g=t.noIsolation,v=t.inert,y=t.allowPinchZoom,w=t.as,_=w===void 0?"div":w,x=Ta(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=m,S=v1([n,e]),A=bt(bt({},x),s);return p.createElement(p.Fragment,null,d&&p.createElement(b,{sideCar:sF,removeScrollBar:c,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!y,lockRef:n}),o?p.cloneElement(p.Children.only(a),bt(bt({},A),{ref:S})):p.createElement(_,bt({},A,{className:l,ref:S}),a))});By.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};By.classNames={fullWidth:Ml,zeroRight:Ol};var r_=!1;if(typeof window<"u")try{var cp=Object.defineProperty({},"passive",{get:function(){return r_=!0,!0}});window.addEventListener("test",cp,cp),window.removeEventListener("test",cp,cp)}catch{r_=!1}var el=r_?{passive:!1}:!1,Ple=function(t){return t.tagName==="TEXTAREA"},iF=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Ple(t)&&n[e]==="visible")},Ale=function(t){return iF(t,"overflowY")},Rle=function(t){return iF(t,"overflowX")},DR=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=oF(t,n);if(r){var s=aF(t,n),i=s[1],o=s[2];if(i>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Nle=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},kle=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},oF=function(t,e){return t==="v"?Ale(e):Rle(e)},aF=function(t,e){return t==="v"?Nle(e):kle(e)},Dle=function(t,e){return t==="h"&&e==="rtl"?-1:1},jle=function(t,e,n,r,s){var i=Dle(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,m=0;do{var g=aF(t,a),v=g[0],y=g[1],w=g[2],_=y-w-i*v;(v||_)&&oF(t,a)&&(h+=_,m+=v),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(s&&h===0||!s&&o>h)||!d&&(s&&m===0||!s&&-o>m))&&(c=!0),c},up=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},jR=function(t){return[t.deltaX,t.deltaY]},OR=function(t){return t&&"current"in t?t.current:t},Ole=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Mle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Vle=0,tl=[];function Lle(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(Vle++)[0],i=p.useState(function(){return ky()})[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=Db([t.lockRef.current],(t.shards||[]).map(OR),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(y,w){if("touches"in y&&y.touches.length===2)return!o.current.allowPinchZoom;var _=up(y),x=n.current,b="deltaX"in y?y.deltaX:x[0]-_[0],S="deltaY"in y?y.deltaY:x[1]-_[1],A,D=y.target,C=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in y&&C==="h"&&D.type==="range")return!1;var I=DR(C,D);if(!I)return!0;if(I?A=C:(A=C==="v"?"h":"v",I=DR(C,D)),!I)return!1;if(!r.current&&"changedTouches"in y&&(b||S)&&(r.current=A),!A)return!0;var P=r.current||A;return jle(P,w,y,P==="h"?b:S,!0)},[]),l=p.useCallback(function(y){var w=y;if(!(!tl.length||tl[tl.length-1]!==i)){var _="deltaY"in w?jR(w):up(w),x=e.current.filter(function(A){return A.name===w.type&&A.target===w.target&&Ole(A.delta,_)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(OR).filter(Boolean).filter(function(A){return A.contains(w.target)}),S=b.length>0?a(w,b[0]):!o.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),c=p.useCallback(function(y,w,_,x){var b={name:y,delta:w,target:_,should:x};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),d=p.useCallback(function(y){n.current=up(y),r.current=void 0},[]),h=p.useCallback(function(y){c(y.type,jR(y),y.target,a(y,t.lockRef.current))},[]),m=p.useCallback(function(y){c(y.type,up(y),y.target,a(y,t.lockRef.current))},[]);p.useEffect(function(){return tl.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,el),document.addEventListener("touchmove",l,el),document.addEventListener("touchstart",d,el),function(){tl=tl.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,el),document.removeEventListener("touchmove",l,el),document.removeEventListener("touchstart",d,el)}},[]);var g=t.removeScrollBar,v=t.inert;return p.createElement(p.Fragment,null,v?p.createElement(i,{styles:Mle(s)}):null,g?p.createElement(_1,{gapMode:"margin"}):null)}const $le=w1(sF,Lle);var lF=p.forwardRef(function(t,e){return p.createElement(By,bt({},t,{ref:e,sideCar:$le}))});lF.classNames=By.classNames;const Fle=lF,Ule=[" ","Enter","ArrowUp","ArrowDown"],Ble=[" ","Enter"],zy="Select",[qy,Wy,zle]=qae(zy),[Gc,Qhe]=J1(zy,[zle,eF]),Z1=eF(),[qle,Oa]=Gc(zy),[Wle,Gle]=Gc(zy),Hle=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:h,disabled:m,required:g}=t,v=Z1(e),[y,w]=p.useState(null),[_,x]=p.useState(null),[b,S]=p.useState(!1),A=Gae(c),[D=!1,C]=kR({prop:r,defaultProp:s,onChange:i}),[I,P]=kR({prop:o,defaultProp:a,onChange:l}),R=p.useRef(null),j=y?!!y.closest("form"):!0,[O,k]=p.useState(new Set),W=Array.from(O).map(z=>z.props.value).join(";");return p.createElement(_le,v,p.createElement(qle,{required:g,scope:e,trigger:y,onTriggerChange:w,valueNode:_,onValueNodeChange:x,valueNodeHasChildren:b,onValueNodeHasChildrenChange:S,contentId:X4(),value:I,onValueChange:P,open:D,onOpenChange:C,dir:A,triggerPointerDownPosRef:R,disabled:m},p.createElement(qy.Provider,{scope:e},p.createElement(Wle,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(z=>{k(G=>new Set(G).add(z))},[]),onNativeOptionRemove:p.useCallback(z=>{k(G=>{const H=new Set(G);return H.delete(z),H})},[])},n)),j?p.createElement(fF,{key:W,"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:I,onChange:z=>P(z.target.value),disabled:m},I===void 0?p.createElement("option",{value:""}):null,Array.from(O)):null))},Kle="SelectTrigger",Qle=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Z1(n),o=Oa(Kle,n),a=o.disabled||r,l=yn(e,o.onTriggerChange),c=Wy(n),[d,h,m]=pF(v=>{const y=c().filter(x=>!x.disabled),w=y.find(x=>x.value===o.value),_=mF(y,v,w);_!==void 0&&o.onValueChange(_.value)}),g=()=>{a||(o.onOpenChange(!0),m())};return p.createElement(ble,be({asChild:!0},i),p.createElement(nn.button,be({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":hF(o.value)?"":void 0},s,{ref:l,onClick:Ut(s.onClick,v=>{v.currentTarget.focus()}),onPointerDown:Ut(s.onPointerDown,v=>{const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&(g(),o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)},v.preventDefault())}),onKeyDown:Ut(s.onKeyDown,v=>{const y=d.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(y&&v.key===" ")&&Ule.includes(v.key)&&(g(),v.preventDefault())})})))}),Yle="SelectValue",Xle=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=Oa(Yle,n),{onValueNodeHasChildrenChange:c}=l,d=i!==void 0,h=yn(e,l.onValueNodeChange);return mr(()=>{c(d)},[c,d]),p.createElement(nn.span,be({},a,{ref:h,style:{pointerEvents:"none"}}),hF(l.value)?p.createElement(p.Fragment,null,o):i)}),Jle=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return p.createElement(nn.span,be({"aria-hidden":!0},s,{ref:e}),r||"")}),Zle=t=>p.createElement(Tle,be({asChild:!0},t)),bc="SelectContent",ece=p.forwardRef((t,e)=>{const n=Oa(bc,t.__scopeSelect),[r,s]=p.useState();if(mr(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Nr.createPortal(p.createElement(cF,{scope:t.__scopeSelect},p.createElement(qy.Slot,{scope:t.__scopeSelect},p.createElement("div",null,t.children))),i):null}return p.createElement(tce,be({},t,{ref:e}))}),is=10,[cF,Ma]=Gc(bc),tce=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:w,..._}=t,x=Oa(bc,n),[b,S]=p.useState(null),[A,D]=p.useState(null),C=yn(e,ne=>S(ne)),[I,P]=p.useState(null),[R,j]=p.useState(null),O=Wy(n),[k,W]=p.useState(!1),z=p.useRef(!1);p.useEffect(()=>{if(b)return Uh(b)},[b]),nle();const G=p.useCallback(ne=>{const[Se,...Ie]=O().map(Ce=>Ce.ref.current),[xe]=Ie.slice(-1),ye=document.activeElement;for(const Ce of ne)if(Ce===ye||(Ce==null||Ce.scrollIntoView({block:"nearest"}),Ce===Se&&A&&(A.scrollTop=0),Ce===xe&&A&&(A.scrollTop=A.scrollHeight),Ce==null||Ce.focus(),document.activeElement!==ye))return},[O,A]),H=p.useCallback(()=>G([I,b]),[G,I,b]);p.useEffect(()=>{k&&H()},[k,H]);const{onOpenChange:M,triggerPointerDownPosRef:F}=x;p.useEffect(()=>{if(b){let ne={x:0,y:0};const Se=xe=>{var ye,Ce,Be,ct;ne={x:Math.abs(Math.round(xe.pageX)-((ye=(Ce=F.current)===null||Ce===void 0?void 0:Ce.x)!==null&&ye!==void 0?ye:0)),y:Math.abs(Math.round(xe.pageY)-((Be=(ct=F.current)===null||ct===void 0?void 0:ct.y)!==null&&Be!==void 0?Be:0))}},Ie=xe=>{ne.x<=10&&ne.y<=10?xe.preventDefault():b.contains(xe.target)||M(!1),document.removeEventListener("pointermove",Se),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",Se),document.addEventListener("pointerup",Ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Se),document.removeEventListener("pointerup",Ie,{capture:!0})}}},[b,M,F]),p.useEffect(()=>{const ne=()=>M(!1);return window.addEventListener("blur",ne),window.addEventListener("resize",ne),()=>{window.removeEventListener("blur",ne),window.removeEventListener("resize",ne)}},[M]);const[V,q]=pF(ne=>{const Se=O().filter(ye=>!ye.disabled),Ie=Se.find(ye=>ye.ref.current===document.activeElement),xe=mF(Se,ne,Ie);xe&&setTimeout(()=>xe.ref.current.focus())}),X=p.useCallback((ne,Se,Ie)=>{const xe=!z.current&&!Ie;(x.value!==void 0&&x.value===Se||xe)&&(P(ne),xe&&(z.current=!0))},[x.value]),K=p.useCallback(()=>b==null?void 0:b.focus(),[b]),fe=p.useCallback((ne,Se,Ie)=>{const xe=!z.current&&!Ie;(x.value!==void 0&&x.value===Se||xe)&&j(ne)},[x.value]),we=r==="popper"?MR:nce,ge=we===MR?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:w}:{};return p.createElement(cF,{scope:n,content:b,viewport:A,onViewportChange:D,itemRefCallback:X,selectedItem:I,onItemLeave:K,itemTextRefCallback:fe,focusSelectedItem:H,selectedItemText:R,position:r,isPositioned:k,searchRef:V},p.createElement(Fle,{as:Gd,allowPinchZoom:!0},p.createElement(rle,{asChild:!0,trapped:x.open,onMountAutoFocus:ne=>{ne.preventDefault()},onUnmountAutoFocus:Ut(s,ne=>{var Se;(Se=x.trigger)===null||Se===void 0||Se.focus({preventScroll:!0}),ne.preventDefault()})},p.createElement(Zae,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ne=>ne.preventDefault(),onDismiss:()=>x.onOpenChange(!1)},p.createElement(we,be({role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:ne=>ne.preventDefault()},_,ge,{onPlaced:()=>W(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:Ut(_.onKeyDown,ne=>{const Se=ne.ctrlKey||ne.altKey||ne.metaKey;if(ne.key==="Tab"&&ne.preventDefault(),!Se&&ne.key.length===1&&q(ne.key),["ArrowUp","ArrowDown","Home","End"].includes(ne.key)){let xe=O().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes(ne.key)&&(xe=xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ne.key)){const ye=ne.target,Ce=xe.indexOf(ye);xe=xe.slice(Ce+1)}setTimeout(()=>G(xe)),ne.preventDefault()}})}))))))}),nce=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Oa(bc,n),o=Ma(bc,n),[a,l]=p.useState(null),[c,d]=p.useState(null),h=yn(e,C=>d(C)),m=Wy(n),g=p.useRef(!1),v=p.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:_,focusSelectedItem:x}=o,b=p.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&y&&w&&_){const C=i.trigger.getBoundingClientRect(),I=c.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),R=_.getBoundingClientRect();if(i.dir!=="rtl"){const ye=R.left-I.left,Ce=P.left-ye,Be=C.left-Ce,ct=C.width+Be,Gt=Math.max(ct,I.width),Un=window.innerWidth-is,nr=TR(Ce,[is,Un-Gt]);a.style.minWidth=ct+"px",a.style.left=nr+"px"}else{const ye=I.right-R.right,Ce=window.innerWidth-P.right-ye,Be=window.innerWidth-C.right-Ce,ct=C.width+Be,Gt=Math.max(ct,I.width),Un=window.innerWidth-is,nr=TR(Ce,[is,Un-Gt]);a.style.minWidth=ct+"px",a.style.right=nr+"px"}const j=m(),O=window.innerHeight-is*2,k=y.scrollHeight,W=window.getComputedStyle(c),z=parseInt(W.borderTopWidth,10),G=parseInt(W.paddingTop,10),H=parseInt(W.borderBottomWidth,10),M=parseInt(W.paddingBottom,10),F=z+G+k+M+H,V=Math.min(w.offsetHeight*5,F),q=window.getComputedStyle(y),X=parseInt(q.paddingTop,10),K=parseInt(q.paddingBottom,10),fe=C.top+C.height/2-is,we=O-fe,ge=w.offsetHeight/2,ne=w.offsetTop+ge,Se=z+G+ne,Ie=F-Se;if(Se<=fe){const ye=w===j[j.length-1].ref.current;a.style.bottom="0px";const Ce=c.clientHeight-y.offsetTop-y.offsetHeight,Be=Math.max(we,ge+(ye?K:0)+Ce+H),ct=Se+Be;a.style.height=ct+"px"}else{const ye=w===j[0].ref.current;a.style.top="0px";const Be=Math.max(fe,z+y.offsetTop+(ye?X:0)+ge)+Ie;a.style.height=Be+"px",y.scrollTop=Se-fe+y.offsetTop}a.style.margin=`${is}px 0`,a.style.minHeight=V+"px",a.style.maxHeight=O+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,a,c,y,w,_,i.dir,r]);mr(()=>b(),[b]);const[S,A]=p.useState();mr(()=>{c&&A(window.getComputedStyle(c).zIndex)},[c]);const D=p.useCallback(C=>{C&&v.current===!0&&(b(),x==null||x(),v.current=!1)},[b,x]);return p.createElement(rce,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:D},p.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S}},p.createElement(nn.div,be({},s,{ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}}))))}),MR=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=is,...i}=t,o=Z1(n);return p.createElement(Ele,be({},o,i,{ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[rce,eT]=Gc(bc,{}),VR="SelectViewport",sce=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ma(VR,n),i=eT(VR,n),o=yn(e,s.onViewportChange),a=p.useRef(0);return p.createElement(p.Fragment,null,p.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),p.createElement(qy.Slot,{scope:n},p.createElement(nn.div,be({"data-radix-select-viewport":"",role:"presentation"},r,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:Ut(r.onScroll,l=>{const c=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&d){const m=Math.abs(a.current-c.scrollTop);if(m>0){const g=window.innerHeight-is*2,v=parseFloat(d.style.minHeight),y=parseFloat(d.style.height),w=Math.max(v,y);if(w<g){const _=w+m,x=Math.min(g,_),b=_-x;d.style.height=x+"px",d.style.bottom==="0px"&&(c.scrollTop=b>0?b:0,d.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),ice="SelectGroup",[Yhe,oce]=Gc(ice),ace="SelectLabel",lce=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=oce(ace,n);return p.createElement(nn.div,be({id:s.id},r,{ref:e}))}),s_="SelectItem",[cce,uF]=Gc(s_),uce=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=Oa(s_,n),l=Ma(s_,n),c=a.value===r,[d,h]=p.useState(i??""),[m,g]=p.useState(!1),v=yn(e,_=>{var x;return(x=l.itemRefCallback)===null||x===void 0?void 0:x.call(l,_,r,s)}),y=X4(),w=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.createElement(cce,{scope:n,value:r,disabled:s,textId:y,isSelected:c,onItemTextChange:p.useCallback(_=>{h(x=>{var b;return x||((b=_==null?void 0:_.textContent)!==null&&b!==void 0?b:"").trim()})},[])},p.createElement(qy.ItemSlot,{scope:n,value:r,disabled:s,textValue:d},p.createElement(nn.div,be({role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},o,{ref:v,onFocus:Ut(o.onFocus,()=>g(!0)),onBlur:Ut(o.onBlur,()=>g(!1)),onPointerUp:Ut(o.onPointerUp,w),onPointerMove:Ut(o.onPointerMove,_=>{if(s){var x;(x=l.onItemLeave)===null||x===void 0||x.call(l)}else _.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ut(o.onPointerLeave,_=>{if(_.currentTarget===document.activeElement){var x;(x=l.onItemLeave)===null||x===void 0||x.call(l)}}),onKeyDown:Ut(o.onKeyDown,_=>{var x;((x=l.searchRef)===null||x===void 0?void 0:x.current)!==""&&_.key===" "||(Ble.includes(_.key)&&w(),_.key===" "&&_.preventDefault())})}))))}),dp="SelectItemText",dce=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Oa(dp,n),a=Ma(dp,n),l=uF(dp,n),c=Gle(dp,n),[d,h]=p.useState(null),m=yn(e,_=>h(_),l.onItemTextChange,_=>{var x;return(x=a.itemTextRefCallback)===null||x===void 0?void 0:x.call(a,_,l.value,l.disabled)}),g=d==null?void 0:d.textContent,v=p.useMemo(()=>p.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},g),[l.disabled,l.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=c;return mr(()=>(y(v),()=>w(v)),[y,w,v]),p.createElement(p.Fragment,null,p.createElement(nn.span,be({id:l.textId},i,{ref:m})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Nr.createPortal(i.children,o.valueNode):null)}),hce="SelectItemIndicator",fce=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return uF(hce,n).isSelected?p.createElement(nn.span,be({"aria-hidden":!0},r,{ref:e})):null}),LR="SelectScrollUpButton",pce=p.forwardRef((t,e)=>{const n=Ma(LR,t.__scopeSelect),r=eT(LR,t.__scopeSelect),[s,i]=p.useState(!1),o=yn(e,r.onScrollButtonChange);return mr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const c=a.scrollTop>0;i(c)};const a=n.viewport;return l(),a.addEventListener("scroll",l),()=>a.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?p.createElement(dF,be({},t,{ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}})):null}),$R="SelectScrollDownButton",mce=p.forwardRef((t,e)=>{const n=Ma($R,t.__scopeSelect),r=eT($R,t.__scopeSelect),[s,i]=p.useState(!1),o=yn(e,r.onScrollButtonChange);return mr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const c=a.scrollHeight-a.clientHeight,d=Math.ceil(a.scrollTop)<c;i(d)};const a=n.viewport;return l(),a.addEventListener("scroll",l),()=>a.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?p.createElement(dF,be({},t,{ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}})):null}),dF=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Ma("SelectScrollButton",n),o=p.useRef(null),a=Wy(n),l=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),mr(()=>{var c;const d=a().find(h=>h.ref.current===document.activeElement);d==null||(c=d.ref.current)===null||c===void 0||c.scrollIntoView({block:"nearest"})},[a]),p.createElement(nn.div,be({"aria-hidden":!0},s,{ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ut(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ut(s.onPointerMove,()=>{var c;(c=i.onItemLeave)===null||c===void 0||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ut(s.onPointerLeave,()=>{l()})}))}),gce=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return p.createElement(nn.div,be({"aria-hidden":!0},r,{ref:e}))});function hF(t){return t===""||t===void 0}const fF=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=p.useRef(null),i=yn(e,s),o=Ile(n);return p.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&d){const h=new Event("change",{bubbles:!0});d.call(a,n),a.dispatchEvent(h)}},[o,n]),p.createElement(Cle,{asChild:!0},p.createElement("select",be({},r,{ref:i,defaultValue:n})))});fF.displayName="BubbleSelect";function pF(t){const e=$s(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function mF(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=yce(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function yce(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const vce=Hle,gF=Qle,xce=Xle,wce=Jle,_ce=Zle,yF=ece,bce=sce,vF=lce,xF=uce,Ece=dce,Tce=fce,wF=pce,_F=mce,bF=gce,i_=vce,o_=xce,sg=re.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(gF,{ref:r,className:ae("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,u.jsx(wce,{asChild:!0,children:u.jsx(CV,{className:"h-4 w-4 opacity-50"})})]}));sg.displayName=gF.displayName;const EF=re.forwardRef(({className:t,...e},n)=>u.jsx(wF,{ref:n,className:ae("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(wZ,{className:"h-4 w-4"})}));EF.displayName=wF.displayName;const TF=re.forwardRef(({className:t,...e},n)=>u.jsx(_F,{ref:n,className:ae("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(CV,{className:"h-4 w-4"})}));TF.displayName=_F.displayName;const ig=re.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>u.jsx(_ce,{children:u.jsxs(yF,{ref:s,className:ae("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[u.jsx(EF,{}),u.jsx(bce,{className:ae("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),u.jsx(TF,{})]})}));ig.displayName=yF.displayName;const Sce=re.forwardRef(({className:t,...e},n)=>u.jsx(vF,{ref:n,className:ae("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Sce.displayName=vF.displayName;const og=re.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(xF,{ref:r,className:ae("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(Tce,{children:u.jsx(yy,{className:"h-4 w-4"})})}),u.jsx(Ece,{children:e})]}));og.displayName=xF.displayName;const Ice=re.forwardRef(({className:t,...e},n)=>u.jsx(bF,{ref:n,className:ae("-mx-1 my-1 h-px bg-muted",t),...e}));Ice.displayName=bF.displayName;const Cce=({order:t,logoPreview:e,handleLogoUpload:n,formatDate:r,formatPrice:s,getStatusInfo:i})=>{const o=p.useRef(null),a=()=>{const C=window.open("","_blank");C.document.write("<html><head><title> </title>"),C.document.write('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">'),C.document.write('<style>body { direction: rtl; font-family: "Cairo", sans-serif; padding: 20px; } @media print { body { -webkit-print-color-adjust: exact; } .no-print { display: none; } }</style>'),C.document.write("</head><body>"),o.current&&C.document.write(o.current.innerHTML),C.document.write("</body></html>"),C.document.close(),setTimeout(()=>{C.print(),C.close()},500)},l=t||{},c=l.shipping||{},d=c.fullName||" ",h=l.userEmail||" ",m=c.phone||" ",g=c.address||" ",v=c.city||" ",y=c.country||" ",w=c.postalCode||"",_=c.notes||"",x=l.items||[],b=l.subtotal||0,S=l.shippingCost||0,A=l.total||0,D=i(l.status);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{ref:o,children:[u.jsxs(Ll,{className:"p-6 border-b dark:border-slate-700",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs($l,{className:"text-2xl font-bold text-sky-600 dark:text-sky-400",children:["  #",l.id?l.id.slice(0,8):" "]}),e&&u.jsx("img",{src:e,alt:" ",className:"h-12 max-w-[150px] object-contain"})]}),u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[" : ",r(l.createdAt)]}),u.jsx(Uc,{className:`${D.color} ${D.textColor} text-xs`,children:D.label})]}),u.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-lg mb-2 text-slate-700 dark:text-slate-200",children:" "}),u.jsxs("p",{children:[u.jsx("strong",{children:":"})," ",d]}),u.jsxs("p",{children:[u.jsx("strong",{children:":"})," ",h]}),u.jsxs("p",{children:[u.jsx("strong",{children:":"})," ",m]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-lg mb-2 text-slate-700 dark:text-slate-200",children:" "}),u.jsx("p",{children:g}),u.jsxs("p",{children:[v,w&&`, ${w}`]}),u.jsx("p",{children:y}),_&&u.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[": ",_]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-lg mb-2 text-slate-700 dark:text-slate-200",children:" "}),x.length>0?u.jsxs(Kh,{children:[u.jsx(Qh,{children:u.jsxs(Ls,{children:[u.jsx(dt,{className:"text-right",children:""}),u.jsx(dt,{className:"text-right",children:""}),u.jsx(dt,{className:"text-right",children:""}),u.jsx(dt,{className:"text-right",children:""})]})}),u.jsx(Yh,{children:x.map(C=>u.jsxs(Ls,{children:[u.jsx(ht,{children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("img",{src:C.imageUrl||"https://via.placeholder.com/50",alt:C.name||"",className:"w-10 h-10 object-cover rounded-md ml-3 rtl:mr-3"}),C.name||"   "]})}),u.jsx(ht,{children:C.quantity||0}),u.jsx(ht,{children:s(C.price)}),u.jsx(ht,{children:s((C.price||0)*(C.quantity||0))})]},C.id||C.name))})]}):u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"     ."})]}),u.jsxs("div",{className:"text-right border-t dark:border-slate-700 pt-4 mt-4",children:[u.jsxs("p",{children:[u.jsx("strong",{children:" :"})," ",s(b)]}),u.jsxs("p",{children:[u.jsx("strong",{children:" :"})," ",s(S)]}),u.jsxs("p",{className:"text-xl font-bold",children:[u.jsx("strong",{children:" :"})," ",s(A)]})]})]})]}),u.jsxs(Bh,{className:"p-6 border-t dark:border-slate-700 flex-col sm:flex-row gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2 no-print",children:[u.jsxs("label",{htmlFor:"logoUploadModal",className:"cursor-pointer",children:[u.jsx(de,{variant:"outline",asChild:!0,children:u.jsxs("span",{children:[u.jsx(HZ,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"  "]})}),u.jsx(Ee,{id:"logoUploadModal",type:"file",accept:"image/*",onChange:n,className:"hidden"})]}),u.jsxs(de,{onClick:a,className:"bg-green-500 hover:bg-green-600 text-white",children:[u.jsx(zZ,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"  "]})]}),u.jsx(use,{asChild:!0,className:"no-print",children:u.jsx(de,{variant:"outline",children:""})})]})]})};var SF="AlertDialog",[Pce,Xhe]=gr(SF,[p$]),Xs=p$(),IF=t=>{const{__scopeAlertDialog:e,...n}=t,r=Xs(e);return u.jsx(R$,{...r,...n,modal:!0})};IF.displayName=SF;var Ace="AlertDialogTrigger",CF=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xs(n);return u.jsx(N$,{...s,...r,ref:e})});CF.displayName=Ace;var Rce="AlertDialogPortal",PF=t=>{const{__scopeAlertDialog:e,...n}=t,r=Xs(e);return u.jsx(k$,{...r,...n})};PF.displayName=Rce;var Nce="AlertDialogOverlay",AF=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xs(n);return u.jsx(I1,{...s,...r,ref:e})});AF.displayName=Nce;var Bl="AlertDialogContent",[kce,Dce]=Pce(Bl),jce=jee("AlertDialogContent"),RF=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Xs(n),o=p.useRef(null),a=Ae(e,o),l=p.useRef(null);return u.jsx(sse,{contentName:Bl,titleName:NF,docsSlug:"alert-dialog",children:u.jsx(kce,{scope:n,cancelRef:l,children:u.jsxs(C1,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:ce(s.onOpenAutoFocus,c=>{var d;c.preventDefault(),(d=l.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[u.jsx(jce,{children:r}),u.jsx(Mce,{contentRef:o})]})})})});RF.displayName=Bl;var NF="AlertDialogTitle",kF=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xs(n);return u.jsx(P1,{...s,...r,ref:e})});kF.displayName=NF;var DF="AlertDialogDescription",jF=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xs(n);return u.jsx(A1,{...s,...r,ref:e})});jF.displayName=DF;var Oce="AlertDialogAction",OF=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Xs(n);return u.jsx(jy,{...s,...r,ref:e})});OF.displayName=Oce;var MF="AlertDialogCancel",VF=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=Dce(MF,n),i=Xs(n),o=Ae(e,s);return u.jsx(jy,{...i,...r,ref:o})});VF.displayName=MF;var Mce=({contentRef:t})=>{const e=`\`${Bl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Bl}\` by passing a \`${DF}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Bl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},Vce=IF,Lce=CF,$ce=PF,LF=AF,$F=RF,FF=OF,UF=VF,BF=kF,zF=jF;const ag=Vce,lg=Lce,Fce=$ce,qF=re.forwardRef(({className:t,...e},n)=>u.jsx(LF,{className:ae("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));qF.displayName=LF.displayName;const Hd=re.forwardRef(({className:t,...e},n)=>u.jsxs(Fce,{children:[u.jsx(qF,{}),u.jsx($F,{ref:n,className:ae("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Hd.displayName=$F.displayName;const Kd=({className:t,...e})=>u.jsx("div",{className:ae("flex flex-col space-y-2 text-center sm:text-left",t),...e});Kd.displayName="AlertDialogHeader";const Qd=({className:t,...e})=>u.jsx("div",{className:ae("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 rtl:sm:space-x-reverse",t),...e});Qd.displayName="AlertDialogFooter";const Yd=re.forwardRef(({className:t,...e},n)=>u.jsx(BF,{ref:n,className:ae("text-lg font-semibold",t),...e}));Yd.displayName=BF.displayName;const Xd=re.forwardRef(({className:t,...e},n)=>u.jsx(zF,{ref:n,className:ae("text-sm text-muted-foreground",t),...e}));Xd.displayName=zF.displayName;const Jd=re.forwardRef(({className:t,...e},n)=>u.jsx(FF,{ref:n,className:ae(i1(),t),...e}));Jd.displayName=FF.displayName;const Zd=re.forwardRef(({className:t,...e},n)=>u.jsx(UF,{ref:n,className:ae(i1({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Zd.displayName=UF.displayName;var Uce="Arrow",WF=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return u.jsx(Oe.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});WF.displayName=Uce;var Bce=WF,tT="Popper",[GF,HF]=gr(tT),[zce,KF]=GF(tT),QF=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return u.jsx(zce,{scope:e,anchor:r,onAnchorChange:s,children:n})};QF.displayName=tT;var YF="PopperAnchor",XF=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=KF(YF,n),o=p.useRef(null),a=Ae(e,o);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:u.jsx(Oe.div,{...s,ref:a})});XF.displayName=YF;var nT="PopperContent",[qce,Wce]=GF(nT),JF=p.forwardRef((t,e)=>{var ne,Se,Ie,xe,ye,Ce;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...y}=t,w=KF(nT,n),[_,x]=p.useState(null),b=Ae(e,Be=>x(Be)),[S,A]=p.useState(null),D=Py(S),C=(D==null?void 0:D.width)??0,I=(D==null?void 0:D.height)??0,P=r+(i!=="center"?"-"+i:""),R=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},j=Array.isArray(c)?c:[c],O=j.length>0,k={padding:R,boundary:j.filter(Hce),altBoundary:O},{refs:W,floatingStyles:z,placement:G,isPositioned:H,middlewareData:M}=U1({strategy:"fixed",placement:P,whileElementsMounted:(...Be)=>F1(...Be,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[B1({mainAxis:s+I,alignmentAxis:o}),l&&z1({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?q1():void 0,...k}),l&&W1({...k}),G1({...k,apply:({elements:Be,rects:ct,availableWidth:Gt,availableHeight:Un})=>{const{width:nr,height:mo}=ct.reference,Cn=Be.floating.style;Cn.setProperty("--radix-popper-available-width",`${Gt}px`),Cn.setProperty("--radix-popper-available-height",`${Un}px`),Cn.setProperty("--radix-popper-anchor-width",`${nr}px`),Cn.setProperty("--radix-popper-anchor-height",`${mo}px`)}}),S&&K1({element:S,padding:a}),Kce({arrowWidth:C,arrowHeight:I}),m&&H1({strategy:"referenceHidden",...k})]}),[F,V]=t5(G),q=qt(v);pr(()=>{H&&(q==null||q())},[H,q]);const X=(ne=M.arrow)==null?void 0:ne.x,K=(Se=M.arrow)==null?void 0:Se.y,fe=((Ie=M.arrow)==null?void 0:Ie.centerOffset)!==0,[we,ge]=p.useState();return pr(()=>{_&&ge(window.getComputedStyle(_).zIndex)},[_]),u.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:H?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[(xe=M.transformOrigin)==null?void 0:xe.x,(ye=M.transformOrigin)==null?void 0:ye.y].join(" "),...((Ce=M.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:u.jsx(qce,{scope:n,placedSide:F,onArrowChange:A,arrowX:X,arrowY:K,shouldHideArrow:fe,children:u.jsx(Oe.div,{"data-side":F,"data-align":V,...y,ref:b,style:{...y.style,animation:H?void 0:"none"}})})})});JF.displayName=nT;var ZF="PopperArrow",Gce={top:"bottom",right:"left",bottom:"top",left:"right"},e5=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=Wce(ZF,r),o=Gce[i.placedSide];return u.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:u.jsx(Bce,{...s,ref:n,style:{...s.style,display:"block"}})})});e5.displayName=ZF;function Hce(t){return t!==null}var Kce=t=>({name:"transformOrigin",options:t,fn(e){var w,_,x;const{placement:n,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=t5(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,g=(((x=s.arrow)==null?void 0:x.y)??0)+l/2;let v="",y="";return c==="bottom"?(v=o?h:`${m}px`,y=`${-l}px`):c==="top"?(v=o?h:`${m}px`,y=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,y=o?h:`${g}px`):c==="left"&&(v=`${r.floating.width+l}px`,y=o?h:`${g}px`),{data:{x:v,y}}}});function t5(t){const[e,n="center"]=t.split("-");return[e,n]}var Qce=QF,Yce=XF,Xce=JF,Jce=e5,z0="rovingFocusGroup.onEntryFocus",Zce={bubbles:!1,cancelable:!0},Xh="RovingFocusGroup",[a_,n5,eue]=Ey(Xh),[tue,r5]=gr(Xh,[eue]),[nue,rue]=tue(Xh),s5=p.forwardRef((t,e)=>u.jsx(a_.Provider,{scope:t.__scopeRovingFocusGroup,children:u.jsx(a_.Slot,{scope:t.__scopeRovingFocusGroup,children:u.jsx(sue,{...t,ref:e})})}));s5.displayName=Xh;var sue=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...h}=t,m=p.useRef(null),g=Ae(e,m),v=d1(i),[y,w]=Na({prop:o,defaultProp:a??null,onChange:l,caller:Xh}),[_,x]=p.useState(!1),b=qt(c),S=n5(n),A=p.useRef(!1),[D,C]=p.useState(0);return p.useEffect(()=>{const I=m.current;if(I)return I.addEventListener(z0,b),()=>I.removeEventListener(z0,b)},[b]),u.jsx(nue,{scope:n,orientation:r,dir:v,loop:s,currentTabStopId:y,onItemFocus:p.useCallback(I=>w(I),[w]),onItemShiftTab:p.useCallback(()=>x(!0),[]),onFocusableItemAdd:p.useCallback(()=>C(I=>I+1),[]),onFocusableItemRemove:p.useCallback(()=>C(I=>I-1),[]),children:u.jsx(Oe.div,{tabIndex:_||D===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:ce(t.onMouseDown,()=>{A.current=!0}),onFocus:ce(t.onFocus,I=>{const P=!A.current;if(I.target===I.currentTarget&&P&&!_){const R=new CustomEvent(z0,Zce);if(I.currentTarget.dispatchEvent(R),!R.defaultPrevented){const j=S().filter(G=>G.focusable),O=j.find(G=>G.active),k=j.find(G=>G.id===y),z=[O,k,...j].filter(Boolean).map(G=>G.ref.current);a5(z,d)}}A.current=!1}),onBlur:ce(t.onBlur,()=>x(!1))})})}),i5="RovingFocusGroupItem",o5=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=t,l=Ko(),c=i||l,d=rue(i5,n),h=d.currentTabStopId===c,m=n5(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:y}=d;return p.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),u.jsx(a_.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:u.jsx(Oe.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:ce(t.onMouseDown,w=>{r?d.onItemFocus(c):w.preventDefault()}),onFocus:ce(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:ce(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const _=aue(w,d.orientation,d.dir);if(_!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=m().filter(S=>S.focusable).map(S=>S.ref.current);if(_==="last")b.reverse();else if(_==="prev"||_==="next"){_==="prev"&&b.reverse();const S=b.indexOf(w.currentTarget);b=d.loop?lue(b,S+1):b.slice(S+1)}setTimeout(()=>a5(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:y!=null}):o})})});o5.displayName=i5;var iue={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function oue(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function aue(t,e,n){const r=oue(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return iue[r]}function a5(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function lue(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var cue=s5,uue=o5,l_=["Enter"," "],due=["ArrowDown","PageUp","Home"],l5=["ArrowUp","PageDown","End"],hue=[...due,...l5],fue={ltr:[...l_,"ArrowRight"],rtl:[...l_,"ArrowLeft"]},pue={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Jh="Menu",[eh,mue,gue]=Ey(Jh),[Va,c5]=gr(Jh,[gue,HF,r5]),Gy=HF(),u5=r5(),[yue,La]=Va(Jh),[vue,Zh]=Va(Jh),d5=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,a=Gy(e),[l,c]=p.useState(null),d=p.useRef(!1),h=qt(i),m=d1(s);return p.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),u.jsx(Qce,{...a,children:u.jsx(yue,{scope:e,open:n,onOpenChange:h,content:l,onContentChange:c,children:u.jsx(vue,{scope:e,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:o,children:r})})})};d5.displayName=Jh;var xue="MenuAnchor",rT=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Gy(n);return u.jsx(Yce,{...s,...r,ref:e})});rT.displayName=xue;var sT="MenuPortal",[wue,h5]=Va(sT,{forceMount:void 0}),f5=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=La(sT,e);return u.jsx(wue,{scope:e,forceMount:n,children:u.jsx(yr,{present:n||i.open,children:u.jsx(Sy,{asChild:!0,container:s,children:r})})})};f5.displayName=sT;var cr="MenuContent",[_ue,iT]=Va(cr),p5=p.forwardRef((t,e)=>{const n=h5(cr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=La(cr,t.__scopeMenu),o=Zh(cr,t.__scopeMenu);return u.jsx(eh.Provider,{scope:t.__scopeMenu,children:u.jsx(yr,{present:r||i.open,children:u.jsx(eh.Slot,{scope:t.__scopeMenu,children:o.modal?u.jsx(bue,{...s,ref:e}):u.jsx(Eue,{...s,ref:e})})})})}),bue=p.forwardRef((t,e)=>{const n=La(cr,t.__scopeMenu),r=p.useRef(null),s=Ae(e,r);return p.useEffect(()=>{const i=r.current;if(i)return Uh(i)},[]),u.jsx(oT,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ce(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Eue=p.forwardRef((t,e)=>{const n=La(cr,t.__scopeMenu);return u.jsx(oT,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Tue=xc("MenuContent.ScrollLock"),oT=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:v,...y}=t,w=La(cr,n),_=Zh(cr,n),x=Gy(n),b=u5(n),S=mue(n),[A,D]=p.useState(null),C=p.useRef(null),I=Ae(e,C,w.onContentChange),P=p.useRef(0),R=p.useRef(""),j=p.useRef(0),O=p.useRef(null),k=p.useRef("right"),W=p.useRef(0),z=v?b1:p.Fragment,G=v?{as:Tue,allowPinchZoom:!0}:void 0,H=F=>{var ne,Se;const V=R.current+F,q=S().filter(Ie=>!Ie.disabled),X=document.activeElement,K=(ne=q.find(Ie=>Ie.ref.current===X))==null?void 0:ne.textValue,fe=q.map(Ie=>Ie.textValue),we=Mue(fe,V,K),ge=(Se=q.find(Ie=>Ie.textValue===we))==null?void 0:Se.ref.current;(function Ie(xe){R.current=xe,window.clearTimeout(P.current),xe!==""&&(P.current=window.setTimeout(()=>Ie(""),1e3))})(V),ge&&setTimeout(()=>ge.focus())};p.useEffect(()=>()=>window.clearTimeout(P.current),[]),y1();const M=p.useCallback(F=>{var q,X;return k.current===((q=O.current)==null?void 0:q.side)&&Lue(F,(X=O.current)==null?void 0:X.area)},[]);return u.jsx(_ue,{scope:n,searchRef:R,onItemEnter:p.useCallback(F=>{M(F)&&F.preventDefault()},[M]),onItemLeave:p.useCallback(F=>{var V;M(F)||((V=C.current)==null||V.focus(),D(null))},[M]),onTriggerLeave:p.useCallback(F=>{M(F)&&F.preventDefault()},[M]),pointerGraceTimerRef:j,onPointerGraceIntentChange:p.useCallback(F=>{O.current=F},[]),children:u.jsx(z,{...G,children:u.jsx(g1,{asChild:!0,trapped:s,onMountAutoFocus:ce(i,F=>{var V;F.preventDefault(),(V=C.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:u.jsx(Ty,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:u.jsx(cue,{asChild:!0,...b,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:A,onCurrentTabStopIdChange:D,onEntryFocus:ce(l,F=>{_.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(Xce,{role:"menu","aria-orientation":"vertical","data-state":R5(w.open),"data-radix-menu-content":"",dir:_.dir,...x,...y,ref:I,style:{outline:"none",...y.style},onKeyDown:ce(y.onKeyDown,F=>{const q=F.target.closest("[data-radix-menu-content]")===F.currentTarget,X=F.ctrlKey||F.altKey||F.metaKey,K=F.key.length===1;q&&(F.key==="Tab"&&F.preventDefault(),!X&&K&&H(F.key));const fe=C.current;if(F.target!==fe||!hue.includes(F.key))return;F.preventDefault();const ge=S().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);l5.includes(F.key)&&ge.reverse(),jue(ge)}),onBlur:ce(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(P.current),R.current="")}),onPointerMove:ce(t.onPointerMove,th(F=>{const V=F.target,q=W.current!==F.clientX;if(F.currentTarget.contains(V)&&q){const X=F.clientX>W.current?"right":"left";k.current=X,W.current=F.clientX}}))})})})})})})});p5.displayName=cr;var Sue="MenuGroup",aT=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return u.jsx(Oe.div,{role:"group",...r,ref:e})});aT.displayName=Sue;var Iue="MenuLabel",m5=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return u.jsx(Oe.div,{...r,ref:e})});m5.displayName=Iue;var cg="MenuItem",FR="menu.itemSelect",Hy=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=p.useRef(null),o=Zh(cg,t.__scopeMenu),a=iT(cg,t.__scopeMenu),l=Ae(e,i),c=p.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(FR,{bubbles:!0,cancelable:!0});h.addEventListener(FR,g=>r==null?void 0:r(g),{once:!0}),o1(h,m),m.defaultPrevented?c.current=!1:o.onClose()}};return u.jsx(g5,{...s,ref:l,disabled:n,onClick:ce(t.onClick,d),onPointerDown:h=>{var m;(m=t.onPointerDown)==null||m.call(t,h),c.current=!0},onPointerUp:ce(t.onPointerUp,h=>{var m;c.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:ce(t.onKeyDown,h=>{const m=a.searchRef.current!=="";n||m&&h.key===" "||l_.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Hy.displayName=cg;var g5=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=iT(cg,n),a=u5(n),l=p.useRef(null),c=Ae(e,l),[d,h]=p.useState(!1),[m,g]=p.useState("");return p.useEffect(()=>{const v=l.current;v&&g((v.textContent??"").trim())},[i.children]),u.jsx(eh.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:u.jsx(uue,{asChild:!0,...a,focusable:!r,children:u.jsx(Oe.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:ce(t.onPointerMove,th(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ce(t.onPointerLeave,th(v=>o.onItemLeave(v))),onFocus:ce(t.onFocus,()=>h(!0)),onBlur:ce(t.onBlur,()=>h(!1))})})})}),Cue="MenuCheckboxItem",y5=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return u.jsx(b5,{scope:t.__scopeMenu,checked:n,children:u.jsx(Hy,{role:"menuitemcheckbox","aria-checked":ug(n)?"mixed":n,...s,ref:e,"data-state":cT(n),onSelect:ce(s.onSelect,()=>r==null?void 0:r(ug(n)?!0:!n),{checkForDefaultPrevented:!1})})})});y5.displayName=Cue;var v5="MenuRadioGroup",[Pue,Aue]=Va(v5,{value:void 0,onValueChange:()=>{}}),x5=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=qt(r);return u.jsx(Pue,{scope:t.__scopeMenu,value:n,onValueChange:i,children:u.jsx(aT,{...s,ref:e})})});x5.displayName=v5;var w5="MenuRadioItem",_5=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=Aue(w5,t.__scopeMenu),i=n===s.value;return u.jsx(b5,{scope:t.__scopeMenu,checked:i,children:u.jsx(Hy,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":cT(i),onSelect:ce(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});_5.displayName=w5;var lT="MenuItemIndicator",[b5,Rue]=Va(lT,{checked:!1}),E5=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=Rue(lT,n);return u.jsx(yr,{present:r||ug(i.checked)||i.checked===!0,children:u.jsx(Oe.span,{...s,ref:e,"data-state":cT(i.checked)})})});E5.displayName=lT;var Nue="MenuSeparator",T5=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return u.jsx(Oe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});T5.displayName=Nue;var kue="MenuArrow",S5=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Gy(n);return u.jsx(Jce,{...s,...r,ref:e})});S5.displayName=kue;var Due="MenuSub",[Jhe,I5]=Va(Due),Mu="MenuSubTrigger",C5=p.forwardRef((t,e)=>{const n=La(Mu,t.__scopeMenu),r=Zh(Mu,t.__scopeMenu),s=I5(Mu,t.__scopeMenu),i=iT(Mu,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},d=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),u.jsx(rT,{asChild:!0,...c,children:u.jsx(g5,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":R5(n.open),...t,ref:_y(e,s.onTriggerChange),onClick:h=>{var m;(m=t.onClick)==null||m.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ce(t.onPointerMove,th(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:ce(t.onPointerLeave,th(h=>{var g,v;d();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const y=(v=n.content)==null?void 0:v.dataset.side,w=y==="right",_=w?-5:5,x=m[w?"left":"right"],b=m[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+_,y:h.clientY},{x,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x,y:m.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ce(t.onKeyDown,h=>{var g;const m=i.searchRef.current!=="";t.disabled||m&&h.key===" "||fue[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});C5.displayName=Mu;var P5="MenuSubContent",A5=p.forwardRef((t,e)=>{const n=h5(cr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=La(cr,t.__scopeMenu),o=Zh(cr,t.__scopeMenu),a=I5(P5,t.__scopeMenu),l=p.useRef(null),c=Ae(e,l);return u.jsx(eh.Provider,{scope:t.__scopeMenu,children:u.jsx(yr,{present:r||i.open,children:u.jsx(eh.Slot,{scope:t.__scopeMenu,children:u.jsx(oT,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ce(t.onFocusOutside,d=>{d.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ce(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:ce(t.onKeyDown,d=>{var g;const h=d.currentTarget.contains(d.target),m=pue[o.dir].includes(d.key);h&&m&&(i.onOpenChange(!1),(g=a.trigger)==null||g.focus(),d.preventDefault())})})})})})});A5.displayName=P5;function R5(t){return t?"open":"closed"}function ug(t){return t==="indeterminate"}function cT(t){return ug(t)?"indeterminate":t?"checked":"unchecked"}function jue(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Oue(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Mue(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Oue(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function Vue(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],l=e[o],c=a.x,d=a.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-c)*(r-d)/(m-d)+c&&(s=!s)}return s}function Lue(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Vue(n,e)}function th(t){return e=>e.pointerType==="mouse"?t(e):void 0}var $ue=d5,Fue=rT,Uue=f5,Bue=p5,zue=aT,que=m5,Wue=Hy,Gue=y5,Hue=x5,Kue=_5,Que=E5,Yue=T5,Xue=S5,Jue=C5,Zue=A5,Ky="DropdownMenu",[ede,Zhe]=gr(Ky,[c5]),In=c5(),[tde,N5]=ede(Ky),k5=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=In(e),c=p.useRef(null),[d,h]=Na({prop:s,defaultProp:i??!1,onChange:o,caller:Ky});return u.jsx(tde,{scope:e,triggerId:Ko(),triggerRef:c,contentId:Ko(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),modal:a,children:u.jsx($ue,{...l,open:d,onOpenChange:h,dir:r,modal:a,children:n})})};k5.displayName=Ky;var D5="DropdownMenuTrigger",j5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=N5(D5,n),o=In(n);return u.jsx(Fue,{asChild:!0,...o,children:u.jsx(Oe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:_y(e,i.triggerRef),onPointerDown:ce(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:ce(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});j5.displayName=D5;var nde="DropdownMenuPortal",O5=t=>{const{__scopeDropdownMenu:e,...n}=t,r=In(e);return u.jsx(Uue,{...r,...n})};O5.displayName=nde;var M5="DropdownMenuContent",V5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=N5(M5,n),i=In(n),o=p.useRef(!1);return u.jsx(Bue,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:ce(t.onCloseAutoFocus,a=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ce(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;(!s.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});V5.displayName=M5;var rde="DropdownMenuGroup",sde=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return u.jsx(zue,{...s,...r,ref:e})});sde.displayName=rde;var ide="DropdownMenuLabel",L5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return u.jsx(que,{...s,...r,ref:e})});L5.displayName=ide;var ode="DropdownMenuItem",$5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return u.jsx(Wue,{...s,...r,ref:e})});$5.displayName=ode;var ade="DropdownMenuCheckboxItem",F5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return u.jsx(Gue,{...s,...r,ref:e})});F5.displayName=ade;var lde="DropdownMenuRadioGroup",cde=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return u.jsx(Hue,{...s,...r,ref:e})});cde.displayName=lde;var ude="DropdownMenuRadioItem",U5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return u.jsx(Kue,{...s,...r,ref:e})});U5.displayName=ude;var dde="DropdownMenuItemIndicator",B5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return u.jsx(Que,{...s,...r,ref:e})});B5.displayName=dde;var hde="DropdownMenuSeparator",z5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return u.jsx(Yue,{...s,...r,ref:e})});z5.displayName=hde;var fde="DropdownMenuArrow",pde=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return u.jsx(Xue,{...s,...r,ref:e})});pde.displayName=fde;var mde="DropdownMenuSubTrigger",q5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return u.jsx(Jue,{...s,...r,ref:e})});q5.displayName=mde;var gde="DropdownMenuSubContent",W5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=In(n);return u.jsx(Zue,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});W5.displayName=gde;var yde=k5,vde=j5,xde=O5,G5=V5,H5=L5,K5=$5,Q5=F5,Y5=U5,X5=B5,J5=z5,Z5=q5,e3=W5;const t3=yde,n3=vde,wde=re.forwardRef(({className:t,inset:e,children:n,...r},s)=>u.jsxs(Z5,{ref:s,className:ae("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,u.jsx(Rw,{className:"ml-auto h-4 w-4"})]}));wde.displayName=Z5.displayName;const _de=re.forwardRef(({className:t,...e},n)=>u.jsx(e3,{ref:n,className:ae("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));_de.displayName=e3.displayName;const uT=re.forwardRef(({className:t,sideOffset:e=4,...n},r)=>u.jsx(xde,{children:u.jsx(G5,{ref:r,sideOffset:e,className:ae("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));uT.displayName=G5.displayName;const zl=re.forwardRef(({className:t,inset:e,...n},r)=>u.jsx(K5,{ref:r,className:ae("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));zl.displayName=K5.displayName;const bde=re.forwardRef(({className:t,children:e,checked:n,...r},s)=>u.jsxs(Q5,{ref:s,className:ae("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(X5,{children:u.jsx(yy,{className:"h-4 w-4"})})}),e]}));bde.displayName=Q5.displayName;const Ede=re.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(Y5,{ref:r,className:ae("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(X5,{children:u.jsx(EZ,{className:"h-2 w-2 fill-current"})})}),e]}));Ede.displayName=Y5.displayName;const Tde=re.forwardRef(({className:t,inset:e,...n},r)=>u.jsx(H5,{ref:r,className:ae("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Tde.displayName=H5.displayName;const Sde=re.forwardRef(({className:t,...e},n)=>u.jsx(J5,{ref:n,className:ae("-mx-1 my-1 h-px bg-muted",t),...e}));Sde.displayName=J5.displayName;const Ide=({orders:t,selectedOrders:e,handleSelectOrder:n,handleSelectAll:r,openDetailsModal:s,handleStatusChange:i,handleDeleteOrder:o,formatDate:a,formatPrice:l,getStatusInfo:c,statusOptions:d})=>u.jsx("div",{className:"bg-white dark:bg-slate-800 shadow-md rounded-lg overflow-x-auto",children:u.jsxs(Kh,{children:[u.jsx(Qh,{className:"bg-slate-50 dark:bg-slate-700/50",children:u.jsxs(Ls,{children:[u.jsx(dt,{className:"px-3 py-3.5 w-10 text-center",children:u.jsx(Jm,{checked:e.length===t.length&&t.length>0,onCheckedChange:h=>r(h),"aria-label":" "})}),u.jsx(dt,{className:"text-right px-3 py-3.5",children:" "}),u.jsx(dt,{className:"text-right px-3 py-3.5",children:""}),u.jsx(dt,{className:"text-right px-3 py-3.5",children:""}),u.jsx(dt,{className:"text-right px-3 py-3.5",children:""}),u.jsx(dt,{className:"text-right px-3 py-3.5",children:""}),u.jsx(dt,{className:"text-center px-3 py-3.5",children:""})]})}),u.jsx(Yh,{children:t.map(h=>{const m=c(h.status),g=h.customerInfo||{},v=h.shipping||{},y=g.name||v.fullName||" ",w=g.email||h.userEmail||" ",_=typeof h.totalAmount<"u"?h.totalAmount:typeof h.total<"u"?h.total:0;return u.jsxs(Ls,{"data-state":e.includes(h.id)?"selected":"",className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[u.jsx(ht,{className:"px-3 py-4 text-center",children:u.jsx(Jm,{checked:e.includes(h.id),onCheckedChange:x=>n(h.id,x),"aria-label":`  ${h.id.slice(0,8)}`})}),u.jsx(ht,{className:"font-medium text-sky-600 dark:text-sky-400 px-3 py-4",children:u.jsxs("span",{onClick:()=>s(h),className:"hover:underline cursor-pointer",children:["#",h.id.slice(0,8),"..."]})}),u.jsxs(ht,{className:"px-3 py-4",children:[u.jsx("div",{children:y}),u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:w})]}),u.jsx(ht,{className:"px-3 py-4",children:a(h.createdAt)}),u.jsx(ht,{className:"px-3 py-4",children:l(_)}),u.jsx(ht,{className:"px-3 py-4",children:u.jsxs(i_,{value:h.status||"",onValueChange:x=>i(h.id,x),children:[u.jsx(sg,{className:`w-full text-xs h-8 px-2 py-1 rounded-md border-0 focus:ring-0 focus:ring-offset-0 ${m.color} ${m.textColor}`,children:u.jsx(o_,{})}),u.jsx(ig,{children:d.filter(x=>x.value!=="all").map(x=>u.jsx(og,{value:x.value,className:"text-xs",children:x.label},x.value))})]})}),u.jsx(ht,{className:"text-center px-3 py-4",children:u.jsxs(t3,{children:[u.jsx(n3,{asChild:!0,children:u.jsx(de,{variant:"ghost",size:"icon",children:u.jsx(kV,{className:"h-5 w-5"})})}),u.jsxs(uT,{align:"end",children:[u.jsxs(zl,{onClick:()=>s(h),children:[u.jsx(CZ,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"  "]}),u.jsxs(ag,{children:[u.jsx(lg,{asChild:!0,children:u.jsxs(zl,{onSelect:x=>x.preventDefault(),className:"text-red-600 focus:text-red-600 dark:focus:text-red-400",children:[u.jsx(vy,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"  "]})}),u.jsxs(Hd,{dir:"rtl",children:[u.jsxs(Kd,{children:[u.jsx(Yd,{children:" "}),u.jsxs(Xd,{children:["        #",h.id.slice(0,8),"...      ."]})]}),u.jsxs(Qd,{children:[u.jsx(Zd,{children:""}),u.jsx(Jd,{onClick:()=>o(h.id),className:"bg-red-500 hover:bg-red-600",children:""})]})]})]})]})]})})]},h.id)})})]})}),Cde=({searchTerm:t,setSearchTerm:e,statusFilter:n,setStatusFilter:r,statusOptions:s,selectedOrders:i,handleBulkStatusUpdate:o,setSelectedOrders:a,setCurrentPage:l})=>u.jsx("div",{className:"mb-6 p-4 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Ee,{type:"text",placeholder:"    ...",value:t,onChange:c=>{e(c.target.value),l(1)},className:"w-full dark:bg-slate-700 dark:text-slate-200 border-slate-300 dark:border-slate-600 focus:ring-sky-500 focus:border-sky-500 pl-10 rtl:pr-10 rtl:pl-3"}),u.jsx(Vh,{className:"absolute left-3 rtl:right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"statusFilter",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:" "}),u.jsxs(i_,{value:n,onValueChange:c=>{r(c),l(1)},children:[u.jsx(sg,{className:"w-full dark:bg-slate-700 dark:text-slate-200",children:u.jsx(o_,{placeholder:" ..."})}),u.jsx(ig,{children:s.map(c=>u.jsx(og,{value:c.value,children:c.label},c.value))})]})]}),i.length>0&&u.jsxs("div",{className:"md:col-span-3 grid grid-cols-1 sm:grid-cols-2 gap-2 items-center mt-2 md:mt-0",children:[u.jsxs(i_,{onValueChange:c=>o(c),children:[u.jsx(sg,{className:"w-full dark:bg-slate-700 dark:text-slate-200",children:u.jsx(o_,{placeholder:"  ..."})}),u.jsx(ig,{children:s.filter(c=>c.value!=="all").map(c=>u.jsx(og,{value:c.value,children:c.label},c.value))})]}),u.jsxs(de,{variant:"outline",onClick:()=>a([]),className:"w-full",children:["  (",i.length,")"]})]})]})}),Pde=({currentPage:t,totalPages:e,changePage:n,totalItems:r})=>u.jsxs("div",{className:"flex items-center justify-between mt-6 p-4 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[u.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[" ",t,"  ",e," ( ",r," )"]}),u.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[u.jsxs(de,{variant:"outline",size:"icon",onClick:()=>n(1),disabled:t===1,"aria-label":" ",children:[u.jsx(EA,{className:"h-4 w-4 rtl:hidden"}),u.jsx(bA,{className:"h-4 w-4 ltr:hidden"})]}),u.jsxs(de,{variant:"outline",size:"icon",onClick:()=>n(t-1),disabled:t===1,"aria-label":" ",children:[u.jsx(Rw,{className:"h-4 w-4 rtl:hidden"}),u.jsx(_A,{className:"h-4 w-4 ltr:hidden"})]}),u.jsxs(de,{variant:"outline",size:"icon",onClick:()=>n(t+1),disabled:t===e,"aria-label":" ",children:[u.jsx(_A,{className:"h-4 w-4 rtl:hidden"}),u.jsx(Rw,{className:"h-4 w-4 ltr:hidden"})]}),u.jsxs(de,{variant:"outline",size:"icon",onClick:()=>n(e),disabled:t===e,"aria-label":" ",children:[u.jsx(bA,{className:"h-4 w-4 rtl:hidden"}),u.jsx(EA,{className:"h-4 w-4 ltr:hidden"})]})]})]}),c_=[{value:"all",label:" "},{value:"pending",label:" ",color:"bg-yellow-500 dark:bg-yellow-400",textColor:"text-white"},{value:"processing",label:" ",color:"bg-blue-500 dark:bg-blue-400",textColor:"text-white"},{value:"shipped",label:" ",color:"bg-sky-500 dark:bg-sky-400",textColor:"text-white"},{value:"delivered",label:" ",color:"bg-green-500 dark:bg-green-400",textColor:"text-white"},{value:"cancelled",label:"",color:"bg-red-500 dark:bg-red-400",textColor:"text-white"}],UR=t=>c_.find(e=>e.value===t)||{label:t||" ",color:"bg-slate-500",textColor:"text-white"},BR=t=>{const e=Number(t);return isNaN(e)?new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(0):new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(e)},zR=t=>{if(!t||!t.seconds)return" ";try{return new Date(t.seconds*1e3).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"  "}},q0=10,Ade=()=>{const t=$n(),{toast:e}=tn(),[n,r]=p.useState([]),[s,i]=p.useState(!0),[o,a]=p.useState(null),[l,c]=p.useState(""),[d,h]=p.useState("all"),[m,g]=p.useState([]),[v,y]=p.useState(!1),[w,_]=p.useState(null),[x,b]=p.useState(null),[S,A]=p.useState(1);p.useEffect(()=>{i(!0);let H=Ds(Qn(Ue,"orders"),js("createdAt","desc"));d!=="all"&&(H=Ds(Qn(Ue,"orders"),zE("status","==",d),js("createdAt","desc")));const M=kh(H,F=>{const V=F.docs.map(q=>({id:q.id,...q.data()}));r(V),i(!1),a(null)},F=>{console.error("Error fetching orders: ",F),a("   .    ."),i(!1),e({title:"",description:"   .",variant:"destructive"})});return()=>M()},[d,e]);const D=p.useMemo(()=>n.filter(H=>{var M;return H.id.toLowerCase().includes(l.toLowerCase())||((M=H.shipping)==null?void 0:M.fullName)&&H.shipping.fullName.toLowerCase().includes(l.toLowerCase())||H.userEmail&&H.userEmail.toLowerCase().includes(l.toLowerCase())}),[n,l]),C=p.useMemo(()=>{const H=(S-1)*q0;return D.slice(H,H+q0)},[D,S]),I=Math.ceil(D.length/q0),P=async(H,M)=>{try{const F=mn(Ue,"orders",H);await Nh(F,{status:M,updatedAt:new Date}),e({title:" ",description:"   ."})}catch{e({title:"",description:"   .",variant:"destructive"})}},R=async H=>{if(m.length===0||H==="all"){e({title:"",description:"        ."});return}const M=KE(Ue);m.forEach(F=>{M.update(mn(Ue,"orders",F),{status:H,updatedAt:new Date})});try{await M.commit(),e({title:"  ",description:`   ${m.length} .`}),g([])}catch{e({title:"",description:"   .",variant:"destructive"})}},j=async H=>{try{await my(mn(Ue,"orders",H)),e({title:" ",description:"   ."})}catch{e({title:"",description:"  .",variant:"destructive"})}},O=(H,M)=>{g(F=>M?[...F,H]:F.filter(V=>V!==H))},k=H=>{g(H?C.map(M=>M.id):[])},W=H=>{_(H),y(!0)},z=H=>{const M=H.target.files[0];M&&b(URL.createObjectURL(M))},G=H=>{H>0&&H<=I&&(A(H),g([]))};return s?u.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-200px)]",children:u.jsx(kt,{className:"h-16 w-16 text-sky-500 animate-spin"})}):o?u.jsx("div",{className:"text-center py-10 text-red-500",children:o}):u.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[u.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100 flex items-center",children:[u.jsx(MZ,{className:"mr-3 rtl:ml-3 rtl:mr-0",size:32})," "]}),u.jsxs(de,{variant:"outline",onClick:()=>t("/admin"),children:[u.jsx(Fc,{className:"ml-2 h-4 w-4"}),"  "]})]}),u.jsx(Cde,{searchTerm:l,setSearchTerm:c,statusFilter:d,setStatusFilter:h,statusOptions:c_,selectedOrders:m,handleBulkStatusUpdate:R,setSelectedOrders:g,setCurrentPage:A}),C.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(FZ,{className:"mx-auto h-16 w-16 text-slate-400 dark:text-slate-500 mb-4"}),u.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-400",children:"    ."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Ide,{orders:C,selectedOrders:m,handleSelectOrder:O,handleSelectAll:k,openDetailsModal:W,handleStatusChange:P,handleDeleteOrder:j,formatDate:zR,formatPrice:BR,getStatusInfo:UR,statusOptions:c_}),I>1&&u.jsx(Pde,{currentPage:S,totalPages:I,changePage:G,totalItems:D.length})]}),u.jsx(sd,{open:v,onOpenChange:y,children:u.jsx(Cce,{order:w,logoPreview:x,handleLogoUpload:z,formatDate:zR,formatPrice:BR,getStatusInfo:UR})})]})},qR=({productData:t,setProductData:e,handleSubmit:n,isEdit:r,closeModal:s,isSubmitting:i})=>{const o=a=>{const{name:l,value:c}=a.target;e(d=>({...d,[l]:c}))};return u.jsxs("form",{onSubmit:a=>n(a,t,r),className:"grid gap-4 py-4 text-right",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx(_e,{htmlFor:"name",children:" "}),u.jsx(Ee,{id:"name",name:"name",value:t.name,onChange:o,required:!0})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx(_e,{htmlFor:"category",children:""}),u.jsx(Ee,{id:"category",name:"category",value:t.category,onChange:o})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx(_e,{htmlFor:"price",children:" (.)"}),u.jsx(Ee,{id:"price",name:"price",type:"number",value:t.price,onChange:o,required:!0,min:"0"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx(_e,{htmlFor:"originalPrice",children:"  ()"}),u.jsx(Ee,{id:"originalPrice",name:"originalPrice",type:"number",value:t.originalPrice,onChange:o,min:"0"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx(_e,{htmlFor:"stock",children:" "}),u.jsx(Ee,{id:"stock",name:"stock",type:"number",value:t.stock,onChange:o,required:!0,min:"0"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx(_e,{htmlFor:"rating",children:" (0-5)"}),u.jsxs("div",{className:"relative",children:[u.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx(Ee,{id:"rating",name:"rating",type:"number",value:t.rating,onChange:o,min:"0",max:"5",step:"0.1",className:"pl-10"})]})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx(_e,{htmlFor:"reviews",children:" "}),u.jsxs("div",{className:"relative",children:[u.jsx(NV,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx(Ee,{id:"reviews",name:"reviews",type:"number",value:t.reviews,onChange:o,min:"0",className:"pl-10"})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx(_e,{htmlFor:"image",children:" "}),u.jsxs("div",{className:"relative",children:[u.jsx(jZ,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx(Ee,{id:"image",name:"image",type:"url",placeholder:"https://example.com/image.jpg",value:t.image,onChange:o,required:!0,className:"pl-10"})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx(_e,{htmlFor:"description",children:""}),u.jsx(m1,{id:"description",name:"description",value:t.description,onChange:o})]}),u.jsxs(Bh,{children:[u.jsx(de,{type:"button",variant:"outline",onClick:s,children:""}),u.jsxs(de,{type:"submit",disabled:i,children:[i?u.jsx(kt,{className:"animate-spin mr-2"}):null,r?" ":" "]})]})]})},Rde=()=>{const t=$n(),[e,n]=p.useState([]),[r,s]=p.useState(!0),[i,o]=p.useState(null),{toast:a}=tn(),[l,c]=p.useState(!1),[d,h]=p.useState(!1),[m,g]=p.useState(!1),[v,y]=p.useState(null),w={name:"",category:"",price:"",description:"",image:"",stock:0,originalPrice:"",rating:0,reviews:0},[_,x]=p.useState(w),[b,S]=p.useState(!1),[A,D]=p.useState({amount:0,type:"add"}),[C,I]=p.useState("");p.useEffect(()=>{s(!0);const z=Ds(Qn(Ue,"products"),js("name")),G=kh(z,H=>{n(H.docs.map(M=>({id:M.id,...M.data()}))),s(!1)},H=>{o("    ."),s(!1)});return()=>G()},[]);const P=async(z,G,H=!1)=>{z.preventDefault(),S(!0);const M={...G,price:parseFloat(G.price)||0,originalPrice:G.originalPrice?parseFloat(G.originalPrice):null,stock:parseInt(G.stock,10)||0,image:G.image.trim(),rating:parseFloat(G.rating)||0,reviews:parseInt(G.reviews,10)||0,updatedAt:Qm()};if(H||(M.createdAt=Qm()),!M.name||M.price<=0||!M.image){a({title:" ",description:"      .",variant:"destructive"}),S(!1);return}try{H?(await Nh(mn(Ue,"products",G.id),M),a({title:"   "}),h(!1)):(await GE(Qn(Ue,"products"),M),a({title:"   "}),c(!1),x(w))}catch(F){a({title:`   ${H?"":""}`,description:F.message,variant:"destructive"})}finally{S(!1)}},R=async z=>{try{await my(mn(Ue,"products",z)),a({title:"    "})}catch{a({title:" ",description:"  .",variant:"destructive"})}},j=async z=>{if(z.preventDefault(),!v||!A.amount)return;S(!0);const G=mn(Ue,"products",v.id),H=A.type==="add"?A.amount:-A.amount;try{await WX(Ue,async M=>{const F=await M.get(G);if(!F.exists())throw"  !";const V=(F.data().stock||0)+H;if(V<0)throw"       .";M.update(G,{stock:V})}),a({title:"   "}),g(!1)}catch(M){a({title:"    ",description:M.toString(),variant:"destructive"})}finally{S(!1)}},O=z=>{y(z),h(!0)},k=z=>{y(z),D({amount:0,type:"add"}),g(!0)},W=e.filter(z=>z.name&&z.name.toLowerCase().includes(C.toLowerCase())||z.category&&z.category.toLowerCase().includes(C.toLowerCase()));return r?u.jsxs("div",{className:"flex items-center justify-center p-10",children:[u.jsx(kt,{className:"h-12 w-12 animate-spin text-primary"}),u.jsx("p",{className:"ml-4 text-lg text-muted-foreground",children:"  ..."})]}):i?u.jsxs("div",{className:"p-10 text-center",children:[u.jsx(n1,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),u.jsx("p",{className:"text-lg text-destructive",children:i})]}):u.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[u.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100 flex items-center",children:[u.jsx(Ud,{className:"mr-3 rtl:ml-3 rtl:mr-0",size:32})," "]}),u.jsxs(de,{variant:"outline",onClick:()=>t("/AdminDashboard"),children:[u.jsx(Fc,{className:"ml-2 h-4 w-4"}),"  "]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[u.jsx(Vh,{className:"absolute left-3 rtl:right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),u.jsx(Ee,{type:"text",placeholder:"   ...",value:C,onChange:z=>I(z.target.value),className:"w-full pl-10 rtl:pr-10 rtl:pl-3"})]}),u.jsxs(sd,{open:l,onOpenChange:c,children:[u.jsx(lse,{asChild:!0,children:u.jsxs(de,{onClick:()=>x(w),children:[u.jsx(OV,{className:"mr-2 h-5 w-5"}),"  "]})}),u.jsxs(id,{className:"sm:max-w-lg text-right",children:[u.jsx(Ll,{children:u.jsx($l,{children:"  "})}),u.jsx(qR,{productData:_,setProductData:x,handleSubmit:P,isEdit:!1,closeModal:()=>c(!1),isSubmitting:b})]})]})]}),u.jsx("div",{className:"bg-white dark:bg-slate-800 shadow-md rounded-lg overflow-x-auto",children:u.jsxs(Kh,{children:[u.jsx(Qh,{className:"bg-slate-50 dark:bg-slate-700/50",children:u.jsxs(Ls,{children:[u.jsx(dt,{className:"text-right px-3 py-3.5",children:""}),u.jsx(dt,{className:"text-right px-3 py-3.5",children:""}),u.jsx(dt,{className:"text-right px-3 py-3.5",children:""}),u.jsx(dt,{className:"text-right px-3 py-3.5",children:""}),u.jsx(dt,{className:"text-center px-3 py-3.5",children:""})]})}),u.jsx(Yh,{children:W.map(z=>{var G;return u.jsxs(Ls,{children:[u.jsxs(ht,{className:"font-medium flex items-center gap-3",children:[u.jsx("img",{src:z.image||"https://via.placeholder.com/40",alt:z.name,className:"w-10 h-10 object-cover rounded-md"}),u.jsx("span",{children:z.name})]}),u.jsx(ht,{children:z.category||"-"}),u.jsx(ht,{children:(G=z.price)==null?void 0:G.toLocaleString("ar-EG",{style:"currency",currency:"EGP"})}),u.jsx(ht,{children:u.jsx("span",{onClick:()=>k(z),className:"cursor-pointer hover:underline",children:z.stock})}),u.jsxs(ht,{className:"text-center",children:[u.jsx(de,{variant:"ghost",size:"icon",onClick:()=>O(z),children:u.jsx(UZ,{className:"h-4 w-4"})}),u.jsxs(ag,{children:[u.jsx(lg,{asChild:!0,children:u.jsx(de,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-600",children:u.jsx(vy,{className:"h-4 w-4"})})}),u.jsxs(Hd,{children:[u.jsxs(Kd,{children:[u.jsx(Yd,{children:" "}),u.jsxs(Xd,{children:['      "',z.name,'"      .']})]}),u.jsxs(Qd,{children:[u.jsx(Zd,{children:""}),u.jsx(Jd,{onClick:()=>R(z.id),className:"bg-destructive hover:bg-destructive/80",children:""})]})]})]})]})]},z.id)})})]})}),u.jsx(sd,{open:d,onOpenChange:h,children:u.jsxs(id,{className:"sm:max-w-lg text-right",children:[u.jsx(Ll,{children:u.jsx($l,{children:" "})}),v&&u.jsx(qR,{productData:v,setProductData:y,handleSubmit:P,isEdit:!0,closeModal:()=>h(!1),isSubmitting:b})]})}),u.jsx(sd,{open:m,onOpenChange:g,children:u.jsxs(id,{className:"sm:max-w-sm text-right",children:[u.jsx(Ll,{children:u.jsxs($l,{children:['   "',v==null?void 0:v.name,'"']})}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:[" : ",v==null?void 0:v.stock]}),u.jsxs("form",{onSubmit:j,className:"space-y-4",children:[u.jsxs("div",{className:"flex gap-4",children:[u.jsx(Ee,{type:"number",value:A.amount,onChange:z=>D(G=>({...G,amount:parseInt(z.target.value)||0})),min:"0",required:!0}),u.jsxs("select",{value:A.type,onChange:z=>D(G=>({...G,type:z.target.value})),className:"p-2 border rounded-md dark:bg-slate-700",children:[u.jsx("option",{value:"add",children:""}),u.jsx("option",{value:"subtract",children:""})]})]}),u.jsxs(Bh,{children:[u.jsx(de,{type:"button",variant:"outline",onClick:()=>g(!1),children:""}),u.jsx(de,{type:"submit",disabled:b,children:b?u.jsx(kt,{className:"animate-spin"}):""})]})]})]})})]})},Nde=()=>{const t=$n();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[u.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100 flex items-center",children:[u.jsx(r1,{className:"mr-3 rtl:ml-3 rtl:mr-0",size:32}),""]}),u.jsxs(de,{variant:"outline",onClick:()=>t("/admin"),children:[u.jsx(Fc,{className:"ml-2 h-4 w-4"}),"   "]})]}),u.jsxs("div",{className:"p-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[u.jsx("p",{children:"    ."}),u.jsx("p",{children:"        ."})]})]})},W0="hoIGjbMl4AbEEX4LCQeTx8YNfXB2",kde=()=>{const t=$n(),{currentUser:e}=Ks(),{toast:n}=tn(),r=jj(),[s,i]=p.useState([]),[o,a]=p.useState(!0),[l,c]=p.useState(""),[d,h]=p.useState(!1),[m,g]=p.useState(null),[v,y]=p.useState(!1),[w,_]=p.useState({displayName:"",email:"",phone:"",role:""}),x=p.useCallback(async()=>{a(!0);try{const R=Ds(Qn(Ue,"users"),js("createdAt","desc")),O=(await py(R)).docs.map(k=>({id:k.id,...k.data()}));i(O)}catch(R){console.error("Error fetching users: ",R),n({title:"   ",variant:"destructive"})}finally{a(!1)}},[n]);p.useEffect(()=>{x()},[x]);const b=R=>{g(R),_({displayName:R.displayName||"",email:R.email||"",phone:R.phone||"",role:R.role||"customer"}),h(!0)},S=R=>{const{name:j,value:O}=R.target;_(k=>({...k,[j]:O}))},A=async()=>{if(m){if(w.role!==m.role&&(e==null?void 0:e.uid)!==W0){n({title:"  ",description:"    .     .",variant:"destructive"});return}y(!0);try{const R=mn(Ue,"users",m.id);await Nh(R,w),n({title:"   "}),h(!1),await x()}catch(R){console.error("Error updating user: ",R),n({title:"   ",variant:"destructive"})}finally{y(!1)}}},D=async()=>{if(m){y(!0);try{await my(mn(Ue,"users",m.id)),n({title:"   "}),await x()}catch(R){console.error("Error deleting user: ",R),n({title:"   ",variant:"destructive"})}finally{y(!1),g(null)}}},C=async()=>{if(m!=null&&m.email){y(!0);try{await Bb(r,m.email),n({title:"   ",description:`        ${m.email}.`})}catch(R){console.error("Error sending password reset email: ",R),n({title:" ",description:"    .    .",variant:"destructive"})}finally{y(!1),g(null)}}},I=s.filter(R=>R.displayName&&R.displayName.toLowerCase().includes(l.toLowerCase())||R.email&&R.email.toLowerCase().includes(l.toLowerCase())||R.phone&&R.phone.includes(l)),P=R=>!R||!R.seconds?"-":new Date(R.seconds*1e3).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"});return u.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[u.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100 flex items-center",children:[u.jsx(vc,{className:"mr-3 rtl:ml-3 rtl:mr-0",size:32})," "]}),u.jsxs(de,{variant:"outline",onClick:()=>t("/AdminDashboard"),children:[u.jsx(Fc,{className:"ml-2 h-4 w-4"}),"  "]})]}),u.jsxs("div",{className:"relative w-full sm:max-w-md",children:[u.jsx(Vh,{className:"absolute left-3 rtl:right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),u.jsx(Ee,{type:"text",placeholder:"    ...",value:l,onChange:R=>c(R.target.value),className:"w-full pl-10 rtl:pr-10 rtl:pl-3"})]}),o?u.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-250px)]",children:u.jsx(kt,{className:"h-16 w-16 text-sky-500 animate-spin"})}):I.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(YZ,{className:"mx-auto h-16 w-16 text-slate-400 dark:text-slate-500 mb-4"}),u.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-400",children:"    ."})]}):u.jsx("div",{className:"bg-white dark:bg-slate-800 shadow-md rounded-lg overflow-x-auto",children:u.jsxs(Kh,{children:[u.jsx(Qh,{className:"bg-slate-50 dark:bg-slate-700/50",children:u.jsxs(Ls,{children:[u.jsx(dt,{className:"text-right px-3 py-3.5",children:""}),u.jsx(dt,{className:"text-right px-3 py-3.5",children:" "}),u.jsx(dt,{className:"text-right px-3 py-3.5",children:""}),u.jsx(dt,{className:"text-right px-3 py-3.5",children:""}),u.jsx(dt,{className:"text-right px-3 py-3.5",children:" "}),u.jsx(dt,{className:"text-center px-3 py-3.5",children:""})]})}),u.jsx(Yh,{children:I.map(R=>u.jsxs(Ls,{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[u.jsx(ht,{className:"font-medium px-3 py-4",children:R.displayName||"-"}),u.jsx(ht,{className:"px-3 py-4",children:R.email}),u.jsx(ht,{className:"px-3 py-4",children:R.phone||"-"}),u.jsx(ht,{className:"px-3 py-4",children:u.jsx(Uc,{variant:R.role==="admin"?"destructive":"secondary",children:R.role==="admin"?"":""})}),u.jsx(ht,{className:"px-3 py-4",children:P(R.createdAt)}),u.jsx(ht,{className:"text-center px-3 py-4",children:u.jsxs(t3,{children:[u.jsx(n3,{asChild:!0,children:u.jsx(de,{variant:"ghost",size:"icon",children:u.jsx(kV,{className:"h-5 w-5"})})}),u.jsxs(uT,{align:"end",children:[u.jsxs(zl,{onClick:()=>b(R),children:[u.jsx(BZ,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"})," "]}),u.jsxs(ag,{children:[u.jsx(lg,{asChild:!0,children:u.jsxs(zl,{onSelect:j=>{j.preventDefault(),g(R)},children:[u.jsx(pa,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"}),"    "]})}),u.jsxs(Hd,{dir:"rtl",children:[u.jsxs(Kd,{children:[u.jsx(Yd,{children:"   "}),u.jsxs(Xd,{children:['            "',m==null?void 0:m.email,'"']})]}),u.jsxs(Qd,{children:[u.jsx(Zd,{children:""}),u.jsx(Jd,{onClick:C,disabled:v,children:v?u.jsx(kt,{className:"animate-spin"}):""})]})]})]}),u.jsxs(ag,{children:[u.jsx(lg,{asChild:!0,children:u.jsxs(zl,{onSelect:j=>{j.preventDefault(),g(R)},className:"text-red-600 focus:text-red-600 dark:focus:text-red-400",children:[u.jsx(vy,{className:"mr-2 rtl:ml-2 rtl:mr-0 h-4 w-4"})," "]})}),u.jsxs(Hd,{dir:"rtl",children:[u.jsxs(Kd,{children:[u.jsx(Yd,{children:" "}),u.jsxs(Xd,{children:['       "',m==null?void 0:m.displayName,'"      .']})]}),u.jsxs(Qd,{children:[u.jsx(Zd,{children:""}),u.jsx(Jd,{onClick:D,disabled:v,className:"bg-destructive hover:bg-destructive/90",children:v?u.jsx(kt,{className:"animate-spin"}):"  "})]})]})]})]})]})})]},R.id))})]})}),u.jsx(sd,{open:d,onOpenChange:h,children:u.jsxs(id,{className:"sm:max-w-[425px] bg-white dark:bg-slate-800",children:[u.jsx(Ll,{children:u.jsx($l,{children:"  "})}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(_e,{htmlFor:"edit-displayName",className:"text-right col-span-1",children:""}),u.jsx(Ee,{id:"edit-displayName",name:"displayName",value:w.displayName,onChange:S,className:"col-span-3"})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(_e,{htmlFor:"edit-email",className:"text-right col-span-1",children:""}),u.jsx(Ee,{id:"edit-email",name:"email",value:w.email,onChange:S,className:"col-span-3",disabled:!0})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(_e,{htmlFor:"edit-phone",className:"text-right col-span-1",children:""}),u.jsx(Ee,{id:"edit-phone",name:"phone",value:w.phone,onChange:S,className:"col-span-3"})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(_e,{htmlFor:"edit-role",className:"text-right col-span-1",children:""}),u.jsxs("select",{id:"edit-role",name:"role",value:w.role,onChange:S,className:"col-span-3 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",disabled:(e==null?void 0:e.uid)!==W0,children:[u.jsx("option",{value:"customer",children:""}),u.jsx("option",{value:"admin",children:""})]})]}),(e==null?void 0:e.uid)!==W0&&u.jsx("p",{className:"col-span-4 text-xs text-slate-500 dark:text-slate-400 text-center",children:"       ."})]}),u.jsxs(Bh,{children:[u.jsx(de,{onClick:A,disabled:v,children:v?u.jsx(kt,{className:"animate-spin"}):" "}),u.jsx(de,{variant:"outline",onClick:()=>h(!1),children:""})]})]})})]})},zn=({children:t})=>u.jsxs(oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[" ",t," "]}),Dde=()=>u.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center min-h-[calc(100vh-250px)]",children:[u.jsx(oe.h1,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:100,delay:.1},className:"text-8xl font-bold text-primary mb-4",children:"404"}),u.jsx(oe.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-2xl font-semibold mb-6",children:"  "}),u.jsx(oe.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"text-muted-foreground mb-8 max-w-sm",children:"         ."}),u.jsx(oe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:u.jsx(de,{asChild:!0,children:u.jsx(Me,{to:"/",children:"   "})})})]});function jde(){return u.jsx(JZ,{children:u.jsx(ree,{children:u.jsxs(e9,{children:[u.jsxs(GB,{children:[u.jsxs(We,{path:"/",element:u.jsx(Cte,{}),children:[u.jsx(We,{index:!0,element:u.jsx(zn,{children:u.jsx(bne,{})})}),u.jsx(We,{path:"products",element:u.jsx(zn,{children:u.jsx(Kne,{})})}),u.jsx(We,{path:"product/:productId",element:u.jsx(zn,{children:u.jsx(Qne,{})})}),u.jsx(We,{path:"cart",element:u.jsx(zn,{children:u.jsx(Jne,{})})}),u.jsx(We,{path:"about",element:u.jsx(zn,{children:u.jsx(Yne,{})})}),u.jsx(We,{path:"contact",element:u.jsx(zn,{children:u.jsx(Xne,{})})}),u.jsx(We,{path:"login",element:u.jsx(zn,{children:u.jsx(ere,{})})}),u.jsx(We,{path:"signup",element:u.jsx(zn,{children:u.jsx(tre,{})})}),u.jsx(We,{path:"forgot-password",element:u.jsx(zn,{children:u.jsx(nre,{})})}),u.jsx(We,{path:"order-success/:orderId",element:u.jsx(zn,{children:u.jsx(Sae,{})})}),u.jsx(We,{path:"terms-conditions",element:u.jsx(zn,{children:u.jsx(Aae,{})})}),u.jsxs(We,{element:u.jsx(DA,{}),children:[u.jsx(We,{path:"checkout",element:u.jsx(zn,{children:u.jsx(bae,{})})}),u.jsxs(We,{path:"profile",element:u.jsx(xne,{}),children:[u.jsx(We,{index:!0,element:u.jsx(rre,{})}),u.jsx(We,{path:"orders",element:u.jsx(Dae,{})}),u.jsx(We,{path:"orders/:orderId",element:u.jsx(Pae,{})}),u.jsx(We,{path:"change-password",element:u.jsx(sre,{})})]})]}),u.jsx(We,{path:"*",element:u.jsx(zn,{children:u.jsx(Dde,{})})})]}),u.jsx(We,{element:u.jsx(DA,{adminOnly:!0}),children:u.jsxs(We,{path:"/AdminDashboard",element:u.jsx(vne,{}),children:[u.jsx(We,{index:!0,element:u.jsx(Mae,{})}),u.jsx(We,{path:"orders",element:u.jsx(Ade,{})}),u.jsx(We,{path:"products",element:u.jsx(Rde,{})}),u.jsx(We,{path:"users",element:u.jsx(kde,{})}),u.jsx(We,{path:"settings",element:u.jsx(Nde,{})})]})})]}),u.jsx(TL,{}),u.jsx(yne,{position:"bottom-center"})]})})})}G0.createRoot(document.getElementById("root")).render(u.jsx(re.StrictMode,{children:u.jsx(jde,{})}));export{Qn as $,ZM as A,ha as B,Hr as C,Pt as D,Uhe as E,Ia as F,jE as G,Fhe as H,Bde as I,fr as J,wX as K,bX as L,GE as M,ghe as N,yhe as O,GX as P,Zt as Q,lhe as R,Qde as S,Xe as T,Dhe as U,iy as V,zX as W,khe as X,mhe as Y,Zde as Z,zj as _,Ld as a,Hde as a0,_X as a1,kX as a2,$he as a3,my as a4,Nhe as a5,nhe as a6,Lhe as a7,mn as a8,ohe as a9,ihe as aA,kh as aB,Ehe as aC,ahe as aD,js as aE,Phe as aF,Ahe as aG,UX as aH,Ds as aI,$M as aJ,Kde as aK,WX as aL,Qm as aM,eV as aN,Ohe as aO,Lde as aP,vhe as aQ,dhe as aR,uhe as aS,phe as aT,rhe as aU,Nh as aV,jhe as aW,ehe as aX,zE as aY,KE as aZ,Xde as aa,Jde as ab,the as ac,Vhe as ad,fhe as ae,hhe as af,yt as ag,Dh as ah,jX as ai,The as aj,WE as ak,xhe as al,whe as am,py as an,_he as ao,bhe as ap,EX as aq,Mhe as ar,tV as as,Yde as at,RX as au,che as av,she as aw,She as ax,Che as ay,Ihe as az,TX as b,pc as c,Ca as d,Ke as e,Y as f,Lc as g,Ah as h,Lp as i,hy as j,Rh as k,uy as l,qE as m,mc as n,dy as o,Fo as p,qX as q,Et as r,sa as s,te as t,Fde as u,fK as v,at as w,Bhe as x,Pe as y,$de as z};
